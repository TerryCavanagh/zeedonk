this.createjs=this.createjs||{};(function(){var b=createjs.SoundJS=createjs.SoundJS||{};b.version="0.6.0";b.buildDate="Thu, 11 Dec 2014 23:32:09 GMT"})();this.createjs=this.createjs||{};createjs.extend=function(b,f){function m(){this.constructor=b}return m.prototype=f.prototype,b.prototype=new m};this.createjs=this.createjs||{};
createjs.promote=function(b,f){var m=b.prototype,l=Object.getPrototypeOf&&Object.getPrototypeOf(m)||m.__proto__;if(l){m[(f+="_")+"constructor"]=l.constructor;for(var A in l)m.hasOwnProperty(A)&&"function"==typeof l[A]&&(m[f+A]=l[A])}return b};this.createjs=this.createjs||{};createjs.indexOf=function(b,f){for(var m=0,l=b.length;l>m;m++)if(f===b[m])return m;return-1};this.createjs=this.createjs||{};
(function(){createjs.proxy=function(b,f){var m=Array.prototype.slice.call(arguments,2);return function(){return b.apply(f,Array.prototype.slice.call(arguments,0).concat(m))}}})();this.createjs=this.createjs||{};(function(){var b=Object.defineProperty?!0:!1,f={};try{Object.defineProperty(f,"bar",{get:function(){return this._bar},set:function(b){this._bar=b}})}catch(m){b=!1}createjs.definePropertySupported=b})();this.createjs=this.createjs||{};
(function(){function b(){throw"BrowserDetect cannot be instantiated";}var f=b.agent=window.navigator.userAgent;b.isWindowPhone=-1<f.indexOf("IEMobile")||-1<f.indexOf("Windows Phone");b.isFirefox=-1<f.indexOf("Firefox");b.isOpera=null!=window.opera;b.isChrome=-1<f.indexOf("Chrome");b.isIOS=(-1<f.indexOf("iPod")||-1<f.indexOf("iPhone")||-1<f.indexOf("iPad"))&&!b.isWindowPhone;b.isAndroid=-1<f.indexOf("Android")&&!b.isWindowPhone;b.isBlackberry=-1<f.indexOf("Blackberry");createjs.BrowserDetect=b})();
this.createjs=this.createjs||{};
(function(){function b(){this._captureListeners=this._listeners=null}var f=b.prototype;b.initialize=function(b){b.addEventListener=f.addEventListener;b.on=f.on;b.removeEventListener=b.off=f.removeEventListener;b.removeAllEventListeners=f.removeAllEventListeners;b.hasEventListener=f.hasEventListener;b.dispatchEvent=f.dispatchEvent;b._dispatchEvent=f._dispatchEvent;b.willTrigger=f.willTrigger};f.addEventListener=function(b,l,f){var u;u=f?this._captureListeners=this._captureListeners||{}:this._listeners=
this._listeners||{};var k=u[b];return k&&this.removeEventListener(b,l,f),k=u[b],k?k.push(l):u[b]=[l],l};f.on=function(b,l,f,u,k,r){return l.handleEvent&&(f=f||l,l=l.handleEvent),f=f||this,this.addEventListener(b,function(b){l.call(f,b,k);u&&b.remove()},r)};f.removeEventListener=function(b,l,f){if(f=f?this._captureListeners:this._listeners){var u=f[b];if(u)for(var k=0,r=u.length;r>k;k++)if(u[k]==l){1==r?delete f[b]:u.splice(k,1);break}}};f.off=f.removeEventListener;f.removeAllEventListeners=function(b){b?
(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null};f.dispatchEvent=function(b){if("string"==typeof b){var l=this._listeners;if(!l||!l[b])return!1;b=new createjs.Event(b)}else b.target&&b.clone&&(b=b.clone());try{b.target=this}catch(f){}if(b.bubbles&&this.parent){for(var u=this,l=[u];u.parent;)l.push(u=u.parent);for(var k=l.length,u=k-1;0<=u&&!b.propagationStopped;u--)l[u]._dispatchEvent(b,1+(0==u));for(u=
1;k>u&&!b.propagationStopped;u++)l[u]._dispatchEvent(b,3)}else this._dispatchEvent(b,2);return b.defaultPrevented};f.hasEventListener=function(b){var l=this._listeners,f=this._captureListeners;return!!(l&&l[b]||f&&f[b])};f.willTrigger=function(b){for(var l=this;l;){if(l.hasEventListener(b))return!0;l=l.parent}return!1};f.toString=function(){return"[EventDispatcher]"};f._dispatchEvent=function(b,l){var f,u=1==l?this._captureListeners:this._listeners;if(b&&u&&(u=u[b.type])&&(f=u.length)){try{b.currentTarget=
this}catch(k){}try{b.eventPhase=l}catch(r){}b.removed=!1;for(var u=u.slice(),F=0;f>F&&!b.immediatePropagationStopped;F++){var P=u[F];P.handleEvent?P.handleEvent(b):P(b);b.removed&&(this.off(b.type,P,1==l),b.removed=!1)}}};createjs.EventDispatcher=b})();this.createjs=this.createjs||{};
(function(){function b(b,l,f){this.type=b;this.currentTarget=this.target=null;this.eventPhase=0;this.bubbles=!!l;this.cancelable=!!f;this.timeStamp=(new Date).getTime();this.removed=this.immediatePropagationStopped=this.propagationStopped=this.defaultPrevented=!1}var f=b.prototype;f.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0};f.stopPropagation=function(){this.propagationStopped=!0};f.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=
!0};f.remove=function(){this.removed=!0};f.clone=function(){return new b(this.type,this.bubbles,this.cancelable)};f.set=function(b){for(var l in b)this[l]=b[l];return this};f.toString=function(){return"[Event (type="+this.type+")]"};createjs.Event=b})();this.createjs=this.createjs||{};
(function(){function b(b,m,l){this.Event_constructor("error");this.title=b;this.message=m;this.data=l}createjs.extend(b,createjs.Event).clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)};createjs.ErrorEvent=createjs.promote(b,"Event")})();this.createjs=this.createjs||{};
(function(){function b(b,m){this.Event_constructor("progress");this.loaded=b;this.total=null==m?1:m;this.progress=0==m?0:this.loaded/this.total}createjs.extend(b,createjs.Event).clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)};createjs.ProgressEvent=createjs.promote(b,"Event")})(window);this.createjs=this.createjs||{};
(function(){function b(){this.id=this.type=this.src=null;this.maintainOrder=!1;this.data=this.callback=null;this.method=createjs.LoadItem.GET;this.headers=this.values=null;this.withCredentials=!1;this.mimeType=null;this.crossOrigin="Anonymous";this.loadTimeout=8E3}var f=b.prototype={};b.create=function(m){if("string"==typeof m){var l=new b;return l.src=m,l}if(m instanceof b||m instanceof Object)return m;throw Error("Type not recognized.");};f.set=function(b){for(var l in b)this[l]=b[l];return this};
createjs.LoadItem=b})();
(function(){var b={ABSOLUTE_PATT:/^(?:\w+:)?\/{2}/i,RELATIVE_PATT:/^[./]*?\//i,EXTENSION_PATT:/\/?[^/]+\.(\w{1,5})$/i,parseURI:function(f){var m={absolute:!1,relative:!1};if(null==f)return m;var l=f.indexOf("?");-1<l&&(f=f.substr(0,l));var A;return b.ABSOLUTE_PATT.test(f)?m.absolute=!0:b.RELATIVE_PATT.test(f)&&(m.relative=!0),(A=f.match(b.EXTENSION_PATT))&&(m.extension=A[1].toLowerCase()),m},formatQueryString:function(b,m){if(null==b)throw Error("You must specify data.");var l=[],A;for(A in b)l.push(A+
"="+escape(b[A]));return m&&(l=l.concat(m)),l.join("&")},buildPath:function(b,m){if(null==m)return b;var l=[],A=b.indexOf("?");if(-1!=A)var u=b.slice(A+1),l=l.concat(u.split("&"));return-1!=A?b.slice(0,A)+"?"+this._formatQueryString(m,l):b+"?"+this._formatQueryString(m,l)},isCrossDomain:function(b){var m=document.createElement("a");m.href=b.src;b=document.createElement("a");b.href=location.href;return""!=m.hostname&&(m.port!=b.port||m.protocol!=b.protocol||m.hostname!=b.hostname)},isLocal:function(b){var m=
document.createElement("a");return m.href=b.src,""==m.hostname&&"file:"==m.protocol},isBinary:function(b){switch(b){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},isImageTag:function(b){return b instanceof HTMLImageElement},isAudioTag:function(b){return window.HTMLAudioElement?b instanceof HTMLAudioElement:!1},isVideoTag:function(b){return window.HTMLVideoElement?b instanceof HTMLVideoElement:void 0},isText:function(b){switch(b){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;
default:return!1}},getTypeByExtension:function(b){if(null==b)return createjs.AbstractLoader.TEXT;switch(b.toLowerCase()){case "jpeg":case "jpg":case "gif":case "png":case "webp":case "bmp":return createjs.AbstractLoader.IMAGE;case "ogg":case "mp3":case "webm":return createjs.AbstractLoader.SOUND;case "mp4":case "webm":case "ts":return createjs.AbstractLoader.VIDEO;case "json":return createjs.AbstractLoader.JSON;case "xml":return createjs.AbstractLoader.XML;case "css":return createjs.AbstractLoader.CSS;
case "js":return createjs.AbstractLoader.JAVASCRIPT;case "svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}}};createjs.RequestUtils=b})();this.createjs=this.createjs||{};
(function(){function b(b,l,f){this.EventDispatcher_constructor();this.canceled=this.loaded=!1;this.progress=0;this.type=f;this.resultFormatter=null;this._item=b?createjs.LoadItem.create(b):null;this._preferXHR=l;this._tag=this._tagSrcAttribute=this._loadedItems=this._rawResult=this._result=null}var f=createjs.extend(b,createjs.EventDispatcher);b.POST="POST";b.GET="GET";b.BINARY="binary";b.CSS="css";b.IMAGE="image";b.JAVASCRIPT="javascript";b.JSON="json";b.JSONP="jsonp";b.MANIFEST="manifest";b.SOUND=
"sound";b.VIDEO="video";b.SPRITESHEET="spritesheet";b.SVG="svg";b.TEXT="text";b.XML="xml";f.getItem=function(){return this._item};f.getResult=function(b){return b?this._rawResult:this._result};f.getTag=function(){return this._tag};f.setTag=function(b){this._tag=b};f.load=function(){this._createRequest();this._request.on("complete",this,this);this._request.on("progress",this,this);this._request.on("loadStart",this,this);this._request.on("abort",this,this);this._request.on("timeout",this,this);this._request.on("error",
this,this);var b=new createjs.Event("initialize");b.loader=this._request;this.dispatchEvent(b);this._request.load()};f.cancel=function(){this.canceled=!0;this.destroy()};f.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy());this._loadItems=this._result=this._rawResult=this._item=this._request=null;this.removeAllEventListeners()};f.getLoadedItems=function(){return this._loadedItems};f._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):
new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)};f._createTag=function(){return null};f._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")};f._sendProgress=function(b){if(!this._isCanceled()){var l=null;"number"==typeof b?(this.progress=b,l=new createjs.ProgressEvent(this.progress)):(l=b,this.progress=b.loaded/b.total,l.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0));this.hasEventListener("progress")&&
this.dispatchEvent(l)}};f._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var b=new createjs.Event("complete");b.rawResult=this._rawResult;null!=this._result&&(b.result=this._result);this.dispatchEvent(b)}};f._sendError=function(b){!this._isCanceled()&&this.hasEventListener("error")&&(null==b&&(b=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(b))};f._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1};f.resultFormatter=null;f.handleEvent=function(b){switch(b.type){case "complete":this._rawResult=
b.target._response;b=this.resultFormatter&&this.resultFormatter(this);var l=this;b instanceof Function?b(function(b){l._result=b;l._sendComplete()}):(this._result=b||this._rawResult,this._sendComplete());break;case "progress":this._sendProgress(b);break;case "error":this._sendError(b);break;case "loadstart":this._sendLoadStart();break;case "abort":case "timeout":this._isCanceled()||this.dispatchEvent(b.type)}};f.buildPath=function(b,l){return createjs.RequestUtils.buildPath(b,l)};f.toString=function(){return"[PreloadJS AbstractLoader]"};
createjs.AbstractLoader=createjs.promote(b,"EventDispatcher")})();this.createjs=this.createjs||{};
(function(){function b(b,l,f){this.AbstractLoader_constructor(b,l,f);this.resultFormatter=this._formatResult;this._tagSrcAttribute="src"}var f=createjs.extend(b,createjs.AbstractLoader);f.load=function(){this._tag||(this._tag=this._createTag(this._item.src));this._tag.preload="auto";this._tag.load();this.AbstractLoader_load()};f._createTag=function(){};f._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),
this._tagSrcAttribute)};f._formatResult=function(b){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(b.getTag().src=b.getResult(!0)),b.getTag()};createjs.AbstractMediaLoader=createjs.promote(b,"AbstractLoader")})();this.createjs=this.createjs||{};
(function(){var b=function(b){this._item=b},f=createjs.extend(b,createjs.EventDispatcher);f.load=function(){};f.destroy=function(){};f.cancel=function(){};createjs.AbstractRequest=createjs.promote(b,"EventDispatcher")})();this.createjs=this.createjs||{};
(function(){function b(b,l,f){this.AbstractRequest_constructor(b);this._tag=l;this._tagSrcAttribute=f;this._loadedHandler=createjs.proxy(this._handleTagComplete,this);this._addedToDOM=!1;this._startTagVisibility=null}var f=createjs.extend(b,createjs.AbstractRequest);f.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0);this._tag.onload=createjs.proxy(this._handleTagComplete,this);this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,
this);var b=new createjs.Event("initialize");b.loader=this._tag;this.dispatchEvent(b);this._hideTag();this._tag[this._tagSrcAttribute]=this._item.src};f.destroy=function(){this._clean();this._tag=null;this.AbstractRequest_destroy()};f._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var b=this._tag;"loaded"!=b.readyState&&"complete"!=b.readyState||this._handleTagComplete()};f._handleTagComplete=function(){this._rawResult=this._tag;this._result=this.resultFormatter&&this.resultFormatter(this)||
this._rawResult;this._clean();this._showTag();this.dispatchEvent("complete")};f._clean=function(){this._tag.onload=null;this._tag.onreadystatechange=null;this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)};f._hideTag=function(){this._startTagVisibility=this._tag.style.visibility;this._tag.style.visibility="hidden"};f._showTag=function(){this._tag.style.visibility=this._startTagVisibility};f._handleStalled=function(){};createjs.TagRequest=createjs.promote(b,"AbstractRequest")})();
this.createjs=this.createjs||{};
(function(){function b(b,l,f){this.AbstractRequest_constructor(b);this._tag=l;this._tagSrcAttribute=f;this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var f=createjs.extend(b,createjs.TagRequest);f.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this);this._tag.onprogress=createjs.proxy(this._handleProgress,this);this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1);this.TagRequest_load()};f._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);
var b=this._tag;"loaded"!=b.readyState&&"complete"!=b.readyState||this._handleTagComplete()};f._handleStalled=function(){};f._handleProgress=function(b){!b||0<b.loaded&&0==b.total||(b=new createjs.ProgressEvent(b.loaded,b.total),this.dispatchEvent(b))};f._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler);this._tag.onstalled=null;this._tag.onprogress=null;this.TagRequest__clean()};createjs.MediaTagRequest=createjs.promote(b,"TagRequest")})();
this.createjs=this.createjs||{};
(function(){function b(b){this.AbstractRequest_constructor(b);this._loadTimeout=this._request=null;this._xhrLevel=1;this._rawResponse=this._response=null;this._canceled=!1;this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this);this._handleProgressProxy=createjs.proxy(this._handleProgress,this);this._handleAbortProxy=createjs.proxy(this._handleAbort,this);this._handleErrorProxy=createjs.proxy(this._handleError,this);this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this);this._handleLoadProxy=
createjs.proxy(this._handleLoad,this);this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this);!this._createXHR(b)}var f=createjs.extend(b,createjs.AbstractRequest);b.ACTIVEX_VERSIONS="Msxml2.XMLHTTP.6.0 Msxml2.XMLHTTP.5.0 Msxml2.XMLHTTP.4.0 MSXML2.XMLHTTP.3.0 MSXML2.XMLHTTP Microsoft.XMLHTTP".split(" ");f.getResult=function(b){return b&&this._rawResponse?this._rawResponse:this._response};f.cancel=function(){this.canceled=!0;this._clean();this._request.abort()};f.load=function(){if(null==
this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1);this._request.addEventListener("progress",this._handleProgressProxy,!1);this._request.addEventListener("abort",this._handleAbortProxy,!1);this._request.addEventListener("error",this._handleErrorProxy,!1);this._request.addEventListener("timeout",this._handleTimeoutProxy,!1);this._request.addEventListener("load",this._handleLoadProxy,!1);this._request.addEventListener("readystatechange",
this._handleReadyStateChangeProxy,!1);1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(b){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,b))}};f.setResponseType=function(b){this._request.responseType=
b};f.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null};f.getResponseHeader=function(b){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(b):null};f._handleProgress=function(b){!b||0<b.loaded&&0==b.total||(b=new createjs.ProgressEvent(b.loaded,b.total),this.dispatchEvent(b))};f._handleLoadStart=function(){clearTimeout(this._loadTimeout);this.dispatchEvent("loadstart")};
f._handleAbort=function(b){this._clean();this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,b))};f._handleError=function(b){this._clean();this.dispatchEvent(new createjs.ErrorEvent(b.message))};f._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()};f._handleLoad=function(){if(!this.loaded){this.loaded=!0;var b=this._checkError();if(b)return void this._handleError(b);this._response=this._getResponse();this._clean();this.dispatchEvent(new createjs.Event("complete"))}};
f._handleTimeout=function(b){this._clean();this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,b))};f._checkError=function(){var b=parseInt(this._request.status);switch(b){case 404:case 0:return Error(b)}return null};f._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(b){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(l){}return null};
f._createXHR=function(b){var l=createjs.RequestUtils.isCrossDomain(b),f={},u=null;if(window.XMLHttpRequest)u=new XMLHttpRequest,l&&void 0===u.withCredentials&&window.XDomainRequest&&(u=new XDomainRequest);else{for(var k=0,r=s.ACTIVEX_VERSIONS.length;r>k;k++){s.ACTIVEX_VERSIONS[k];try{u=new ActiveXObject(axVersions);break}catch(F){}}if(null==u)return!1}b.mimeType&&u.overrideMimeType&&u.overrideMimeType(b.mimeType);this._xhrLevel="string"==typeof u.responseType?2:1;k=null;if(k=b.method==createjs.AbstractLoader.GET?
createjs.RequestUtils.buildPath(b.src,b.values):b.src,u.open(b.method||createjs.AbstractLoader.GET,k,!0),l&&u instanceof XMLHttpRequest&&1==this._xhrLevel&&(f.Origin=location.origin),b.values&&b.method==createjs.AbstractLoader.POST&&(f["Content-Type"]="application/x-www-form-urlencoded"),l||f["X-Requested-With"]||(f["X-Requested-With"]="XMLHttpRequest"),b.headers)for(var P in b.headers)f[P]=b.headers[P];for(P in f)u.setRequestHeader(P,f[P]);return u instanceof XMLHttpRequest&&void 0!==b.withCredentials&&
(u.withCredentials=b.withCredentials),this._request=u,!0};f._clean=function(){clearTimeout(this._loadTimeout);this._request.removeEventListener("loadstart",this._handleLoadStartProxy);this._request.removeEventListener("progress",this._handleProgressProxy);this._request.removeEventListener("abort",this._handleAbortProxy);this._request.removeEventListener("error",this._handleErrorProxy);this._request.removeEventListener("timeout",this._handleTimeoutProxy);this._request.removeEventListener("load",this._handleLoadProxy);
this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)};f.toString=function(){return"[PreloadJS XHRRequest]"};createjs.XHRRequest=createjs.promote(b,"AbstractRequest")})();this.createjs=this.createjs||{};
(function(){function b(b,l){this.AbstractMediaLoader_constructor(b,l,createjs.AbstractLoader.SOUND);createjs.RequestUtils.isAudioTag(b)?this._tag=b:createjs.RequestUtils.isAudioTag(b.src)?this._tag=b:createjs.RequestUtils.isAudioTag(b.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(b)?b:b.src);null!=this._tag&&(this._preferXHR=!1)}var f=createjs.extend(b,createjs.AbstractMediaLoader);b.canLoadItem=function(b){return b.type==createjs.AbstractLoader.SOUND};f._createTag=function(b){var l=document.createElement("audio");
return l.autoplay=!1,l.preload="none",l.src=b,l};createjs.SoundLoader=createjs.promote(b,"AbstractMediaLoader")})();this.createjs=this.createjs||{};
(function(){function b(){throw"Sound cannot be instantiated";}function f(b,f){this.init(b,f)}b.INTERRUPT_ANY="any";b.INTERRUPT_EARLY="early";b.INTERRUPT_LATE="late";b.INTERRUPT_NONE="none";b.PLAY_INITED="playInited";b.PLAY_SUCCEEDED="playSucceeded";b.PLAY_INTERRUPTED="playInterrupted";b.PLAY_FINISHED="playFinished";b.PLAY_FAILED="playFailed";b.SUPPORTED_EXTENSIONS="mp3 ogg mpeg wav m4a mp4 aiff wma mid".split(" ");b.EXTENSION_MAP={m4a:"mp4"};b.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/;
b.defaultInterruptBehavior=b.INTERRUPT_NONE;b.alternateExtensions=[];b.activePlugin=null;b._pluginsRegistered=!1;b._lastID=0;b._masterVolume=1;b._masterMute=!1;b._instances=[];b._idHash={};b._preloadHash={};b.addEventListener=null;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;b._listeners=null;createjs.EventDispatcher.initialize(b);b.getPreloadHandlers=function(){return{callback:createjs.proxy(b.initLoad,b),types:["sound"],extensions:b.SUPPORTED_EXTENSIONS}};
b._handleLoadComplete=function(l){var f=l.target.getItem().src;if(b._preloadHash[f])for(var m=0,k=b._preloadHash[f].length;k>m;m++){var r=b._preloadHash[f][m];if(b._preloadHash[f][m]=!0,b.hasEventListener("fileload"))l=new createjs.Event("fileload"),l.src=r.src,l.id=r.id,l.data=r.data,l.sprite=r.sprite,b.dispatchEvent(l)}};b._handleLoadError=function(l){var f=l.target.getItem().src;if(b._preloadHash[f])for(var m=0,k=b._preloadHash[f].length;k>m;m++){var r=b._preloadHash[f][m];if(b._preloadHash[f][m]=
!1,b.hasEventListener("fileerror"))l=new createjs.Event("fileerror"),l.src=r.src,l.id=r.id,l.data=r.data,l.sprite=r.sprite,b.dispatchEvent(l)}};b._registerPlugin=function(l){return l.isSupported()?(b.activePlugin=new l,!0):!1};b.registerPlugins=function(l){b._pluginsRegistered=!0;for(var f=0,m=l.length;m>f;f++)if(b._registerPlugin(l[f]))return!0;return!1};b.initializeDefaultPlugins=function(){return null!=b.activePlugin?!0:b._pluginsRegistered?!1:b.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?
!0:!1};b.isReady=function(){return null!=b.activePlugin};b.getCapabilities=function(){return null==b.activePlugin?null:b.activePlugin._capabilities};b.getCapability=function(l){return null==b.activePlugin?null:b.activePlugin._capabilities[l]};b.initLoad=function(l){return b._registerSound(l)};b._registerSound=function(l){if(!b.initializeDefaultPlugins())return!1;var m=b._parsePath(l.src);if(null==m)return!1;l.src=m.src;l.type="sound";var m=l.data,u=b.activePlugin.defaultNumChannels||null;if(null!=
m&&(isNaN(m.channels)?isNaN(m)||(u=parseInt(m)):u=parseInt(m.channels),m.audioSprite))for(var k,r=m.audioSprite.length;r--;)k=m.audioSprite[r],b._idHash[k.id]={src:l.src,startTime:parseInt(k.startTime),duration:parseInt(k.duration)};null!=l.id&&(b._idHash[l.id]={src:l.src});k=b.activePlugin.register(l,u);return f.create(l.src,u),null!=m&&isNaN(m)?l.data.channels=u||f.maxPerChannel():l.data=u||f.maxPerChannel(),k.type&&(l.type=k.type),k};b.registerSound=function(l,f,m,k){m={src:l,id:f,data:m};l instanceof
Object&&(k=f,m=l);m=createjs.LoadItem.create(m);null!=k&&(m.src=k+l);l=b._registerSound(m);if(!l)return!1;if(b._preloadHash[m.src]||(b._preloadHash[m.src]=[]),b._preloadHash[m.src].push(m),1==b._preloadHash[m.src].length)l.on("complete",createjs.proxy(this._handleLoadComplete,this)),l.on("error",createjs.proxy(this._handleLoadError,this)),b.activePlugin.preload(l);else if(1==b._preloadHash[m.src][0])return!0;return m};b.registerSounds=function(b,f){var m=[];b.path&&(f?f+=b.path:f=b.path);for(var k=
0,r=b.length;r>k;k++)m[k]=createjs.Sound.registerSound(b[k].src,b[k].id,b[k].data,f);return m};b.registerManifest=function(b,f){try{console.log("createjs.Sound.registerManifest is deprecated, please use createjs.Sound.registerSounds.")}catch(m){}return this.registerSounds(b,f)};b.removeSound=function(l,m){if(null==b.activePlugin)return!1;l instanceof Object&&(l=l.src);l=b._getSrcById(l).src;null!=m&&(l=m+l);var u=b._parsePath(l);if(null==u)return!1;l=u.src;for(var k in b._idHash)b._idHash[k].src==
l&&delete b._idHash[k];return f.removeSrc(l),delete b._preloadHash[l],b.activePlugin.removeSound(l),!0};b.removeSounds=function(b,f){var m=[];b.path&&(f?f+=b.path:f=b.path);for(var k=0,r=b.length;r>k;k++)m[k]=createjs.Sound.removeSound(b[k].src,f);return m};b.removeManifest=function(f,m){try{console.log("createjs.Sound.removeManifest is deprecated, please use createjs.Sound.removeSounds.")}catch(u){}return b.removeSounds(f,m)};b.removeAllSounds=function(){b._idHash={};b._preloadHash={};f.removeAll();
b.activePlugin&&b.activePlugin.removeAllSounds()};b.loadComplete=function(f){if(!b.isReady())return!1;var m=b._parsePath(f);return f=m?b._getSrcById(m.src).src:b._getSrcById(f).src,1==b._preloadHash[f][0]};b._parsePath=function(f){"string"!=typeof f&&(f=f.toString());var m=f.match(b.FILE_PATTERN);if(null==m)return!1;for(var u=m[4],k=m[5],r=b.getCapabilities(),F=0;!r[k];)if(k=b.alternateExtensions[F++],F>b.alternateExtensions.length)return null;f=f.replace("."+m[5],"."+k);return{name:u,src:f,extension:k}};
b.play=function(f,m,u,k,r,F,P,C,Z){m instanceof Object&&(u=m.delay,k=m.offset,r=m.loop,F=m.volume,P=m.pan,C=m.startTime,Z=m.duration,m=m.interrupt);f=b.createInstance(f,C,Z);return b._playInstance(f,m,u,k,r,F,P)||f._playFailed(),f};b.createInstance=function(l,m,u){if(!b.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(l,m,u);l=b._getSrcById(l);var k=b._parsePath(l.src),r=null;return null!=k&&null!=k.src?(f.create(k.src),null==m&&(m=l.startTime),r=b.activePlugin.create(k.src,m,u||
l.duration)):r=new createjs.DefaultSoundInstance(l,m,u),r.uniqueId=b._lastID++,r};b.setVolume=function(f){if(null==Number(f))return!1;if(f=Math.max(0,Math.min(1,f)),b._masterVolume=f,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(f))for(var m=this._instances,u=0,k=m.length;k>u;u++)m[u].setMasterVolume(f)};b.getVolume=function(){return b._masterVolume};b.setMute=function(b){if(null==b)return!1;if(this._masterMute=b,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(b))for(var f=
this._instances,m=0,k=f.length;k>m;m++)f[m].setMasterMute(b);return!0};b.getMute=function(){return this._masterMute};b.stop=function(){for(var b=this._instances,f=b.length;f--;)b[f].stop()};b._playInstance=function(f,m,u,k,r,F,P){if(m instanceof Object&&(u=m.delay,k=m.offset,r=m.loop,F=m.volume,P=m.pan,m=m.interrupt),m=m||b.defaultInterruptBehavior,null==u&&(u=0),null==k&&(k=f.getPosition()),null==r&&(r=f.loop),null==F&&(F=f.volume),null==P&&(P=f.pan),0==u){if(!b._beginPlaying(f,m,k,r,F,P))return!1}else u=
setTimeout(function(){b._beginPlaying(f,m,k,r,F,P)},u),f.delayTimeoutId=u;return this._instances.push(f),!0};b._beginPlaying=function(b,m,u,k,r,F){return f.add(b,m)?b._beginPlaying(u,k,r,F)?!0:(b=createjs.indexOf(this._instances,b),-1<b&&this._instances.splice(b,1),!1):!1};b._getSrcById=function(f){return b._idHash[f]||{src:f}};b._playFinished=function(b){f.remove(b);b=createjs.indexOf(this._instances,b);-1<b&&this._instances.splice(b,1)};createjs.Sound=b;f.channels={};f.create=function(b,m){return null==
f.get(b)?(f.channels[b]=new f(b,m),!0):!1};f.removeSrc=function(b){var m=f.get(b);return null==m?!1:(m._removeAll(),delete f.channels[b],!0)};f.removeAll=function(){for(var b in f.channels)f.channels[b]._removeAll();f.channels={}};f.add=function(b,m){var u=f.get(b.src);return null==u?!1:u._add(b,m)};f.remove=function(b){var m=f.get(b.src);return null==m?!1:(m._remove(b),!0)};f.maxPerChannel=function(){return m.maxDefault};f.get=function(b){return f.channels[b]};var m=f.prototype;m.constructor=f;m.src=
null;m.max=null;m.maxDefault=100;m.length=0;m.init=function(b,f){this.src=b;this.max=f||this.maxDefault;-1==this.max&&(this.max=this.maxDefault);this._instances=[]};m._get=function(b){return this._instances[b]};m._add=function(b,f){return this._getSlot(f,b)?(this._instances.push(b),this.length++,!0):!1};m._remove=function(b){b=createjs.indexOf(this._instances,b);return-1==b?!1:(this._instances.splice(b,1),this.length--,!0)};m._removeAll=function(){for(var b=this.length-1;0<=b;b--)this._instances[b].stop()};
m._getSlot=function(f){var m,u;if(f!=b.INTERRUPT_NONE&&(u=this._get(0),null==u))return!0;for(var k=0,r=this.max;r>k;k++){if(m=this._get(k),null==m)return!0;if(m.playState==b.PLAY_FINISHED||m.playState==b.PLAY_INTERRUPTED||m.playState==b.PLAY_FAILED){u=m;break}f!=b.INTERRUPT_NONE&&(f==b.INTERRUPT_EARLY&&m.getPosition()<u.getPosition()||f==b.INTERRUPT_LATE&&m.getPosition()>u.getPosition())&&(u=m)}return null!=u?(u._interrupt(),this._remove(u),!0):!1};m.toString=function(){return"[Sound SoundChannel]"}})();
this.createjs=this.createjs||{};
(function(){var b=function(b,f,A,u){this.EventDispatcher_constructor();this.src=b;this.uniqueId=-1;this.delayTimeoutId=this.playState=null;this._startTime=Math.max(0,f||0);this._volume=1;createjs.definePropertySupported&&Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume});this._pan=0;createjs.definePropertySupported&&Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan});this._duration=Math.max(0,A||0);createjs.definePropertySupported&&Object.defineProperty(this,
"duration",{get:this.getDuration,set:this.setDuration});this._playbackResource=null;createjs.definePropertySupported&&Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource});!1!==u&&!0!==u&&this.setPlaybackResource(u);this._position=0;createjs.definePropertySupported&&Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition});this._loop=0;createjs.definePropertySupported&&Object.defineProperty(this,"loop",{get:this.getLoop,
set:this.setLoop});this._muted=!1;createjs.definePropertySupported&&Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted});this._paused=!1;createjs.definePropertySupported&&Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},f=createjs.extend(b,createjs.EventDispatcher);f.play=function(b,f,A,u,k,r){return this.playState==createjs.Sound.PLAY_SUCCEEDED?(b instanceof Object&&(A=b.offset,u=b.loop,k=b.volume,r=b.pan),null!=A&&this.setPosition(A),null!=u&&this.setLoop(u),
null!=k&&this.setVolume(k),null!=r&&this.setPan(r),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,b,f,A,u,k,r),this)};f.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this.setPaused(!0),!0)};f.resume=function(){return this._paused?(this.setPaused(!1),!0):!1};f.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this};f.destroy=function(){this._cleanUp();
this.playbackResource=this.src=null;this.removeAllEventListeners()};f.toString=function(){return"[AbstractSoundInstance]"};f.getPaused=function(){return this._paused};f.setPaused=function(b){return!0!==b&&!1!==b||this._paused==b||1==b&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=b,b?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)};f.setVolume=function(b){return b==this._volume?this:(this._volume=Math.max(0,Math.min(1,b)),this._muted||this._updateVolume(),
this)};f.getVolume=function(){return this._volume};f.setMute=function(b){this.setMuted(b)};f.getMute=function(){return this._muted};f.setMuted=function(b){return!0===b||!1===b?(this._muted=b,this._updateVolume(),this):void 0};f.getMuted=function(){return this._muted};f.setPan=function(b){return b==this._pan?this:(this._pan=Math.max(-1,Math.min(1,b)),this._updatePan(),this)};f.getPan=function(){return this._pan};f.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?
this._position:this._calculateCurrentPosition()};f.setPosition=function(b){return this._position=Math.max(0,b),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this};f.getDuration=function(){return this._duration};f.setDuration=function(b){return b==this._duration?this:(this._duration=Math.max(0,b||0),this._updateDuration(),this)};f.setPlaybackResource=function(b){return this._playbackResource=b,0==this._duration&&this._setDurationFromSource(),this};f.getPlaybackResource=function(){return this._playbackResource};
f.getLoop=function(){return this._loop};f.setLoop=function(b){null!=this._playbackResource&&(0!=this._loop&&0==b&&this._removeLooping(b),0==this._loop&&0!=b&&this._addLooping(b));this._loop=b};f._sendEvent=function(b){b=new createjs.Event(b);this.dispatchEvent(b)};f._cleanUp=function(){clearTimeout(this.delayTimeoutId);this._handleCleanUp();this._paused=!1;createjs.Sound._playFinished(this)};f._interrupt=function(){this._cleanUp();this.playState=createjs.Sound.PLAY_INTERRUPTED;this._sendEvent("interrupted")};
f._beginPlaying=function(b,f,A,u){return this.setPosition(b),this.setLoop(f),this.setVolume(A),this.setPan(u),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)};f._playFailed=function(){this._cleanUp();this.playState=createjs.Sound.PLAY_FAILED;this._sendEvent("failed")};f._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,
this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))};f._handleSoundReady=function(){};f._updateVolume=function(){};f._updatePan=function(){};f._updateDuration=function(){};f._setDurationFromSource=function(){};f._calculateCurrentPosition=function(){};f._updatePosition=function(){};f._removeLooping=function(){};f._addLooping=function(){};f._pause=function(){};f._resume=function(){};f._handleStop=function(){};
f._handleCleanUp=function(){};f._handleLoop=function(){};createjs.AbstractSoundInstance=createjs.promote(b,"EventDispatcher");createjs.DefaultSoundInstance=createjs.AbstractSoundInstance})();this.createjs=this.createjs||{};
(function(){var b=function(){this._capabilities=null;this._loaders={};this._audioSources={};this._soundInstances={};this._loaderClass;this._soundInstanceClass},f=b.prototype;b._capabilities=null;b.isSupported=function(){return!0};f.register=function(b){if(this._audioSources[b.src]=!0,this._soundInstances[b.src]=[],this._loaders[b.src])return this._loaders[b.src];var f=new this._loaderClass(b);return f.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[b.src]=f,f};f.preload=
function(b){b.on("error",createjs.proxy(this._handlePreloadError,this));b.load()};f.isPreloadStarted=function(b){return null!=this._audioSources[b]};f.isPreloadComplete=function(b){return!(null==this._audioSources[b]||1==this._audioSources[b])};f.removeSound=function(b){if(this._soundInstances[b]){for(var f=this._soundInstances[b].length;f--;)this._soundInstances[b][f].destroy();delete this._soundInstances[b];delete this._audioSources[b];this._loaders[b]&&this._loaders[b].destroy();delete this._loaders[b]}};
f.removeAllSounds=function(){for(var b in this._audioSources)this.removeSound(b)};f.create=function(b,f,A){this.isPreloadStarted(b)||this.preload(this.register(b));f=new this._soundInstanceClass(b,f,A,this._audioSources[b]);return this._soundInstances[b].push(f),f};f.setVolume=function(b){return this._volume=b,this._updateVolume(),!0};f.getVolume=function(){return this._volume};f.setMute=function(){return this._updateVolume(),!0};f.toString=function(){return"[AbstractPlugin]"};f._handlePreloadComplete=
function(b){var f=b.target.getItem().src;this._audioSources[f]=b.result;b=0;for(var A=this._soundInstances[f].length;A>b;b++)this._soundInstances[f][b].setPlaybackResource(this._audioSources[f])};f._handlePreloadError=function(){};f._updateVolume=function(){};createjs.AbstractPlugin=b})();this.createjs=this.createjs||{};
(function(){function b(b){this.AbstractLoader_constructor(b,!0,createjs.AbstractLoader.SOUND)}var f=createjs.extend(b,createjs.AbstractLoader);b.context=null;f.toString=function(){return"[WebAudioLoader]"};f._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1);this._request.setResponseType("arraybuffer")};f._sendComplete=function(){b.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._handleError,this))};f._handleAudioDecoded=
function(b){this._result=b;this.AbstractLoader__sendComplete()};createjs.WebAudioLoader=createjs.promote(b,"AbstractLoader")})();this.createjs=this.createjs||{};
(function(){function b(b,f,u,k){this.AbstractSoundInstance_constructor(b,f,u,k);this.gainNode=m.context.createGain();this.panNode=m.context.createPanner();this.panNode.panningModel=m._panningModel;this.panNode.connect(this.gainNode);this._sourceNodeNext=this._soundCompleteTimeout=this.sourceNode=null;this._playbackStartTime=0;this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var f=createjs.extend(b,createjs.AbstractSoundInstance),m=b;m.context=null;m.destinationNode=null;m._panningModel=
"equalpower";f.destroy=function(){this.AbstractSoundInstance_destroy();this.panNode.disconnect(0);this.panNode=null;this.gainNode.disconnect(0);this.gainNode=null};f.toString=function(){return"[WebAudioSoundInstance]"};f._updatePan=function(){this.panNode.setPosition(this._pan,0,-0.5)};f._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)};f._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,
0))};f._setDurationFromSource=function(){this._duration=1E3*this.playbackResource.duration};f._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext));0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0);clearTimeout(this._soundCompleteTimeout);this._playbackStartTime=0};f._cleanUpAudioNode=function(b){return b&&(b.stop(0),b.disconnect(0),
b=null),b};f._handleSoundReady=function(){this.gainNode.connect(m.destinationNode);var b=0.001*this._duration,f=0.001*this._position;this.sourceNode=this._createAndPlayAudioNode(m.context.currentTime-b,f);this._playbackStartTime=this.sourceNode.startTime-f;this._soundCompleteTimeout=setTimeout(this._endedHandler,1E3*(b-f));0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))};f._createAndPlayAudioNode=function(b,f){var u=m.context.createBufferSource();u.buffer=
this.playbackResource;u.connect(this.panNode);var k=0.001*this._duration;return u.startTime=b+k,u.start(u.startTime,f+0.001*this._startTime,k-f),u};f._pause=function(){this._position=1E3*(m.context.currentTime-this._playbackStartTime);this.sourceNode=this._cleanUpAudioNode(this.sourceNode);this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext);0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0);clearTimeout(this._soundCompleteTimeout)};f._resume=function(){this._handleSoundReady()};
f._updateVolume=function(){var b=this._muted?0:this._volume;b!=this.gainNode.gain.value&&(this.gainNode.gain.value=b)};f._calculateCurrentPosition=function(){return 1E3*(m.context.currentTime-this._playbackStartTime)};f._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode);this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext);clearTimeout(this._soundCompleteTimeout);this._paused||this._handleSoundReady()};f._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode);
this.sourceNode=this._sourceNodeNext;this._playbackStartTime=this.sourceNode.startTime;this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0);this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)};f._updateDuration=function(){this._pause();this._resume()};createjs.WebAudioSoundInstance=createjs.promote(b,"AbstractSoundInstance")})();this.createjs=this.createjs||{};
(function(){function b(){this.AbstractPlugin_constructor();this._panningModel=m._panningModel;this._volume=1;this.context=m.context;this.dynamicsCompressorNode=this.context.createDynamicsCompressor();this.dynamicsCompressorNode.connect(this.context.destination);this.gainNode=this.context.createGain();this.gainNode.connect(this.dynamicsCompressorNode);createjs.WebAudioSoundInstance.destinationNode=this.gainNode;this._capabilities=m._capabilities;this._loaderClass=createjs.WebAudioLoader;this._soundInstanceClass=
createjs.WebAudioSoundInstance;this._addPropsToClasses()}var f=createjs.extend(b,createjs.AbstractPlugin),m=b;m._capabilities=null;m._panningModel="equalpower";m.context=null;m.isSupported=function(){var b=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||b||this._isFileXHRSupported()?(m._generateCapabilities(),null==m.context?!1:!0):!1};m.playEmptySound=function(){var b=m.context.createBufferSource();b.buffer=m.context.createBuffer(1,
1,22050);b.connect(m.context.destination);b.start(0,0,0)};m._isFileXHRSupported=function(){var b=!0,f=new XMLHttpRequest;try{f.open("GET","WebAudioPluginTest.fail",!1)}catch(m){return b=!1}f.onerror=function(){b=!1};f.onload=function(){b=404==this.status||200==this.status||0==this.status&&""!=this.response};try{f.send()}catch(k){b=!1}return b};m._generateCapabilities=function(){if(null==m._capabilities){var b=document.createElement("audio");if(null==b.canPlayType)return null;if(null==m.context)if(window.AudioContext)m.context=
new AudioContext;else{if(!window.webkitAudioContext)return null;m.context=new webkitAudioContext}m._compatibilitySetUp();m.playEmptySound();m._capabilities={panning:!0,volume:!0,tracks:-1};for(var f=createjs.Sound.SUPPORTED_EXTENSIONS,u=createjs.Sound.EXTENSION_MAP,k=0,r=f.length;r>k;k++){var F=f[k],P=u[F]||F;m._capabilities[F]="no"!=b.canPlayType("audio/"+F)&&""!=b.canPlayType("audio/"+F)||"no"!=b.canPlayType("audio/"+P)&&""!=b.canPlayType("audio/"+P)}2>m.context.destination.numberOfChannels&&(m._capabilities.panning=
!1)}};m._compatibilitySetUp=function(){if(m._panningModel="equalpower",!m.context.createGain){m.context.createGain=m.context.createGainNode;var b=m.context.createBufferSource();b.__proto__.start=b.__proto__.noteGrainOn;b.__proto__.stop=b.__proto__.noteOff;m._panningModel=0}};f.toString=function(){return"[WebAudioPlugin]"};f._addPropsToClasses=function(){var b=this._soundInstanceClass;b.context=this.context;b.destinationNode=this.gainNode;b._panningModel=this._panningModel;this._loaderClass.context=
this.context};f._updateVolume=function(){var b=createjs.Sound._masterMute?0:this._volume;b!=this.gainNode.gain.value&&(this.gainNode.gain.value=b)};createjs.WebAudioPlugin=createjs.promote(b,"AbstractPlugin")})();this.createjs=this.createjs||{};
(function(){function b(b){this.src=b;this.available=this.length=0;this.tags=[];this.duration=0}var f=b.prototype;f.constructor=b;b.tags={};b.get=function(f){var l=b.tags[f];return null==l&&(l=b.tags[f]=new b(f)),l};b.remove=function(f){var l=b.tags[f];return null==l?!1:(l.removeAll(),delete b.tags[f],!0)};b.getInstance=function(f){f=b.tags[f];return null==f?null:f.get()};b.setInstance=function(f,l){var A=b.tags[f];return null==A?null:A.set(l)};b.getDuration=function(f){f=b.tags[f];return null==f?
0:f.getDuration()};f.add=function(b){this.tags.push(b);this.length++;this.available++};f.removeAll=function(){for(var b;this.length--;)b=this.tags[this.length],b.parentNode&&b.parentNode.removeChild(b),delete this.tags[this.length];this.src=null;this.tags.length=0};f.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var b=this.tags.pop();return null==b.parentNode&&document.body.appendChild(b),b};f.set=function(b){-1==createjs.indexOf(this.tags,b)&&this.tags.push(b);
this.available=this.tags.length};f.getDuration=function(){return this.duration||(this.duration=1E3*this.tags[this.tags.length-1].duration),this.duration};f.toString=function(){return"[HTMLAudioTagPool]"};createjs.HTMLAudioTagPool=b})();this.createjs=this.createjs||{};
(function(){function b(b,f,A,u){this.AbstractSoundInstance_constructor(b,f,A,u);this._delayTimeoutId=this._audioSpriteStopTime=null;this._endedHandler=createjs.proxy(this._handleSoundComplete,this);this._readyHandler=createjs.proxy(this._handleTagReady,this);this._stalledHandler=createjs.proxy(this.playFailed,this);this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this);this._loopHandler=createjs.proxy(this._handleSoundComplete,this);A?this._audioSpriteStopTime=0.001*(f+A):this._duration=
createjs.HTMLAudioTagPool.getDuration(this.src)}var f=createjs.extend(b,createjs.AbstractSoundInstance);f.setMasterVolume=function(){this._updateVolume()};f.setMasterMute=function(){this._updateVolume()};f.toString=function(){return"[HTMLAudioSoundInstance]"};f._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))};f._addLooping=function(){null==this._playbackResource||
this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)};f._handleCleanUp=function(){var b=this._playbackResource;if(null!=b){b.pause();b.loop=!1;b.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1);b.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1);b.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1);
b.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1);b.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{b.currentTime=this._startTime}catch(f){}createjs.HTMLAudioTagPool.setInstance(this.src,b);this._playbackResource=null}};f._beginPlaying=function(b,f,A,u){return this._playbackResource=createjs.HTMLAudioTagPool.getInstance(this.src),this.AbstractSoundInstance__beginPlaying(b,f,A,u)};f._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var b=
this._playbackResource;return b.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),b.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),b.preload="auto",void b.load()}this._updateVolume();this._playbackResource.currentTime=0.001*(this._startTime+this._position);this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,
this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0));this._playbackResource.play()};f._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1);this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1);this._handleSoundReady()};f._pause=function(){this._playbackResource.pause()};
f._resume=function(){this._playbackResource.play()};f._updateVolume=function(){if(null!=this._playbackResource){var b=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;b!=this._playbackResource.volume&&(this._playbackResource.volume=b)}};f._calculateCurrentPosition=function(){return 1E3*this._playbackResource.currentTime-this._startTime};f._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,
!1);this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=0.001*(this._position+this._startTime)}catch(b){this._handleSetPositionSeek(null)}};f._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,
!1))};f._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=0.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))};f._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,
!1))};f._updateDuration=function(){this._audioSpriteStopTime=0.001*(startTime+duration);this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))};createjs.HTMLAudioSoundInstance=createjs.promote(b,"AbstractSoundInstance")})();this.createjs=this.createjs||{};
(function(){function b(){this.AbstractPlugin_constructor();this.defaultNumChannels=2;this._capabilities=m._capabilities;this._loaderClass=createjs.SoundLoader;this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var f=createjs.extend(b,createjs.AbstractPlugin),m=b;m.MAX_INSTANCES=30;m._AUDIO_READY="canplaythrough";m._AUDIO_ENDED="ended";m._AUDIO_SEEKED="seeked";m._AUDIO_STALLED="stalled";m._TIME_UPDATE="timeupdate";m._capabilities=null;m.enableIOS=!1;m.isSupported=function(){return m._generateCapabilities(),
null==m._capabilities?!1:!0};m._generateCapabilities=function(){if(null==m._capabilities){var b=document.createElement("audio");if(null==b.canPlayType)return null;m._capabilities={panning:!0,volume:!0,tracks:-1};for(var f=createjs.Sound.SUPPORTED_EXTENSIONS,u=createjs.Sound.EXTENSION_MAP,k=0,r=f.length;r>k;k++){var F=f[k],P=u[F]||F;m._capabilities[F]="no"!=b.canPlayType("audio/"+F)&&""!=b.canPlayType("audio/"+F)||"no"!=b.canPlayType("audio/"+P)&&""!=b.canPlayType("audio/"+P)}}};f.register=function(b,
f){for(var m=createjs.HTMLAudioTagPool.get(b.src),k=null,r=0;f>r;r++)k=this._createTag(b.src),m.add(k);m=this.AbstractPlugin_register(b,f);return m.setTag(k),m};f.removeSound=function(b){this.AbstractPlugin_removeSound(b);createjs.HTMLAudioTagPool.remove(b)};f.create=function(b,f,m){b=this.AbstractPlugin_create(b,f,m);return b.setPlaybackResource(null),b};f.toString=function(){return"[HTMLAudioPlugin]"};f.setVolume=f.getVolume=f.setMute=null;f._createTag=function(b){var f=document.createElement("audio");
return f.autoplay=!1,f.preload="none",f.src=b,f};createjs.HTMLAudioPlugin=createjs.promote(b,"AbstractPlugin")})();(function(b,f,m){function l(a,c){function d(){}d.prototype=a;var q=new d,$b;for($b in c)q[$b]=c[$b];c.toString!==Object.prototype.toString&&(q.toString=c.toString);return q}function A(a){return a instanceof Array?function(){return N.iter(a)}:"function"==typeof a.iterator?u(a,a.iterator):a.iterator}function u(a,c){if(null==c)return null;null==c.__id__&&(c.__id__=lg++);var d;null==a.hx__closures__?a.hx__closures__={}:d=a.hx__closures__[c.__id__];null==d&&(d=function(){return d.method.apply(d.scope,
arguments)},d.scope=a,d.method=c,a.hx__closures__[c.__id__]=d);return d}f.openfl=f.openfl||{};f.lime=f.lime||{};var k={},r=function(){return W.__string_rec(this,"")},F=function(){};k.ApplicationMain=F;F.__name__=!0;F.config=null;F.preloader=null;F.create=function(){var a=new cf;a.create(F.config);var c=new Kc;F.preloader=new Ka(c);a.setPreloader(F.preloader);F.preloader.onComplete.add(F.init);F.preloader.create(F.config);var c=[],d=[];c.push("data/fonts/04b11/04b11.fnt");d.push("TEXT");c.push("data/fonts/04b11/04b11_0.png");
d.push("IMAGE");c.push("data/fonts/c64/c64.fnt");d.push("TEXT");c.push("data/fonts/c64/c64_0.png");d.push("IMAGE");c.push("data/fonts/comic/comic.fnt");d.push("TEXT");c.push("data/fonts/comic/comic_0.png");d.push("IMAGE");c.push("data/fonts/crypt/crypt.fnt");d.push("TEXT");c.push("data/fonts/crypt/crypt_0.png");d.push("IMAGE");c.push("data/fonts/default/default.fnt");d.push("TEXT");c.push("data/fonts/default/default_0.png");d.push("IMAGE");c.push("data/fonts/dos/dos.fnt");d.push("TEXT");c.push("data/fonts/dos/dos_0.png");
d.push("IMAGE");c.push("data/fonts/ganon/ganon.fnt");d.push("TEXT");c.push("data/fonts/ganon/ganon_0.png");d.push("IMAGE");c.push("data/fonts/nokia/nokia.fnt");d.push("TEXT");c.push("data/fonts/nokia/nokia_0.png");d.push("IMAGE");c.push("data/fonts/oldenglish/oldenglish.fnt");d.push("TEXT");c.push("data/fonts/oldenglish/oldenglish_0.png");d.push("IMAGE");c.push("data/fonts/pixel/pixel.fnt");d.push("TEXT");c.push("data/fonts/pixel/pixel_0.png");d.push("IMAGE");c.push("data/fonts/pressstart/pressstart.fnt");
d.push("TEXT");c.push("data/fonts/pressstart/pressstart_0.png");d.push("IMAGE");c.push("data/fonts/retrofuture/retrofuture.fnt");d.push("TEXT");c.push("data/fonts/retrofuture/retrofuture_0.png");d.push("IMAGE");c.push("data/fonts/roman/roman.fnt");d.push("TEXT");c.push("data/fonts/roman/roman_0.png");d.push("IMAGE");c.push("data/fonts/special/special.fnt");d.push("TEXT");c.push("data/fonts/special/special_0.png");d.push("IMAGE");c.push("data/fonts/tall/tall.fnt.gz");d.push("TEXT");c.push("data/fonts/thin/thin.fnt");
d.push("TEXT");c.push("data/fonts/thin/thin_0.png");d.push("IMAGE");c.push("data/fonts/tiny/tiny.fnt");d.push("TEXT");c.push("data/fonts/tiny/tiny_0.png");d.push("IMAGE");c.push("data/fonts/yoster/yoster.fnt");d.push("TEXT");c.push("data/fonts/yoster/yoster_0.png");d.push("IMAGE");if(null!=F.config.assetsPrefix)for(var q=0,$b=c.length;q<$b;){var b=q++;"FONT"!=d[b]&&(c[b]=F.config.assetsPrefix+c[b])}F.preloader.load(c,d);a.exec()};F.init=function(){F.preloader=null;F.start()};F.main=function(){F.config=
{build:"1041",company:"Stephen and Terry",file:"webthing",fps:60,name:"Webthing",orientation:"landscape",packageName:"com.stephenandterry.webthing",version:"1.0.0",windows:[{antialiasing:0,background:0,borderless:!1,depthBuffer:!1,display:0,fullscreen:!1,hardware:!0,height:0,parameters:"{}",resizable:!0,stencilBuffer:!0,title:"Webthing",vsync:!0,width:0,x:null,y:null}]}};F.start=function(){for(var a=!1,c=db.resolveClass("haxegon.Load"),d=0,q=db.getClassFields(c);d<q.length;){var b=q[d];++d;if("main"==
b){a=!0;break}}ka.initialize();a?ma.callMethod(c,ma.field(c,"main"),[]):db.createInstance(aa,[]);La.current.stage.window.__fullscreen&&La.current.stage.dispatchEvent(new S(S.FULL_SCREEN,!1,!1,!0,!0));La.current.stage.dispatchEvent(new Q(Q.RESIZE,!1,!1))};var P=function(){};k["openfl.events.IEventDispatcher"]=P;P.__name__=!0;var C=function(a){null!=a&&(this.__targetDispatcher=a)};k["openfl.events.EventDispatcher"]=C;C.__name__=!0;C.__interfaces__=[P];C.__sortByPriority=function(a,c){return a.priority==
c.priority?0:a.priority>c.priority?-1:1};C.prototype={addEventListener:function(a,c,d,q,b){null==q&&(q=0);null==d&&(d=!1);null==this.__eventMap&&(this.__dispatching=new ba,this.__eventMap=new ba,this.__newEventMap=new ba);if(this.__eventMap.exists(a)){!0==this.__dispatching.get(a)?this.__newEventMap.exists(a)?b=this.__newEventMap.get(a):(b=this.__eventMap.get(a).slice(),this.__newEventMap.set(a,b)):b=this.__eventMap.get(a);a=0;for(var g=b.length;a<g;){var e=a++;if(ma.compareMethods(b[e].callback,
c))return}b.push(new je(c,d,q));b.sort(C.__sortByPriority)}else b=[],b.push(new je(c,d,q)),this.__eventMap.set(a,b)},dispatchEvent:function(a){a.target=null!=this.__targetDispatcher?this.__targetDispatcher:this;return this.__dispatchEvent(a)},hasEventListener:function(a){return null==this.__eventMap?!1:!0==this.__dispatching.get(a)&&this.__newEventMap.exists(a)?0<this.__newEventMap.get(a).length:this.__eventMap.exists(a)},removeEventListener:function(a,c,d){null==d&&(d=!1);if(null!=this.__eventMap){var q=
this.__eventMap.get(a);if(null!=q){var b=!0==this.__dispatching.get(a);b&&(this.__newEventMap.exists(a)?q=this.__newEventMap.get(a):(q=this.__eventMap.get(a).slice(),this.__newEventMap.set(a,q)));for(var g=0,e=q.length;g<e;){var f=g++;if(q[f].match(c,d)){q.splice(f,1);break}}b||(0==q.length&&this.__eventMap.remove(a),this.__eventMap.iterator().hasNext()||(this.__newEventMap=this.__eventMap=null))}}},__dispatchEvent:function(a){if(null==this.__eventMap||null==a)return!1;var c=a.type,d;if(!0==this.__dispatching.get(c)){d=
this.__newEventMap.get(c);if(null==d)return!1;d=d.slice()}else{d=this.__eventMap.get(c);if(null==d)return!1;this.__dispatching.set(c,!0)}null==a.target&&(a.target=null!=this.__targetDispatcher?this.__targetDispatcher:this);a.currentTarget=this;for(var q=a.eventPhase==Sb.CAPTURING_PHASE,b=0,g;b<d.length;){g=d[b];if(g.useCapture==q&&(g.callback(a),a.__isCancelledNow))break;g==d[b]&&b++}null!=this.__newEventMap&&this.__newEventMap.exists(c)&&(d=this.__newEventMap.get(c),0<d.length?this.__eventMap.set(c,
d):this.__eventMap.remove(c),this.__eventMap.iterator().hasNext()?this.__newEventMap.remove(c):this.__newEventMap=this.__eventMap=null);this.__dispatching.set(a.type,!1);return!0},__class__:C};var Z=function(){};k["openfl.display.IBitmapDrawable"]=Z;Z.__name__=!0;Z.prototype={__class__:Z};var z=function(){this.__maskCached=!1;C.call(this);this.__alpha=1;this.__transform=new Xa;this.__visible=!0;this.__rotationSine=this.__rotation=0;this.__rotationCosine=1;this.__renderTransform=new Xa;this.__offset=
new Na;this.__worldOffset=new Na;this.__worldAlpha=1;this.__worldTransform=new Xa;this.__worldColorTransform=new pc;this.set_name("instance"+ ++z.__instanceCount)};k["openfl.display.DisplayObject"]=z;z.__name__=!0;z.__interfaces__=[Z];z.__super__=C;z.prototype=l(C.prototype,{globalToLocal:function(a){a=a.clone();this.__getWorldTransform().__transformInversePoint(a);return a},__broadcast:function(a,c){if(null!=this.__eventMap&&this.hasEventListener(a.type)){var d=C.prototype.__dispatchEvent.call(this,
a);return a.__isCancelled?!0:d}return!1},__dispatchEvent:function(a){var c=C.prototype.__dispatchEvent.call(this,a);if(a.__isCancelled)return!0;a.bubbles&&null!=this.parent&&this.parent!=this&&(a.eventPhase=Sb.BUBBLING_PHASE,null==a.target&&(a.target=this),this.parent.__dispatchEvent(a));return c},__enterFrame:function(a){},__getBounds:function(a,c){null!=this.__graphics&&this.__graphics.__getBounds(a,c)},__getCursor:function(){return null},__getInteractive:function(a){return!1},__getWorldTransform:function(){if(this.__transformDirty||
0<z.__worldTransformDirty){var a=[],c=this,d=this.__transformDirty;if(null==this.parent)d&&this.__update(!0,!1);else for(;null!=c.parent;)a.push(c),c=c.parent,c.__transformDirty&&(d=!0);if(d)for(c=a.length;0<=--c;)a[c].__update(!0,!1)}return this.__worldTransform},__hitTest:function(a,c,d,q,b){if(null!=this.__graphics){if(!this.get_visible()||this.__isMask||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,c))return!1;if(this.__graphics.__hitTest(a,c,d,this.__getWorldTransform()))return null==
q||b||q.push(this),!0}return!1},__hitTestMask:function(a,c){return null!=this.__graphics&&this.__graphics.__hitTest(a,c,!0,this.__getWorldTransform())?!0:!1},__renderCairo:function(a){null!=this.__graphics&&qa.render(this,a)},__renderCairoMask:function(a){null!=this.__graphics&&Ta.renderMask(this.__graphics,a)},__renderCanvas:function(a){null!=this.__graphics&&Tc.render(this,a)},__renderCanvasMask:function(a){null!=this.__graphics&&v.renderMask(this.__graphics,a)},__renderDOM:function(a){null!=this.__graphics&&
Fe.render(this,a)},__renderGL:function(a){!this.__renderable||0>=this.__worldAlpha||(null!=this.__scrollRect&&a.maskManager.pushRect(this.__scrollRect,this.__renderTransform),null!=this.__mask&&null!=this.__maskGraphics&&0<this.__maskGraphics.__commands.get_length()&&a.maskManager.pushMask(this),null!=this.__graphics&&(this.__graphics.__hardware?V.render(this,a):(v.render(this.__graphics,a),Eb.renderBitmap(this,a))),null!=this.__mask&&null!=this.__maskGraphics&&0<this.__maskGraphics.__commands.get_length()&&
a.maskManager.popMask(),null!=this.__scrollRect&&a.maskManager.popRect())},__setStageReference:function(a){this.stage!=a&&(null!=this.stage&&(this.stage.get_focus()==this&&this.stage.set_focus(null),this.dispatchEvent(new Q(Q.REMOVED_FROM_STAGE,!1,!1))),this.stage=a,null!=a&&this.dispatchEvent(new Q(Q.ADDED_TO_STAGE,!1,!1)))},__setRenderDirty:function(){this.__renderDirty||(this.__renderDirty=!0,z.__worldRenderDirty++)},__update:function(a,c,d){this.__renderable=this.get_visible()&&0!=this.get_scaleX()&&
0!=this.get_scaleY()&&!this.__isMask;null==this.__worldTransform&&(this.__worldTransform=new Xa);if(null!=this.parent){var q=this.parent.__worldTransform;this.__worldTransform.a=this.__transform.a*q.a+this.__transform.b*q.c;this.__worldTransform.b=this.__transform.a*q.b+this.__transform.b*q.d;this.__worldTransform.c=this.__transform.c*q.a+this.__transform.d*q.c;this.__worldTransform.d=this.__transform.c*q.b+this.__transform.d*q.d;this.__worldTransform.tx=this.__transform.tx*q.a+this.__transform.ty*
q.c+q.tx;this.__worldTransform.ty=this.__transform.tx*q.b+this.__transform.ty*q.d+q.ty;this.__worldOffset.copyFrom(this.parent.__worldOffset)}else this.__worldTransform.copyFrom(this.__transform),this.__worldOffset.setTo(0,0);null!=this.get_scrollRect()?(this.__offset=this.__worldTransform.deltaTransformPoint(this.__scrollRect.get_topLeft()),this.__worldOffset.offset(this.__offset.x,this.__offset.y)):this.__offset.setTo(0,0);this.__renderTransform.copyFrom(this.__worldTransform);this.__renderTransform.translate(-this.__worldOffset.x,
-this.__worldOffset.y);c&&this.__transformDirty&&(this.__transformDirty=!1,z.__worldTransformDirty--);a||null==this.__mask||this.__mask.__maskCached||(null==this.__maskGraphics&&(this.__maskGraphics=new $c),this.__maskGraphics.clear(),this.__mask.__update(!0,!0,this.__maskGraphics),this.__mask.__maskCached=!0);null!=d&&this.__updateMask(d);if(!a){this.__worldColorTransform.__equals(this.get_transform().get_colorTransform())||(this.__worldColorTransform=this.get_transform().get_colorTransform().__clone());
if(null!=this.parent){if(this.__worldAlpha=this.get_alpha()*this.parent.__worldAlpha,this.__worldColorTransform.__combine(this.parent.__worldColorTransform),null==this.blendMode||this.blendMode==J.NORMAL)this.__blendMode=this.parent.__blendMode}else this.__worldAlpha=this.get_alpha();c&&this.__renderDirty&&(this.__renderDirty=!1)}},__updateChildren:function(a){if((this.__renderable=this.get_visible()&&0!=this.get_scaleX()&&0!=this.get_scaleY()&&!this.__isMask)||this.__isMask)this.__worldAlpha=this.get_alpha(),
this.__transformDirty&&(this.__transformDirty=!1,z.__worldTransformDirty--)},__updateMask:function(a){null!=this.__graphics&&(a.__commands.overrideMatrix(this.__worldTransform),a.__commands.append(this.__graphics.__commands),a.set___dirty(!0),a.__visible=!0,null==a.__bounds&&(a.__bounds=new ya),this.__graphics.__getBounds(a.__bounds,Xa.__identity))},get_alpha:function(){return this.__alpha},get_mask:function(){return this.__mask},get_mouseX:function(){var a;a=null!=this.stage?this.stage.__mouseX:
La.current.stage.__mouseX;var c;c=null!=this.stage?this.stage.__mouseY:La.current.stage.__mouseY;return this.__getWorldTransform().__transformInverseX(a,c)},get_mouseY:function(){var a;a=null!=this.stage?this.stage.__mouseX:La.current.stage.__mouseX;var c;c=null!=this.stage?this.stage.__mouseY:La.current.stage.__mouseY;return this.__getWorldTransform().__transformInverseY(a,c)},set_name:function(a){return this.__name=a},get_scaleX:function(){return 0==this.__transform.b?this.__transform.a:Math.sqrt(this.__transform.a*
this.__transform.a+this.__transform.b*this.__transform.b)},set_scaleX:function(a){if(0==this.__transform.c)a==this.__transform.a||this.__transformDirty||(this.__transformDirty=!0,z.__worldTransformDirty++),this.__transform.a=a;else{var c=this.__rotationCosine*a,d=this.__rotationSine*a;this.__transform.a==c&&this.__transform.b==d||this.__transformDirty||(this.__transformDirty=!0,z.__worldTransformDirty++);this.__transform.a=c;this.__transform.b=d}return a},get_scaleY:function(){return 0==this.__transform.c?
this.__transform.d:Math.sqrt(this.__transform.c*this.__transform.c+this.__transform.d*this.__transform.d)},set_scaleY:function(a){if(0==this.__transform.c)a==this.__transform.d||this.__transformDirty||(this.__transformDirty=!0,z.__worldTransformDirty++),this.__transform.d=a;else{var c=-this.__rotationSine*a,d=this.__rotationCosine*a;this.__transform.d==d&&this.__transform.c==c||this.__transformDirty||(this.__transformDirty=!0,z.__worldTransformDirty++);this.__transform.c=c;this.__transform.d=d}return a},
get_scrollRect:function(){return null==this.__scrollRect?null:this.__scrollRect.clone()},get_transform:function(){null==this.__objectTransform&&(this.__objectTransform=new df(this));return this.__objectTransform},get_visible:function(){return this.__visible},get_width:function(){var a=new ya;this.__getBounds(a,this.__transform);return a.width},get_x:function(){return this.__transform.tx},set_x:function(a){a==this.__transform.tx||this.__transformDirty||(this.__transformDirty=!0,z.__worldTransformDirty++);
return this.__transform.tx=a},get_y:function(){return this.__transform.ty},set_y:function(a){a==this.__transform.ty||this.__transformDirty||(this.__transformDirty=!0,z.__worldTransformDirty++);return this.__transform.ty=a},__class__:z,__properties__:{get_mouseY:"get_mouseY",get_mouseX:"get_mouseX",set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x",get_width:"get_width",get_visible:"get_visible",get_transform:"get_transform",get_scrollRect:"get_scrollRect",set_scaleY:"set_scaleY",get_scaleY:"get_scaleY",
set_scaleX:"set_scaleX",get_scaleX:"get_scaleX",set_name:"set_name",get_mask:"get_mask",get_alpha:"get_alpha"}});var E=function(){z.call(this);this.doubleClickEnabled=!1;this.mouseEnabled=!0;this.__tabEnabled=this.needsSoftKeyboard=!1;this.tabIndex=-1};k["openfl.display.InteractiveObject"]=E;E.__name__=!0;E.__super__=z;E.prototype=l(z.prototype,{__getInteractive:function(a){null!=a&&(a.push(this),null!=this.parent&&this.parent.__getInteractive(a));return!0},__hitTest:function(a,c,d,q,b){return!this.get_visible()||
this.__isMask||b&&!this.mouseEnabled?!1:z.prototype.__hitTest.call(this,a,c,d,q,b)},get_tabEnabled:function(){return this.__tabEnabled},__class__:E,__properties__:l(z.prototype.__properties__,{get_tabEnabled:"get_tabEnabled"})});var ha=function(){E.call(this);this.mouseChildren=!0;this.__children=[];this.__removedChildren=[]};k["openfl.display.DisplayObjectContainer"]=ha;ha.__name__=!0;ha.__super__=E;ha.prototype=l(E.prototype,{addChild:function(a){if(null!=a){null!=a.parent&&a.parent.removeChild(a);
this.__children.push(a);a.parent=this;null!=this.stage&&a.__setStageReference(this.stage);a.__transformDirty||(a.__transformDirty=!0,z.__worldTransformDirty++);a.__renderDirty||(a.__renderDirty=!0,z.__worldRenderDirty++);var c=new Q(Q.ADDED,!0);c.target=a;a.__dispatchEvent(c)}return a},contains:function(a){for(;a!=this&&null!=a;)a=a.parent;return a==this},removeChild:function(a){null!=a&&a.parent==this&&(a.__dispatchEvent(new Q(Q.REMOVED,!0)),null!=this.stage&&a.__setStageReference(null),a.parent=
null,N.remove(this.__children,a),this.__removedChildren.push(a),a.__transformDirty||(a.__transformDirty=!0,z.__worldTransformDirty++),a.__renderDirty||(a.__renderDirty=!0,z.__worldRenderDirty++));return a},__broadcast:function(a,c){null==a.target&&(a.target=this);var d=E.prototype.__broadcast.call(this,a,c);if(!a.__isCancelled&&c)for(var q=0,b=this.__children;q<b.length;){var g=b[q];++q;g.__broadcast(a,!0);if(a.__isCancelled)return!0}return d},__enterFrame:function(a){for(var c=0,d=this.__children;c<
d.length;){var q=d[c];++c;q.__enterFrame(a)}},__getBounds:function(a,c){E.prototype.__getBounds.call(this,a,c);if(0!=this.__children.length){var d=null;null!=c&&(d=this.__worldTransform,this.__worldTransform=c,this.__updateChildren(!0));for(var q=0,b=this.__children;q<b.length;){var g=b[q];++q;0==g.get_scaleX()||0==g.get_scaleY()||g.__isMask||g.__getBounds(a,g.__worldTransform)}null!=c&&(this.__worldTransform=d,this.__updateChildren(!0))}},__hitTest:function(a,c,d,q,b){if(!this.get_visible()||this.__isMask||
b&&!this.mouseEnabled&&!this.mouseChildren||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,c)||null!=this.get_scrollRect()&&!this.get_scrollRect().containsPoint(this.globalToLocal(new Na(a,c))))return!1;var g=this.__children.length;if(b)if(null==q||!this.mouseChildren)for(;0<=--g;){if(this.__children[g].__hitTest(a,c,d,null,!0))return null!=q&&q.push(this),!0}else{if(null!=q){b=q.length;for(var e=!1,f=!1;0<=--g&&!(((e=this.__children[g].__getInteractive(null))||this.mouseEnabled&&!f)&&this.__children[g].__hitTest(a,
c,d,q,!0)&&(f=!0,e)););if(f)return q.splice(b,0,this),!0}}else for(;0<=--g;)this.__children[g].__hitTest(a,c,d,q,!1);return!1},__hitTestMask:function(a,c){for(var d=this.__children.length;0<=--d;)if(this.__children[d].__hitTestMask(a,c))return!0;return!1},__renderCairo:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){E.prototype.__renderCairo.call(this,a);null!=this.get_scrollRect()&&a.maskManager.pushRect(this.get_scrollRect(),this.__worldTransform);null!=this.__mask&&a.maskManager.pushMask(this.__mask);
for(var c=0,d=this.__children;c<d.length;){var q=d[c];++c;q.__renderCairo(a)}0<this.__removedChildren.length&&this.__removedChildren.splice(0,this.__removedChildren.length);null!=this.__mask&&a.maskManager.popMask();null!=this.get_scrollRect()&&a.maskManager.popRect()}},__renderCairoMask:function(a){null!=this.__graphics&&Ta.renderMask(this.__graphics,a);for(var c=0,d=this.__children;c<d.length;){var q=d[c];++c;q.__renderCairoMask(a)}},__renderCanvas:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){E.prototype.__renderCanvas.call(this,
a);null!=this.get_scrollRect()&&a.maskManager.pushRect(this.get_scrollRect(),this.__worldTransform);null!=this.__mask&&a.maskManager.pushMask(this.__mask);for(var c=0,d=this.__children;c<d.length;){var q=d[c];++c;q.__renderCanvas(a)}0<this.__removedChildren.length&&this.__removedChildren.splice(0,this.__removedChildren.length);null!=this.__mask&&a.maskManager.popMask();null!=this.get_scrollRect()&&a.maskManager.popRect()}},__renderCanvasMask:function(a){null!=this.__graphics&&v.renderMask(this.__graphics,
a);var c=new ya;this.__getBounds(c,this.__transform);a.context.rect(0,0,c.width,c.height)},__renderDOM:function(a){E.prototype.__renderDOM.call(this,a);null!=this.__mask&&a.maskManager.pushMask(this.__mask);for(var c=0,d=this.__children;c<d.length;){var q=d[c];++c;q.__renderDOM(a)}c=0;for(d=this.__removedChildren;c<d.length;)q=d[c],++c,null==q.stage&&q.__renderDOM(a);0<this.__removedChildren.length&&this.__removedChildren.splice(0,this.__removedChildren.length);null!=this.__mask&&a.maskManager.popMask()},
__renderGL:function(a){if(this.__renderable&&!(0>=this.__worldAlpha)){null!=this.__scrollRect&&a.maskManager.pushRect(this.__scrollRect,this.__renderTransform);null!=this.__mask&&null!=this.__maskGraphics&&0<this.__maskGraphics.__commands.get_length()&&a.maskManager.pushMask(this);null!=this.__graphics&&(this.__graphics.__hardware?V.render(this,a):(v.render(this.__graphics,a),Eb.renderBitmap(this,a)));for(var c=0,d=this.__children;c<d.length;){var q=d[c];++c;q.__renderGL(a)}null!=this.__mask&&null!=
this.__maskGraphics&&0<this.__maskGraphics.__commands.get_length()&&a.maskManager.popMask();null!=this.__scrollRect&&a.maskManager.popRect();0<this.__removedChildren.length&&this.__removedChildren.splice(0,this.__removedChildren.length)}},__setStageReference:function(a){if(this.stage!=a&&(null!=this.stage&&this.__dispatchEvent(new Q(Q.REMOVED_FROM_STAGE,!1,!1)),this.stage=a,null!=a&&this.__dispatchEvent(new Q(Q.ADDED_TO_STAGE,!1,!1)),null!=this.__children))for(var c=0,d=this.__children;c<d.length;){var q=
d[c];++c;q.__setStageReference(a)}},__update:function(a,c,d){E.prototype.__update.call(this,a,c,d);if((this.__renderable||this.__isMask)&&c){c=0;for(var q=this.__children;c<q.length;){var b=q[c];++c;b.__update(a,!0,d)}}},__updateChildren:function(a){E.prototype.__updateChildren.call(this,a);for(var c=0,d=this.__children;c<d.length;){var q=d[c];++c;q.__update(a,!0)}},__class__:ha});var Ba=function(){ha.call(this);this.buttonMode=!1;this.useHandCursor=!0;this.loaderInfo=qd.create(null)};k["openfl.display.Sprite"]=
Ba;Ba.__name__=!0;Ba.__super__=ha;Ba.prototype=l(ha.prototype,{__getCursor:function(){return this.buttonMode&&this.useHandCursor?ua.POINTER:null},__hitTest:function(a,c,d,q,b){return!this.get_visible()||this.__isMask||b&&!this.mouseEnabled&&!this.mouseChildren||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,c)?!1:ha.prototype.__hitTest.call(this,a,c,d,q,b)?b:b&&!this.mouseEnabled||null==this.__graphics||!this.__graphics.__hitTest(a,c,d,this.__getWorldTransform())?!1:(null!=q&&q.push(this),
!0)},__hitTestMask:function(a,c){return ha.prototype.__hitTestMask.call(this,a,c)||null!=this.__graphics&&this.__graphics.__hitTest(a,c,!0,this.__getWorldTransform())?!0:!1},get_graphics:function(){null==this.__graphics&&(this.__graphics=new $c,this.__graphics.__owner=this);return this.__graphics},get_tabEnabled:function(){return this.__tabEnabled||this.buttonMode},__class__:Ba,__properties__:l(ha.prototype.__properties__,{get_graphics:"get_graphics"})});var ja=function(){this.TARGETFRAMERATE=30;
Ba.call(this);e.initrun=!0;D.corecontrol=this;this.init()};k["haxegon.Core"]=ja;ja.__name__=!0;ja.__super__=Ba;ja.prototype=l(Ba.prototype,{init:function(){this.maxelapsed=0.0333;this.maxframeskip=5;this.tickrate=20;this._delta=0;e.initrun?(this.addEventListener(Q.ADDED_TO_STAGE,u(this,this.addedtostage)),La.current.addChild(this)):this.loaded()},addedtostage:function(a){this.removeEventListener(Q.ADDED_TO_STAGE,u(this,this.addedtostage));this.loaded()},reset:function(){ea.setseed(X["int"](233280*
Math.random()));e.init(this.stage);e.resizescreen(240,150,1);h.setfont(ra.DEFAULT,1);h.cleartextcache();x.keybuffer=""},loaded:function(){ea.setseed(X["int"](233280*Math.random()));e.initrun&&(x.init(this.stage),I.init(this.stage));e.init(this.stage);e.resizescreen(240,150,1);h.setfont(ra.DEFAULT,1);h.cleartextcache();x.keybuffer="";e.initrun&&null==this.haxegonmain&&(this.haxegonmain=new Lc);this._rate=1E3/this.TARGETFRAMERATE;this._skip=this._rate*(this.maxframeskip+1);this._last=this._prev=La.getTimer();
null!=this._timer&&this._timer.stop();this._timer=new Uc(this.tickrate);this._timer.run=u(this,this.ontimer);e.update_fps=0;e.render_fps=0;this._framesthissecond_counter=-1;e.initrun=!1},ontimer:function(){e.skiprender=!1;this._skipedupdate=0;this._time=La.getTimer();this._delta+=this._time-this._last;this._last=this._time;-1==this._framesthissecond_counter&&(this._framesthissecond_counter=this._time);if(!(this._delta<this._rate)){this._gametime=this._time|0;this._delta>this._skip&&(this._delta=this._skip);
for(;this._delta>=this._rate;)this._updatetime=this._time,this._delta-=this._rate,this._prev=this._time,e.clearscreeneachframe&&(e.skiprender=!0),this._skipedupdate++,1<this._skipedupdate&&this.doupdate(),this._time=La.getTimer();this._rendertime=this._time;e.skiprender=!1;this.doupdate();e.render_fps++;1E3<this._rendertime-this._framesthissecond_counter&&(this._framesthissecond_counter=La.getTimer(),e.update_fps_max=e.update_fps,e.render_fps_max=e.render_fps,e.render_fps=0,e.update_fps=0);this._time=
La.getTimer()}},doupdate:function(){e.update_fps++;I.update(X["int"](La.current.get_mouseX()/e.screenscale),X["int"](La.current.get_mouseY()/e.screenscale));x.update();e.skiprender||(e.drawto.lock(),e.clearscreeneachframe&&e.clearscreen());this.haxegonmain.update();e.skiprender||(h.drawstringinput(),kb.showlog(),e.drawto.unlock());I.mousewheel=0},__class__:ja});var ca=function(){ja.call(this)};k["haxegon.Load"]=ca;ca.__name__=!0;ca.__super__=ja;ca.prototype=l(ja.prototype,{__class__:ca});var aa=function(){La.current.addChild(this);
ja.call(this);this.dispatchEvent(new Q(Q.ADDED_TO_STAGE,!1,!1))};k.DocumentClass=aa;aa.__name__=!0;aa.__super__=ca;aa.prototype=l(ca.prototype,{__class__:aa});var Ca=function(){this.onChange=new Va};k["lime.AssetLibrary"]=Ca;Ca.__name__=!0;Ca.prototype={exists:function(a,c){return!1},getBytes:function(a){return null},getFont:function(a){return null},getImage:function(a){return null},getText:function(a){a=this.getBytes(a);return null==a?null:a.readUTFBytes(a.length)},isLocal:function(a,c){return!0},
unload:function(){},__class__:Ca};var Ia=function(){this.type=new ba;this.path=new ba;this.className=new ba;this.onChange=new Va;var a;a="data/fonts/04b11/04b11.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/04b11/04b11_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/c64/c64.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/c64/c64_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/comic/comic.fnt";this.path.set(a,a);this.type.set(a,"TEXT");
a="data/fonts/comic/comic_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/crypt/crypt.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/crypt/crypt_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/default/default.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/default/default_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/dos/dos.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/dos/dos_0.png";this.path.set(a,
a);this.type.set(a,"IMAGE");a="data/fonts/ganon/ganon.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/ganon/ganon_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/nokia/nokia.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/nokia/nokia_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/oldenglish/oldenglish.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/oldenglish/oldenglish_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");
a="data/fonts/pixel/pixel.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/pixel/pixel_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/pressstart/pressstart.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/pressstart/pressstart_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/retrofuture/retrofuture.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/retrofuture/retrofuture_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/roman/roman.fnt";
this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/roman/roman_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/special/special.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/special/special_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/tall/tall.fnt.gz";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/thin/thin.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/thin/thin_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");
a="data/fonts/tiny/tiny.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/tiny/tiny_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a="data/fonts/yoster/yoster.fnt";this.path.set(a,a);this.type.set(a,"TEXT");a="data/fonts/yoster/yoster_0.png";this.path.set(a,a);this.type.set(a,"IMAGE");a=null;null!=F.config&&Object.prototype.hasOwnProperty.call(F.config,"assetsPrefix")&&(a=F.config.assetsPrefix);if(null!=a)for(var c=this.path.keys();c.hasNext();){var d=c.next(),q=a+this.path.get(d);
this.path.set(d,q)}};k.DefaultAssetLibrary=Ia;Ia.__name__=!0;Ia.__super__=Ca;Ia.prototype=l(Ca.prototype,{exists:function(a,c){var d;d=null!=c?W.__cast(c,String):null;var q=this.type.get(a);return null==q||q!=d&&("SOUND"!=d&&"MUSIC"!=d||"MUSIC"!=q&&"SOUND"!=q)&&"BINARY"!=d&&null!=d&&("BINARY"!=q||"TEXT"!=d)?!1:!0},getBytes:function(a){var c=null,c=this.path.get(a),c=yb.loaders.get(c);if(null==c)return null;a=c.data;"string"==typeof a?(c=new ac,c.writeUTFBytes(a)):c=W.__instanceof(a,ac)?a:null;return null!=
c?(c.position=0,c):null},getFont:function(a){return W.__cast(db.createInstance(this.className.get(a),[]),Od)},getImage:function(a){return Mc.fromImageElement(function(c){c=c.path.get(a);return yb.images.get(c)}(this))},getText:function(a){var c=null;a=this.path.get(a);a=yb.loaders.get(a);if(null==a)return null;a=a.data;if("string"==typeof a)return a;c=W.__instanceof(a,ac)?a:null;return null!=c?(c.position=0,c.readUTFBytes(c.length)):null},isLocal:function(a,c){null!=c&&W.__cast(c,String);return!0},
__class__:Ia});var Qa=function(a,c){c=c.split("u").join("");this.r=RegExp(a,c)};k.EReg=Qa;Qa.__name__=!0;Qa.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},replace:function(a,c){return a.replace(this.r,c)},__class__:Qa};var O=function(){};k.Err=O;O.__name__=!0;O.log=function(a,c){D.runscript=!1;D.errorinscript=!0;e.resizescreen(240,150);h.setfont(ra.DEFAULT,1);a==O.PRE_BRACKETMISMATCH?(Fa.error("ERROR: Bracket mismatch."),
Fa.error("(Missing a { or } bracket somewhere.)")):a==O.PRE_MISSINGUPDATE?Fa.error('ERROR: An "update()" function is required.'):a==O.PARSER_INIT?(Fa.error("PARSER ERROR in processing script file.",O.errorline),O.outputdetails(c)):a==O.PARSER_NEW?(Fa.error("RUNTIME ERROR (in function new())",O.errorline),O.outputdetails(c)):a==O.RUNTIME_INIT?(Fa.error("RUNTIME ERROR (in initial run)",O.errorline),O.outputdetails(c)):a==O.RUNTIME_UPDATE&&(Fa.error("RUNTIME ERROR",O.errorline),O.outputdetails(c));O.dumpstack&&
(O.dumpstack=!1,O.outputdetails([O.javastack]))};O.outputdetails=function(a){if(null!=a&&0<a.length)for(var c=0,d=a.length;c<d;){var q=c++;null!=a[q]&&Fa.error(na.htmlEscape(a[q]))}};O.getCharPosition=function(a,c){var d=Lb.ofString(a);ab.trace(c+"/"+d.length+"  "+a.length,{fileName:"Err.hx",lineNumber:62,className:"Err",methodName:"getCharPosition"});try{return d.getString(0,c).length}catch(q){return q instanceof K&&(q=q.val),a.length-1}};O.process=function(a){O.dumpstack=!1;var c=[];if(W.__instanceof(a,
Bd))return O.errorstart=O.getCharPosition(D.myscript,a.pmin),O.errorend=O.getCharPosition(D.myscript,a.pmax),O.errorstart>=D.myscript.length&&(O.errorstart=D.myscript.length-1),O.errorend>=D.myscript.length&&(O.errorend=D.myscript.length-1),ab.trace("ERRORHANDLE OBJECT :\n",{fileName:"Err.hx",lineNumber:88,className:"Err",methodName:"process",customParams:[a,"\nerrorhandle.e = \n{ \n0: "+a.e[0]+"\n1: "+a.e[1]+"\n2: "+a.e[2]+"\n3: "+a.e[3]+"\n}"]}),"EUnexpected"==a.e[0]?(O.geterrorline(),c.push('Unexpected "'+
a.e[2]+'" in line '+O.errorline+":")):"EInvalidAccess"==a.e[0]?(O.geterrorline(),c.push('Invalid access of "'+a.e[2]+'" in line '+O.errorline+":")):"EInvalidIterator"==a.e[0]?(O.geterrorline(!1),c.push('Invalid iterator "'+a.e[2]+'" in line '+O.errorline+":")):"EInvalidChar"==a.e[0]?(O.geterrorline(!1),c.push('Invalid character "'+String.fromCharCode(a.e[2])+'" in line '+O.errorline+":")):"EUnterminatedComment"==a.e[0]?(O.geterrorline(!1),c.push("Whoops, you forgot to close a comment in line "+O.errorline+
":")):"EUnterminatedString"==a.e[0]?(O.geterrorline(!1),c.push("Unterminated string in line "+O.errorline+":")):"EUnknownVariable"==a.e[0]?(O.geterrorline(),c.push('Unknown variable "'+a.e[2]+'" in line '+O.errorline+":")):"EInvalidOp"==a.e[0]?(O.geterrorline(),c.push('Invalid operator "'+a.e[2]+'" in line '+O.errorline+":")):(ab.trace("ERRORHANDLE OBJECT :\n",{fileName:"Err.hx",lineNumber:131,className:"Err",methodName:"process",customParams:[a,"\nerrorhandle.e = \n{ \n0: "+a.e[0]+"\n1: "+a.e[1]+
"\n2: "+a.e[2]+"\n3: "+a.e[3]+"\n}"]}),ab.trace(a.e,{fileName:"Err.hx",lineNumber:132,className:"Err",methodName:"process"}),O.geterrorline(),c.push("Unknown error in line "+O.errorline+":")),c.push(O.errorstr),c;O.errorline=Fa.getlinenum(D.interpreter.curExpr.pmin);c.push("Unknown error type in line "+O.errorline+":");c.push("Error name: "+X.string(a.name));c.push("Error: "+X.string(a));c.push("Javascript Stack:");O.dumpstack=!0;O.javastack=a.stack;return c};O.geterrorline=function(a){null==a&&(a=
!0);var c=0,d=0,q=0,q="";O.errorline=-1;for(var b=O.charpos=0;b<D.myscript.length;){q=N.substr(D.myscript,b,1);if("\n"==q){if(-1<O.errorline){q=b-1;O.charpos=O.errorstart-d;for(c=D.myscript.substring(d,q);" "==eb.left(c,1)&&""!=c;)d++,c=D.myscript.substring(d,q);O.errorstr=a?'"'+c+'", characters '+(O.errorstart-d)+"-"+(O.errorend-d+1):'"'+c+'", from character '+(O.errorstart-d);break}else d=b+1;c++}b==O.errorstart&&(O.errorline=c+1);b++}};O.errorstr=null;O.errorline=null;O.errorstart=null;O.errorend=
null;O.charpos=null;O.javastack=null;var fa=function(){};k.Game=fa;fa.__name__=!0;fa.__properties__={set_foreground:"set_foreground",get_foreground:"get_foreground",set_background:"set_background",get_background:"get_background",set_homepage:"set_homepage",get_homepage:"get_homepage",set_title:"set_title",get_title:"get_title"};fa.time=null;fa.get_title=function(){return fa._title};fa.set_title=function(a){fa._title=a;Hb.call("settitle",a);return a};fa.get_homepage=function(){return fa._homepage};
fa.set_homepage=function(a){fa._homepage=a;Hb.call("sethomepage",a);return a};fa.set_background=function(a){fa._background=a;Hb.call("setbackgroundcolor",a);return a};fa.get_background=function(){return fa._background};fa.get_foreground=function(){return fa._foreground};fa.set_foreground=function(a){fa._foreground=a;Hb.call("setforegroundcolor",a);return a};fa.editor=function(){try{return Hb.call("isIDE")}catch(a){return a instanceof K&&(a=a.val),!1}};fa.prompt=function(a,c){return Hb.call("prompt",
a,c)};fa.save=function(a,c){Hb.call("saveKey_terryhasntupgraded",a,c)};fa.load=function(a){return Hb.call("loadKey_terryhasntupgraded",a)};fa.restart=function(){D.scriptfound()};var N=function(){};k.HxOverrides=N;N.__name__=!0;N.cca=function(a,c){var d=a.charCodeAt(c);return d!=d?void 0:d};N.substr=function(a,c,d){if(null!=c&&0!=c&&null!=d&&0>d)return"";null==d&&(d=a.length);0>c?(c=a.length+c,0>c&&(c=0)):0>d&&(d=a.length+d-c);return a.substr(c,d)};N.indexOf=function(a,c,d){var q=a.length;0>d&&(d+=
q,0>d&&(d=0));for(;d<q;){if(a[d]===c)return d;d++}return-1};N.remove=function(a,c){var d=N.indexOf(a,c,0);if(-1==d)return!1;a.splice(d,1);return!0};N.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var Ga=function(a,c){this.min=a;this.max=c};k.IntIterator=Ga;Ga.__name__=!0;Ga.prototype={hasNext:function(){return this.min<this.max},next:function(){return this.min++},__class__:Ga};var Ea=function(){this.variables=
new ba;this.locals=new ba;this.variables.set("null",null);this.variables.set("true",!0);this.variables.set("false",!1);this.variables.set("trace",function(a){ab.trace(X.string(a),{fileName:"hscript",lineNumber:0})});this.initOps()};k["hscript.Interp"]=Ea;Ea.__name__=!0;Ea.prototype={initOps:function(){var a=this;this.binops=new ba;this.binops.set("+",function(c,d){return a.expr(c)+a.expr(d)});this.binops.set("-",function(c,d){return a.expr(c)-a.expr(d)});this.binops.set("*",function(c,d){return a.expr(c)*
a.expr(d)});this.binops.set("/",function(c,d){return a.expr(c)/a.expr(d)});this.binops.set("%",function(c,d){return a.expr(c)%a.expr(d)});this.binops.set("&",function(c,d){return a.expr(c)&a.expr(d)});this.binops.set("|",function(c,d){return a.expr(c)|a.expr(d)});this.binops.set("^",function(c,d){return a.expr(c)^a.expr(d)});this.binops.set("<<",function(c,d){return a.expr(c)<<a.expr(d)});this.binops.set(">>",function(c,d){return a.expr(c)>>a.expr(d)});this.binops.set(">>>",function(c,d){return a.expr(c)>>>
a.expr(d)});this.binops.set("==",function(c,d){return a.expr(c)==a.expr(d)});this.binops.set("!=",function(c,d){return a.expr(c)!=a.expr(d)});this.binops.set(">=",function(c,d){return a.expr(c)>=a.expr(d)});this.binops.set("<=",function(c,d){return a.expr(c)<=a.expr(d)});this.binops.set(">",function(c,d){return a.expr(c)>a.expr(d)});this.binops.set("<",function(c,d){return a.expr(c)<a.expr(d)});this.binops.set("||",function(c,d){return!0==a.expr(c)||!0==a.expr(d)});this.binops.set("&&",function(c,
d){return!0==a.expr(c)&&!0==a.expr(d)});this.binops.set("=",u(this,this.assign));this.binops.set("...",function(c,d){return new Ga(a.expr(c),a.expr(d))});this.assignOp("+=",function(a,d){return a+d});this.assignOp("-=",function(a,d){return a-d});this.assignOp("*=",function(a,d){return a*d});this.assignOp("/=",function(a,d){return a/d});this.assignOp("%=",function(a,d){return a%d});this.assignOp("&=",function(a,d){return a&d});this.assignOp("|=",function(a,d){return a|d});this.assignOp("^=",function(a,
d){return a^d});this.assignOp("<<=",function(a,d){return a<<d});this.assignOp(">>=",function(a,d){return a>>d});this.assignOp(">>>=",function(a,d){return a>>>d})},assign:function(a,c){var d=this.expr(c),q=a.e;switch(q[1]){case 1:var q=q[2],b=this.locals.get(q);null==b?this.variables.set(q,d):b.r=d;break;case 5:b=q[3];d=this.set(this.expr(q[2]),b,d);break;case 16:b=q[3];this.expr(q[2])[this.expr(b)]=d;break;default:this.error(Ha.EInvalidOp("="))}return d},assignOp:function(a,c){var d=this;this.binops.set(a,
function(q,b){return d.evalAssignOp(a,c,q,b)})},evalAssignOp:function(a,c,d,q){var b=d.e;switch(b[1]){case 1:b=b[2];a=this.locals.get(b);c=c(this.expr(d),this.expr(q));null==a?this.variables.set(b,c):a.r=c;break;case 5:d=b[3];b=this.expr(b[2]);c=c(this.get(b,d),this.expr(q));c=this.set(b,d,c);break;case 16:a=b[3];d=this.expr(b[2]);b=this.expr(a);c=c(d[b],this.expr(q));d[b]=c;break;default:return this.error(Ha.EInvalidOp(a))}return c},increment:function(a,c,d){this.curExpr=a;var q=a.e;switch(q[1]){case 1:a=
q[2];var q=this.locals.get(a),b;b=null==q?this.variables.get(a):q.r;c?(b+=d,null==q?this.variables.set(a,b):q.r=b):null==q?this.variables.set(a,b+d):q.r=b+d;return b;case 5:return a=q[3],q=this.expr(q[2]),b=this.get(q,a),c?(b+=d,this.set(q,a,b)):this.set(q,a,b+d),b;case 16:return b=q[3],a=this.expr(q[2]),q=this.expr(b),b=a[q],c?(b+=d,a[q]=b):a[q]=b+d,b;default:return this.error(Ha.EInvalidOp(0<d?"++":"--"))}},execute:function(a){this.depth=0;this.locals=new ba;this.declared=[];return this.exprReturn(a)},
exprReturn:function(a){try{return this.expr(a)}catch(c){if(c instanceof K&&(c=c.val),W.__instanceof(c,Mb))switch(c[1]){case 0:throw new K("Invalid break");case 1:throw new K("Invalid continue");case 2:return c[2]}else throw c;}return null},duplicate:function(a){for(var c=new ba,d=a.keys();d.hasNext();){var q=d.next(),b;b=null!=ad[q]?a.getReserved(q):a.h[q];null!=ad[q]?c.setReserved(q,b):c.h[q]=b}return c},restore:function(a){for(;this.declared.length>a;){var c=this.declared.pop();this.locals.set(c.n,
c.old)}},error:function(a){throw new K(new Bd(a,this.curExpr.pmin,this.curExpr.pmax));},resolve:function(a){var c=this.locals.get(a);if(null!=c)return c.r;c=this.variables.get(a);null!=c||this.variables.exists(a)||this.error(Ha.EUnknownVariable(a));return c},expr:function(a){var c=this;this.curExpr=a;a=a.e;switch(a[1]){case 0:a=a[2];switch(a[1]){case 0:return a[2];case 1:return a[2];case 2:return a[2]}break;case 1:return this.resolve(a[2]);case 2:var d=a[4];a=a[2];this.declared.push({n:a,old:this.locals.get(a)});
d={r:null==d?null:this.expr(d)};this.locals.set(a,d);break;case 3:return this.expr(a[2]);case 4:a=a[2];for(var d=this.declared.length,q=null,b=0;b<a.length;)q=a[b],++b,q=this.expr(q);this.restore(d);return q;case 5:return d=a[3],this.get(this.expr(a[2]),d);case 6:return d=a[4],b=a[3],a=a[2],q=this.binops.get(a),null==q&&this.error(Ha.EInvalidOp(a)),q(b,d);case 7:d=a[4];b=a[3];a=a[2];switch(a){case "!":return!0!=this.expr(d);case "-":return-this.expr(d);case "++":return this.increment(d,b,1);case "--":return this.increment(d,
b,-1);case "~":return~this.expr(d);default:this.error(Ha.EInvalidOp(a))}break;case 8:d=a[3];b=a[2];a=[];for(q=0;q<d.length;){var g=d[q];++q;a.push(this.expr(g))}d=b.e;switch(d[1]){case 5:return b=d[3],d=this.expr(d[2]),null==d&&this.error(Ha.EInvalidAccess(b)),this.fcall(d,b,a);default:return this.call(null,this.expr(b),a)}case 9:d=a[4];b=a[3];if(!0==this.expr(a[2]))return this.expr(b);if(null==d)break;else return this.expr(d);case 10:this.whileLoop(a[2],a[3]);break;case 11:this.forLoop(a[2],a[3],
a[4]);break;case 12:throw new K(Mb.SBreak);case 13:throw new K(Mb.SContinue);case 15:throw a=a[2],new K(Mb.SReturn(null==a?null:this.expr(a)));case 14:var e=a[4],f=a[3],h=a[2],k=this.duplicate(this.locals),m=this,l=0;for(a=0;a<h.length;)d=h[a],++a,d.opt||l++;a=ma.makeVarArgs(function(a){if(a.length!=h.length){if(a.length<l)throw a="Invalid number of parameters. Got "+a.length+", required "+l,null!=e&&(a+=" for function '"+e+"'"),new K(a);for(var d=[],H=a.length-l,q=0,b=0;b<h.length;){var $b=h[b];
++b;$b.opt?0<H?(d.push(a[q++]),H--):d.push(null):d.push(a[q++])}a=d}d=m.locals;H=m.depth;m.depth++;m.locals=m.duplicate(k);q=0;for(b=h.length;q<b;)$b=q++,m.locals.set(h[$b].name,{r:a[$b]});a=null;if(c.inTry)try{a=m.exprReturn(f)}catch(g){throw g instanceof K&&(g=g.val),m.locals=d,m.depth=H,new K(g);}else a=m.exprReturn(f);m.locals=d;m.depth=H;return a});null!=e&&(0==this.depth?this.variables.set(e,a):(this.declared.push({n:e,old:this.locals.get(e)}),d={r:a},this.locals.set(e,d),null!=ad[e]?k.setReserved(e,
d):k.h[e]=d));return a;case 17:a=a[2];d=[];for(b=0;b<a.length;)q=a[b],++b,d.push(this.expr(q));return d;case 16:return d=a[3],this.expr(a[2])[this.expr(d)];case 18:d=a[3];a=a[2];b=[];for(q=0;q<d.length;)g=d[q],++q,b.push(this.expr(g));return this.cnew(a,b);case 19:throw new K(this.expr(a[2]));case 20:var d=a[5],b=a[3],y=a[2];a=this.declared.length;q=this.inTry;try{return this.inTry=!0,g=this.expr(y),this.restore(a),this.inTry=q,g}catch(r){r instanceof K&&(r=r.val);if(W.__instanceof(r,Mb))throw a=
r,this.inTry=q,new K(a);g=r;this.restore(a);this.inTry=q;this.declared.push({n:b,old:this.locals.get(b)});this.locals.set(b,{r:g});d=this.expr(d);this.restore(a);return d}case 21:a=a[2];d={};for(b=0;b<a.length;)q=a[b],++b,this.set(d,q.name,this.expr(q.e));return d;case 22:return d=a[4],b=a[3],!0==this.expr(a[2])?this.expr(b):this.expr(d);case 23:d=a[4];b=a[3];a=this.expr(a[2]);q=!1;for(g=0;g<b.length;){y=b[g];++g;for(var u=0,t=y.values;u<t.length;){var v=t[u];++u;if(this.expr(v)==a){q=!0;break}}if(q){a=
this.expr(y.expr);break}}q||(a=null==d?null:this.expr(d));return a}return null},whileLoop:function(a,c){var d=this.declared.length;try{for(;!0==this.expr(a);)try{this.expr(c)}catch(q){if(q instanceof K&&(q=q.val),W.__instanceof(q,Mb))switch(q[1]){case 0:throw"__break__";case 2:throw new K(q);}else throw q;}}catch(b){if("__break__"!=b)throw b;}this.restore(d)},makeIterator:function(a){try{a=A(a)()}catch(c){c instanceof K&&(c=c.val)}null!=a.hasNext&&null!=a.next||this.error(Ha.EInvalidIterator(a));
return a},forLoop:function(a,c,d){var q=this.declared.length;this.declared.push({n:a,old:this.locals.get(a)});c=this.makeIterator(this.expr(c));try{for(;c.hasNext();){var b={r:c.next()};this.locals.set(a,b);try{this.expr(d)}catch(g){if(g instanceof K&&(g=g.val),W.__instanceof(g,Mb))switch(g[1]){case 0:throw"__break__";case 2:throw new K(g);}else throw g;}}}catch(e){if("__break__"!=e)throw e;}this.restore(q)},get:function(a,c){null==a&&this.error(Ha.EInvalidAccess(c));return ma.field(a,c)},set:function(a,
c,d){null==a&&this.error(Ha.EInvalidAccess(c));return a[c]=d},fcall:function(a,c,d){return this.call(a,ma.field(a,c),d)},call:function(a,c,d){return ma.callMethod(a,c,d)},cnew:function(a,c){var d=db.resolveClass(a);null==d&&(d=this.resolve(a));return db.createInstance(d,c)},__class__:Ea};var Tb=function(){Ea.call(this)};k.InterpExtended=Tb;Tb.__name__=!0;Tb.__super__=Ea;Tb.prototype=l(Ea.prototype,{get:function(a,c){if(null==a)throw new K(Ha.EInvalidAccess(c));return ma.getProperty(a,c)},set:function(a,
c,d){if(null==a)throw new K(Ha.EInvalidAccess(c));ma.setProperty(a,c,d);return d},__class__:Tb});var uc=function(){};k.Lambda=uc;uc.__name__=!0;uc.count=function(a,c){var d=0;if(null==c)for(var q=A(a)();q.hasNext();)q.next(),d++;else for(q=A(a)();q.hasNext();){var b=q.next();c(b)&&d++}return d};var bc=function(){this.length=0};k.List=bc;bc.__name__=!0;bc.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=
a);this.length++},pop:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];null==this.h&&(this.q=null);this.length--;return a},iterator:function(){return new bd(this.h)},__class__:bc};var bd=function(a){this.head=a;this.val=null};k["_List.ListIterator"]=bd;bd.__name__=!0;bd.prototype={hasNext:function(){return null!=this.head},next:function(){this.val=this.head[0];this.head=this.head[1];return this.val},__class__:bd};var Ya=f.Webbridge=function(){};k.Webbridge=Ya;Ya.__name__=!0;
Ya.prototype={runScript:function(a){D.readytogo&&(D.myscript=a,D.loadwhenready=!0)},get_background_colour:function(){return fa._background},get_foreground_colour:function(){return fa._foreground},get_title:function(){return fa._title},get_homepage:function(){return fa._homepage},stop:function(){e.resizescreen(240,150);e.rotation(0);e.scale(1,1);e.imagecolor(Ra.WHITE);h.setfont(ra.DEFAULT,1);D.cleanupimages();h.cleartextcache();e.clearscreeneachframe=!0;D.scriptloaded=!1;D.runscript=!1;D.errorinscript=
!1;D.pausescript=!1},__class__:Ya};var Lc=function(){this.firstrun=!0,D.init(),this.firstrun=!1};k.Main=Lc;Lc.__name__=!0;Lc.prototype={update:function(){D.update()},__class__:Lc};Math.__name__=!0;var Nc=function(){};k.MusicDat=Nc;Nc.__name__=!0;Nc.prototype={__class__:Nc};var L=function(){};k.MusicEngine=L;L.__name__=!0;L.update=function(){if(L.playing){var a=L.dat.notes.length*L.dat.patternLength*L.dat.cellDuration;L.playTick++;if(L.musicLoop)L.playTick%=a;else if(L.playTick==a){L.playing=!1;return}var a=
L.playTick/L.dat.cellDuration|0,c=a/L.dat.patternLength|0;L.selectedSequence=c;a-=L.dat.patternLength*c;0==L.playTick%L.dat.cellDuration&&L.TryPlayNote(a)}};L.DoPlayNote=function(a,c){var d=Math.pow(2,(c[0]-61)/12);Ja.playnote(L.dat.instruments[a],d,c[1]*L.dat.cellDuration/30,L.vol*c[3]/L.maxVol)};L.TryPlayNote=function(a){for(var c=0;5>c;)for(var d=c++,q=L.dat.notes[L.selectedSequence][d],b=0;b<q.length;){var g=q[b];++b;g[2]==a&&L.DoPlayNote(d,g)}};L.stopmusic=function(){L.stopPlay()};L.playmusic=
function(a){L.playing=!0;L.loadDat(a);L.startPlay()};L.startPlay=function(){L.playing=!0;L.playTick=-1};L.stopPlay=function(){L.playing=!1};L.dat=null;L.stripWhitespace=function(a){for(var c="",d=0,q=a.length;d<q;){var b=d++,b=a.charAt(b);" "!=b&&"\t"!=b&&"\n"!=b&&(c+=b)}return c};L.loadDat=function(a){a=L.stripWhitespace(a);a=L.unmakeRLE(a);for(var c=[],d=0,q=a.length;d<q;){var b=d++,b=a.charAt(b);c.push(N.indexOf(L.B62,b,0))}L.dat=new Nc;a=0;L.dat.patternLength=c[a];a++;L.dat.cellDuration=c[a];
L.dat.instruments=[];for(d=0;5>d;){d++;for(var q=0,b=1,g=0;5>g;)g++,a++,q+=b*c[a],b*=62;L.dat.instruments.push(q)}d=[];a++;q=c[a];d.push(c[a]);L.dat.notes=[];for(b=0;b<q;){b++;for(var g=[[],[],[],[],[]],e=0;5>e;){var f=e++;a++;var h=c[a];d.push(c[a]);for(var f=g[f],k=0;k<h;){k++;a++;var m=c[a];d.push(c[a]);a++;var l=c[a];d.push(c[a]);f.push([m+62*l])}for(k=1;4>k;)for(k++,m=0;m<h;)l=m++,a++,f[l].push(c[a]),d.push(c[a])}L.dat.notes.push(g)}};L.saveDat=function(){var a=[];a.push(L.dat.patternLength);
a.push(L.dat.cellDuration);for(var c=0;5>c;)for(var d=c++,d=L.dat.instruments[d],q=0;5>q;){var b=q++,b=Math.pow(62,b);a.push((d/b|0)%62)}a.push(L.dat.notes.length);[].push(a[a.length-1]);c=L.dat.notes;for(d=0;d<c.length;)for(q=c[d],++d,b=0;5>b;){var g=b++,g=q[g];a.push(g.length);for(var e=0;e<g.length;){var f=g[e];++e;a.push(f[0]%62);a.push((f[0]/62|0)%62)}for(e=1;4>e;)for(var f=e++,h=0;h<g.length;){var k=g[h];++h;a.push(k[f])}}c="";for(d=0;d<a.length;)q=a[d],++d,c+=L.B62[q];return c=L.makeRLE(c)};
L.makeRLE=function(a){for(var c="",d=a.charAt(0),q=1,b=1,g=a.length;b<g;){var e=b++,e=a.charAt(e);e==d?q++:(1<q&&(c+=q),c+=d,d=e,q=1)}1<q&&(c+=q);return c+d};L.unmakeRLE=function(a){for(var c="",d=0,q=0;q<a.length;){for(var b=a.charAt(q);"0"==b||"1"==b||"2"==b||"3"==b||"4"==b||"5"==b||"6"==b||"7"==b||"8"==b||"9"==b;)d=10*d+X.parseInt(b),q++,b=a.charAt(q);0==d&&(d=1);for(var g=0;g<d;)g++,c+=b;q++;a.charAt(q);d=0}return c};var Nb=function(){Ba.call(this);var a=this.getBackgroundColor(),c=0;70>0.299*
(a>>16&255)+0.587*(a>>8&255)+0.114*(a&255)&&(c=16777215);var a=this.getHeight()/2-3.5,d=this.getWidth()-60;this.outline=new Ba;this.outline.get_graphics().beginFill(c,0.07);this.outline.get_graphics().drawRect(0,0,d,7);this.outline.set_x(30);this.outline.set_y(a);this.addChild(this.outline);this.progress=new Ba;this.progress.get_graphics().beginFill(c,0.35);this.progress.get_graphics().drawRect(0,0,d-4,3);this.progress.set_x(32);this.progress.set_y(a+2);this.progress.set_scaleX(0);this.addChild(this.progress)};
k.NMEPreloader=Nb;Nb.__name__=!0;Nb.__super__=Ba;Nb.prototype=l(Ba.prototype,{getBackgroundColor:function(){return 0},getHeight:function(){return La.current.stage.stageHeight},getWidth:function(){return La.current.stage.stageWidth},onInit:function(){},onLoaded:function(){this.dispatchEvent(new Q(Q.COMPLETE))},onUpdate:function(a,c){var d=a/c;1<d&&(d=1);this.progress.set_scaleX(d)},__class__:Nb});var Kc=function(){Nb.call(this);this.screenwidth=240;this.screenheight=150;this.stagewidth=240;this.stageheight=
150;this.backcol=this.RGB(0,0,0);this.frontcol=this.RGB(128,128,128);this.loadercol=this.RGB(196,196,196);this.loadingbarwidth=125;this.loadingbarheight=6;this.ct=new pc(0,0,0,1,255,255,255,1);this.temprect=new ya;this.tl=new Na(0,0);this.tpoint=new Na(0,0);this.glyphletters=new ba;this.glyphletters.set("A","4 010 101 111 101 101".split(" "));this.glyphletters.set("B","4 110 101 110 101 110".split(" "));this.glyphletters.set("C","4 011 100 100 100 011".split(" "));this.glyphletters.set("D","4 110 101 101 101 110".split(" "));
this.glyphletters.set("E","4 111 100 110 100 111".split(" "));this.glyphletters.set("F","4 111 100 110 100 100".split(" "));this.glyphletters.set("G","4 011 100 101 101 011".split(" "));this.glyphletters.set("H","4 101 101 111 101 101".split(" "));this.glyphletters.set("I","211111".split(""));this.glyphletters.set("J","3 01 01 01 01 11".split(" "));this.glyphletters.set("K","4 101 101 110 101 101".split(" "));this.glyphletters.set("L","4 100 100 100 100 111".split(" "));this.glyphletters.set("M",
"6 10001 11011 10101 10001 10001".split(" "));this.glyphletters.set("N","5 1001 1101 1111 1011 1001".split(" "));this.glyphletters.set("O","4 010 101 101 101 010".split(" "));this.glyphletters.set("P","4 110 101 110 100 100".split(" "));this.glyphletters.set("Q","4 010 101 101 101 011 001".split(" "));this.glyphletters.set("R","4 110 101 110 101 101".split(" "));this.glyphletters.set("S","4 011 100 010 001 110".split(" "));this.glyphletters.set("T","4 111 010 010 010 010".split(" "));this.glyphletters.set("U",
"4 101 101 101 101 010".split(" "));this.glyphletters.set("V","4 101 101 101 011 001".split(" "));this.glyphletters.set("W","6 10001 10001 10101 11011 10001".split(" "));this.glyphletters.set("X","4 101 101 010 101 101".split(" "));this.glyphletters.set("Y","4 101 101 111 010 010".split(" "));this.glyphletters.set("Z","4 111 001 010 100 111".split(" "));this.glyphletters.set(" ",["4"]);this.backbuffer=new fb(this.screenwidth,this.screenheight,!1,0);this.screenbuffer=new fb(this.screenwidth,this.screenheight,
!1,0);this.screen=new ke(this.screenbuffer);this.screen.set_width(this.stagewidth);this.screen.set_height(this.stageheight);this.addChild(this.screen);this.startgame=!1;this.gfxstage=La.current.stage;this.onResize(null);this.gfxstage.addEventListener(Q.RESIZE,u(this,this.onResize))};k.Preloader=Kc;Kc.__name__=!0;Kc.__super__=Nb;Kc.prototype=l(Nb.prototype,{onResize:function(a){a=X["int"](Math.min(Math.floor(this.gfxstage.stageWidth/this.screenwidth),Math.floor(this.gfxstage.stageHeight/this.screenheight)));
this.gfxstage.set_scaleX(a);this.gfxstage.set_scaleY(a);this.gfxstage.set_x((this.gfxstage.stageWidth-this.screenwidth*a)/2);this.gfxstage.set_y((this.gfxstage.stageHeight-this.screenheight*a)/2)},RGB:function(a,c,d){return d|c<<8|a<<16},onLoaded:function(){this.gfxstage.removeEventListener(Q.RESIZE,u(this,this.onResize));this.contains(this.screen)&&this.removeChild(this.screen);this.dispatchEvent(new Q(Q.COMPLETE))},fillrect:function(a,c,d,q,b){this.temprect.x=a;this.temprect.y=c;this.temprect.width=
d;this.temprect.height=q;this.backbuffer.fillRect(this.temprect,b)},pset:function(a,c){this.temprect.x=this.psetx+a;this.temprect.y=this.psety+c;this.temprect.width=1;this.temprect.height=1;this.backbuffer.fillRect(this.temprect,16777215)},glyphprint:function(a,c,d){this.psetx=a;this.psety=c;a=0;for(c=d.length;a<c;){var q=a++;this.drawgylph(N.substr(d,q,1).toUpperCase())}},drawgylph:function(a){if(this.glyphletters.exists(a)){a=this.glyphletters.get(a);for(var c=1,d=a.length;c<d;)for(var q=c++,b=
0,g=a[q].length;b<g;){var e=b++;"1"==N.substr(a[q],e,1)&&(this.pset(e,2*q),this.pset(e,2*q+1))}this.psetx+=X.parseInt(a[0])}},onUpdate:function(a,c){var d=a/c;1<=d&&(this.startgame=!0);this.backbuffer.fillRect(this.backbuffer.rect,this.backcol);this.fillrect(this.screenwidth/2-this.loadingbarwidth/2-2|0,(this.screenheight/2-13|0)-10,this.loadingbarwidth+4,this.loadingbarheight+6,this.frontcol);this.fillrect(this.screenwidth/2-this.loadingbarwidth/2|0,(this.screenheight/2-11|0)-10,this.loadingbarwidth,
this.loadingbarheight+2,this.backcol);this.fillrect((this.screenwidth/2-this.loadingbarwidth/2|0)+1,(this.screenheight/2-11|0)+1-10,(d*this.loadingbarwidth|0)-2,this.loadingbarheight,this.loadercol);this.glyphprint((this.screenwidth/2|0)-28,(this.screenheight/2-12|0)+this.loadingbarheight,"LOADING ZEEDONK");this.screenbuffer.lock();this.screenbuffer.copyPixels(this.backbuffer,this.backbuffer.rect,this.tl,null,null,!1);this.screenbuffer.unlock();this.backbuffer.lock();this.backbuffer.fillRect(this.backbuffer.rect,
0);this.backbuffer.unlock();if(this.startgame)this.onLoaded()},__class__:Kc});var ma=function(){};k.Reflect=ma;ma.__name__=!0;ma.hasField=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)};ma.field=function(a,c){try{return a[c]}catch(d){return d instanceof K&&(d=d.val),null}};ma.getProperty=function(a,c){var d;return null==a?null:a.__properties__&&(d=a.__properties__["get_"+c])?a[d]():a[c]};ma.setProperty=function(a,c,d){var q;if(a.__properties__&&(q=a.__properties__["set_"+c]))a[q](d);
else a[c]=d};ma.callMethod=function(a,c,d){return c.apply(a,d)};ma.fields=function(a){var c=[];if(null!=a){var d=Object.prototype.hasOwnProperty,q;for(q in a)"__id__"!=q&&"hx__closures__"!=q&&d.call(a,q)&&c.push(q)}return c};ma.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};ma.compare=function(a,c){return a==c?0:a>c?1:-1};ma.compareMethods=function(a,c){return a==c?!0:ma.isFunction(a)&&ma.isFunction(c)?a.scope==c.scope&&a.method==c.method&&null!=a.method:!1};ma.isEnumValue=
function(a){return null!=a&&null!=a.__enum__};ma.makeVarArgs=function(a){return function(){var c=Array.prototype.slice.call(arguments);return a(c)}};var eb=function(){};k.S=eb;eb.__name__=!0;eb.isalpha=function(a){a=a.toLowerCase();return N.cca(a,0)>=N.cca("a",0)&&N.cca(a,0)<=N.cca("z",0)||"_"==a?!0:!1};eb.isinstring=function(a,c,d){null==d&&(d=!1);var q=eb.positioninstring(a,c);if(-1!=q)if(d){if(0==q||!eb.isalpha(eb.mid(a,q-1))){if("."==eb.mid(a,q-1))return"."==eb.mid(a,q-2)?!0:!1;if('"'==eb.mid(a,
q-1))return!1;if(q+c.length>=a.length||!eb.isalpha(eb.mid(a,q+c.length))&&!eb.isnumber(eb.mid(a,q+c.length)))return!0}}else return!0;return!1};eb.positioninstring=function(a,c,d){null==d&&(d=0);return a.indexOf(c,d)};eb.mid=function(a,c,d){null==d&&(d=1);null==c&&(c=0);return 0>c?"":N.substr(a,c,d)};eb.left=function(a,c){null==c&&(c=1);return N.substr(a,0,c)};eb.isnumber=function(a){a=parseFloat(a);return isNaN(a)?!1:!0};var X=function(){};k.Std=X;X.__name__=!0;X.string=function(a){return W.__string_rec(a,
"")};X["int"]=function(a){return a|0};X.parseInt=function(a){var c=parseInt(a,10);0!=c||120!=N.cca(a,1)&&88!=N.cca(a,1)||(c=parseInt(a));return isNaN(c)?null:c};X.parseFloat=function(a){return parseFloat(a)};var qc=function(){this.b=""};k.StringBuf=qc;qc.__name__=!0;qc.prototype={add:function(a){this.b+=X.string(a)},addSub:function(a,c,d){this.b=null==d?this.b+N.substr(a,c,null):this.b+N.substr(a,c,d)},__class__:qc};var na=function(){};k.StringTools=na;na.__name__=!0;na.urlEncode=function(a){return encodeURIComponent(a)};
na.htmlEscape=function(a,c){a=a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;");return c?a.split('"').join("&quot;").split("'").join("&#039;"):a};na.startsWith=function(a,c){return a.length>=c.length&&N.substr(a,0,c.length)==c};na.isSpace=function(a,c){var d=N.cca(a,c);return 8<d&&14>d||32==d};na.ltrim=function(a){for(var c=a.length,d=0;d<c&&na.isSpace(a,d);)d++;return 0<d?N.substr(a,d,c-d):a};na.rtrim=function(a){for(var c=a.length,d=0;d<c&&na.isSpace(a,c-d-1);)d++;return 0<
d?N.substr(a,0,c-d):a};na.trim=function(a){return na.ltrim(na.rtrim(a))};na.replace=function(a,c,d){return a.split(c).join(d)};na.hex=function(a,c){var d="";do d="0123456789ABCDEF".charAt(a&15)+d,a>>>=4;while(0<a);if(null!=c)for(;d.length<c;)d="0"+d;return d};na.fastCodeAt=function(a,c){return a.charCodeAt(c)};var db=function(){};k.Type=db;db.__name__=!0;db.resolveClass=function(a){a=k[a];return null!=a&&a.__name__?a:null};db.resolveEnum=function(a){a=k[a];return null!=a&&a.__ename__?a:null};db.createInstance=
function(a,c){switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6]);case 8:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7]);default:throw new K("Too many arguments");}};db.getClassFields=function(a){a=ma.fields(a);N.remove(a,"__name__");
N.remove(a,"__interfaces__");N.remove(a,"__properties__");N.remove(a,"__super__");N.remove(a,"__meta__");N.remove(a,"prototype");return a};db.enumEq=function(a,c){if(a==c)return!0;try{if(a[0]!=c[0])return!1;for(var d=2,q=a.length;d<q;){var b=d++;if(!db.enumEq(a[b],c[b]))return!1}var g=a.__enum__;if(g!=c.__enum__||null==g)return!1}catch(e){return e instanceof K&&(e=e.val),!1}return!0};var Ob={};k["_UInt.UInt_Impl_"]=Ob;Ob.__name__=!0;Ob.toFloat=function(a){return 0>a?4294967296+a:a+0};var Fa=function(){};
k.Webdebug=Fa;Fa.__name__=!0;Fa.getlinenum=function(a){var c=0,d="";a=O.getCharPosition(D.myscript,a);for(var q=0;q<D.myscript.length;){d=N.substr(D.myscript,q,1);"\n"==d&&c++;if(q==a)return c+1;q++}return 0};Fa.log=function(a,c,d,q,b,g,e,f){var h=[],k=0;if(null!=D.interpreter){try{k=Fa.getlinenum(D.interpreter.curExpr.pmin)}catch(m){m instanceof K&&(m=m.val),k=0}0==k?(h.push(a),null!=c&&h.push(c),null!=d&&h.push(d),null!=q&&h.push(q),null!=b&&h.push(b),null!=g&&h.push(g),null!=e&&h.push(e),null!=
f&&h.push(f),ab.trace(h,{fileName:"Webdebug.hx",lineNumber:47,className:"Webdebug",methodName:"log"}),Hb.call("consolePrintArray",h,!0)):(h.push(a),null!=c&&h.push(c),null!=d&&h.push(d),null!=q&&h.push(q),null!=b&&h.push(b),null!=g&&h.push(g),null!=e&&h.push(e),null!=f&&h.push(f),ab.trace(h,{fileName:"Webdebug.hx",lineNumber:63,className:"Webdebug",methodName:"log",customParams:[k]}),Hb.call("consolePrintWithLinesArray",h,k,!0))}else ab.trace("!CONSOLE NOT AVAILABLE YET!",{fileName:"Webdebug.hx",
lineNumber:70,className:"Webdebug",methodName:"log"}),h.push(a),null!=c&&h.push(c),null!=d&&h.push(d),null!=q&&h.push(q),null!=b&&h.push(b),null!=g&&h.push(g),null!=e&&h.push(e),null!=f&&h.push(f),ab.trace(h,{fileName:"Webdebug.hx",lineNumber:79,className:"Webdebug",methodName:"log"})};Fa.error=function(a,c){Hb.call("logError",a,c,!0,O.charpos)};Fa.warn=function(a,c){Hb.call("logWarning",a,c,!0)};Fa.warn_noline=function(a){Hb.call("logWarningNoLine",a,!0)};var ra=function(){};k.Webfont=ra;ra.__name__=
!0;var Ja=function(){};k.Webmusic=Ja;Ja.__name__=!0;Ja.__properties__={set_musicloop:"set_musicloop",get_musicloop:"get_musicloop",set_musicvol:"set_musicvol",get_musicvol:"get_musicvol"};Ja.playsound=function(a,c){null==c&&(c=1);Hb.call("playSound",a,c)};Ja.playnote=function(a,c,d,q){Hb.call("playNote",a,c,d,q)};Ja.playmusic=function(a){L.playmusic(a)};Ja.stopmusic=function(){L.stopmusic()};Ja.set_musicvol=function(a){a=Math.max(a,0);a=Math.min(a,1);return L.vol=a};Ja.get_musicvol=function(){return L.vol};
Ja.get_musicloop=function(){return L.musicLoop};Ja.set_musicloop=function(a){return L.musicLoop=a};var D=function(){};k.Webscript=D;D.__name__=!0;D.myscript=null;D.loadedscript=null;D.parsedscript=null;D.parser=null;D.interpreter=null;D.scriptloaded=null;D.runscript=null;D.errorinscript=null;D.pausescript=null;D.initfunction=null;D.updatefunction=null;D.corecontrol=null;D.init=function(){D.scriptloaded=!1;D.runscript=!1;D.pausescript=!1;D.errorinscript=!1;h.cleartextcache();h.setfont(ra.ZERO4B11,
1);h.setfont(ra.C64,1);h.setfont(ra.COMIC,1);h.setfont(ra.CRYPT,1);h.setfont(ra.DOS,1);h.setfont(ra.GANON,1);h.setfont(ra.NOKIA,1);h.setfont(ra.OLDENGLISH,1);h.setfont(ra.PIXEL,1);h.setfont(ra.PRESSSTART,1);h.setfont(ra.RETROFUTURE,1);h.setfont(ra.ROMAN,1);h.setfont(ra.SPECIAL,1);h.setfont(ra.THIN,1);h.setfont(ra.TINY,1);h.setfont(ra.YOSTER,1);h.setfont(ra.DEFAULT,1);D.cleanupimages();try{var a=Hb.call("getScript");null!=a&&(D.loadscript(a),D.skipnextloadscript=!0)}catch(c){c instanceof K&&(c=c.val)}D.readytogo=
!0};D.cleanupimages=function(){e.clearimages();e.loadimagestring("__library_zebra","YKaaapZZZSaaaaaaaaaabeaaaaraaaacE6aaaEOaaavnaaac6avkFqaiHvkaquEHaac6aCabqauaauafaa");e.loadimagestring("__library_donkey","YKaaaks4f3iMeqaaaaeqaaabeaaacE6aafkCaabsEaaaac6aaaaEEE6akEE8acEECqaCakaakac6afabqa");e.resizeimage("__library_zebra",3);e.resizeimage("__library_donkey",3)};D.myLoader=null;D.loadfile=function(a){D.myLoader=new Ge;a=new rd(a);D.myLoader.addEventListener(Q.COMPLETE,D.onLoadComplete);D.myLoader.addEventListener(Oc.IO_ERROR,
D.onIOError);D.myLoader.load(a)};D.onIOError=function(a){ab.trace("test script not found.",{fileName:"Webscript.hx",lineNumber:107,className:"Webscript",methodName:"onIOError"})};D.onLoadComplete=function(a){D.myscript=lb.tostring(D.myLoader.data);D.scriptfound()};D.update=function(){if(D.errorinscript)h.setfont(ra.DEFAULT,1),e.clearscreen(e.rgb(32,0,0)),h.display(h.CENTER,h.CENTER,"ERROR! ERROR! ERROR!",Ra.RED);else if(D.loadwhenready)D.readytogo&&(D.loadwhenready=!1,D.loadscript(D.myscript));else if(D.scriptloaded){if(D.runscript&&
!D.pausescript){try{D.updatefunction()}catch(a){a instanceof K&&(a=a.val),O.log(O.RUNTIME_UPDATE,O.process(a))}L.update();fa.time++}}else fa.editor()?(D.counter+=1,0==D.counter%120&&(D.donkeyhop=10),60==D.counter%120&&(D.zebrahop=10),0<D.zebrahop&&D.zebrahop--,0<D.donkeyhop&&D.donkeyhop--,e.clearscreen(Ra.LIGHTBLUE),e.fillbox(0,e.screenheightmid,e.screenwidth,e.screenheightmid,Ra.GREEN),e.rotation(D.zebrahop,e.RIGHT,e.TOP),5<D.zebrahop?e.drawimage(e.CENTER+80,e.CENTER-15,"__library_donkey"):e.drawimage(e.CENTER+
80,e.CENTER-5-2*D.zebrahop,"__library_donkey"),e.rotation(-D.donkeyhop,e.LEFT,e.TOP),5<D.donkeyhop?e.drawimage(e.CENTER-80,e.CENTER-15,"__library_zebra"):e.drawimage(e.CENTER-80,e.CENTER-5-2*D.donkeyhop,"__library_zebra"),e.rotation(0),60>D.counter%120?e.fillcircle(e.screenwidthmid-60+D.counter%60*120/60,e.screenheightmid-30-30*Math.sin(D.counter%60*Math.PI/60),8,e.hsl(D.counter,0.75,0.5)):e.fillcircle(e.screenwidthmid+60-D.counter%60*120/60,e.screenheightmid-30-30*Math.sin(D.counter%60*Math.PI/60),
8,e.hsl(D.counter,0.75,0.5)),h.setfont(ra.PRESSSTART,1),h.display(h.CENTER,h.CENTER+50,"WAITING FOR SCRIPTFILE",Ra.WHITE),h.setfont(ra.DEFAULT,1),h.display(h.CENTER,e.screenheight-h.height()-10,"zeedonk beta v0.7",Ra.WHITE)):(e.clearscreen(Ra.BLACK),h.display(h.CENTER,e.screenheight-h.height()-24,"zeedonk beta v0.7",Ra.GRAY),h.display(h.CENTER,e.screenheight-h.height()-14,"loading script...",Ra.GRAY));e.showfps&&(D.oldfont=h.currentfont,D.oldfontsize=h.currentsize,h.setfont("pixel",1),-1<e.fps()&&
(h.align(h.RIGHT),h.display(e.screenwidth-4,1,"FPS: "+e.fps(),Ra.YELLOW)),h.align(h.LEFT),h.setfont(D.oldfont,D.oldfontsize))};D.$name=null;D.resetGlobalVariables=function(){L.stopmusic();L.vol=1;L.musicLoop=!0;x.resetKeys();e.rotation(0);e.scale(1,1);e._linethickness=1;e.imagecolor(Ra.WHITE);fa._title="zeedonk game";fa._homepage="http://www.zeedonk.net";fa._background=0;fa._foreground=16777215};D.loadscript=function(a){try{fa.editor()||Hb.call("onresize()")}catch(c){c instanceof K&&(c=c.val)}D.skipnextloadscript?
D.skipnextloadscript=!1:(D.myscript=a,D.scriptfound())};D.scriptfound=function(){D.resetGlobalVariables();D.corecontrol.reset();D.scriptloaded=!0;D.errorinscript=!1;D.pausescript=!1;D.parser=new Cd;D.parser.allowTypes=!1;D.interpreter=new Tb;fa.time=0;D.loadedscript=D.myscript.split("\n");D.interpreter.variables.set("Math",Math);D.interpreter.variables.set("Col",Ra);D.interpreter.variables.set("Convert",lb);D.interpreter.variables.set("Gfx",e);D.interpreter.variables.set("Input",x);D.interpreter.variables.set("Key",
t);D.interpreter.variables.set("Game",fa);D.interpreter.variables.set("Mouse",I);D.interpreter.variables.set("Music",Ja);D.interpreter.variables.set("Text",h);D.interpreter.variables.set("Font",ra);D.interpreter.variables.set("Random",ea);D.interpreter.variables.set("String",String);D.interpreter.variables.set("trace",Fa.log);D.interpreter.variables.set("Math.abs",e.fastAbs);h.setfont(ra.DEFAULT,1);h.cleartextcache();e.clearscreeneachframe=!0;e.skiprender=!1;D.runscript=!0;try{D.parsedscript=D.parser.parseString(D.myscript)}catch(a){a instanceof
K&&(a=a.val),O.log(O.PARSER_INIT,O.process(a))}if(D.runscript){try{D.interpreter.execute(D.parsedscript)}catch(c){c instanceof K&&(c=c.val),O.log(O.RUNTIME_INIT,O.process(c))}fa._title=D.interpreter.variables.get("title");null==fa._title&&(fa._title="Untitled");fa._homepage=D.interpreter.variables.get("homepage");null==fa._homepage&&(fa._homepage="");var d=D.interpreter.variables.get("background_color");fa._background=null==d?Ra.BLACK:lb.toint(d);null==D.interpreter.variables.get("foreground_color")?
fa._foreground=Ra.WHITE:fa._foreground=lb.toint(d);D.initfunction=D.interpreter.variables.get("new");D.updatefunction=D.interpreter.variables.get("update");if(null!=D.initfunction)try{D.initfunction()}catch(q){q instanceof K&&(q=q.val),O.log(O.PARSER_NEW,O.process(q))}null==D.updatefunction&&(e.clearscreeneachframe=!1,D.pausescript=!0)}};var $=function(a){this.nodeType=a;this.children=[];this.attributeMap=new ba};k.Xml=$;$.__name__=!0;$.parse=function(a){return td.parse(a)};$.createElement=function(a){var c=
new $($.Element);if(c.nodeType!=$.Element)throw new K("Bad node type, expected Element but found "+c.nodeType);c.nodeName=a;return c};$.createPCData=function(a){var c=new $($.PCData);if(c.nodeType==$.Document||c.nodeType==$.Element)throw new K("Bad node type, unexpected "+c.nodeType);c.nodeValue=a;return c};$.createCData=function(a){var c=new $($.CData);if(c.nodeType==$.Document||c.nodeType==$.Element)throw new K("Bad node type, unexpected "+c.nodeType);c.nodeValue=a;return c};$.createComment=function(a){var c=
new $($.Comment);if(c.nodeType==$.Document||c.nodeType==$.Element)throw new K("Bad node type, unexpected "+c.nodeType);c.nodeValue=a;return c};$.createDocType=function(a){var c=new $($.DocType);if(c.nodeType==$.Document||c.nodeType==$.Element)throw new K("Bad node type, unexpected "+c.nodeType);c.nodeValue=a;return c};$.createProcessingInstruction=function(a){var c=new $($.ProcessingInstruction);if(c.nodeType==$.Document||c.nodeType==$.Element)throw new K("Bad node type, unexpected "+c.nodeType);
c.nodeValue=a;return c};$.createDocument=function(){return new $($.Document)};$.prototype={get_nodeName:function(){if(this.nodeType!=$.Element)throw new K("Bad node type, expected Element but found "+this.nodeType);return this.nodeName},get:function(a){if(this.nodeType!=$.Element)throw new K("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.get(a)},set:function(a,c){if(this.nodeType!=$.Element)throw new K("Bad node type, expected Element but found "+this.nodeType);
this.attributeMap.set(a,c)},exists:function(a){if(this.nodeType!=$.Element)throw new K("Bad node type, expected Element but found "+this.nodeType);return this.attributeMap.exists(a)},elementsNamed:function(a){if(this.nodeType!=$.Document&&this.nodeType!=$.Element)throw new K("Bad node type, expected Element or Document but found "+this.nodeType);for(var c=[],d=0,q=this.children;d<q.length;){var b=q[d];++d;var g;if(g=b.nodeType==$.Element){g=void 0;if(b.nodeType!=$.Element)throw new K("Bad node type, expected Element but found "+
b.nodeType);g=b.nodeName;g=g==a}g&&c.push(b)}return N.iter(c)},firstElement:function(){if(this.nodeType!=$.Document&&this.nodeType!=$.Element)throw new K("Bad node type, expected Element or Document but found "+this.nodeType);for(var a=0,c=this.children;a<c.length;){var d=c[a];++a;if(d.nodeType==$.Element)return d}return null},addChild:function(a){if(this.nodeType!=$.Document&&this.nodeType!=$.Element)throw new K("Bad node type, expected Element or Document but found "+this.nodeType);null!=a.parent&&
a.parent.removeChild(a);this.children.push(a);a.parent=this},removeChild:function(a){if(this.nodeType!=$.Document&&this.nodeType!=$.Element)throw new K("Bad node type, expected Element or Document but found "+this.nodeType);return N.remove(this.children,a)?(a.parent=null,!0):!1},__class__:$,__properties__:{get_nodeName:"get_nodeName"}};var Fb=function(){};k["haxe.IMap"]=Fb;Fb.__name__=!0;var Pd=function(a,c){this.high=a;this.low=c};k["haxe._Int64.___Int64"]=Pd;Pd.__name__=!0;Pd.prototype={__class__:Pd};
var ab=function(){};k["haxe.Log"]=ab;ab.__name__=!0;ab.trace=function(a,c){W.__trace(a,c)};var Uc=function(a){var c=this;this.id=setInterval(function(){c.run()},a)};k["haxe.Timer"]=Uc;Uc.__name__=!0;Uc.delay=function(a,c){var d=new Uc(c);d.run=function(){d.stop();a()};return d};Uc.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:Uc};var cc=function(a){this.__b=""};k["haxe.Utf8"]=cc;cc.__name__=!0;cc.prototype={__class__:cc};var gb=function(){};
k["haxe.ds.BalancedTree"]=gb;gb.__name__=!0;gb.prototype={set:function(a,c){this.root=this.setLoop(a,c,this.root)},get:function(a){for(var c=this.root;null!=c;){var d=this.compare(a,c.key);if(0==d)return c.value;c=0>d?c.left:c.right}return null},setLoop:function(a,c,d){if(null==d)return new zb(null,a,c,null);var q=this.compare(a,d.key);if(0==q)return new zb(d.left,a,c,d.right,null==d?0:d._height);if(0>q)return a=this.setLoop(a,c,d.left),this.balance(a,d.key,d.value,d.right);a=this.setLoop(a,c,d.right);
return this.balance(d.left,d.key,d.value,a)},balance:function(a,c,d,q){var b;b=null==a?0:a._height;var g;g=null==q?0:q._height;return b>g+2?function(c){c=a.left;return null==c?0:c._height}(this)>=function(c){c=a.right;return null==c?0:c._height}(this)?new zb(a.left,a.key,a.value,new zb(a.right,c,d,q)):new zb(new zb(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new zb(a.right.right,c,d,q)):g>b+2?function(a){a=q.right;return null==a?0:a._height}(this)>function(a){a=q.left;return null==
a?0:a._height}(this)?new zb(new zb(a,c,d,q.left),q.key,q.value,q.right):new zb(new zb(a,c,d,q.left.left),q.left.key,q.left.value,new zb(q.left.right,q.key,q.value,q.right)):new zb(a,c,d,q,(b>g?b:g)+1)},compare:function(a,c){return ma.compare(a,c)},__class__:gb};var zb=function(a,c,d,q,b){null==b&&(b=-1);this.left=a;this.key=c;this.value=d;this.right=q;this._height=-1==b?(function(a){a=a.left;return null==a?0:a._height}(this)>function(a){a=a.right;return null==a?0:a._height}(this)?function(a){a=a.left;
return null==a?0:a._height}(this):function(a){a=a.right;return null==a?0:a._height}(this))+1:b};k["haxe.ds.TreeNode"]=zb;zb.__name__=!0;zb.prototype={__class__:zb};var Fc=function(){};k["haxe.ds.EnumValueMap"]=Fc;Fc.__name__=!0;Fc.__interfaces__=[Fb];Fc.__super__=gb;Fc.prototype=l(gb.prototype,{compare:function(a,c){var d=a[1]-c[1];if(0!=d)return d;var d=a.slice(2),q=c.slice(2);return 0==d.length&&0==q.length?0:this.compareArgs(d,q)},compareArgs:function(a,c){var d=a.length-c.length;if(0!=d)return d;
for(var d=0,q=a.length;d<q;){var b=d++,b=this.compareArg(a[b],c[b]);if(0!=b)return b}return 0},compareArg:function(a,c){return ma.isEnumValue(a)&&ma.isEnumValue(c)?this.compare(a,c):a instanceof Array&&null==a.__enum__&&c instanceof Array&&null==c.__enum__?this.compareArgs(a,c):ma.compare(a,c)},__class__:Fc});var qb=function(){this.h={}};k["haxe.ds.IntMap"]=qb;qb.__name__=!0;qb.__interfaces__=[Fb];qb.prototype={remove:function(a){if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=
[],c;for(c in this.h)this.h.hasOwnProperty(c)&&a.push(c|0);return N.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a]}}},__class__:qb};var ud=function(){this.h={};this.h.__keys__={}};k["haxe.ds.ObjectMap"]=ud;ud.__name__=!0;ud.__interfaces__=[Fb];ud.prototype={set:function(a,c){var d=a.__id__||(a.__id__=++ud.count);this.h[d]=c;this.h.__keys__[d]=a},remove:function(a){a=a.__id__;if(null==
this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],c;for(c in this.h.__keys__)this.h.hasOwnProperty(c)&&a.push(this.h.__keys__[c]);return N.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){var a=this.it.next();return this.ref[a.__id__]}}},__class__:ud};var Gc=function(a,c){this.map=a;this.keys=c;this.index=0;this.count=c.length};k["haxe.ds._StringMap.StringMapIterator"]=
Gc;Gc.__name__=!0;Gc.prototype={hasNext:function(){return this.index<this.count},next:function(){return this.map.get(this.keys[this.index++])},__class__:Gc};var ba=function(){this.h={}};k["haxe.ds.StringMap"]=ba;ba.__name__=!0;ba.__interfaces__=[Fb];ba.prototype={set:function(a,c){null!=ad[a]?this.setReserved(a,c):this.h[a]=c},get:function(a){return null!=ad[a]?this.getReserved(a):this.h[a]},exists:function(a){return null!=ad[a]?this.existsReserved(a):this.h.hasOwnProperty(a)},setReserved:function(a,
c){null==this.rh&&(this.rh={});this.rh["$"+a]=c},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},existsReserved:function(a){return null==this.rh?!1:this.rh.hasOwnProperty("$"+a)},remove:function(a){if(null!=ad[a]){a="$"+a;if(null==this.rh||!this.rh.hasOwnProperty(a))return!1;delete this.rh[a]}else{if(!this.h.hasOwnProperty(a))return!1;delete this.h[a]}return!0},keys:function(){var a=this.arrayKeys();return N.iter(a)},arrayKeys:function(){var a=[],c;for(c in this.h)this.h.hasOwnProperty(c)&&
a.push(c);if(null!=this.rh)for(c in this.rh)36==c.charCodeAt(0)&&a.push(c.substr(1));return a},iterator:function(){return new Gc(this,this.arrayKeys())},__class__:ba};var dc={};k["haxe.ds._Vector.Vector_Impl_"]=dc;dc.__name__=!0;dc.blit=function(a,c,d,q,b){for(var g=0;g<b;){var e=g++;d[q+e]=a[c+e]}};var Lb=function(a){this.length=a.byteLength;this.b=new rb(a);this.b.bufferValue=a;a.hxBytes=this;a.bytes=this.b};k["haxe.io.Bytes"]=Lb;Lb.__name__=!0;Lb.alloc=function(a){return new Lb(new le(a))};Lb.ofString=
function(a){for(var c=[],d=0;d<a.length;){var q=na.fastCodeAt(a,d++);55296<=q&&56319>=q&&(q=q-55232<<10|na.fastCodeAt(a,d++)&1023);127>=q?c.push(q):(2047>=q?c.push(192|q>>6):(65535>=q?c.push(224|q>>12):(c.push(240|q>>18),c.push(128|q>>12&63)),c.push(128|q>>6&63)),c.push(128|q&63))}return new Lb((new rb(c)).buffer)};Lb.prototype={getString:function(a,c){if(0>a||0>c||a+c>this.length)throw new K(ec.OutsideBounds);for(var d="",q=this.b,b=String.fromCharCode,g=a,e=a+c;g<e;){var f=q[g++];if(128>f){if(0==
f)break;d+=b(f)}else if(224>f)d+=b((f&63)<<6|q[g++]&127);else if(240>f)var h=q[g++],d=d+b((f&31)<<12|(h&127)<<6|q[g++]&127);else var h=q[g++],k=q[g++],f=(f&15)<<18|(h&127)<<12|(k&127)<<6|q[g++]&127,d=d+b((f>>10)+55232),d=d+b(f&1023|56320)}return d},toString:function(){return this.getString(0,this.length)},__class__:Lb};var va=function(){this.b=[]};k["haxe.io.BytesBuffer"]=va;va.__name__=!0;va.prototype={getBytes:function(){var a=new Lb((new rb(this.b)).buffer);this.b=null;return a},__class__:va};
var Dd=function(){};k["haxe.io.Input"]=Dd;Dd.__name__=!0;Dd.prototype={readByte:function(){throw new K("Not implemented");},readBytes:function(a,c,d){var q=d,b=a.b;if(0>c||0>d||c+d>a.length)throw new K(ec.OutsideBounds);for(;0<q;)b[c]=this.readByte(),c++,q--;return d},readFullBytes:function(a,c,d){for(;0<d;){var q=this.readBytes(a,c,d);c+=q;d-=q}},readString:function(a){var c=Lb.alloc(a);this.readFullBytes(c,0,a);return c.toString()},__class__:Dd};var cd=function(a,c,d){null==c&&(c=0);null==d&&(d=
a.length-c);if(0>c||0>d||c+d>a.length)throw new K(ec.OutsideBounds);this.b=a.b;this.pos=c;this.totlen=this.len=d};k["haxe.io.BytesInput"]=cd;cd.__name__=!0;cd.__super__=Dd;cd.prototype=l(Dd.prototype,{readByte:function(){if(0==this.len)throw new K(new me);this.len--;return this.b[this.pos++]},readBytes:function(a,c,d){if(0>c||0>d||c+d>a.length)throw new K(ec.OutsideBounds);if(0==this.len&&0<d)throw new K(new me);this.len<d&&(d=this.len);var q=this.b;a=a.b;for(var b=0;b<d;){var g=b++;a[c+g]=q[this.pos+
g]}this.pos+=d;this.len-=d;return d},__class__:cd});var He=function(){};k["haxe.io.Output"]=He;He.__name__=!0;var Ie=function(){this.b=new va};k["haxe.io.BytesOutput"]=Ie;Ie.__name__=!0;Ie.__super__=He;Ie.prototype=l(He.prototype,{writeByte:function(a){this.b.b.push(a)},getBytes:function(){return this.b.getBytes()},__class__:Ie});var me=function(){};k["haxe.io.Eof"]=me;me.__name__=!0;me.prototype={toString:function(){return"Eof"},__class__:me};var ec=k["haxe.io.Error"]={__ename__:!0,__constructs__:["Blocked",
"Overflow","OutsideBounds","Custom"]};ec.Blocked=["Blocked",0];ec.Blocked.toString=r;ec.Blocked.__enum__=ec;ec.Overflow=["Overflow",1];ec.Overflow.toString=r;ec.Overflow.__enum__=ec;ec.OutsideBounds=["OutsideBounds",2];ec.OutsideBounds.toString=r;ec.OutsideBounds.__enum__=ec;ec.Custom=function(a){a=["Custom",3,a];a.__enum__=ec;a.toString=r;return a};var Vc=function(){};k["haxe.io.FPHelper"]=Vc;Vc.__name__=!0;Vc.i32ToFloat=function(a){var c=a>>>23&255,d=a&8388607;return 0==d&&0==c?0:(1-(a>>>31<<1))*
(1+Math.pow(2,-23)*d)*Math.pow(2,c-127)};Vc.floatToI32=function(a){if(0==a)return 0;var c;c=0>a?-a:a;var d=Math.floor(Math.log(c)/0.6931471805599453);-127>d?d=-127:128<d&&(d=128);c=Math.round(8388608*(c/Math.pow(2,d)-1))&8388607;return(0>a?-2147483648:0)|d+127<<23|c};Vc.i64ToDouble=function(a,c){var d=(c>>20&2047)-1023,q=4294967296*(c&1048575)+2147483648*(a>>>31)+(a&2147483647);return 0==q&&-1023==d?0:(1-(c>>>31<<1))*(1+Math.pow(2,-52)*q)*Math.pow(2,d)};Vc.doubleToI64=function(a){var c=Vc.i64tmp;
if(0==a)c.low=0,c.high=0;else{var d;d=0>a?-a:a;var q=Math.floor(Math.log(d)/0.6931471805599453);d=4503599627370496*(d/Math.pow(2,q)-1);d=Math.round(d);c.low=d|0;c.high=(0>a?-2147483648:0)|q+1023<<20|d/4294967296|0}return c};var sb=function(a){switch(a){case ".":case "..":this.dir=a;this.file="";return}var c=a.lastIndexOf("/"),d=a.lastIndexOf("\\");c<d?(this.dir=N.substr(a,0,d),a=N.substr(a,d+1,null),this.backslash=!0):d<c?(this.dir=N.substr(a,0,c),a=N.substr(a,c+1,null)):this.dir=null;c=a.lastIndexOf(".");
-1!=c?(this.ext=N.substr(a,c+1,null),this.file=N.substr(a,0,c)):(this.ext=null,this.file=a)};k["haxe.io.Path"]=sb;sb.__name__=!0;sb.withoutExtension=function(a){a=new sb(a);a.ext=null;return a.toString()};sb.prototype={toString:function(){return(null==this.dir?"":this.dir+(this.backslash?"\\":"/"))+this.file+(null==this.ext?"":"."+this.ext)},__class__:sb};var Qd=function(a){cd.call(this,Lb.ofString(a))};k["haxe.io.StringInput"]=Qd;Qd.__name__=!0;Qd.__super__=cd;Qd.prototype=l(cd.prototype,{__class__:Qd});
var ff=function(a){this.__x=a};k["haxe.xml._Fast.NodeAccess"]=ff;ff.__name__=!0;ff.prototype={resolve:function(a){var c=this.__x.elementsNamed(a).next();if(null==c)throw c=this.__x.nodeType==$.Document?"Document":this.__x.get_nodeName(),new K(c+" is missing element "+a);return new ne(c)},__class__:ff};var gf=function(a){this.__x=a};k["haxe.xml._Fast.AttribAccess"]=gf;gf.__name__=!0;gf.prototype={resolve:function(a){if(this.__x.nodeType==$.Document)throw new K("Cannot access document attribute "+a);
var c=this.__x.get(a);if(null==c)throw new K(this.__x.get_nodeName()+" is missing attribute "+a);return c},__class__:gf};var hf=function(a){this.__x=a};k["haxe.xml._Fast.HasAttribAccess"]=hf;hf.__name__=!0;hf.prototype={resolve:function(a){if(this.__x.nodeType==$.Document)throw new K("Cannot access document attribute "+a);return this.__x.exists(a)},__class__:hf};var oe=function(a){this.__x=a};k["haxe.xml._Fast.HasNodeAccess"]=oe;oe.__name__=!0;oe.prototype={__class__:oe};var Rd=function(a){this.__x=
a};k["haxe.xml._Fast.NodeListAccess"]=Rd;Rd.__name__=!0;Rd.prototype={resolve:function(a){var c=new bc;for(a=this.__x.elementsNamed(a);a.hasNext();){var d=a.next();c.add(new ne(d))}return c},__class__:Rd};var ne=function(a){if(a.nodeType!=$.Document&&a.nodeType!=$.Element)throw new K("Invalid nodeType "+a.nodeType);this.x=a;this.node=new ff(a);this.nodes=new Rd(a);this.att=new gf(a);this.has=new hf(a);this.hasNode=new oe(a)};k["haxe.xml.Fast"]=ne;ne.__name__=!0;ne.prototype={__class__:ne};var td=
function(){};k["haxe.xml.Parser"]=td;td.__name__=!0;td.parse=function(a,c){null==c&&(c=!1);var d=$.createDocument();td.doParse(a,c,0,d);return d};td.doParse=function(a,c,d,q){null==d&&(d=0);for(var b=null,g=1,e=1,f=null,h=0,k=0,m=0,l=a.charCodeAt(d),y=new qc,r=1,u=-1;l==l;){switch(g){case 0:switch(l){case 10:case 13:case 9:case 32:break;default:g=e;continue}break;case 1:switch(l){case 60:g=0;e=2;break;default:h=d;g=13;continue}break;case 13:60==l?(y.addSub(a,h,d-h),e=$.createPCData(y.b),y=new qc,
q.addChild(e),k++,g=0,e=2):38==l&&(y.addSub(a,h,d-h),g=18,r=13,h=d+1);break;case 17:93==l&&93==a.charCodeAt(d+1)&&62==a.charCodeAt(d+2)&&(l=$.createCData(N.substr(a,h,d-h)),q.addChild(l),k++,d+=2,g=1);break;case 2:switch(l){case 33:if(91==a.charCodeAt(d+1)){d+=2;if("CDATA["!=N.substr(a,d,6).toUpperCase())throw new K("Expected <![CDATA[");d+=5;g=17}else if(68==a.charCodeAt(d+1)||100==a.charCodeAt(d+1)){if("OCTYPE"!=N.substr(a,d+2,6).toUpperCase())throw new K("Expected <!DOCTYPE");d+=8;g=16}else{if(45!=
a.charCodeAt(d+1)||45!=a.charCodeAt(d+2))throw new K("Expected \x3c!--");d+=2;g=15}h=d+1;break;case 63:g=14;h=d;break;case 47:if(null==q)throw new K("Expected node name");h=d+1;g=0;e=10;break;default:g=3;h=d;continue}break;case 3:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(d==h)throw new K("Expected node name");b=$.createElement(N.substr(a,h,d-h));q.addChild(b);k++;g=0;e=4;continue}break;case 4:switch(l){case 47:g=11;break;case 62:g=9;break;default:g=5;h=d;continue}break;
case 5:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(h==d)throw new K("Expected attribute name");f=N.substr(a,h,d-h);if(b.exists(f))throw new K("Duplicate attribute");g=0;e=6;continue}break;case 6:switch(l){case 61:g=0;e=7;break;default:throw new K("Expected =");}break;case 7:switch(l){case 34:case 39:y=new qc;g=8;h=d+1;u=l;break;default:throw new K('Expected "');}break;case 8:switch(l){case 38:y.addSub(a,h,d-h);g=18;r=8;h=d+1;break;case 62:if(c)throw new K("Invalid unescaped "+
String.fromCharCode(l)+" in attribute value");l==u&&(y.addSub(a,h,d-h),e=y.b,y=new qc,b.set(f,e),g=0,e=4);break;case 60:if(c)throw new K("Invalid unescaped "+String.fromCharCode(l)+" in attribute value");l==u&&(y.addSub(a,h,d-h),e=y.b,y=new qc,b.set(f,e),g=0,e=4);break;default:l==u&&(y.addSub(a,h,d-h),e=y.b,y=new qc,b.set(f,e),g=0,e=4)}break;case 9:h=d=td.doParse(a,c,d,b);g=1;break;case 11:switch(l){case 62:g=1;break;default:throw new K("Expected >");}break;case 12:switch(l){case 62:return 0==k&&
q.addChild($.createPCData("")),d;default:throw new K("Expected >");}case 10:if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)){if(h==d)throw new K("Expected node name");e=N.substr(a,h,d-h);if(q.nodeType!=$.Element)throw new K("Bad node type, expected Element but found "+q.nodeType);if(e!=q.nodeName)throw new K("Expected </"+function(a){if(q.nodeType!=$.Element)throw"Bad node type, expected Element but found "+q.nodeType;return q.nodeName}(this)+">");g=0;e=12;continue}break;
case 15:45==l&&45==a.charCodeAt(d+1)&&62==a.charCodeAt(d+2)&&(l=$.createComment(N.substr(a,h,d-h)),q.addChild(l),k++,d+=2,g=1);break;case 16:91==l?m++:93==l?m--:62==l&&0==m&&(l=$.createDocType(N.substr(a,h,d-h)),q.addChild(l),k++,g=1);break;case 14:63==l&&62==a.charCodeAt(d+1)&&(d++,l=N.substr(a,h+1,d-h-2),l=$.createProcessingInstruction(l),q.addChild(l),k++,g=1);break;case 18:if(59==l){h=N.substr(a,h,d-h);if(35==h.charCodeAt(0))h=120==h.charCodeAt(1)?X.parseInt("0"+N.substr(h,1,h.length-1)):X.parseInt(N.substr(h,
1,h.length-1)),y.b+=String.fromCharCode(h);else if(td.escapes.exists(h))y.add(td.escapes.get(h));else{if(c)throw new K("Undefined entity: "+h);y.b+=X.string("&"+h+";")}h=d+1;g=r}else if(!(97<=l&&122>=l||65<=l&&90>=l||48<=l&&57>=l||58==l||46==l||95==l||45==l)&&35!=l){if(c)throw new K("Invalid character in entity: "+String.fromCharCode(l));y.b+="&";y.addSub(a,h,d-h);d--;h=d+1;g=r}}l=na.fastCodeAt(a,++d)}1==g&&(h=d,g=13);if(13==g){if(d!=h||0==k)y.addSub(a,h,d-h),a=$.createPCData(y.b),q.addChild(a),k++;
return d}if(!c&&18==g&&13==r)return y.b+="&",y.addSub(a,h,d-h),a=$.createPCData(y.b),q.addChild(a),k++,d;throw new K("Unexpected end");};var Ra=function(){};k["haxegon.Col"]=Ra;Ra.__name__=!0;var lb=function(){};k["haxegon.Convert"]=lb;lb.__name__=!0;lb.tostring=function(a){return X.string(a)};lb.toint=function(a){return X.parseInt(X.string(a))};lb.tofloat=function(a){return X.parseFloat(a)};var kb=function(){};k["haxegon.Debug"]=kb;kb.__name__=!0;kb.clearlog=function(){kb.debuglog=[]};kb.log=function(a){kb.debuglog.push(lb.tostring(a));
kb.showtest=!0;20<kb.debuglog.length&&(kb.debuglog.reverse(),kb.debuglog.pop(),kb.debuglog.reverse())};kb.test=function(a){kb.debuglog[0]=lb.tostring(a);kb.showtest=!0};kb.showlog=function(){if(kb.showtest)for(var a=0,c=kb.debuglog.length;a<c;){for(var d=a++,q=-1;2>q;)for(var b=q++,g=-1;2>g;){var ta=g++;h.display(2+ta,b+X["int"](2+(kb.debuglog.length-1-d)*(h.height()+2)),kb.debuglog[d],e.rgb(0,0,0))}h.display(2,X["int"](2+(kb.debuglog.length-1-d)*(h.height()+2)),kb.debuglog[d],e.rgb(255,255,255))}};
kb.showtest=null;var Xa=function(a,c,d,q,b,g){null==g&&(g=0);null==b&&(b=0);null==q&&(q=1);null==d&&(d=0);null==c&&(c=0);null==a&&(a=1);this.a=a;this.b=c;this.c=d;this.d=q;this.tx=b;this.ty=g};k["openfl.geom.Matrix"]=Xa;Xa.__name__=!0;Xa.prototype={clone:function(){return new Xa(this.a,this.b,this.c,this.d,this.tx,this.ty)},concat:function(a){var c=this.a*a.a+this.b*a.c;this.b=this.a*a.b+this.b*a.d;this.a=c;c=this.c*a.a+this.d*a.c;this.d=this.c*a.b+this.d*a.d;this.c=c;c=this.tx*a.a+this.ty*a.c+a.tx;
this.ty=this.tx*a.b+this.ty*a.d+a.ty;this.tx=c},copyFrom:function(a){this.a=a.a;this.b=a.b;this.c=a.c;this.d=a.d;this.tx=a.tx;this.ty=a.ty},deltaTransformPoint:function(a){return new Na(a.x*this.a+a.y*this.c,a.x*this.b+a.y*this.d)},identity:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0},invert:function(){var a=this.a*this.d-this.b*this.c;if(0==a)this.a=this.b=this.c=this.d=0,this.tx=-this.tx,this.ty=-this.ty;else{var a=1/a,c=this.d*a;this.d=this.a*a;this.a=c;this.b*=-a;this.c*=-a;
a=-this.a*this.tx-this.c*this.ty;this.ty=-this.b*this.tx-this.d*this.ty;this.tx=a}return this},rotate:function(a){var c=Math.cos(a);a=Math.sin(a);var d=this.a*c-this.b*a;this.b=this.a*a+this.b*c;this.a=d;d=this.c*c-this.d*a;this.d=this.c*a+this.d*c;this.c=d;d=this.tx*c-this.ty*a;this.ty=this.tx*a+this.ty*c;this.tx=d},scale:function(a,c){this.a*=a;this.b*=c;this.c*=a;this.d*=c;this.tx*=a;this.ty*=c},to3DString:function(a){null==a&&(a=!1);return a?"matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+
this.d+", 0, 0, 0, 0, 1, 0, "+(this.tx|0)+", "+(this.ty|0)+", 0, 1)":"matrix3d("+this.a+", "+this.b+", 0, 0, "+this.c+", "+this.d+", 0, 0, 0, 0, 1, 0, "+this.tx+", "+this.ty+", 0, 1)"},transformPoint:function(a){return new Na(a.x*this.a+a.y*this.c+this.tx,a.x*this.b+a.y*this.d+this.ty)},translate:function(a,c){this.tx+=a;this.ty+=c},toArray:function(a){null==a&&(a=!1);null==this.__array&&(this.__array=new Float32Array(9));a?(this.__array[0]=this.a,this.__array[1]=this.b,this.__array[2]=0,this.__array[3]=
this.c,this.__array[4]=this.d,this.__array[5]=0,this.__array[6]=this.tx,this.__array[7]=this.ty):(this.__array[0]=this.a,this.__array[1]=this.c,this.__array[2]=this.tx,this.__array[3]=this.b,this.__array[4]=this.d,this.__array[5]=this.ty,this.__array[6]=0,this.__array[7]=0);this.__array[8]=1;return this.__array},__toMatrix3:function(){return new jf(this.a,this.b,this.c,this.d,this.tx,this.ty)},__transformInversePoint:function(a){var c=this.a*this.d-this.b*this.c;if(0==c)a.x=-this.tx,a.y=-this.ty;
else{var d=1/c*(this.c*(this.ty-a.y)+this.d*(a.x-this.tx));a.y=1/c*(this.a*(a.y-this.ty)+this.b*(this.tx-a.x));a.x=d}},__transformInverseX:function(a,c){var d=this.a*this.d-this.b*this.c;return 0==d?-this.tx:1/d*(this.c*(this.ty-c)+this.d*(a-this.tx))},__transformInverseY:function(a,c){var d=this.a*this.d-this.b*this.c;return 0==d?-this.ty:1/d*(this.a*(c-this.ty)+this.b*(this.tx-a))},__class__:Xa};var kf=function(){z.call(this)};k["openfl.display.Shape"]=kf;kf.__name__=!0;kf.__super__=z;kf.prototype=
l(z.prototype,{get_graphics:function(){null==this.__graphics&&(this.__graphics=new $c,this.__graphics.__owner=this);return this.__graphics},__class__:kf,__properties__:l(z.prototype.__properties__,{get_graphics:"get_graphics"})});var Na=function(a,c){null==c&&(c=0);null==a&&(a=0);this.x=a;this.y=c};k["openfl.geom.Point"]=Na;Na.__name__=!0;Na.prototype={clone:function(){return new Na(this.x,this.y)},copyFrom:function(a){this.x=a.x;this.y=a.y},offset:function(a,c){this.x+=a;this.y+=c},setTo:function(a,
c){this.x=a;this.y=c},__toLimeVector2:function(){return new Pc(this.x,this.y)},__class__:Na};var pc=function(a,c,d,q,b,g,e,f){null==f&&(f=0);null==e&&(e=0);null==g&&(g=0);null==b&&(b=0);null==q&&(q=1);null==d&&(d=1);null==c&&(c=1);null==a&&(a=1);this.redMultiplier=a;this.greenMultiplier=c;this.blueMultiplier=d;this.alphaMultiplier=q;this.redOffset=b;this.greenOffset=g;this.blueOffset=e;this.alphaOffset=f};k["openfl.geom.ColorTransform"]=pc;pc.__name__=!0;pc.prototype={__clone:function(){return new pc(this.redMultiplier,
this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},__combine:function(a){this.redMultiplier*=a.redMultiplier;this.greenMultiplier*=a.greenMultiplier;this.blueMultiplier*=a.blueMultiplier;this.alphaMultiplier*=a.alphaMultiplier;this.redOffset+=a.redOffset;this.greenOffset+=a.greenOffset;this.blueOffset+=a.blueOffset;this.alphaOffset+=a.alphaOffset},__equals:function(a,c){null==c&&(c=!1);return null!=a&&this.redMultiplier==
a.redMultiplier&&this.greenMultiplier==a.greenMultiplier&&this.blueMultiplier==a.blueMultiplier&&(c||this.alphaMultiplier==a.alphaMultiplier)&&this.redOffset==a.redOffset&&this.greenOffset==a.greenOffset&&this.blueOffset==a.blueOffset&&this.alphaOffset==a.alphaOffset},__toLimeColorMatrix:function(){var a=[this.redMultiplier,0,0,0,this.redOffset/255,0,this.greenMultiplier,0,0,this.greenOffset/255,0,0,this.blueMultiplier,0,this.blueOffset/255,0,0,0,this.alphaMultiplier,this.alphaOffset/255];return null!=
a?new Float32Array(a):null},__class__:pc};var e=function(){};k["haxegon.Gfx"]=e;e.__name__=!0;e.__properties__={set_linethickness:"set_linethickness",get_linethickness:"get_linethickness"};e.screenwidth=null;e.screenheight=null;e.screenwidthmid=null;e.screenheightmid=null;e.clearscreeneachframe=null;e.screenscale=null;e.devicexres=null;e.deviceyres=null;e.fullscreen=null;e.currenttilesetname=null;e.backbuffer=null;e.drawto=null;e.resizescreen=function(a,c,d){null==d&&(d=1);e.initgfx(a|0,c|0,d);e.onResize(null);
h.init(e.gfxstage);e.showfps=!1;e.gfxstage.addChild(e.screen);e.updategraphicsmode()};e.showfps=null;e.render_fps=null;e.update_fps=null;e.fps=function(){return e.render_fps_max};e.updatefps=function(){return e.update_fps_max};e.reset=function(){e.transform=!1;e.imagerotate=0;e.imagerotatexpivot=0;e.imagerotateypivot=0;e.imagexscale=1;e.imageyscale=1;e.imagescalexpivot=0;e.imagescaleypivot=0;e.coltransform=!1;e.imagealphamult=1;e.imageredmult=1;e.imagegreenmult=1;e.imagebluemult=1};e.reset_ifclear=
function(){0==e.imagerotate&&1==e.imagexscale&&1==e.imageyscale&&(e.transform=!1);1==e.imagealphamult&&1==e.imageredmult&&1==e.imagegreenmult&&1==e.imagebluemult&&(e.coltransform=!1)};e.rotation=function(a,c,d){null==d&&(d=-15E3);null==c&&(c=-15E3);e.imagerotate=a;e.imagerotatexpivot=c;e.imagerotateypivot=d;e.transform=!0;e.reset_ifclear()};e.scale=function(a,c,d,q){null==q&&(q=-15E3);null==d&&(d=-15E3);e.imagexscale=a;e.imageyscale=c;e.imagescalexpivot=d;e.imagescaleypivot=q;e.transform=!0;e.reset_ifclear()};
e.imagealpha=function(a){e.imagealphamult=a;e.coltransform=!0;e.reset_ifclear()};e.imagecolor=function(a){null==a&&(a=16777215);e.imageredmult=e.getred(a)/255;e.imagegreenmult=e.getgreen(a)/255;e.imagebluemult=e.getblue(a)/255;e.coltransform=!0;e.reset_ifclear()};e.changetileset=function(a){};e.loadtiles=function(a,c,d){Fa.log('Error: "loadtiles" function not available in webscript version.')};e.convertobinary=function(a,c){for(var d="",q;0<a;)q=a%2,d=lb.tostring(q)+d,a-=q,a=a/2|0;for(;d.length<c;)d=
"0"+d;return d};e.convertbase64tobinary=function(a){for(var c="",d=0,q=0,b=a.length;q<b;)d=q++,d=e.BASE64.indexOf(N.substr(a,d,1)),c+=e.convertobinary(d,6);return c};e.convertbinarytoint=function(a){for(var c=0,d=-a.length;0>d;){var q=d++;"1"==N.substr(a,-q-1,1)&&(c+=X["int"](Math.pow(2,a.length+q)))}return c};e.mid=function(a,c,d){null==d&&(d=1);null==c&&(c=0);return 0>c?"":N.substr(a,c,d)};e.replacechar=function(a,c,d){null==d&&(d="");null==c&&(c="|");for(var q="",b=0,g=a.length;b<g;)var ta=b++,
q=e.mid(a,ta)==c?q+d:q+e.mid(a,ta);return q};e.clearimages=function(){e.imageindex=new ba;for(var a=0,c=e.images.length;a<c;){var d=a++;e.images[d].dispose()}e.images=[]};e.loadimagestring=function(a,c,d,q,b,g){null==g&&(g=-1);null==b&&(b=-1);null==q&&(q=-1);null==d&&(d=-1);c=e.replacechar(c," ","");c=e.replacechar(c,"\n","");c=e.replacechar(c,"\t","");var ta="",f=function(a){ta=N.substr(c,0,a);c=N.substr(c,a,null)};c=e.convertbase64tobinary(c);f(4);var h=e.convertbinarytoint(ta)+1;f(4);var k=e.convertbinarytoint(ta)+
1;f(1);var l=lb.toint(ta);0==l&&(l=2);var m=new fb(h,k,!0,0);d=[d,q,b,g];for(var y=0,r=2*l;y<r;){var u=y++;f(8);q=e.convertbinarytoint(ta);f(8);b=e.convertbinarytoint(ta);f(8);g=e.convertbinarytoint(ta);d[u]==e.KEEPCOL&&(d[u]=e.rgb(q,b,g))}for(b=q=0;b<k;)for(g=b++,y=0;y<h;)r=y++,f(l),q=e.convertbinarytoint(ta),q=d[q],q!=Ra.TRANSPARENT&&(e.settrect(r,g,1,1),m.fillRect(e.trect,-16777216+q));e.imageindex.set(a,e.images.length);e.images.push(m)};e.loadimage=function(a){Fa.log('Error: "loadimage" function not available in webscript version.');
Fa.log("Try loadimagestring, using the sprite editor tool.")};e.createimage=function(a,c,d){e.imageindex.set(a,e.images.length);a=new fb(Math.floor(c),Math.floor(d),!0,0);e.images.push(a)};e.resizeimage=function(a,c){var d=e.imageindex.get(a),q=new fb(e.images[d].width*c|0,e.images[d].height*c|0,!0,0),b,g;e.images[d].lock();q.lock();for(var ta=0,f=e.images[d].height;ta<f;)for(var h=ta++,k=0,l=e.images[d].width;k<l;){var m=k++;g=e.images[d].getPixel(m,h);b=e.images[d].getPixel32(m,h)>>24&255;e.settrect(Math.ceil(m*
c),Math.ceil(h*c),Math.ceil(c),Math.ceil(c));q.fillRect(e.trect,(b<<24)+g)}e.images[d].unlock();q.unlock();e.images[d].dispose();e.images[d]=q};e.imagewidth=function(a){if(e.imageindex.exists(a))e.imagenum=e.imageindex.get(a);else throw new K('ERROR: In imagewidth, cannot find image "'+a+'".');return e.images[e.imagenum].width};e.imageheight=function(a){if(e.imageindex.exists(a))e.imagenum=e.imageindex.get(a);else throw new K('ERROR: In imageheight, cannot find image "'+a+'".');return e.images[e.imagenum].height};
e.drawtoscreen=function(){e.drawingtoscreen=!0;e.drawto.unlock();e.drawto=e.backbuffer;e.drawto.lock();h.drawto=e.drawto};e.drawtoimage=function(a){e.drawingtoscreen=!1;e.imagenum=e.imageindex.get(a);e.drawto.unlock();e.drawto=e.images[e.imagenum];e.drawto.lock();h.drawto=e.drawto};e.t1=null;e.t2=null;e.t3=null;e.imagealignx=function(a){return-5E3>=a?(e.t1=a-e.CENTER,e.t2=a-e.LEFT,e.t3=a-e.RIGHT,0==e.t1||Math.abs(e.t1)<Math.abs(e.t2)&&Math.abs(e.t1)<Math.abs(e.t3)?e.t1+e.screenwidthmid-(e.images[e.imagenum].width/
2|0):0==e.t2||Math.abs(e.t2)<Math.abs(e.t1)&&Math.abs(e.t2)<Math.abs(e.t3)?e.t2:e.t3+e.images[e.imagenum].width):a};e.imagealigny=function(a){return-5E3>=a?(e.t1=a-e.CENTER,e.t2=a-e.TOP,e.t3=a-e.BOTTOM,0==e.t1||Math.abs(e.t1)<Math.abs(e.t2)&&Math.abs(e.t1)<Math.abs(e.t3)?e.t1+e.screenheightmid-(e.images[e.imagenum].height/2|0):0==e.t2||Math.abs(e.t2)<Math.abs(e.t1)&&Math.abs(e.t2)<Math.abs(e.t3)?e.t2:e.t3+e.images[e.imagenum].height):a};e.imagealignonimagex=function(a){return-5E3>=a?(e.t1=a-e.CENTER,
e.t2=a-e.LEFT,e.t3=a-e.RIGHT,0==e.t1||Math.abs(e.t1)<Math.abs(e.t2)&&Math.abs(e.t1)<Math.abs(e.t3)?e.t1+(e.images[e.imagenum].width/2|0):0==e.t2||Math.abs(e.t2)<Math.abs(e.t1)&&Math.abs(e.t2)<Math.abs(e.t3)?e.t2:e.t3+e.images[e.imagenum].width):a};e.imagealignonimagey=function(a){return-5E3>=a?(e.t1=a-e.CENTER,e.t2=a-e.TOP,e.t3=a-e.BOTTOM,0==e.t1||Math.abs(e.t1)<Math.abs(e.t2)&&Math.abs(e.t1)<Math.abs(e.t3)?e.t1+(e.images[e.imagenum].height/2|0):0==e.t2||Math.abs(e.t2)<Math.abs(e.t1)&&Math.abs(e.t2)<
Math.abs(e.t3)?e.t2:e.t3+e.images[e.imagenum].height):a};e.drawimage=function(a,c,d){if(e.clearscreeneachframe||!e.skiprender||!e.drawingtoscreen){if(!e.imageindex.exists(d))throw new K('ERROR: In drawimage, cannot find image "'+d+'".');e.imagenum=e.imageindex.get(d);a=e.imagealignx(a);c=e.imagealigny(c);if(e.transform||e.coltransform){e.tempxalign=0;e.tempyalign=0;e.shapematrix.identity();if(1!=e.imagexscale||1!=e.imageyscale)0!=e.imagescalexpivot&&(e.tempxalign=e.imagealignonimagex(e.imagescalexpivot)),
0!=e.imagescaleypivot&&(e.tempyalign=e.imagealignonimagey(e.imagescaleypivot)),e.shapematrix.translate(-e.tempxalign,-e.tempyalign),e.shapematrix.scale(e.imagexscale,e.imageyscale),e.shapematrix.translate(e.tempxalign,e.tempyalign);0!=e.imagerotate&&(0!=e.imagerotatexpivot&&(e.tempxalign=e.imagealignonimagex(e.imagerotatexpivot)),0!=e.imagerotateypivot&&(e.tempyalign=e.imagealignonimagey(e.imagerotateypivot)),e.shapematrix.translate(-e.tempxalign,-e.tempyalign),e.shapematrix.rotate(3.1415*e.imagerotate/
180),e.shapematrix.translate(e.tempxalign,e.tempyalign));e.shapematrix.translate(a,c);e.coltransform?(e.alphact.alphaMultiplier=e.imagealphamult,e.alphact.redMultiplier=e.imageredmult,e.alphact.greenMultiplier=e.imagegreenmult,e.alphact.blueMultiplier=e.imagebluemult,e.drawto.draw(e.images[e.imagenum],e.shapematrix,e.alphact)):e.drawto.draw(e.images[e.imagenum],e.shapematrix);e.shapematrix.identity()}else e.settpoint(a|0,c|0),e.drawto.copyPixels(e.images[e.imagenum],e.images[e.imagenum].rect,e.tpoint)}};
e.grabimagefromscreen=function(a,c,d){if(!e.imageindex.exists(a))throw new K('ERROR: In grabimagefromscreen, "'+a+'" does not exist. You need to create an image label first before using this function.');e.imagenum=e.imageindex.get(a);e.settrect(c,d,e.images[e.imagenum].width,e.images[e.imagenum].height);e.images[e.imagenum].copyPixels(e.backbuffer,e.trect,e.tl)};e.grabimagefromimage=function(a,c,d,q,b,g){null==g&&(g=0);null==b&&(b=0);if(!e.imageindex.exists(a))throw new K('ERROR: In grabimagefromimage, "'+
a+'" does not exist. You need to create an image label first before using this function.');e.imagenum=e.imageindex.get(a);e.imageindex.exists(c)||ab.trace('ERROR: No image called "'+c+'" found.',{fileName:"Gfx.hx",lineNumber:629,className:"haxegon.Gfx",methodName:"grabimagefromimage"});a=e.imageindex.get(c);0==b&&0==g?e.settrect(d,q,e.images[e.imagenum].width,e.images[e.imagenum].height):e.settrect(d,q,b,g);e.images[e.imagenum].copyPixels(e.images[a],e.trect,e.tl)};e.fastAbs=function(a){return(a^
a>>31)-(a>>31)};e.fastFloor=function(a){return a|0};e.bresenhamline=function(a,c,d,q,b){var g=Math.abs(q-c)>Math.abs(d-a),ta;0==b?(e.bresx1=[],e.bresy1=[]):(e.bresx2=[],e.bresy2=[]);g&&(ta=a,a=c,c=ta,ta=d,d=q,q=ta);a>d&&(ta=a,a=d,d=ta,ta=c,c=q,q=ta);ta=d-a;var f=X["int"](Math.abs(q-c)),h=ta/2|0,k=c;c=c<q?1:-1;for(d+=1;a<d;)q=a++,0==b?g?(e.bresx1.push(k),e.bresy1.push(q)):(e.bresx1.push(q),e.bresy1.push(k)):g?(e.bresx2.push(k),e.bresy2.push(q)):(e.bresx2.push(q),e.bresy2.push(k)),h-=f,0>h&&(k+=c,h+=
ta)};e.drawbresenhamline=function(a,c,d,q,b,g){var ta=Math.abs(q-c)>Math.abs(d-a),f;ta&&(f=a,a=c,c=f,f=d,d=q,q=f);a>d&&(f=a,a=d,d=f,f=c,c=q,q=f);f=d-a;var h=X["int"](Math.abs(q-c)),k=f/2|0,l=c;c=c<q?1:-1;for(d+=1;a<d;)q=a++,ta?e.setpixel(l,q,b,g):e.setpixel(q,l,b,g),k-=h,0>k&&(l+=c,k+=f)};e.drawline=function(a,c,d,q,b,g){!e.clearscreeneachframe&&e.skiprender&&e.drawingtoscreen||(g=1,a==d?q>c?e.fillbox(a-e.get_linethickness()+1,c,1+e.get_linethickness()-1,q-c,b,g):e.fillbox(a-e.get_linethickness()+
1,q,1+e.get_linethickness()-1,c-q,b,g):c==q?d>a?e.fillbox(a,c-e.get_linethickness()+1,d-a,1+e.get_linethickness()-1,b,g):e.fillbox(d,c-e.get_linethickness()+1,a-d,1+e.get_linethickness()-1,b,g):e.drawbresenhamline(a|0,c|0,d|0,q|0,b,g))};e.drawhexagon=function(a,c,d,q,b,g){g=1;if(e.clearscreeneachframe||!e.skiprender||!e.drawingtoscreen){e.temprotate=2*Math.PI/6;e.tx=Math.cos(q)*d+a;e.ty=Math.sin(q)*d+c;for(var ta=0;6>ta;){var f=ta++;e.tx2=Math.cos(q+e.temprotate*(f+1))*d+a;e.ty2=Math.sin(q+e.temprotate*
(f+1))*d+c;e.drawline(e.tx,e.ty,e.tx2,e.ty2,b,g);e.tx=e.tx2;e.ty=e.ty2}}};e.fillhexagon=function(a,c,d,q,b,g){if(e.clearscreeneachframe||!e.skiprender||!e.drawingtoscreen){g=1;e.temprotate=2*Math.PI/6;0==q&&(q=Math.PI);e.tx=Math.cos(q)*d+a;e.ty=Math.sin(q)*d+c;for(var ta=0;6>ta;){var f=ta++;e.tx2=Math.cos(q+e.temprotate*(f+1))*d+a;e.ty2=Math.sin(q+e.temprotate*(f+1))*d+c;e.filltri(e.tx,e.ty,e.tx2,e.ty2,a,c,b,g);e.tx=e.tx2;e.ty=e.ty2}}};e.drawcircle=function(a,c,d,q,b){if(e.clearscreeneachframe||!e.skiprender||
!e.drawingtoscreen)for(a|=0,c|=0,e.tx=d|0,e.ty=0,d=1-e.tx;e.tx>=e.ty;)e.setpixel(e.tx+a|0,e.ty+c|0,q),e.setpixel(e.ty+a|0,e.tx+c|0,q),e.setpixel(-e.tx+a|0,e.ty+c|0,q),e.setpixel(-e.ty+a|0,e.tx+c|0,q),e.setpixel(-e.tx+a|0,-e.ty+c|0,q),e.setpixel(-e.ty+a|0,-e.tx+c|0,q),e.setpixel(e.tx+a|0,-e.ty+c|0,q),e.setpixel(e.ty+a|0,-e.tx+c|0,q),e.ty++,0>=d?d+=2*e.ty+1:(e.tx--,d+=2*(e.ty-e.tx)+1)};e.fillcircle=function(a,c,d,q,b){if(e.clearscreeneachframe||!e.skiprender||!e.drawingtoscreen){b=1;a|=0;c|=0;d|=0;
e.tx=d;e.ty=0;var g=1-e.tx;e.fillcirclepoints=[];for(var ta=0,f=2*d|0;ta<f;)ta++,e.fillcirclepoints.push(!0);for(;e.tx>=e.ty;)e.fillcirclepoints[e.ty|0]&&(e.fillbox(a-e.tx,c+e.ty,e.tx+e.tx,1,q,b),e.fillcirclepoints[e.ty|0]=!1),e.fillcirclepoints[e.tx|0]&&(e.fillbox(a-e.ty,c+e.tx,e.ty+e.ty,1,q,b),e.fillcirclepoints[e.tx|0]=!1),e.fillcirclepoints[d+e.ty|0]&&(e.fillbox(a-e.tx,c-e.ty,e.tx+e.tx,1,q,b),e.fillcirclepoints[d+e.ty|0]=!1),e.fillcirclepoints[d+e.tx|0]&&(e.fillbox(a-e.ty,c-e.tx,e.ty+e.ty,1,q,
b),e.fillcirclepoints[d+e.tx|0]=!1),e.ty++,0>=g?g+=2*e.ty+1:(e.tx--,g+=2*(e.ty-e.tx)+1)}};e.drawtri=function(a,c,d,q,b,g,ta,f){!e.clearscreeneachframe&&e.skiprender&&e.drawingtoscreen||(e.drawline(a,c,d,q,ta),e.drawline(d,q,b,g,ta),e.drawline(b,g,a,c,ta))};e.tri_x1=null;e.tri_y1=null;e.tri_x2=null;e.tri_y2=null;e.tri_x3=null;e.tri_y3=null;e.getfilltrimatchpoint=function(a){for(var c=0,d=e.bresy2.length;c<d;){var q=c++;if(e.bresy2[q]==a)return q}return-1};e.filltri=function(a,c,d,q,b,g,ta,f){if(e.clearscreeneachframe||
!e.skiprender||!e.drawingtoscreen){f=1;c<q&&c<g?(e.tri_x1=a|0,e.tri_y1=c|0,q<g?(e.tri_x2=d|0,e.tri_y2=q|0,e.tri_x3=b|0,e.tri_y3=g|0):(e.tri_x2=b|0,e.tri_y2=g|0,e.tri_x3=d|0,e.tri_y3=q|0)):q<g&&q<c?(e.tri_x1=d|0,e.tri_y1=q|0,c<g?(e.tri_x2=a|0,e.tri_y2=c|0,e.tri_x3=b|0,e.tri_y3=g|0):(e.tri_x2=b|0,e.tri_y2=g|0,e.tri_x3=a|0,e.tri_y3=c|0)):(e.tri_x1=b|0,e.tri_y1=g|0,q<c?(e.tri_x2=d|0,e.tri_y2=q|0,e.tri_x3=a|0,e.tri_y3=c|0):(e.tri_x2=a|0,e.tri_y2=c|0,e.tri_x3=d|0,e.tri_y3=q|0));e.bresenhamline(e.tri_x1,
e.tri_y1,e.tri_x2,e.tri_y2,0);e.bresenhamline(e.tri_x1,e.tri_y1,e.tri_x3,e.tri_y3,1);a=0;c=-1;d=e.bresy1[0];q=0;for(b=e.bresx1.length;q<b;)g=q++,e.bresy1[g]!=c&&(c=e.bresy1[g],a=e.getfilltrimatchpoint(e.bresy1[g]),-1<a&&(e.bresx1[g]>e.bresx2[a]?e.settrect(e.bresx2[a],e.bresy1[g],e.bresx1[g]-e.bresx2[a],1):e.settrect(e.bresx1[g],e.bresy1[g],e.bresx2[a]-e.bresx1[g],1),e.fillbox(e.trect.x,e.trect.y,e.trect.width,1,ta,f)));q=-1;e.bresenhamline(e.tri_x2,e.tri_y2,e.tri_x3,e.tri_y3,0);b=0;for(g=e.bresx1.length;b<
g;){var h=b++;e.bresy1[h]!=c&&e.bresy1[h]!=q&&e.bresy1[h]!=d&&(q=e.bresy1[h],a=e.getfilltrimatchpoint(e.bresy1[h]),-1<a&&(e.bresx1[h]>e.bresx2[a]?e.settrect(e.bresx2[a],e.bresy1[h],e.bresx1[h]-e.bresx2[a],1):e.settrect(e.bresx1[h],e.bresy1[h],e.bresx2[a]-e.bresx1[h],1),e.fillbox(e.trect.x,e.trect.y,e.trect.width,1,ta,f)))}}};e.drawbox=function(a,c,d,q,b,g){!e.clearscreeneachframe&&e.skiprender&&e.drawingtoscreen||(g=1,0>d&&(d=-d,a-=d),0>q&&(q=-q,c-=q),e.fillbox(a,c,d,1,b,g),e.fillbox(a,c+q,d-1,1,
b,g),e.fillbox(a,c+1,1,q,b,g),e.fillbox(a+d-1,c+1,1,q,b,g))};e.get_linethickness=function(){return e._linethickness};e.set_linethickness=function(a){e._linethickness=a;1>e._linethickness&&(e._linethickness=1);255<e._linethickness&&(e._linethickness=255);return e._linethickness};e.clearscreen=function(a){null==a&&(a=0);!e.clearscreeneachframe&&e.skiprender&&e.drawingtoscreen||e.drawto.fillRect(e.drawto.rect,-16777216+a)};e.getpixel=function(a,c){var d=e.drawto.getPixel32(a|0,c|0)>>24&255,q=e.drawto.getPixel(a|
0,c|0);return 0==d?Ra.TRANSPARENT:q};e.setpixel=function(a,c,d,q){!e.clearscreeneachframe&&e.skiprender&&e.drawingtoscreen||(q=1,d==Ra.TRANSPARENT?1==e._linethickness?(e.settpoint(a|0,c|0),e.drawto.copyPixels(e.transparentpixel,e.transparentpixel.rect,e.tpoint)):e.fillbox(a-e._linethickness+1,c-e._linethickness+1,e._linethickness+e._linethickness-2,e._linethickness+e._linethickness-2,d):1>q?(1==e._linethickness?e.settrect(a|0,c|0,1,1):e.settrect(a-e._linethickness+1,c-e._linethickness+1,e._linethickness+
e._linethickness-2,e._linethickness+e._linethickness-2),e.drawto.fillRect(e.trect,((256*q|0)<<24)+d)):(1==e._linethickness?e.settrect(a|0,c|0,1,1):e.settrect(a-e._linethickness+1,c-e._linethickness+1,e._linethickness+e._linethickness-2,e._linethickness+e._linethickness-2),e.drawto.fillRect(e.trect,-16777216+d)))};e.fillbox=function(a,c,d,q,b,g){if(e.clearscreeneachframe||!e.skiprender||!e.drawingtoscreen)if(g=1,b==Ra.TRANSPARENT)for(b=c|0,c=c+q|0;b<c;){q=b++;g=a|0;for(var ta=a+d|0;g<ta;){var f=g++;
e.settpoint(f|0,q|0);e.drawto.copyPixels(e.transparentpixel,e.transparentpixel.rect,e.tpoint)}}else 1==g?(e.settrect(a|0,c|0,d|0,q|0),e.drawto.fillRect(e.trect,-16777216+b)):(e.tempshape.get_graphics().clear(),e.tempshape.get_graphics().beginFill(b,g),e.tempshape.get_graphics().lineTo(d|0,0),e.tempshape.get_graphics().lineTo(d|0,q|0),e.tempshape.get_graphics().lineTo(0,q|0),e.tempshape.get_graphics().lineTo(0,0),e.tempshape.get_graphics().endFill(),e.shapematrix.identity(),e.shapematrix.translate(a|
0,c|0),e.drawto.draw(e.tempshape,e.shapematrix))};e.getred=function(a){return a>>16&255};e.getgreen=function(a){return a>>8&255};e.getblue=function(a){return a&255};e.gethue=function(a){var c=e.getred(a)/255,d=e.getgreen(a)/255;a=e.getblue(a)/255;var q=Math.max(Math.max(c,d),a),b=Math.min(Math.min(c,d),a),g=(q+b)/2;q!=b&&(b=q-b,q==c?g=(d-a)/b+(d<a?6:0):q==d?g=(a-c)/b+2:q==a&&(g=(c-d)/b+4),g/=6);return 360*g|0};e.getsaturation=function(a){var c=e.getred(a)/255,d=e.getgreen(a)/255,q=e.getblue(a)/255;
a=Math.max(Math.max(c,d),q);c=Math.min(Math.min(c,d),q);d=(a+c)/2;a==c?a=0:(q=a-c,a=0.5<d?q/(2-a-c):q/(a+c));return a};e.getlightness=function(a){var c=e.getred(a)/255,d=e.getgreen(a)/255,q=e.getblue(a)/255;a=Math.max(Math.max(c,d),q);c=Math.min(Math.min(c,d),q);return(a+c)/2};e.rgb=function(a,c,d){return d|c<<8|a<<16};e.hsl=function(a,c,d){c=0.5>d?d*(1+c):d+c-d*c;d=2*d-c;a=a%360/360;e.hslval[0]=a+0.3333333333333333;e.hslval[1]=a;e.hslval[2]=a-0.3333333333333333;for(a=0;3>a;){var q=a++;0>e.hslval[q]&&
(e.hslval[q]+=1);1<e.hslval[q]&&(e.hslval[q]-=1);e.hslval[q]=0.16666666666666666>e.hslval[q]?d+6*(c-d)*e.hslval[q]:0.5>e.hslval[q]?c:0.6666666666666666>e.hslval[q]?d+6*(c-d)*(0.6666666666666666-e.hslval[q]):d}return e.rgb(255*e.hslval[0]|0,255*e.hslval[1]|0,255*e.hslval[2]|0)};e.setzoom=function(a){e.screen.set_width(e.screenwidth*a);e.screen.set_height(e.screenheight*a);e.screen.set_x((e.screenwidth-e.screenwidth*a)/2);e.screen.set_y((e.screenheight-e.screenheight*a)/2)};e.updategraphicsmode=function(){if(e.fullscreen){La.current.stage.set_displayState(tb.FULL_SCREEN_INTERACTIVE);
e.gfxstage.scaleMode=fc.NO_SCALE;var a;a=W.__cast(e.devicexres,Pb)/W.__cast(e.screenwidth,Pb);var c;c=W.__cast(e.deviceyres,Pb)/W.__cast(e.screenheight,Pb);a<c?(e.screen.set_width(e.screenwidth*a),e.screen.set_height(e.screenheight*a)):(c<a?e.screen.set_width(e.screenwidth*c):e.screen.set_width(e.screenwidth*a),e.screen.set_height(e.screenheight*c));e.screen.set_x(W.__cast(e.devicexres,Pb)/2-e.screen.get_width()/2);e.screen.set_y(W.__cast(e.deviceyres,Pb)/2-e.screen.get_height()/2)}else La.current.stage.set_displayState(tb.NORMAL),
e.screen.set_width(e.screenwidth*e.screenscale),e.screen.set_height(e.screenheight*e.screenscale),e.screen.set_x(0),e.screen.set_y(0),e.gfxstage.scaleMode=fc.SHOW_ALL,e.gfxstage.quality=gc.LOW};e.init=function(a){e.initrun&&(e.gfxstage=a,e.onResize(null),a.addEventListener(Q.RESIZE,e.onResize));e.clearscreeneachframe=!0;e.reset();e.set_linethickness(1);e.transparentpixel=new fb(1,1,!0,0)};e.onResize=function(a){var c;fa.editor()?(a=e.gfxstage.stageWidth/e.screenwidth,c=e.gfxstage.stageHeight/e.screenheight,
a=Math.min(a,c)):(a=Math.floor(e.gfxstage.stageWidth/e.screenwidth),c=Math.floor(e.gfxstage.stageHeight/e.screenheight),a=lb.toint(Math.min(a,c)));e.gfxstage.set_scaleX(a);e.gfxstage.set_scaleY(a);e.gfxstage.set_x((e.gfxstage.stageWidth-e.screenwidth*a)/2);e.gfxstage.set_y((e.gfxstage.stageHeight-e.screenheight*a)/2)};e.initgfx=function(a,c,d){e.screenwidth=a;e.screenheight=c;e.screenwidthmid=e.screenwidth/2|0;e.screenheightmid=e.screenheight/2|0;e.devicexres=X["int"](dd.get_screenResolutionX());
e.deviceyres=X["int"](dd.get_screenResolutionY());e.screenscale=d;e.trect=new ya;e.tpoint=new Na;e.tbuffer=new fb(1,1,!0);e.ct=new pc(0,0,0,1,255,255,255,1);e.alphact=new pc;e.hslval.push(0);e.hslval.push(0);e.hslval.push(0);null!=e.backbuffer&&e.backbuffer.dispose();e.backbuffer=new fb(e.screenwidth,e.screenheight,!1,0);e.drawto=e.backbuffer;e.drawingtoscreen=!0;e.screen=new ke(e.backbuffer);e.screen.smoothing=!1;e.screen.set_width(e.screenwidth*d);e.screen.set_height(e.screenheight*d);e.fullscreen=
!1;kb.showtest=!1};e.settrect=function(a,c,d,q){e.trect.x=a;e.trect.y=c;e.trect.width=d;e.trect.height=q};e.settpoint=function(a,c){e.tpoint.x=a;e.tpoint.y=c};e.animationnum=null;e.imagenum=null;e.ct=null;e.alphact=null;e.images_rect=null;e.trect=null;e.tpoint=null;e.tbuffer=null;e.transform=null;e.coltransform=null;e.imagerotate=null;e.imagerotatexpivot=null;e.imagerotateypivot=null;e.imagexscale=null;e.imageyscale=null;e.imagescalexpivot=null;e.imagescaleypivot=null;e.imagealphamult=null;e.imageredmult=
null;e.imagegreenmult=null;e.imagebluemult=null;e.tempframe=null;e.tempxalign=null;e.tempyalign=null;e.temprotate=null;e.changecolours=null;e.oldtileset=null;e.tx=null;e.ty=null;e.tx2=null;e.ty2=null;e.transparentpixel=null;e._linethickness=null;e.buffer=null;e.temptile=null;e.screen=null;e.alphamult=null;e.gfxstage=null;e.initrun=null;e.skiprender=null;e.drawingtoscreen=null;var za=k["haxegon.Keystate"]={__ename__:!0,__constructs__:["justreleased","notpressed","pressed","justpressed"]};za.justreleased=
["justreleased",0];za.justreleased.toString=r;za.justreleased.__enum__=za;za.notpressed=["notpressed",1];za.notpressed.toString=r;za.notpressed.__enum__=za;za.pressed=["pressed",2];za.pressed.toString=r;za.pressed.__enum__=za;za.justpressed=["justpressed",3];za.justpressed.toString=r;za.justpressed.__enum__=za;var x=function(){};k["haxegon.Input"]=x;x.__name__=!0;x.pressed=function(a){return x.keyheld[x.keymap.get(a)]};x.justpressed=function(a){return x.current[x.keymap.get(a)]==za.justpressed?!0:
!1};x.justreleased=function(a){return x.current[x.keymap.get(a)]==za.justreleased?(x.current[x.keymap.get(a)]=za.notpressed,!0):!1};x.delaypressed=function(a,c){x.keycode=x.keymap.get(a);if(x.keyheld[x.keycode]){if(1>=x.keydelay[x.keycode])return x.keydelay[x.keycode]=c,!0;x.keydelay[x.keycode]--}else x.keydelay[x.keycode]=0;return!1};x.init=function(a){a.addEventListener(Ub.KEY_DOWN,x.handlekeydown);a.addEventListener(Ub.KEY_UP,x.handlekeyup);x.resetKeys()};x.unload=function(a){a.removeEventListener(Ub.KEY_DOWN,
x.handlekeydown);a.removeEventListener(Ub.KEY_UP,x.handlekeyup)};x.update=function(){-1==x.lastcharcode?x.lastcharcode=x.charcode:x.charcode==x.lastcharcode?(x.lastcharcode=-1,x.charcode=-1):x.lastcharcode=x.charcode;for(var a=0,c=x.numletters;a<c;){var d=a++;x.lookup.h.hasOwnProperty(d)&&(x.last[d]==za.justreleased&&x.current[d]==za.justreleased?x.current[d]=za.notpressed:x.last[d]==za.justpressed&&x.current[d]==za.justpressed&&(x.current[d]=za.pressed),x.last[d]=x.current[d])}};x.reset=function(){for(var a=
0,c=x.numletters;a<c;){var d=a++;x.lookup.h.hasOwnProperty(d)&&(x.current[d]=za.notpressed,x.last[d]=za.notpressed,x.keyheld[d]=!1)}};x.iskeycodeheld=function(a){return a==za.justpressed||a==za.pressed?!0:!1};x.handlekeydown=function(a){if(!1!=Hb.call("bodyIsTargetted")){x.charcode=a.charCode;if(91==x.charcode||93==x.charcode||224==x.charcode||17==x.charcode)for(var c=0,d=x.numletters;c<d;){var q=c++;x.iskeycodeheld(x.current[q])?x.current[q]=za.justreleased:x.current[q]=za.notpressed;x.keyheld[q]=
!1}else if(a.controlKey)return;x.keycode=a.keyCode;x.lookup.h.hasOwnProperty(x.keycode)&&(x.iskeycodeheld(x.current[x.keycode])?x.current[x.keycode]=za.pressed:(x.current[x.keycode]=za.justpressed,x.keydelay[x.keycode]=0),x.keyheld[x.keycode]=!0);0<h.input_show&&(8==x.keycode?(0<x.keybuffer.length&&(x.keybuffer=N.substr(x.keybuffer,0,x.keybuffer.length-1)),-1<h.inputsound&&Ja.playsound(h.inputsound,1)):x.keybuffer.length<h.inputmaxlength&&(32==x.keycode?(x.keybuffer+=" ",-1<h.inputsound&&Ja.playsound(h.inputsound,
1)):32<=x.charcode&&126>=x.charcode&&(x.keybuffer+=String.fromCharCode(x.charcode),-1<h.inputsound&&Ja.playsound(h.inputsound,1))))}};x.getchar=function(){return-1==x.lastcharcode?"":String.fromCharCode(x.lastcharcode)};x.handlekeyup=function(a){x.keycode=a.keyCode;x.lookup.h.hasOwnProperty(x.keycode)&&(x.iskeycodeheld(x.current[x.keycode])?x.current[x.keycode]=za.justreleased:x.current[x.keycode]=za.notpressed,x.keyheld[x.keycode]=!1)};x.addkey=function(a,c){x.keymap.set(a,c);x.lookup.h[c]=a;x.current[c]=
za.notpressed;x.last[c]=za.notpressed;x.keydelay[c]=0;x.keyheld[c]=!1};x.resetKeys=function(){x.keymap=new Fc;x.lookup=new qb;x.current=[];x.last=[];x.keydelay=[];x.keyheld=[];x.lastcharcode=-1;for(var a=0,c=x.numletters;a<c;)a++,x.current.push(za.notpressed),x.last.push(za.notpressed),x.keyheld.push(!1);x.addkey(t.A,65);x.addkey(t.B,66);x.addkey(t.C,67);x.addkey(t.D,68);x.addkey(t.E,69);x.addkey(t.F,70);x.addkey(t.G,71);x.addkey(t.H,72);x.addkey(t.I,73);x.addkey(t.J,74);x.addkey(t.K,75);x.addkey(t.L,
76);x.addkey(t.M,77);x.addkey(t.N,78);x.addkey(t.O,79);x.addkey(t.P,80);x.addkey(t.Q,81);x.addkey(t.R,82);x.addkey(t.S,83);x.addkey(t.T,84);x.addkey(t.U,85);x.addkey(t.V,86);x.addkey(t.W,87);x.addkey(t.X,88);x.addkey(t.Y,89);x.addkey(t.Z,90);x.addkey(t.ZERO,48);x.addkey(t.ONE,49);x.addkey(t.TWO,50);x.addkey(t.THREE,51);x.addkey(t.FOUR,52);x.addkey(t.FIVE,53);x.addkey(t.SIX,54);x.addkey(t.SEVEN,55);x.addkey(t.EIGHT,56);x.addkey(t.NINE,57);x.addkey(t.F1,112);x.addkey(t.F2,113);x.addkey(t.F3,114);x.addkey(t.F4,
115);x.addkey(t.F5,116);x.addkey(t.F6,117);x.addkey(t.F7,118);x.addkey(t.F8,119);x.addkey(t.F9,120);x.addkey(t.F10,121);x.addkey(t.F11,122);x.addkey(t.F12,123);x.addkey(t.ESCAPE,27);x.addkey(t.MINUS,189);x.addkey(t.PLUS,187);x.addkey(t.DELETE,46);x.addkey(t.BACKSPACE,8);x.addkey(t.LBRACKET,219);x.addkey(t.RBRACKET,221);x.addkey(t.BACKSLASH,220);x.addkey(t.CAPSLOCK,20);x.addkey(t.SEMICOLON,186);x.addkey(t.QUOTE,222);x.addkey(t.ENTER,13);x.addkey(t.SHIFT,16);x.addkey(t.COMMA,188);x.addkey(t.PERIOD,
190);x.addkey(t.SLASH,191);x.addkey(t.CONTROL,17);x.addkey(t.ALT,18);x.addkey(t.SPACE,32);x.addkey(t.UP,38);x.addkey(t.DOWN,40);x.addkey(t.LEFT,37);x.addkey(t.RIGHT,39)};x.keycode=null;x.charcode=null;x.lastcharcode=null;var t=k["haxegon.Key"]={__ename__:!0,__constructs__:"A B C D E F G H I J K L M N O P Q R S T U V W X Y Z ZERO ONE TWO THREE FOUR FIVE SIX SEVEN EIGHT NINE F1 F2 F3 F4 F5 F6 F7 F8 F9 F10 F11 F12 ESCAPE MINUS PLUS DELETE BACKSPACE LBRACKET RBRACKET BACKSLASH CAPSLOCK SEMICOLON QUOTE ENTER SHIFT COMMA PERIOD SLASH CONTROL ALT SPACE UP DOWN LEFT RIGHT".split(" ")};
t.A=["A",0];t.A.toString=r;t.A.__enum__=t;t.B=["B",1];t.B.toString=r;t.B.__enum__=t;t.C=["C",2];t.C.toString=r;t.C.__enum__=t;t.D=["D",3];t.D.toString=r;t.D.__enum__=t;t.E=["E",4];t.E.toString=r;t.E.__enum__=t;t.F=["F",5];t.F.toString=r;t.F.__enum__=t;t.G=["G",6];t.G.toString=r;t.G.__enum__=t;t.H=["H",7];t.H.toString=r;t.H.__enum__=t;t.I=["I",8];t.I.toString=r;t.I.__enum__=t;t.J=["J",9];t.J.toString=r;t.J.__enum__=t;t.K=["K",10];t.K.toString=r;t.K.__enum__=t;t.L=["L",11];t.L.toString=r;t.L.__enum__=
t;t.M=["M",12];t.M.toString=r;t.M.__enum__=t;t.N=["N",13];t.N.toString=r;t.N.__enum__=t;t.O=["O",14];t.O.toString=r;t.O.__enum__=t;t.P=["P",15];t.P.toString=r;t.P.__enum__=t;t.Q=["Q",16];t.Q.toString=r;t.Q.__enum__=t;t.R=["R",17];t.R.toString=r;t.R.__enum__=t;t.S=["S",18];t.S.toString=r;t.S.__enum__=t;t.T=["T",19];t.T.toString=r;t.T.__enum__=t;t.U=["U",20];t.U.toString=r;t.U.__enum__=t;t.V=["V",21];t.V.toString=r;t.V.__enum__=t;t.W=["W",22];t.W.toString=r;t.W.__enum__=t;t.X=["X",23];t.X.toString=
r;t.X.__enum__=t;t.Y=["Y",24];t.Y.toString=r;t.Y.__enum__=t;t.Z=["Z",25];t.Z.toString=r;t.Z.__enum__=t;t.ZERO=["ZERO",26];t.ZERO.toString=r;t.ZERO.__enum__=t;t.ONE=["ONE",27];t.ONE.toString=r;t.ONE.__enum__=t;t.TWO=["TWO",28];t.TWO.toString=r;t.TWO.__enum__=t;t.THREE=["THREE",29];t.THREE.toString=r;t.THREE.__enum__=t;t.FOUR=["FOUR",30];t.FOUR.toString=r;t.FOUR.__enum__=t;t.FIVE=["FIVE",31];t.FIVE.toString=r;t.FIVE.__enum__=t;t.SIX=["SIX",32];t.SIX.toString=r;t.SIX.__enum__=t;t.SEVEN=["SEVEN",33];
t.SEVEN.toString=r;t.SEVEN.__enum__=t;t.EIGHT=["EIGHT",34];t.EIGHT.toString=r;t.EIGHT.__enum__=t;t.NINE=["NINE",35];t.NINE.toString=r;t.NINE.__enum__=t;t.F1=["F1",36];t.F1.toString=r;t.F1.__enum__=t;t.F2=["F2",37];t.F2.toString=r;t.F2.__enum__=t;t.F3=["F3",38];t.F3.toString=r;t.F3.__enum__=t;t.F4=["F4",39];t.F4.toString=r;t.F4.__enum__=t;t.F5=["F5",40];t.F5.toString=r;t.F5.__enum__=t;t.F6=["F6",41];t.F6.toString=r;t.F6.__enum__=t;t.F7=["F7",42];t.F7.toString=r;t.F7.__enum__=t;t.F8=["F8",43];t.F8.toString=
r;t.F8.__enum__=t;t.F9=["F9",44];t.F9.toString=r;t.F9.__enum__=t;t.F10=["F10",45];t.F10.toString=r;t.F10.__enum__=t;t.F11=["F11",46];t.F11.toString=r;t.F11.__enum__=t;t.F12=["F12",47];t.F12.toString=r;t.F12.__enum__=t;t.ESCAPE=["ESCAPE",48];t.ESCAPE.toString=r;t.ESCAPE.__enum__=t;t.MINUS=["MINUS",49];t.MINUS.toString=r;t.MINUS.__enum__=t;t.PLUS=["PLUS",50];t.PLUS.toString=r;t.PLUS.__enum__=t;t.DELETE=["DELETE",51];t.DELETE.toString=r;t.DELETE.__enum__=t;t.BACKSPACE=["BACKSPACE",52];t.BACKSPACE.toString=
r;t.BACKSPACE.__enum__=t;t.LBRACKET=["LBRACKET",53];t.LBRACKET.toString=r;t.LBRACKET.__enum__=t;t.RBRACKET=["RBRACKET",54];t.RBRACKET.toString=r;t.RBRACKET.__enum__=t;t.BACKSLASH=["BACKSLASH",55];t.BACKSLASH.toString=r;t.BACKSLASH.__enum__=t;t.CAPSLOCK=["CAPSLOCK",56];t.CAPSLOCK.toString=r;t.CAPSLOCK.__enum__=t;t.SEMICOLON=["SEMICOLON",57];t.SEMICOLON.toString=r;t.SEMICOLON.__enum__=t;t.QUOTE=["QUOTE",58];t.QUOTE.toString=r;t.QUOTE.__enum__=t;t.ENTER=["ENTER",59];t.ENTER.toString=r;t.ENTER.__enum__=
t;t.SHIFT=["SHIFT",60];t.SHIFT.toString=r;t.SHIFT.__enum__=t;t.COMMA=["COMMA",61];t.COMMA.toString=r;t.COMMA.__enum__=t;t.PERIOD=["PERIOD",62];t.PERIOD.toString=r;t.PERIOD.__enum__=t;t.SLASH=["SLASH",63];t.SLASH.toString=r;t.SLASH.__enum__=t;t.CONTROL=["CONTROL",64];t.CONTROL.toString=r;t.CONTROL.__enum__=t;t.ALT=["ALT",65];t.ALT.toString=r;t.ALT.__enum__=t;t.SPACE=["SPACE",66];t.SPACE.toString=r;t.SPACE.__enum__=t;t.UP=["UP",67];t.UP.toString=r;t.UP.__enum__=t;t.DOWN=["DOWN",68];t.DOWN.toString=
r;t.DOWN.__enum__=t;t.LEFT=["LEFT",69];t.LEFT.toString=r;t.LEFT.__enum__=t;t.RIGHT=["RIGHT",70];t.RIGHT.toString=r;t.RIGHT.__enum__=t;var I=function(){};k["haxegon.Mouse"]=I;I.__name__=!0;I.x=null;I.y=null;I.mouseoffstage=null;I.isdragging=null;I.leftheld=function(){return 0<I._current};I.leftclick=function(){return 2==I._current};I.leftreleased=function(){return-1==I._current};I.rightheld=function(){return 0<I._rightcurrent};I.rightclick=function(){return 2==I._rightcurrent};I.rightreleased=function(){return-1==
I._rightcurrent};I.middleheld=function(){return 0<I._middlecurrent};I.middleclick=function(){return 2==I._middlecurrent};I.middlereleased=function(){return-1==I._middlecurrent};I.init=function(a){a.addEventListener(Y.RIGHT_MOUSE_DOWN,I.handleRightMouseDown);a.addEventListener(Y.RIGHT_MOUSE_UP,I.handleRightMouseUp);a.addEventListener(Y.MOUSE_DOWN,I.handleMouseDown);a.addEventListener(Y.MOUSE_UP,I.handleMouseUp);a.addEventListener(Y.MIDDLE_MOUSE_DOWN,I.handleMiddleMouseDown);a.addEventListener(Y.MIDDLE_MOUSE_UP,
I.handleMiddleMouseUp);a.addEventListener(Y.MOUSE_WHEEL,I.mousewheelHandler);a.addEventListener(Y.MOUSE_MOVE,I.mouseOver);a.addEventListener(Q.MOUSE_LEAVE,I.mouseLeave);I.x=0;I.y=0;I._rightcurrent=0;I._rightlast=0;I._middlecurrent=0;I._middlelast=0;I._current=0;I._last=0};I.unload=function(a){a.removeEventListener(Y.RIGHT_MOUSE_DOWN,I.handleRightMouseDown);a.removeEventListener(Y.RIGHT_MOUSE_UP,I.handleRightMouseUp);a.removeEventListener(Y.MOUSE_DOWN,I.handleMouseDown);a.removeEventListener(Y.MOUSE_UP,
I.handleMouseUp);a.removeEventListener(Y.MIDDLE_MOUSE_DOWN,I.handleMiddleMouseDown);a.removeEventListener(Y.MIDDLE_MOUSE_UP,I.handleMiddleMouseUp);a.removeEventListener(Y.MOUSE_WHEEL,I.mousewheelHandler);a.removeEventListener(Y.MOUSE_MOVE,I.mouseOver);a.removeEventListener(Q.MOUSE_LEAVE,I.mouseLeave)};I.mouseLeave=function(a){I.mouseoffstage=!0;I._current=0;I._last=0;I.isdragging=!1;I._rightcurrent=0;I._rightlast=0;I._middlecurrent=0;I._middlelast=0};I.mouseOver=function(a){I.mouseoffstage=!1};I.mousewheelHandler=
function(a){I.mousewheel=a.delta};I.visitsite=function(a){I.gotosite=a};I.update=function(a,c){I.x=a;I.y=c;-1==I._last&&-1==I._current?I._current=0:2==I._last&&2==I._current&&(I._current=1);I._last=I._current;-1==I._rightlast&&-1==I._rightcurrent?I._rightcurrent=0:2==I._rightlast&&2==I._rightcurrent&&(I._rightcurrent=1);I._rightlast=I._rightcurrent;-1==I._middlelast&&-1==I._middlecurrent?I._middlecurrent=0:2==I._middlelast&&2==I._middlecurrent&&(I._middlecurrent=1);I._middlelast=I._middlecurrent};
I.reset=function(){I._current=0;I._last=0;I._rightcurrent=0;I._rightlast=0;I._middlecurrent=0;I._middlelast=0};I.handleRightMouseDown=function(a){I._rightcurrent=0<I._rightcurrent?1:2};I.handleRightMouseUp=function(a){I._rightcurrent=0<I._rightcurrent?-1:0};I.handleMiddleMouseDown=function(a){I._middlecurrent=0<I._middlecurrent?1:2};I.handleMiddleMouseUp=function(a){I._middlecurrent=0<I._middlecurrent?-1:0};I.handleMouseDown=function(a){x.pressed(t.CONTROL)?I._rightcurrent=0<I._rightcurrent?1:2:(I._current=
0<I._current?1:2,2==I._current&&""!=I.gotosite&&(a=new rd(I.gotosite),La.getURL(a),I.gotosite=""))};I.handleMouseUp=function(a){I._rightcurrent=0<I._rightcurrent?-1:0;I._current=0<I._current?-1:0};I._current=null;I._last=null;I._middlecurrent=null;I._middlelast=null;I._rightcurrent=null;I._rightlast=null;var ea=function(){};k["haxegon.Random"]=ea;ea.__name__=!0;ea.bool=function(){return 0.5>ea.random()};ea.occasional=function(){return 0.2>ea.random()};ea.rare=function(){return 0.05>ea.random()};ea.chance=
function(a){return ea["int"](0,100)<=a};ea["int"]=function(a,c){return a+Math.floor((c-a+1)*ea.random())};ea["float"]=function(a,c){return a+(c-a)*ea.random()};ea.string=function(a,c){null==c&&(c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");for(var d="",q=0;q<a;)q++,d+=c.charAt(ea["int"](0,c.length-1));return d};ea.pickstring=function(a,c,d,q,b,g,e,f,h,k,l,m){null==m&&(m="");null==l&&(l="");null==k&&(k="");null==h&&(h="");null==f&&(f="");null==e&&(e="");null==g&&(g="");null==
b&&(b="");null==q&&(q="");null==d&&(d="");ea.temp=2;""!=d&&(ea.temp=3);""!=q&&(ea.temp=4);""!=b&&(ea.temp=5);""!=g&&(ea.temp=6);""!=e&&(ea.temp=7);""!=f&&(ea.temp=8);""!=h&&(ea.temp=9);""!=k&&(ea.temp=10);""!=l&&(ea.temp=11);""!=m&&(ea.temp=12);switch(ea["int"](1,ea.temp)){case 2:return c;case 3:return d;case 4:return q;case 5:return b;case 6:return g;case 7:return e;case 8:return f;case 9:return h;case 10:return k;case 11:return l;case 12:return m}return a};ea.pickint=function(a,c,d,q,b,g,e,f,h,
k,l,m){null==m&&(m=-1E4);null==l&&(l=-1E4);null==k&&(k=-1E4);null==h&&(h=-1E4);null==f&&(f=-1E4);null==e&&(e=-1E4);null==g&&(g=-1E4);null==b&&(b=-1E4);null==q&&(q=-1E4);null==d&&(d=-1E4);ea.temp=2;-1E4!=d&&(ea.temp=3);-1E4!=q&&(ea.temp=4);-1E4!=b&&(ea.temp=5);-1E4!=g&&(ea.temp=6);-1E4!=e&&(ea.temp=7);-1E4!=f&&(ea.temp=8);-1E4!=h&&(ea.temp=9);-1E4!=k&&(ea.temp=10);-1E4!=l&&(ea.temp=11);-1E4!=m&&(ea.temp=12);switch(ea["int"](1,ea.temp)){case 2:return c;case 3:return d;case 4:return q;case 5:return b;
case 6:return g;case 7:return e;case 8:return f;case 9:return h;case 10:return k;case 11:return l;case 12:return m}return a};ea.pickfloat=function(a,c,d,q,b,g,e,f,h,k,l,m){null==m&&(m=-1E4);null==l&&(l=-1E4);null==k&&(k=-1E4);null==h&&(h=-1E4);null==f&&(f=-1E4);null==e&&(e=-1E4);null==g&&(g=-1E4);null==b&&(b=-1E4);null==q&&(q=-1E4);null==d&&(d=-1E4);ea.temp=2;-1E4!=d&&(ea.temp=3);-1E4!=q&&(ea.temp=4);-1E4!=b&&(ea.temp=5);-1E4!=g&&(ea.temp=6);-1E4!=e&&(ea.temp=7);-1E4!=f&&(ea.temp=8);-1E4!=h&&(ea.temp=
9);-1E4!=k&&(ea.temp=10);-1E4!=l&&(ea.temp=11);-1E4!=m&&(ea.temp=12);switch(ea["int"](1,ea.temp)){case 2:return c;case 3:return d;case 4:return q;case 5:return b;case 6:return g;case 7:return e;case 8:return f;case 9:return h;case 10:return k;case 11:return l;case 12:return m}return a};ea.pick=function(a){return a[ea["int"](0,a.length-1)]};ea.random=function(){ea.seed=(9301*ea.seed+49297)%233280;return Math.abs(ea.seed/233280)};ea.setseed=function(a){ea.seed=X["int"](Math.abs(a%233280))};ea.temp=
null;var h=function(){};k["haxegon.Text"]=h;h.__name__=!0;h.init=function(a){h.drawto=e.backbuffer;h.gfxstage=a;h.alphact=new pc;h.input_cursorglow=0;h.inputmaxlength=40;h.inputsound=-1};h.align=function(a){h.textalign=a};h.rotation=function(a,c,d){null==d&&(d=-15E3);null==c&&(c=-15E3);h.textrotate=a;h.textrotatexpivot=c;h.textrotateypivot=d};h.input_checkfortext=function(){h.inputtext=x.keybuffer};h.reverse=function(a){for(var c="",d=0,q=a.length;d<q;)var b=d++,c=c+N.substr(a,a.length-b-1,1);return c};
h.input=function(a,c,d,q,b){null==b&&(b=13421772);null==q&&(q=16777215);h.input_show=2;h.input_font=h.currentfont;h.input_textsize=h.currentsize;"bitmap"==h.typeface[h.currentindex].type?h.typeface[h.currentindex].tf_bitmap.set_text(d+h.inputtext):"ttf"==h.typeface[h.currentindex].type&&h.typeface[h.currentindex].tf_ttf.set_text(d+h.inputtext);a=h.alignx(a);c=h.aligny(c);h.input_textxp=a;h.input_textyp=c;"bitmap"==h.typeface[h.currentindex].type?(h.typeface[h.currentindex].tf_bitmap.set_text(d),h.input_responsexp=
h.input_textxp+Math.floor(h.typeface[h.currentindex].tf_bitmap.get_textWidth())):"ttf"==h.typeface[h.currentindex].type&&(h.typeface[h.currentindex].tf_ttf.set_text(d),h.input_responsexp=h.input_textxp+Math.floor(h.typeface[h.currentindex].tf_ttf.get_textWidth()));h.input_responseyp=c;h.input_text=d;h.input_response=h.inputtext;h.input_textcol=q;h.input_responsecol=b;h.input_checkfortext();return x.justpressed(t.ENTER)&&""!=h.inputtext?!0:!1};h.getinput=function(){var a=h.inputtext;h.lastentry=h.inputtext;
h.inputtext="";x.keybuffer="";h.input_show=0;return a};h.drawstringinput=function(){0<h.input_show&&(h.setfont(h.input_font,h.input_textsize),h.input_cursorglow++,96<=h.input_cursorglow&&(h.input_cursorglow=0),h.display(h.input_textxp,h.input_textyp,h.input_text,h.input_textcol),h.input_text.length<h.inputmaxlength?24>h.input_cursorglow%48?h.display(h.input_responsexp,h.input_responseyp,h.input_response,h.input_responsecol):h.display(h.input_responsexp,h.input_responseyp,h.input_response+"_",h.input_responsecol):
h.display(h.input_responsexp,h.input_responseyp,h.input_response,h.input_responsecol));h.input_show--;0>h.input_show&&(h.input_show=0)};h.currentlen=function(){if("ttf"==h.typeface[h.currentindex].type)return h.typeface[h.currentindex].tf_ttf.get_textWidth();if("bitmap"==h.typeface[h.currentindex].type){var a=h.typeface[h.currentindex].tf_bitmap.text,c=1,d="",q=-1,b=0;if(eb.isinstring(a,"\n")){for(;b<a.length;)"\n"==N.substr(a,b,1)?(c++,d=lb.toint(h.typeface[h.currentindex].tf_bitmap.getStringWidth(d,
!1)),d>q&&(q=d),d=""):d+=N.substr(a,b,1),b++;d=lb.toint(h.typeface[h.currentindex].tf_bitmap.getStringWidth(d,!1));d>q&&(q=d)}else q=lb.toint(h.typeface[h.currentindex].tf_bitmap.getStringWidth(a,!1));return q}return 0};h.currentheight=function(){return"ttf"==h.typeface[h.currentindex].type?h.typeface[h.currentindex].tf_ttf.get_textHeight():"bitmap"==h.typeface[h.currentindex].type?h.typeface[h.currentindex].tf_bitmap.get_textHeight()*h.currentsize:0};h.len=function(a){if("ttf"==h.typeface[h.currentindex].type)return h.typeface[h.currentindex].tf_ttf.set_text(a),
h.typeface[h.currentindex].tf_ttf.get_textWidth();if("bitmap"==h.typeface[h.currentindex].type){var c=1,d="",q=-1,b=0;if(eb.isinstring(a,"\n")){for(;b<a.length;)"\n"==N.substr(a,b,1)?(c++,d=lb.toint(h.typeface[h.currentindex].tf_bitmap.getStringWidth(d,!1)),d>q&&(q=d),d=""):d+=N.substr(a,b,1),b++;d=lb.toint(h.typeface[h.currentindex].tf_bitmap.getStringWidth(d,!1));d>q&&(q=d)}else q=lb.toint(h.typeface[h.currentindex].tf_bitmap.getStringWidth(a,!1));return q}return 0};h.height=function(){return"ttf"==
h.typeface[h.currentindex].type?(h.typeface[h.currentindex].tf_ttf.set_text("???"),h.typeface[h.currentindex].tf_ttf.get_textHeight()):"bitmap"==h.typeface[h.currentindex].type?(h.typeface[h.currentindex].tf_bitmap.set_text("???"),h.typeface[h.currentindex].height*h.currentsize):0};h.t1=null;h.t2=null;h.t3=null;h.cachealignx=function(a,c){return-5E3>=a?(h.t1=a-h.CENTER,h.t2=a-h.LEFT,h.t3=a-h.RIGHT,0==h.t1||Math.abs(h.t1)<Math.abs(h.t2)&&Math.abs(h.t1)<Math.abs(h.t3)?h.t1+Math.floor(e.screenwidthmid-
h.cachedtext[c].width*h.currentsize/2):0==h.t2||Math.abs(h.t2)<Math.abs(h.t1)&&Math.abs(h.t2)<Math.abs(h.t3)?h.t2:h.t3+Math.floor(e.screenwidth-h.cachedtext[c].width*h.currentsize)):Math.floor(a)};h.cachealigny=function(a,c){return-5E3>=a?(h.t1=a-h.CENTER,h.t2=a-h.TOP,h.t3=a-h.BOTTOM,0==h.t1||Math.abs(h.t1)<Math.abs(h.t2)&&Math.abs(h.t1)<Math.abs(h.t3)?h.t1+Math.floor(e.screenheightmid-h.cachedtext[c].height*h.currentsize/2):0==h.t2||Math.abs(h.t2)<Math.abs(h.t1)&&Math.abs(h.t2)<Math.abs(h.t3)?h.t2:
h.t3+Math.floor(e.screenheight-h.cachedtext[c].height*h.currentsize)):Math.floor(a)};h.alignx=function(a){return-5E3>=a?(h.t1=a-h.CENTER,h.t2=a-h.LEFT,h.t3=a-h.RIGHT,0==h.t1||Math.abs(h.t1)<Math.abs(h.t2)&&Math.abs(h.t1)<Math.abs(h.t3)?h.t1+Math.floor(e.screenwidthmid-h.currentlen()/2):0==h.t2||Math.abs(h.t2)<Math.abs(h.t1)&&Math.abs(h.t2)<Math.abs(h.t3)?h.t2:h.t3+Math.floor(e.screenwidth-h.currentlen())):Math.floor(a)};h.aligny=function(a){return-5E3>=a?(h.t1=a-h.CENTER,h.t2=a-h.TOP,h.t3=a-h.BOTTOM,
0==h.t1||Math.abs(h.t1)<Math.abs(h.t2)&&Math.abs(h.t1)<Math.abs(h.t3)?h.t1+Math.floor(e.screenheightmid-h.currentheight()/2):0==h.t2||Math.abs(h.t2)<Math.abs(h.t1)&&Math.abs(h.t2)<Math.abs(h.t3)?h.t2:h.t3+Math.floor(e.screenheight-h.currentheight())):Math.floor(a)};h.cachealigntextx=function(a,c){return-5E3>=c?(h.t1=c-h.CENTER,h.t2=c-h.LEFT,h.t3=c-h.RIGHT,0==h.t1||Math.abs(h.t1)<Math.abs(h.t2)&&Math.abs(h.t1)<Math.abs(h.t3)?h.t1+Math.floor(h.cachedtext[a].width*h.currentsize/2):0==h.t2||Math.abs(h.t2)<
Math.abs(h.t1)&&Math.abs(h.t2)<Math.abs(h.t3)?h.t2:h.t3+h.cachedtext[a].width*h.currentsize):c};h.cachealigntexty=function(a,c){return-5E3>=c?(h.t1=c-h.CENTER,h.t2=c-h.TOP,h.t3=c-h.BOTTOM,0==h.t1||Math.abs(h.t1)<Math.abs(h.t2)&&Math.abs(h.t1)<Math.abs(h.t3)?h.t1+Math.floor(h.cachedtext[a].height*h.currentsize/2):0==h.t2||Math.abs(h.t2)<Math.abs(h.t1)&&Math.abs(h.t2)<Math.abs(h.t3)?h.t2:h.t3+h.cachedtext[a].height*h.currentsize):c};h.aligntextx=function(a,c){return-5E3>=c?(h.t1=c-h.CENTER,h.t2=c-h.LEFT,
h.t3=c-h.RIGHT,0==h.t1||Math.abs(h.t1)<Math.abs(h.t2)&&Math.abs(h.t1)<Math.abs(h.t3)?h.t1+Math.floor(h.len(a)/2):0==h.t2||Math.abs(h.t2)<Math.abs(h.t1)&&Math.abs(h.t2)<Math.abs(h.t3)?h.t2:h.t3+h.len(a)):c};h.aligntexty=function(a){return-5E3>=a?(h.t1=a-h.CENTER,h.t2=a-h.TOP,h.t3=a-h.BOTTOM,0==h.t1||Math.abs(h.t1)<Math.abs(h.t2)&&Math.abs(h.t1)<Math.abs(h.t3)?h.t1+Math.floor(h.height()/2):0==h.t2||Math.abs(h.t2)<Math.abs(h.t1)&&Math.abs(h.t2)<Math.abs(h.t3)?h.t2:h.t3+h.height()):a};h.cacheindex=null;
h.cachelabel=null;h.cleartextcache=function(){h.cachedtextindex=new ba;for(var a=0,c=h.cachedtext.length;a<c;){var d=a++;h.cachedtext[d].dispose()}h.cachedtext=[];h.align(h.LEFT);h.rotation(0)};h.display=function(a,c,d,q){null==q&&(q=16777215);d=lb.tostring(d);if((e.clearscreeneachframe||!e.skiprender||!e.drawingtoscreen)&&""!=d)if("bitmap"==h.typeface[h.currentindex].type){h.cachelabel=d+"_"+h.currentfont+lb.tostring(q);if(!h.cachedtextindex.exists(h.cachelabel)){var b=1,g="",ta=-1,f=0;if(eb.isinstring(d,
"\n")){for(;f<d.length;)"\n"==N.substr(d,f,1)?(b++,g=lb.toint(h.typeface[h.currentindex].tf_bitmap.getStringWidth(g,!1)),g>ta&&(ta=g),g=""):g+=N.substr(d,f,1),f++;g=lb.toint(h.typeface[h.currentindex].tf_bitmap.getStringWidth(g,!1));g>ta&&(ta=g)}else ta=lb.toint(h.typeface[h.currentindex].tf_bitmap.getStringWidth(d,!1));h.cacheindex=h.cachedtext.length;h.cachedtextindex.set(h.cachelabel,h.cacheindex);h.cachedtext.push(new fb(ta,lb.toint(h.typeface[h.currentindex].height)*b,!0,0));h.drawto=h.cachedtext[h.cacheindex];
h.cache_bitmap_text(d,q);h.drawto=e.drawto}h.cacheindex=h.cachedtextindex.get(h.cachelabel);h.display_bitmap(a,c,h.cacheindex,h.currentsize)}else"tff"==h.typeface[h.currentindex].type&&h.display_ttf(a,c,d,q)};h.cache_bitmap_text=function(a,c){h.typeface[h.currentindex].tf_bitmap.set_useTextColor(!0);h.typeface[h.currentindex].tf_bitmap.set_textColor(-16777216+c);h.typeface[h.currentindex].tf_bitmap.set_text(a);h.drawto.draw(h.typeface[h.currentindex].tf_bitmap)};h.display_bitmap=function(a,c,d,q){a=
h.cachealignx(a,d);c=h.cachealigny(c,d);a-=h.cachealigntextx(d,h.textalign);h.fontmatrix.identity();1!=q&&h.fontmatrix.scale(q,q);0!=h.textrotate&&(0!=h.textrotatexpivot&&(h.tempxpivot=h.cachealigntextx(d,h.textrotatexpivot)),0!=h.textrotateypivot&&(h.tempypivot=h.cachealigntexty(d,h.textrotatexpivot)),h.fontmatrix.translate(-h.tempxpivot,-h.tempypivot),h.fontmatrix.rotate(3.1415*h.textrotate/180),h.fontmatrix.translate(h.tempxpivot,h.tempypivot));h.fontmatrix.translate(Math.floor(a),Math.floor(c));
h.drawto.draw(h.cachedtext[d],h.fontmatrix)};h.display_ttf=function(a,c,d,q){};h.createtypeface=function(a){Fa.log("Precaching glyphs for Font."+a.toUpperCase());"bitmap"==h.fontfile[h.fontfileindex.get(a)].type&&(h.typefaceindex.exists(a+"_1")||h.addtypeface(a,1))};h.setfont=function(a,c){null==c&&(c=1);h.fontfileindex.exists(a)||h.addfont(a,c);a!=h.currentfont&&(h.currentfont=a,-1!=c&&("bitmap"==h.fontfile[h.fontfileindex.get(a)].type?(h.typefaceindex.exists(h.currentfont+"_1")||h.addtypeface(h.currentfont,
1),h.currentindex=h.typefaceindex.get(h.currentfont+"_1")):"ttf"==h.fontfile[h.fontfileindex.get(a)].type&&(h.typefaceindex.exists(h.currentfont+"_"+X.string(h.currentsize))||h.addtypeface(h.currentfont,h.currentsize),h.currentindex=h.typefaceindex.get(h.currentfont+"_"+X.string(h.currentsize)))));h.changesize(c)};h.changesize=function(a){a!=h.currentsize&&(h.currentsize=a,"null"!=h.currentfont&&("bitmap"==h.fontfile[h.fontfileindex.get(h.currentfont)].type?(h.typefaceindex.exists(h.currentfont+"_1")||
h.addtypeface(h.currentfont,1),h.currentindex=h.typefaceindex.get(h.currentfont+"_1")):"ttf"==h.fontfile[h.fontfileindex.get(h.currentfont)].type&&(h.typefaceindex.exists(h.currentfont+"_"+X.string(h.currentsize))||h.addtypeface(h.currentfont,h.currentsize),h.currentindex=h.typefaceindex.get(h.currentfont+"_"+X.string(h.currentsize)))))};h.addfont=function(a,c){null==c&&(c=1);h.fontfile.push(new Wc(a));h.fontfileindex.set(a,h.fontfile.length-1);h.currentfont=a;h.changesize(c)};h.addtypeface=function(a,
c){h.typeface.push(new pe(a,c));h.typefaceindex.set(a+"_"+(null==c?"null":""+c),h.typeface.length-1)};h.getfonttypename=function(a){return h.fontfile[h.fontfileindex.get(a)].typename};h.gfxstage=null;h.drawto=null;h.textalign=null;h.textrotate=null;h.textrotatexpivot=null;h.textrotateypivot=null;h.textalphamult=null;h.temprotate=null;h.tempxscale=null;h.tempyscale=null;h.tempxpivot=null;h.tempypivot=null;h.tempalpha=null;h.tempred=null;h.tempgreen=null;h.tempblue=null;h.changecolours=null;h.alphact=
null;h.inputtext=null;h.lastentry=null;h.inputsound=null;h.inputmaxlength=null;h.input_textxp=null;h.input_textyp=null;h.input_responsexp=null;h.input_responseyp=null;h.input_textcol=null;h.input_responsecol=null;h.input_text=null;h.input_response=null;h.input_cursorglow=null;h.input_font=null;h.input_textsize=null;h.input_show=null;var xa=function(a,c){this.minOffsetX=this.spaceWidth=0;this.bold=this.italic=!1;this.size=this.lineHeight=0;this.bitmap=c;this.fontName=a;this.glyphs=new qb;xa.store(a,
this)};k["haxegon.bitmapFont.BitmapFont"]=xa;xa.__name__=!0;xa.store=function(a,c){xa.fonts.exists(a)||xa.fonts.set(a,c)};xa.get=function(a){return xa.fonts.get(a)};xa.remove=function(a){var c=xa.fonts.get(a);xa.fonts.remove(a);null!=c&&c.dispose()};xa.clearFonts=function(){for(var a=xa.fonts.iterator();a.hasNext();)a.next().dispose();xa.fonts=new ba};xa.getDefaultFont=function(){var a=xa.get("defaultFontKey");if(null!=a)return a;for(var a="",c=new fb(700,9,!0,-7829368),d=0,q=0;2867>q;){for(var a=
a+N.substr(" 36000000000000000000!26101010001000\"46101010100000000000000000#66010100111110010100111110010100000000$56001000111011000001101110000100%66100100000100001000010000010010000000&66011000100000011010100100011010000000'26101000000000(36010100100100010000)36100010010010100000*46000010100100101000000000+46000001001110010000000000,36000000000000010100-46000000001110000000000000.26000000001000/66000010000100001000010000100000000000056011001001010010100100110000000156011000010000100001000010000000256111000001001100100001111000000356111000001001100000101110000000456100101001010010011100001000000556111101000011100000101110000000656011001000011100100100110000000756111000001000010001100001000000856011001001001100100100110000000956011001001010010011100001000000:26001000100000;26001000101000<46001001001000010000100000=46000011100000111000000000>46100001000010010010000000?56111000001001100000000100000000@66011100100010101110101010011100000000A56011001001010010111101001000000B56111001001011100100101110000000C56011001001010000100100110000000D56111001001010010100101110000000E56111101000011000100001111000000F56111101000010000110001000000000G56011001000010110100100111000000H56100101001011110100101001000000I26101010101000J56000100001000010100100110000000K56100101001010010111001001000000L46100010001000100011100000M66100010100010110110101010100010000000N56100101001011010101101001000000O56011001001010010100100110000000P56111001001010010111001000000000Q56011001001010010100100110000010R56111001001010010111001001000000S56011101000001100000101110000000T46111001000100010001000000U56100101001010010100100110000000V56100101001010010101000100000000W66100010100010101010110110100010000000X56100101001001100100101001000000Y56100101001010010011100001001100Z56111100001001100100001111000000[36110100100100110000}46110001000010010011000000]36110010010010110000^46010010100000000000000000_46000000000000000011110000'26101000000000a56000000111010010100100111000000b56100001110010010100101110000000c46000001101000100001100000d56000100111010010100100111000000e56000000110010110110000110000000f46011010001000110010000000g5700000011001001010010011100001001100h56100001110010010100101001000000i26100010101000j37010000010010010010100k56100001001010010111001001000000l26101010101000m66000000111100101010101010101010000000n56000001110010010100101001000000o56000000110010010100100110000000p5700000111001001010010111001000010000q5700000011101001010010011100001000010r46000010101100100010000000s56000000111011000001101110000000t46100011001000100001100000u56000001001010010100100111000000v56000001001010010101000100000000w66000000101010101010101010011110000000x56000001001010010011001001000000y5700000100101001010010011100001001100z56000001111000100010001111000000{46011001001000010001100000|26101010101000}46110001000010010011000000~56010101010000000000000000000000\\46111010101010101011100000",
q,1),b=X.parseInt(function(a){a=++q;return N.substr(" 36000000000000000000!26101010001000\"46101010100000000000000000#66010100111110010100111110010100000000$56001000111011000001101110000100%66100100000100001000010000010010000000&66011000100000011010100100011010000000'26101000000000(36010100100100010000)36100010010010100000*46000010100100101000000000+46000001001110010000000000,36000000000000010100-46000000001110000000000000.26000000001000/66000010000100001000010000100000000000056011001001010010100100110000000156011000010000100001000010000000256111000001001100100001111000000356111000001001100000101110000000456100101001010010011100001000000556111101000011100000101110000000656011001000011100100100110000000756111000001000010001100001000000856011001001001100100100110000000956011001001010010011100001000000:26001000100000;26001000101000<46001001001000010000100000=46000011100000111000000000>46100001000010010010000000?56111000001001100000000100000000@66011100100010101110101010011100000000A56011001001010010111101001000000B56111001001011100100101110000000C56011001001010000100100110000000D56111001001010010100101110000000E56111101000011000100001111000000F56111101000010000110001000000000G56011001000010110100100111000000H56100101001011110100101001000000I26101010101000J56000100001000010100100110000000K56100101001010010111001001000000L46100010001000100011100000M66100010100010110110101010100010000000N56100101001011010101101001000000O56011001001010010100100110000000P56111001001010010111001000000000Q56011001001010010100100110000010R56111001001010010111001001000000S56011101000001100000101110000000T46111001000100010001000000U56100101001010010100100110000000V56100101001010010101000100000000W66100010100010101010110110100010000000X56100101001001100100101001000000Y56100101001010010011100001001100Z56111100001001100100001111000000[36110100100100110000}46110001000010010011000000]36110010010010110000^46010010100000000000000000_46000000000000000011110000'26101000000000a56000000111010010100100111000000b56100001110010010100101110000000c46000001101000100001100000d56000100111010010100100111000000e56000000110010110110000110000000f46011010001000110010000000g5700000011001001010010011100001001100h56100001110010010100101001000000i26100010101000j37010000010010010010100k56100001001010010111001001000000l26101010101000m66000000111100101010101010101010000000n56000001110010010100101001000000o56000000110010010100100110000000p5700000111001001010010111001000010000q5700000011101001010010011100001000010r46000010101100100010000000s56000000111011000001101110000000t46100011001000100001100000u56000001001010010100100111000000v56000001001010010101000100000000w66000000101010101010101010011110000000x56000001001010010011001001000000y5700000100101001010010011100001001100z56000001111000100010001111000000{46011001001000010001100000|26101010101000}46110001000010010011000000~56010101010000000000000000000000\\46111010101010101011100000",
a,1)}(this)),g=X.parseInt(function(a){a=++q;return N.substr(" 36000000000000000000!26101010001000\"46101010100000000000000000#66010100111110010100111110010100000000$56001000111011000001101110000100%66100100000100001000010000010010000000&66011000100000011010100100011010000000'26101000000000(36010100100100010000)36100010010010100000*46000010100100101000000000+46000001001110010000000000,36000000000000010100-46000000001110000000000000.26000000001000/66000010000100001000010000100000000000056011001001010010100100110000000156011000010000100001000010000000256111000001001100100001111000000356111000001001100000101110000000456100101001010010011100001000000556111101000011100000101110000000656011001000011100100100110000000756111000001000010001100001000000856011001001001100100100110000000956011001001010010011100001000000:26001000100000;26001000101000<46001001001000010000100000=46000011100000111000000000>46100001000010010010000000?56111000001001100000000100000000@66011100100010101110101010011100000000A56011001001010010111101001000000B56111001001011100100101110000000C56011001001010000100100110000000D56111001001010010100101110000000E56111101000011000100001111000000F56111101000010000110001000000000G56011001000010110100100111000000H56100101001011110100101001000000I26101010101000J56000100001000010100100110000000K56100101001010010111001001000000L46100010001000100011100000M66100010100010110110101010100010000000N56100101001011010101101001000000O56011001001010010100100110000000P56111001001010010111001000000000Q56011001001010010100100110000010R56111001001010010111001001000000S56011101000001100000101110000000T46111001000100010001000000U56100101001010010100100110000000V56100101001010010101000100000000W66100010100010101010110110100010000000X56100101001001100100101001000000Y56100101001010010011100001001100Z56111100001001100100001111000000[36110100100100110000}46110001000010010011000000]36110010010010110000^46010010100000000000000000_46000000000000000011110000'26101000000000a56000000111010010100100111000000b56100001110010010100101110000000c46000001101000100001100000d56000100111010010100100111000000e56000000110010110110000110000000f46011010001000110010000000g5700000011001001010010011100001001100h56100001110010010100101001000000i26100010101000j37010000010010010010100k56100001001010010111001001000000l26101010101000m66000000111100101010101010101010000000n56000001110010010100101001000000o56000000110010010100100110000000p5700000111001001010010111001000010000q5700000011101001010010011100001000010r46000010101100100010000000s56000000111011000001101110000000t46100011001000100001100000u56000001001010010100100111000000v56000001001010010101000100000000w66000000101010101010101010011110000000x56000001001010010011001001000000y5700000100101001010010011100001001100z56000001111000100010001111000000{46011001001000010001100000|26101010101000}46110001000010010011000000~56010101010000000000000000000000\\46111010101010101011100000",
a,1)}(this)),e=0;e<g;)for(var f=e++,h=0;h<b;){var k=h++;q++;"1"==N.substr(" 36000000000000000000!26101010001000\"46101010100000000000000000#66010100111110010100111110010100000000$56001000111011000001101110000100%66100100000100001000010000010010000000&66011000100000011010100100011010000000'26101000000000(36010100100100010000)36100010010010100000*46000010100100101000000000+46000001001110010000000000,36000000000000010100-46000000001110000000000000.26000000001000/66000010000100001000010000100000000000056011001001010010100100110000000156011000010000100001000010000000256111000001001100100001111000000356111000001001100000101110000000456100101001010010011100001000000556111101000011100000101110000000656011001000011100100100110000000756111000001000010001100001000000856011001001001100100100110000000956011001001010010011100001000000:26001000100000;26001000101000<46001001001000010000100000=46000011100000111000000000>46100001000010010010000000?56111000001001100000000100000000@66011100100010101110101010011100000000A56011001001010010111101001000000B56111001001011100100101110000000C56011001001010000100100110000000D56111001001010010100101110000000E56111101000011000100001111000000F56111101000010000110001000000000G56011001000010110100100111000000H56100101001011110100101001000000I26101010101000J56000100001000010100100110000000K56100101001010010111001001000000L46100010001000100011100000M66100010100010110110101010100010000000N56100101001011010101101001000000O56011001001010010100100110000000P56111001001010010111001000000000Q56011001001010010100100110000010R56111001001010010111001001000000S56011101000001100000101110000000T46111001000100010001000000U56100101001010010100100110000000V56100101001010010101000100000000W66100010100010101010110110100010000000X56100101001001100100101001000000Y56100101001010010011100001001100Z56111100001001100100001111000000[36110100100100110000}46110001000010010011000000]36110010010010110000^46010010100000000000000000_46000000000000000011110000'26101000000000a56000000111010010100100111000000b56100001110010010100101110000000c46000001101000100001100000d56000100111010010100100111000000e56000000110010110110000110000000f46011010001000110010000000g5700000011001001010010011100001001100h56100001110010010100101001000000i26100010101000j37010000010010010010100k56100001001010010111001001000000l26101010101000m66000000111100101010101010101010000000n56000001110010010100101001000000o56000000110010010100100110000000p5700000111001001010010111001000010000q5700000011101001010010011100001000010r46000010101100100010000000s56000000111011000001101110000000t46100011001000100001100000u56000001001010010100100111000000v56000001001010010101000100000000w66000000101010101010101010011110000000x56000001001010010011001001000000y5700000100101001010010011100001001100z56000001111000100010001111000000{46011001001000010001100000|26101010101000}46110001000010010011000000~56010101010000000000000000000000\\46111010101010101011100000",
q,1)?c.setPixel32(1+7*d+k,1+f,-1):c.setPixel32(1+7*d+k,1+f,0)}q++;d++}return xa.fromXNA("defaultFontKey",c,a)};xa.fromAngelCode=function(a,c){var d=new ne(c.firstElement()),q=X.string(d.node.resolve("info").att.resolve("face")),b=xa.get(q);if(null!=b)return b;b=new xa(q,a);b.lineHeight=X.parseInt(d.node.resolve("common").att.resolve("lineHeight"));b.size=X.parseInt(d.node.resolve("info").att.resolve("size"));b.fontName=X.string(d.node.resolve("info").att.resolve("face"));b.bold=0!=X.parseInt(d.node.resolve("info").att.resolve("bold"));
b.italic=0!=X.parseInt(d.node.resolve("info").att.resolve("italic"));for(var g,e,f,q=N.cca(" ",0),h,k,l,m,d=d.node.resolve("chars").nodes.resolve("char").iterator();null!=d.head;){var y;g=void 0;d.val=d.head[0];d.head=d.head[1];y=g=d.val;g=new ya;g.x=X.parseInt(y.att.resolve("x"));g.y=X.parseInt(y.att.resolve("y"));g.width=X.parseInt(y.att.resolve("width"));m=X.parseInt(y.att.resolve("height"));g.height=m;h=y.has.resolve("xoffset")?X.parseInt(y.att.resolve("xoffset")):0;k=y.has.resolve("yoffset")?
X.parseInt(y.att.resolve("yoffset")):0;l=y.has.resolve("xadvance")?X.parseInt(y.att.resolve("xadvance")):0;b.minOffsetX=b.minOffsetX>h?h:b.minOffsetX;e=null;f=-1;y.has.resolve("letter")?e=y.att.resolve("letter"):y.has.resolve("id")&&(f=X.parseInt(y.att.resolve("id")));if(-1==f&&null==e)throw new K("Invalid font xml data!");if(null!=e){switch(e){case "space":e=" ";break;case "&quot;":e='"';break;case "&amp;":e="&";break;case "&gt;":e=">";break;case "&lt;":e="<"}f=N.cca(e,0)}b.addGlyphFrame(f,g,h,k,
l);f==q?b.spaceWidth=l:b.lineHeight=b.lineHeight>m+k?b.lineHeight:m+k}return b};xa.fromXNA=function(a,c,d,q){null==q&&(q=0);var b=xa.get(a);if(null!=b)return b;b=new xa(a,c);b.fontName=a;null==d&&(d=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~");a=c.getPixel(0,0);for(var g=0,e,f=0,h,k=d.length,l,m;g<c.height&&f<k;){var y=0;for(e=0;e<c.width&&f<k;){if(X["int"](c.getPixel(e,g))!=a){var r=e;for(h=g;X["int"](c.getPixel(r,g))!=a;)r++;for(;X["int"](c.getPixel(e,
h))!=a;)h++;var r=r-e,u=h-g;h=N.cca(d,f);l=new ya(e,g,r,u);m=r;b.addGlyphFrame(h,l,0,0,m);32==h&&(b.spaceWidth=m);u>y&&(y=u);u>b.size&&(b.size=u);e+=r;f++}e++}g+=y+1}b.lineHeight=b.size;xa.POINT.x=xa.POINT.y=0;d=c.getPixel32(0,0);xa.replaceColor(c,d,0);0!=q&&xa.replaceColor(c,q,0);return b};xa.replaceColor=function(a,c,d){var q=0,b=0,g=a.height,e=a.width;for(a.lock();q<g;){for(b=0;b<e;)a.getPixel32(b,q)==c&&a.setPixel32(b,q,d),b++;q++}a.unlock();return a};xa.fromMonospace=function(a,c,d,q,b,g){var e=
xa.get(a);if(null!=e)return e;null==d&&(d=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~");null==b&&(b=c.rect);if(0==b.width||b.get_right()>c.width)b.width=c.width-b.x;if(0==b.height||b.get_bottom()>c.height)b.height=c.height-b.y;null==g&&(g=new Na(0,0));var e=b.width|0,f=b.height|0,h=b.x|0;b=b.y|0;var k=g.x|0,l=g.y|0;g=q.x|0;q=q.y|0;var m=g+k,y=q+l,f=0==q?1:(f+l)/y|0,k=0==g?1:(e+k)/m|0,e=new xa(a,c);e.fontName=a;e.lineHeight=e.size=q;var r;e.spaceWidth=
g;a=0;c=d.length;for(l=0;l<f;)for(var u=l++,t=0,v=k;t<v;)if(r=t++,r=new ya(h+r*m,b+u*y,g,q),e.addGlyphFrame(N.cca(d,a),r,0,0,g),a++,a>=c)return e;return e};xa.prototype={dispose:function(){null!=this.bitmap&&this.bitmap.dispose();this.fontName=this.glyphs=this.bitmap=null},addGlyphFrame:function(a,c,d,q,b){null==b&&(b=0);null==q&&(q=0);null==d&&(d=0);if(0!=c.width&&0!=c.height&&null==this.glyphs.h[a]){var g=new lf(this);g.charCode=a;g.xoffset=d;g.yoffset=q;g.xadvance=b;g.rect=c;this.glyphs.h[a]=g}},
prepareGlyphs:function(a,c,d,q){null==q&&(q=!1);null==d&&(d=!0);return new mf(this,a,c,d,q)},__class__:xa};var lf=function(a){this.parent=a};k["haxegon.bitmapFont.BitmapGlyphFrame"]=lf;lf.__name__=!0;lf.prototype={dispose:function(){this.rect=null;null!=this._bitmap&&this._bitmap.dispose();this._bitmap=null},get_bitmap:function(){if(null!=this._bitmap)return this._bitmap;this._bitmap=new fb(Math.ceil(this.rect.width),Math.ceil(this.rect.height),!0,0);this._bitmap.copyPixels(this.parent.bitmap,this.rect,
new Na);return this._bitmap},__class__:lf,__properties__:{get_bitmap:"get_bitmap"}};var mf=function(a,c,d,q,b){null==b&&(b=!1);null==q&&(q=!0);this.minOffsetX=this.spaceWidth=0;this.glyphMap=new qb;this.glyphs=[];this.font=a;this.scale=c;this.color=q?d:-1;this.minOffsetX=a.minOffsetX*c;this.prepareGlyphs(b)};k["haxegon.bitmapFont.BitmapGlyphCollection"]=mf;mf.__name__=!0;mf.prototype={prepareGlyphs:function(a){null==a&&(a=!1);var c=new Xa;c.scale(this.scale,this.scale);var d=new pc;d.redMultiplier=
Ob.toFloat(this.color>>16&255)/Ob.toFloat(255);d.greenMultiplier=Ob.toFloat(this.color>>8&255)/Ob.toFloat(255);d.blueMultiplier=Ob.toFloat(this.color&255)/Ob.toFloat(255);d.alphaMultiplier=Ob.toFloat(this.color>>24&255)/Ob.toFloat(255);var q,b,g,e,f;this.spaceWidth=this.font.spaceWidth*this.scale;for(var h=this.font.glyphs.iterator();h.hasNext();)g=h.next(),q=g.get_bitmap(),b=Math.ceil(q.width*this.scale),e=Math.ceil(q.height*this.scale),0<b||(b=1),0<e||(e=1),b=new fb(b,e,!0,0),b.draw(q,c,null,null,
null,a),b.colorTransform(b.rect,d),q=Math.ceil(g.xoffset*this.scale),e=Math.ceil(g.yoffset*this.scale),f=Math.ceil(g.xadvance*this.scale),g=new nf(g.charCode,b,q,e,f),this.glyphs.push(g),this.glyphMap.h[g.charCode]=g},dispose:function(){if(null!=this.glyphs)for(var a=0,c=this.glyphs;a<c.length;){var d=c[a];++a;d.dispose()}this.font=this.glyphMap=this.glyphs=null},__class__:mf};var nf=function(a,c,d,q,b){null==b&&(b=0);null==q&&(q=0);null==d&&(d=0);this.offsetX=this.offsetY=this.xAdvance=0;this.charCode=
a;this.bitmap=c;this.offsetX=d;this.offsetY=q;this.xAdvance=b;this.rect=c.rect};k["haxegon.bitmapFont.BitmapGlyph"]=nf;nf.__name__=!0;nf.prototype={dispose:function(){null!=this.bitmap&&this.bitmap.dispose();this.bitmap=null},__class__:nf};var Ed=function(a,c,d,q){null==q&&(q=!1);null==c&&(c="");this._fieldWidth=this._fieldHeight=1;this._pendingBorderGlyphsChange=!1;this.updateImmediately=this._pendingTextChange=this._pendingGraphicChange=this._pendingTextGlyphsChange=!0;this.size=1;this.numLines=
0;this.multiLine=!0;this.backgroundColor=0;this.background=!1;this.borderQuality=0;this.borderSize=1;this.borderColor=-16777216;this.borderStyle=Gb.NONE;this.useTextColor=!1;this.textColor=-1;this._tabSpaces="    ";this.numSpacesInTab=4;this.padding=0;this.wordWrap=this.wrapByWord=this.autoSize=!0;this.autoUpperCase=!1;this.lineSpacing=this.letterSpacing=0;this.alignment="left";this._linesWidth=[];this._lines=[];this.text="";Ba.call(this);this.shadowOffset=new Na(1,1);null==d&&(d=hc.AUTO);this._bitmapData=
new fb(this._fieldWidth,this._fieldHeight,!0,0);this._bitmap=new ke(this._bitmapData,d,q);this._bitmap.smoothing=!1;this.addChild(this._bitmap);this._point=new Na;null==a&&(a=xa.getDefaultFont());this.set_font(a);this.set_text(c);this.set_smoothing(q)};k["haxegon.bitmapFont.BitmapTextField"]=Ed;Ed.__name__=!0;Ed.__super__=Ba;Ed.prototype=l(Ba.prototype,{dispose:function(){this.set_updateImmediately(!1);this.set_font(null);this.set_text(null);this._point=this.shadowOffset=this._linesWidth=this._lines=
null;null!=this.textGlyphs&&this.textGlyphs.dispose();this.textGlyphs=null;null!=this.borderGlyphs&&this.borderGlyphs.dispose();this.borderGlyphs=null;null!=this._bitmap&&this.removeChild(this._bitmap);this._bitmap=null;null!=this._bitmapData&&this._bitmapData.dispose();this._bitmapData=null},forceGraphicUpdate:function(){this._pendingGraphicChange=!0;this._pendingTextGlyphsChange&&this.updateTextGlyphs();this._pendingBorderGlyphsChange&&this.updateBorderGlyphs();this._pendingTextChange&&(this.updateText(),
this._pendingGraphicChange=!0);this._pendingGraphicChange&&this.updateGraphic()},checkImmediateChanges:function(){this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic())},checkPendingChanges:function(){this._pendingTextGlyphsChange&&this.updateTextGlyphs();this._pendingBorderGlyphsChange&&this.updateBorderGlyphs();
this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0);this._pendingGraphicChange&&this.updateGraphic()},set_textColor:function(a){this.textColor!=a&&(this.textColor=a,this._pendingTextGlyphsChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_useTextColor:function(a){this.useTextColor!=
a&&(this.useTextColor=a,this._pendingTextGlyphsChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_text:function(a){a!=this.text&&null!=a&&(this.text=a,this._pendingTextChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&
this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},updateText:function(){this._lines=(this.autoUpperCase?this.text.toUpperCase():this.text).split("\n");this.autoSize||(this.wordWrap?this.wrap():this.cutLines());this.multiLine||(this._lines=[this._lines[0]]);this._pendingTextChange=!1;this._pendingGraphicChange=!0},computeTextSize:function(){var a=Math.ceil(this._fieldWidth),c=Math.ceil(this.get_textHeight())+
2*this.padding,a=Math.ceil(this.get_textWidth()),a=this.autoSize?a+2*this.padding:Math.ceil(this._fieldWidth);this._fieldWidth=0==a?1:a;this._fieldHeight=0==c?1:c},getLineWidth:function(a){return 0>a||a>=this._lines.length?0:this.getStringWidth(this._lines[a])},getStringWidth:function(a,c){null==c&&(c=!0);var d=Math.ceil(this.font.spaceWidth*this.size),q=Math.ceil(d*this.numSpacesInTab),b=a.length,g=Math.ceil(Math.abs(this.font.minOffsetX)*this.size);c||(g=0);for(var e,f=e=0,h,k=0;k<b;)f=k++,e=N.cca(a,
f),32==e?e=d:9==e?e=q:this.font.glyphs.h.hasOwnProperty(e)?(h=this.font.glyphs.h[e],e=Math.ceil(h.xadvance*this.size),f==b-1&&(f=Math.ceil((h.xoffset+h.get_bitmap().width)*this.size),f>e&&(e=f))):e=0,g+=e+this.letterSpacing;0<b&&(g-=this.letterSpacing);return g},cutLines:function(){for(var a=[],c,d,q,b=0,g,e,f=this.font.spaceWidth*this.size,h=f*this.numSpacesInTab,k=Math.abs(this.font.minOffsetX)*this.size,l=0,m=this._lines;l<m.length;){var y=m[l];++l;c=y.length;g=new cc;e=k;for(d=0;d<c;)q=N.cca(y,
d),b=32==q?f:9==q?h:this.font.glyphs.h.hasOwnProperty(q)?this.font.glyphs.h[q].xadvance*this.size:0,b+=this.letterSpacing,e+b>this._fieldWidth-2*this.padding?(g.__b+=String.fromCharCode(q),a.push(g.__b),g=new cc,e=k,d=c):(g.__b+=String.fromCharCode(q),e+=b),d++}this._lines=a},wrap:function(){for(var a=[],c,d=0,q=this._lines;d<q.length;){var b=q[d];++d;c=[];this.splitLineIntoWords(b,c);this.wrapByWord?this.wrapLineByWord(c,a):this.wrapLineByCharacter(c,a)}this._lines=a},splitLineIntoWords:function(a,
c){for(var d="",q=new cc,b=!1,g=a.length,e=N.cca("-",0),f=0,h;f<g;)h=N.cca(a,f),d=q.__b,32==h||9==h?(b||(b=!0,""!=d&&(c.push(d),q=new cc)),q.__b+=String.fromCharCode(h)):h==e?(b&&""!=d?(b=!1,c.push(d),c.push("-")):!1==b&&(q=new cc,q.__b+=String.fromCharCode(h),c.push(d+q.__b)),q=new cc):(b&&""!=d&&(b=!1,c.push(d),q=new cc),q.__b+=String.fromCharCode(h)),f++;d=q.__b;""!=d&&c.push(d)},wrapLineByWord:function(a,c){var d=a.length,q,b,g,e,f=!1,h;h=0;var k=[],l,m,y=this.font.spaceWidth*this.size,r=y*this.numSpacesInTab,
u=Math.abs(this.font.minOffsetX)*this.size;if(0<d){q=0;m=u;for(l="";q<d;){g=0;b=a[q];e=b.length;h=N.cca(b,0);for(var f=32==h||9==h,t=0;t<e;)h=t++,h=N.cca(b,h),h=32==h?y:9==h?r:this.font.glyphs.h.hasOwnProperty(h)?this.font.glyphs.h[h].xadvance*this.size:0,g+=h;g+=(e-1)*this.letterSpacing;m+g>this._fieldWidth-2*this.padding?f?(k.push(l),l="",m=u):(""!=l&&k.push(l),l=b,m=u+g+this.letterSpacing):(l+=b,m+=g+this.letterSpacing);q++}""!=l&&k.push(l)}for(d=0;d<k.length;)q=k[d],++d,c.push(q)},wrapLineByCharacter:function(a,
c){var d=a.length,q,b,g,e=!1,f,h,k=0,l=[],m,y,r=this.font.spaceWidth*this.size,u=r*this.numSpacesInTab,t=Math.abs(this.font.minOffsetX)*this.size;if(0<d){q=0;y=t;for(m=new cc;q<d;){b=a[q];g=b.length;f=N.cca(b,0);e=32==f||9==f;for(h=0;h<g;)f=N.cca(b,h),k=32==f?r:9==f?u:this.font.glyphs.h.hasOwnProperty(f)?this.font.glyphs.h[f].xadvance*this.size:0,y+k>this._fieldWidth-2*this.padding?(m=m.__b,e?(l.push(m),h=g,m=new cc,y=t):(""!=m&&l.push(m),m=new cc,m.__b+=String.fromCharCode(f),y=t+k+this.letterSpacing)):
(m.__b+=String.fromCharCode(f),y+=k+this.letterSpacing),h++;q++}m=m.__b;""!=m&&l.push(m)}for(d=0;d<l.length;)q=l[d],++d,c.push(q)},updateGraphic:function(){this.computeTextSize();var a;a=this.background?this.backgroundColor:0;null==this._bitmapData||this._fieldWidth!=this._bitmapData.width||this._fieldHeight!=this._bitmapData.height?(null!=this._bitmapData&&this._bitmapData.dispose(),this._bitmapData=new fb(this._fieldWidth,this._fieldHeight,!0,a),this._bitmap.bitmapData=this._bitmapData,this._bitmap.smoothing=
this.smoothing):this._bitmapData.fillRect(this._bitmapData.rect,a);if(0<this.size){this._bitmapData.lock();a=this._lines.length;var c,d,q,b,g=this.borderSize*this.borderQuality|0;0>=g&&(g=1);var e=this.borderSize/g|0,f=1,h=1,k=1,l=1;this.borderStyle==Gb.SHADOW&&(f=Math.round(Math.abs(this.shadowOffset.x)*this.borderQuality),0>=f&&(f=1),h=Math.round(Math.abs(this.shadowOffset.y)*this.borderQuality),0>=h&&(h=1),k=Math.round(this.shadowOffset.x/f),l=Math.round(this.shadowOffset.y/h));for(var m=0;m<a;)switch(b=
m++,c=this._lines[b],d=this._linesWidth[b],q=X["int"](Math.abs(this.font.minOffsetX)*this.size),b=(b*(this.font.lineHeight*this.size+this.lineSpacing)|0)+this.padding,"center"==this.alignment&&(q+=((this._fieldWidth-d)/2|0)-this.padding),q="right"==this.alignment?q+(this._fieldWidth-(d|0)-this.padding):q+this.padding,this.borderStyle[1]){case 1:for(d=0;d<h;)for(var y=d++,r=0;r<f;){var u=r++;this.blitLine(c,this.borderGlyphs,q+k*(u+1),b+l*(y+1))}break;case 2:for(d=y=0;d<g;)y=d++,y=e*(y+1),this.blitLine(c,
this.borderGlyphs,q-y,b-y),this.blitLine(c,this.borderGlyphs,q,b-y),this.blitLine(c,this.borderGlyphs,q+y,b-y),this.blitLine(c,this.borderGlyphs,q-y,b),this.blitLine(c,this.borderGlyphs,q+y,b),this.blitLine(c,this.borderGlyphs,q-y,b+y),this.blitLine(c,this.borderGlyphs,q,b+y),this.blitLine(c,this.borderGlyphs,q+y,b+y);break;case 3:for(d=y=0;d<g;)y=d++,y=e*(y+1),this.blitLine(c,this.borderGlyphs,q-y,b-y),this.blitLine(c,this.borderGlyphs,q+y,b-y),this.blitLine(c,this.borderGlyphs,q-y,b+y),this.blitLine(c,
this.borderGlyphs,q+y,b+y)}for(g=0;g<a;)b=g++,c=this._lines[b],d=this._linesWidth[b],q=X["int"](Math.abs(this.font.minOffsetX)*this.size),b=(b*(this.font.lineHeight*this.size+this.lineSpacing)|0)+this.padding,"center"==this.alignment&&(q+=((this._fieldWidth-d)/2|0)-this.padding),q="right"==this.alignment?q+(this._fieldWidth-(d|0)-this.padding):q+this.padding,this.blitLine(c,this.textGlyphs,q,b);this._bitmapData.unlock()}this._pendingGraphicChange=!1},blitLine:function(a,c,d,q){if(null!=c)for(var b,
g=this.font.spaceWidth*this.size|0,e=g*this.numSpacesInTab|0,f=a.length,h=0;h<f;)b=h++,b=N.cca(a,b),32==b?d+=g:9==b?d+=e:(b=c.glyphMap.h[b],null!=b&&(this._point.x=d+b.offsetX,this._point.y=q+b.offsetY,this._bitmapData.copyPixels(b.bitmap,b.rect,this._point,null,null,!0),d+=b.xAdvance)),d+=this.letterSpacing},setBorderStyle:function(a,c,d,q){null==q&&(q=1);null==d&&(d=1);null==c&&(c=-1);this.set_borderStyle(a);this.set_borderColor(c);this.set_borderSize(d);this.set_borderQuality(q);this.borderStyle==
Gb.SHADOW&&this.shadowOffset.setTo(this.borderSize,this.borderSize);this._pendingGraphicChange=!0;this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic())},set_width:function(a){a=Math.max(1,a|0);a!=this.get_width()&&(this._fieldWidth=0==a?1:a|0,this._pendingTextChange=!0,this.updateImmediately&&
(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_alignment:function(a){this.alignment!=a&&(this.alignment=a,this._pendingGraphicChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&
(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_multiLine:function(a){this.multiLine!=a&&(this.multiLine=a,this._pendingTextChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_font:function(a){this.font!=
a&&null!=a&&(this.font=a,this._pendingBorderGlyphsChange=this._pendingTextChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_lineSpacing:function(a){this.lineSpacing!=a&&(this.lineSpacing=X["int"](Math.abs(a)),this._pendingGraphicChange=!0,this.updateImmediately&&
(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return this.lineSpacing},set_letterSpacing:function(a){a=X["int"](Math.abs(a));a!=this.letterSpacing&&(this.letterSpacing=a,this._pendingTextChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&
this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return this.letterSpacing},set_autoUpperCase:function(a){this.autoUpperCase!=a&&(this.autoUpperCase=a,this._pendingTextChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&
this.updateGraphic()));return this.autoUpperCase},set_wordWrap:function(a){this.wordWrap!=a&&(this.wordWrap=a,this._pendingTextChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return this.wordWrap},set_wrapByWord:function(a){this.wrapByWord!=a&&(this.wrapByWord=a,this._pendingTextChange=
!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_autoSize:function(a){this.autoSize!=a&&(this.autoSize=a,this._pendingTextChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),
this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return this.autoSize},set_size:function(a){var c=Math.abs(a);c!=this.size&&(this.size=c,this._pendingTextChange=this._pendingBorderGlyphsChange=this._pendingTextGlyphsChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=
!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_padding:function(a){a!=this.padding&&(this.padding=a,this._pendingTextChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_numSpacesInTab:function(a){if(this.numSpacesInTab!=a&&0<a){this.numSpacesInTab=
a;this._tabSpaces="";for(var c=0;c<a;)c++,this._tabSpaces+=" ";this._pendingTextChange=!0;this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic())}return a},set_background:function(a){this.background!=a&&(this.background=a,this._pendingGraphicChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&
this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_backgroundColor:function(a){this.backgroundColor!=a&&(this.backgroundColor=a,this._pendingGraphicChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),
this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_borderStyle:function(a){a!=this.borderStyle&&(this.borderStyle=a,this._pendingBorderGlyphsChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return this.borderStyle},set_borderColor:function(a){this.borderColor!=
a&&(this.borderColor=a,this._pendingBorderGlyphsChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic()));return a},set_borderSize:function(a){a!=this.borderSize&&(this.borderSize=a,this.borderStyle!=Gb.NONE&&(this._pendingGraphicChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&
this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic())));return a},set_borderQuality:function(a){a=Math.min(1,Math.max(0,a));a!=this.borderQuality&&(this.borderQuality=a,this.borderStyle!=Gb.NONE&&(this._pendingGraphicChange=!0,this.updateImmediately&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),
this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic())));return a},get_numLines:function(){return this._lines.length},get_textWidth:function(){var a=0,c=this._lines.length,d;this._linesWidth=[];for(var q=0;q<c;){var b=q++;d=this.getLineWidth(b);this._linesWidth[b]=d;a=Math.max(a,d)}return a},get_textHeight:function(){return(this.get_lineHeight()+this.lineSpacing)*this._lines.length-this.lineSpacing},get_lineHeight:function(){return this.font.lineHeight*
this.size},set_updateImmediately:function(a){this.updateImmediately!=a&&(this.updateImmediately=a)&&(this._pendingTextGlyphsChange&&this.updateTextGlyphs(),this._pendingBorderGlyphsChange&&this.updateBorderGlyphs(),this._pendingTextChange&&(this.updateText(),this._pendingGraphicChange=!0),this._pendingGraphicChange&&this.updateGraphic());return a},set_smoothing:function(a){return this.smoothing=this._bitmap.smoothing=a},updateTextGlyphs:function(){null!=this.font&&(null!=this.textGlyphs&&this.textGlyphs.dispose(),
this.textGlyphs=this.font.prepareGlyphs(this.size,this.textColor,this.useTextColor,this.smoothing),this._pendingTextGlyphsChange=!1,this._pendingGraphicChange=!0)},updateBorderGlyphs:function(){null==this.font||null!=this.borderGlyphs&&this.borderColor==this.borderGlyphs.color&&this.size==this.borderGlyphs.scale&&this.font==this.borderGlyphs.font||(null!=this.borderGlyphs&&this.borderGlyphs.dispose(),this.borderGlyphs=this.font.prepareGlyphs(this.size,this.borderColor,!0,this.smoothing));this._pendingBorderGlyphsChange=
!1;this._pendingGraphicChange=!0},__class__:Ed,__properties__:l(Ba.prototype.__properties__,{set_updateImmediately:"set_updateImmediately",set_smoothing:"set_smoothing",set_size:"set_size",get_numLines:"get_numLines",set_multiLine:"set_multiLine",set_backgroundColor:"set_backgroundColor",set_background:"set_background",set_borderQuality:"set_borderQuality",set_borderSize:"set_borderSize",set_borderColor:"set_borderColor",set_borderStyle:"set_borderStyle",set_useTextColor:"set_useTextColor",set_textColor:"set_textColor",
set_numSpacesInTab:"set_numSpacesInTab",get_lineHeight:"get_lineHeight",get_textHeight:"get_textHeight",get_textWidth:"get_textWidth",set_padding:"set_padding",set_autoSize:"set_autoSize",set_wrapByWord:"set_wrapByWord",set_wordWrap:"set_wordWrap",set_autoUpperCase:"set_autoUpperCase",set_letterSpacing:"set_letterSpacing",set_lineSpacing:"set_lineSpacing",set_alignment:"set_alignment",set_text:"set_text",set_font:"set_font"})});var Gb=k["haxegon.bitmapFont.TextBorderStyle"]={__ename__:!0,__constructs__:["NONE",
"SHADOW","OUTLINE","OUTLINE_FAST"]};Gb.NONE=["NONE",0];Gb.NONE.toString=r;Gb.NONE.__enum__=Gb;Gb.SHADOW=["SHADOW",1];Gb.SHADOW.toString=r;Gb.SHADOW.__enum__=Gb;Gb.OUTLINE=["OUTLINE",2];Gb.OUTLINE.toString=r;Gb.OUTLINE.__enum__=Gb;Gb.OUTLINE_FAST=["OUTLINE_FAST",3];Gb.OUTLINE_FAST.toString=r;Gb.OUTLINE_FAST.__enum__=Gb;var If=function(a,c,d,q,b){this.name=a;this.tileset=c;this.tilesetnum=e.tilesetindex.get(this.tileset);this.startframe=d;this.endframe=q;this.delayperframe=b;this.reset()};k["haxegon.util.AnimationContainer"]=
If;If.__name__=!0;If.prototype={update:function(){this.timethisframe++;this.timethisframe>this.delayperframe&&(this.timethisframe=0,this.currentframe++,this.currentframe>this.endframe&&(this.currentframe=this.startframe))},reset:function(){this.timethisframe=0;this.currentframe=this.startframe},__class__:If};var pe=function(a,c){this.type=h.fontfile[h.fontfileindex.get(a)].type;"bitmap"==this.type?this.loadbitmapfont(a,c):"ttf"==this.type&&this.loadttffont(a,c)};k["haxegon.util.Fontclass"]=pe;pe.__name__=
!0;pe.prototype={loadbitmapfont:function(a,c){this.name=a;this.size=c;this.tf_bitmap=new Ed(h.fontfile[h.fontfileindex.get(a)].bitmapfont);this.tf_bitmap.set_text("???");this.height=this.tf_bitmap.get_textHeight();this.tf_bitmap.set_background(!1);this.tfbitmap=new fb(e.screenwidth,e.screenheight,!0,0)},loadttffont:function(a,c){this.name=a;this.size=c;this.tf_ttf=new Ib;this.tf_ttf.set_embedFonts(!0);this.tf_ttf.set_defaultTextFormat(new Je(h.getfonttypename(a),lb.toint(this.size),0,!1));this.tf_ttf.set_selectable(!1);
this.tf_ttf.set_width(e.screenwidth);this.tf_ttf.set_height(e.screenheight);this.tf_ttf.set_antiAliasType(ic.NORMAL);this.tf_ttf.set_text("???");this.tfbitmap=new fb(e.screenwidth,e.screenheight,!0,0);this.tf_ttf.set_height(e.screenheight)},clearbitmap:function(){this.tfbitmap.fillRect(this.tfbitmap.rect,0)},__class__:pe};var Wc=function(a){if(ub.exists("data/fonts/"+a+"/"+a+".fnt")){this.type="bitmap";this.fontxml=$.parse(ub.getText("data/fonts/"+a+"/"+a+".fnt"));var c=ub.getBitmapData("data/fonts/"+
a+"/"+a+"_0.png");this.fontimage=new fb(c.width,c.height,!0,0);for(var d=0,q=c.height;d<q;)for(var b=d++,g=0,e=c.width;g<e;){var f=g++,h=c.getPixel(f,b);0!=h&&0!=h&&this.fontimage.setPixel32(f,b,-1)}this.bitmapfont=xa.fromAngelCode(this.fontimage,this.fontxml);this.typename=a}else if(ub.exists("data/fonts/"+a+"/"+a+".ttf"))this.type="ttf",this.filename="data/fonts/"+a+"/"+a+".ttf",this.font=ub.getFont(this.filename),this.typename=this.font.name;else throw new K('ERROR: Cannot set font to "'+a+'", no TTF or Bitmap Font found.');
};k["haxegon.util.Fontfile"]=Wc;Wc.__name__=!0;Wc.prototype={__class__:Wc};var vc=k["hscript.Const"]={__ename__:!0,__constructs__:["CInt","CFloat","CString"]};vc.CInt=function(a){a=["CInt",0,a];a.__enum__=vc;a.toString=r;return a};vc.CFloat=function(a){a=["CFloat",1,a];a.__enum__=vc;a.toString=r;return a};vc.CString=function(a){a=["CString",2,a];a.__enum__=vc;a.toString=r;return a};var R=k["hscript.ExprDef"]={__ename__:!0,__constructs__:"EConst EIdent EVar EParent EBlock EField EBinop EUnop ECall EIf EWhile EFor EBreak EContinue EFunction EReturn EArray EArrayDecl ENew EThrow ETry EObject ETernary ESwitch".split(" ")};
R.EConst=function(a){a=["EConst",0,a];a.__enum__=R;a.toString=r;return a};R.EIdent=function(a){a=["EIdent",1,a];a.__enum__=R;a.toString=r;return a};R.EVar=function(a,c,d){a=["EVar",2,a,c,d];a.__enum__=R;a.toString=r;return a};R.EParent=function(a){a=["EParent",3,a];a.__enum__=R;a.toString=r;return a};R.EBlock=function(a){a=["EBlock",4,a];a.__enum__=R;a.toString=r;return a};R.EField=function(a,c){var d=["EField",5,a,c];d.__enum__=R;d.toString=r;return d};R.EBinop=function(a,c,d){a=["EBinop",6,a,c,
d];a.__enum__=R;a.toString=r;return a};R.EUnop=function(a,c,d){a=["EUnop",7,a,c,d];a.__enum__=R;a.toString=r;return a};R.ECall=function(a,c){var d=["ECall",8,a,c];d.__enum__=R;d.toString=r;return d};R.EIf=function(a,c,d){a=["EIf",9,a,c,d];a.__enum__=R;a.toString=r;return a};R.EWhile=function(a,c){var d=["EWhile",10,a,c];d.__enum__=R;d.toString=r;return d};R.EFor=function(a,c,d){a=["EFor",11,a,c,d];a.__enum__=R;a.toString=r;return a};R.EBreak=["EBreak",12];R.EBreak.toString=r;R.EBreak.__enum__=R;R.EContinue=
["EContinue",13];R.EContinue.toString=r;R.EContinue.__enum__=R;R.EFunction=function(a,c,d,q){a=["EFunction",14,a,c,d,q];a.__enum__=R;a.toString=r;return a};R.EReturn=function(a){a=["EReturn",15,a];a.__enum__=R;a.toString=r;return a};R.EArray=function(a,c){var d=["EArray",16,a,c];d.__enum__=R;d.toString=r;return d};R.EArrayDecl=function(a){a=["EArrayDecl",17,a];a.__enum__=R;a.toString=r;return a};R.ENew=function(a,c){var d=["ENew",18,a,c];d.__enum__=R;d.toString=r;return d};R.EThrow=function(a){a=
["EThrow",19,a];a.__enum__=R;a.toString=r;return a};R.ETry=function(a,c,d,q){a=["ETry",20,a,c,d,q];a.__enum__=R;a.toString=r;return a};R.EObject=function(a){a=["EObject",21,a];a.__enum__=R;a.toString=r;return a};R.ETernary=function(a,c,d){a=["ETernary",22,a,c,d];a.__enum__=R;a.toString=r;return a};R.ESwitch=function(a,c,d){a=["ESwitch",23,a,c,d];a.__enum__=R;a.toString=r;return a};var Qc=k["hscript.CType"]={__ename__:!0,__constructs__:["CTPath","CTFun","CTAnon","CTParent"]};Qc.CTPath=function(a,c){var d=
["CTPath",0,a,c];d.__enum__=Qc;d.toString=r;return d};Qc.CTFun=function(a,c){var d=["CTFun",1,a,c];d.__enum__=Qc;d.toString=r;return d};Qc.CTAnon=function(a){a=["CTAnon",2,a];a.__enum__=Qc;a.toString=r;return a};Qc.CTParent=function(a){a=["CTParent",3,a];a.__enum__=Qc;a.toString=r;return a};var Bd=function(a,c,d){this.e=a;this.pmin=c;this.pmax=d};k["hscript.Error"]=Bd;Bd.__name__=!0;Bd.prototype={__class__:Bd};var Ha=k["hscript.ErrorDef"]={__ename__:!0,__constructs__:"EInvalidChar EUnexpected EUnterminatedString EUnterminatedComment EUnknownVariable EInvalidIterator EInvalidOp EInvalidAccess".split(" ")};
Ha.EInvalidChar=function(a){a=["EInvalidChar",0,a];a.__enum__=Ha;a.toString=r;return a};Ha.EUnexpected=function(a){a=["EUnexpected",1,a];a.__enum__=Ha;a.toString=r;return a};Ha.EUnterminatedString=["EUnterminatedString",2];Ha.EUnterminatedString.toString=r;Ha.EUnterminatedString.__enum__=Ha;Ha.EUnterminatedComment=["EUnterminatedComment",3];Ha.EUnterminatedComment.toString=r;Ha.EUnterminatedComment.__enum__=Ha;Ha.EUnknownVariable=function(a){a=["EUnknownVariable",4,a];a.__enum__=Ha;a.toString=r;return a};
Ha.EInvalidIterator=function(a){a=["EInvalidIterator",5,a];a.__enum__=Ha;a.toString=r;return a};Ha.EInvalidOp=function(a){a=["EInvalidOp",6,a];a.__enum__=Ha;a.toString=r;return a};Ha.EInvalidAccess=function(a){a=["EInvalidAccess",7,a];a.__enum__=Ha;a.toString=r;return a};var Mb=k["hscript._Interp.Stop"]={__ename__:!0,__constructs__:["SBreak","SContinue","SReturn"]};Mb.SBreak=["SBreak",0];Mb.SBreak.toString=r;Mb.SBreak.__enum__=Mb;Mb.SContinue=["SContinue",1];Mb.SContinue.toString=r;Mb.SContinue.__enum__=
Mb;Mb.SReturn=function(a){a=["SReturn",2,a];a.__enum__=Mb;a.toString=r;return a};var M=k["hscript.Token"]={__ename__:!0,__constructs__:"TEof TConst TId TOp TPOpen TPClose TBrOpen TBrClose TDot TComma TSemicolon TBkOpen TBkClose TQuestion TDoubleDot".split(" ")};M.TEof=["TEof",0];M.TEof.toString=r;M.TEof.__enum__=M;M.TConst=function(a){a=["TConst",1,a];a.__enum__=M;a.toString=r;return a};M.TId=function(a){a=["TId",2,a];a.__enum__=M;a.toString=r;return a};M.TOp=function(a){a=["TOp",3,a];a.__enum__=
M;a.toString=r;return a};M.TPOpen=["TPOpen",4];M.TPOpen.toString=r;M.TPOpen.__enum__=M;M.TPClose=["TPClose",5];M.TPClose.toString=r;M.TPClose.__enum__=M;M.TBrOpen=["TBrOpen",6];M.TBrOpen.toString=r;M.TBrOpen.__enum__=M;M.TBrClose=["TBrClose",7];M.TBrClose.toString=r;M.TBrClose.__enum__=M;M.TDot=["TDot",8];M.TDot.toString=r;M.TDot.__enum__=M;M.TComma=["TComma",9];M.TComma.toString=r;M.TComma.__enum__=M;M.TSemicolon=["TSemicolon",10];M.TSemicolon.toString=r;M.TSemicolon.__enum__=M;M.TBkOpen=["TBkOpen",
11];M.TBkOpen.toString=r;M.TBkOpen.__enum__=M;M.TBkClose=["TBkClose",12];M.TBkClose.toString=r;M.TBkClose.__enum__=M;M.TQuestion=["TQuestion",13];M.TQuestion.toString=r;M.TQuestion.__enum__=M;M.TDoubleDot=["TDoubleDot",14];M.TDoubleDot.toString=r;M.TDoubleDot.__enum__=M;var Cd=function(){this.uid=0;this.line=1;this.opChars="+*/-=!><&|^%~";this.identChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";var a=[["%"],["*","/"],["+","-"],["<<",">>",">>>"],["|","&","^"],"== != > < >= <=".split(" "),
["..."],["&&"],["||"],"= += -= *= /= %= <<= >>= >>>= |= &= ^=".split(" ")];this.opPriority=new ba;this.opRightAssoc=new ba;this.unops=new ba;for(var c=0,d=a.length;c<d;)for(var q=c++,b=0,g=a[q];b<g.length;){var e=g[b];++b;this.opPriority.set(e,q);9==q&&this.opRightAssoc.set(e,!0)}a=0;for(c=["!","++","--","-","~"];a<c.length;)d=c[a],++a,this.unops.set(d,"++"==d||"--"==d)};k["hscript.Parser"]=Cd;Cd.__name__=!0;Cd.prototype={error:function(a,c,d){throw new K(new Bd(a,c,d));},invalidChar:function(a){this.error(Ha.EInvalidChar(a),
this.readPos,this.readPos)},parseString:function(a){this.line=1;this.uid=0;return this.parse(new Qd(a))},parse:function(a){this.tokenMax=this.oldTokenMax=this.tokenMin=this.oldTokenMin=this.readPos=0;this.tokens=new bc;this["char"]=-1;this.input=a;this.ops=[];this.idents=[];a=0;for(var c=this.opChars.length;a<c;){var d=a++;this.ops[N.cca(this.opChars,d)]=!0}a=0;for(c=this.identChars.length;a<c;)d=a++,this.idents[N.cca(this.identChars,d)]=!0;for(a=[];;){c=this.token();if(c==M.TEof)break;this.tokens.push({t:c,
min:this.tokenMin,max:this.tokenMax});this.tokenMin=this.oldTokenMin;this.tokenMax=this.oldTokenMax;a.push(this.parseFullExpr())}return 1==a.length?a[0]:this.mk(R.EBlock(a),0,null)},unexpected:function(a){this.error(Ha.EUnexpected(this.tokenString(a)),this.tokenMin,this.tokenMax);return null},push:function(a){this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax});this.tokenMin=this.oldTokenMin;this.tokenMax=this.oldTokenMax},ensure:function(a){var c=this.token();c!=a&&this.unexpected(c)},mk:function(a,
c,d){null==c&&(c=this.tokenMin);null==d&&(d=this.tokenMax);return{e:a,pmin:c,pmax:d}},isBlock:function(a){a=a.e;switch(a[1]){case 4:case 21:case 23:return!0;case 14:return this.isBlock(a[3]);case 2:return a=a[4],null!=a&&this.isBlock(a);case 9:var c=a[4];a=a[3];return null!=c?this.isBlock(c):this.isBlock(a);case 6:return this.isBlock(a[4]);case 7:return c=a[4],!a[3]&&this.isBlock(c);case 10:return this.isBlock(a[3]);case 11:return this.isBlock(a[4]);case 15:return a=a[2],null!=a&&this.isBlock(a);
case 20:return this.isBlock(a[5]);default:return!1}},parseFullExpr:function(){var a=this.parseExpr(),c=this.token();c!=M.TSemicolon&&c!=M.TEof&&(this.isBlock(a)?(this.tokens.push({t:c,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax):this.unexpected(c));return a},parseObject:function(a){var c=[];try{for(;;){var d=this.token(),q=null;switch(d[1]){case 2:q=d[2];break;case 1:var b=d[2];this.allowJSON||this.unexpected(d);switch(b[1]){case 2:q=b[2];break;
default:this.unexpected(d)}break;case 7:throw"__break__";default:this.unexpected(d)}this.ensure(M.TDoubleDot);c.push({name:q,e:this.parseExpr()});d=this.token();switch(d[1]){case 7:throw"__break__";case 9:break;default:this.unexpected(d)}}}catch(g){if("__break__"!=g)throw g;}return this.parseExprNext(this.mk(R.EObject(c),a,null))},parseExpr:function(){var a=this.token(),c=this.tokenMin;switch(a[1]){case 2:return c=a[2],a=this.parseStructure(c),null==a&&(a=this.mk(R.EIdent(c),null,null)),this.parseExprNext(a);
case 1:return this.parseExprNext(this.mk(R.EConst(a[2]),null,null));case 4:return a=this.parseExpr(),this.ensure(M.TPClose),this.parseExprNext(this.mk(R.EParent(a),c,this.tokenMax));case 6:a=this.token();switch(a[1]){case 7:return this.parseExprNext(this.mk(R.EObject([]),c,null));case 2:var d=this.token();this.tokens.push({t:d,min:this.tokenMin,max:this.tokenMax});this.tokenMin=this.oldTokenMin;this.tokenMax=this.oldTokenMax;this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax});this.tokenMin=
this.oldTokenMin;this.tokenMax=this.oldTokenMax;switch(d[1]){case 14:return this.parseExprNext(this.parseObject(c))}break;case 1:d=a[2];if(this.allowJSON)switch(d[1]){case 2:d=this.token();this.tokens.push({t:d,min:this.tokenMin,max:this.tokenMax});this.tokenMin=this.oldTokenMin;this.tokenMax=this.oldTokenMax;this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax});this.tokenMin=this.oldTokenMin;this.tokenMax=this.oldTokenMax;switch(d[1]){case 14:return this.parseExprNext(this.parseObject(c))}break;
default:this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax}else this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax;break;default:this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax}for(d=[];;){d.push(this.parseFullExpr());a=this.token();if(a==M.TBrClose)break;this.tokens.push({t:a,min:this.tokenMin,
max:this.tokenMax});this.tokenMin=this.oldTokenMin;this.tokenMax=this.oldTokenMax}return this.mk(R.EBlock(d),c,null);case 3:return c=a[2],this.unops.exists(c)?this.makeUnop(c,this.parseExpr()):this.unexpected(a);case 11:d=[];for(a=this.token();a!=M.TBkClose;)this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax,d.push(this.parseExpr()),a=this.token(),a==M.TComma&&(a=this.token());if(1==d.length)switch(d[0].e[1]){case 11:case 10:return a=
"__a_"+this.uid++,c=this.mk(R.EBlock([this.mk(R.EVar(a,null,this.mk(R.EArrayDecl([]),c,null)),c,null),this.mapCompr(a,d[0]),this.mk(R.EIdent(a),c,null)]),c,null),this.parseExprNext(c)}return this.parseExprNext(this.mk(R.EArrayDecl(d),c,null));default:return this.unexpected(a)}},mapCompr:function(a,c){var d;d=c.e;switch(d[1]){case 11:d=R.EFor(d[2],d[3],this.mapCompr(a,d[4]));break;case 10:d=R.EWhile(d[2],this.mapCompr(a,d[3]));break;case 9:var q=d[3],b=d[2];d=null==d[4]?R.EIf(b,this.mapCompr(a,q),
null):R.ECall(this.mk(R.EField(this.mk(R.EIdent(a),c.pmin,c.pmax),"push"),c.pmin,c.pmax),[c]);break;case 4:switch(d[2].length){case 1:d=R.EBlock([this.mapCompr(a,d[2][0])]);break;default:d=R.ECall(this.mk(R.EField(this.mk(R.EIdent(a),c.pmin,c.pmax),"push"),c.pmin,c.pmax),[c])}break;case 3:d=R.EParent(this.mapCompr(a,d[2]));break;default:d=R.ECall(this.mk(R.EField(this.mk(R.EIdent(a),c.pmin,c.pmax),"push"),c.pmin,c.pmax),[c])}return this.mk(d,c.pmin,c.pmax)},makeUnop:function(a,c){var d=c.e;switch(d[1]){case 6:var q=
d[4],b=d[3];return this.mk(R.EBinop(d[2],this.makeUnop(a,b),q),b.pmin,q.pmax);case 22:return q=d[4],b=d[3],d=d[2],this.mk(R.ETernary(this.makeUnop(a,d),b,q),d.pmin,q.pmax);default:return this.mk(R.EUnop(a,!0,c),c.pmin,c.pmax)}},makeBinop:function(a,c,d){var q=d.e;switch(q[1]){case 6:var b=q[4],g=q[3],q=q[2];return this.opPriority.get(a)<=this.opPriority.get(q)&&!this.opRightAssoc.exists(a)?this.mk(R.EBinop(q,this.makeBinop(a,c,g),b),c.pmin,b.pmax):this.mk(R.EBinop(a,c,d),c.pmin,d.pmax);case 22:return b=
q[4],g=q[3],q=q[2],this.opRightAssoc.exists(a)?this.mk(R.EBinop(a,c,d),c.pmin,d.pmax):this.mk(R.ETernary(this.makeBinop(a,c,q),g,b),c.pmin,d.pmax);default:return this.mk(R.EBinop(a,c,d),c.pmin,d.pmax)}},parseStructure:function(a){var c=this.tokenMin;switch(a){case "if":this.ensure(M.TPOpen);var d=this.parseExpr();this.ensure(M.TPClose);var q=this.parseExpr();a=null;var b=!1,g=this.token();g==M.TSemicolon&&(b=!0,g=this.token());db.enumEq(g,M.TId("else"))?a=this.parseExpr():(this.tokens.push({t:g,min:this.tokenMin,
max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax,b&&(this.tokens.push({t:M.TSemicolon,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax));return this.mk(R.EIf(d,q,a),c,null==a?this.tokenMax:a.pmax);case "var":d=this.token();q=null;switch(d[1]){case 2:q=d[2];break;default:this.unexpected(d)}d=this.token();a=null;d==M.TDoubleDot&&this.allowTypes&&(a=this.parseType(),d=this.token());b=null;db.enumEq(d,M.TOp("="))?b=this.parseExpr():
(this.tokens.push({t:d,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax);return this.mk(R.EVar(q,a,b),c,null==b?this.tokenMax:b.pmax);case "while":return d=this.parseExpr(),q=this.parseExpr(),this.mk(R.EWhile(d,q),c,q.pmax);case "for":this.ensure(M.TPOpen);q=this.token();d=null;switch(q[1]){case 2:d=q[2];break;default:this.unexpected(q)}q=this.token();db.enumEq(q,M.TId("in"))||this.unexpected(q);q=this.parseExpr();this.ensure(M.TPClose);a=this.parseExpr();
return this.mk(R.EFor(d,q,a),c,a.pmax);case "break":return this.mk(R.EBreak,null,null);case "continue":return this.mk(R.EContinue,null,null);case "else":return this.unexpected(M.TId(a));case "function":a=this.token();d=null;switch(a[1]){case 2:d=a[2];break;default:this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax}this.ensure(M.TPOpen);q=[];a=this.token();if(a!=M.TPClose)for(b=!1;!b;){var e=null,g=!1;switch(a[1]){case 13:g=!0,
a=this.token()}switch(a[1]){case 2:e=a[2];break;default:this.unexpected(a)}a=this.token();e={name:e};q.push(e);g&&(e.opt=!0);a==M.TDoubleDot&&this.allowTypes&&(e.t=this.parseType(),a=this.token());switch(a[1]){case 9:a=this.token();break;case 5:b=!0;break;default:this.unexpected(a)}}b=null;this.allowTypes&&(a=this.token(),a!=M.TDoubleDot?(this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax):b=this.parseType());a=this.parseExpr();
return this.mk(R.EFunction(q,a,d,b),c,a.pmax);case "return":return d=this.token(),this.tokens.push({t:d,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax,d=d==M.TSemicolon?null:this.parseExpr(),this.mk(R.EReturn(d),c,null==d?this.tokenMax:d.pmax);case "new":d=[];q=this.token();switch(q[1]){case 2:d.push(q[2]);break;default:this.unexpected(q)}for(a=!0;a;)switch(q=this.token(),q[1]){case 8:q=this.token();switch(q[1]){case 2:d.push(q[2]);break;default:this.unexpected(q)}break;
case 4:a=!1;break;default:this.unexpected(q)}q=this.parseExprList(M.TPClose);return this.mk(R.ENew(d.join("."),q),c,null);case "throw":return d=this.parseExpr(),this.mk(R.EThrow(d),c,d.pmax);case "try":d=this.parseExpr();b=this.token();db.enumEq(b,M.TId("catch"))||this.unexpected(b);this.ensure(M.TPOpen);b=this.token();switch(b[1]){case 2:q=b[2];break;default:q=this.unexpected(b)}this.ensure(M.TDoubleDot);a=null;this.allowTypes?a=this.parseType():(b=this.token(),db.enumEq(b,M.TId("Dynamic"))||this.unexpected(b));
this.ensure(M.TPClose);b=this.parseExpr();return this.mk(R.ETry(d,q,a,b),c,b.pmax);case "switch":a=this.parseExpr();b=null;g=[];this.ensure(M.TBrOpen);try{for(;;)switch(d=this.token(),d[1]){case 2:switch(d[2]){case "case":e={values:[],expr:null};g.push(e);try{for(;;)switch(q=this.parseExpr(),e.values.push(q),d=this.token(),d[1]){case 9:break;case 14:throw"__break__";default:this.unexpected(d)}}catch(f){if("__break__"!=f)throw f;}var h=[];try{for(;;)switch(d=this.token(),this.tokens.push({t:d,min:this.tokenMin,
max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax,d[1]){case 2:switch(d[2]){case "case":case "default":throw"__break__";default:h.push(this.parseFullExpr())}break;case 7:throw"__break__";default:h.push(this.parseFullExpr())}}catch(k){if("__break__"!=k)throw k;}e.expr=1==h.length?h[0]:0==h.length?this.mk(R.EBlock([]),this.tokenMin,this.tokenMin):this.mk(R.EBlock(h),h[0].pmin,h[h.length-1].pmax);break;case "default":null!=b&&this.unexpected(d);this.ensure(M.TDoubleDot);
e=[];try{for(;;)switch(d=this.token(),this.tokens.push({t:d,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax,d[1]){case 2:switch(d[2]){case "case":case "default":throw"__break__";default:e.push(this.parseFullExpr())}break;case 7:throw"__break__";default:e.push(this.parseFullExpr())}}catch(l){if("__break__"!=l)throw l;}b=1==e.length?e[0]:0==e.length?this.mk(R.EBlock([]),this.tokenMin,this.tokenMin):this.mk(R.EBlock(e),e[0].pmin,e[e.length-1].pmax);
break;default:this.unexpected(d)}break;case 7:throw"__break__";default:this.unexpected(d)}}catch(m){if("__break__"!=m)throw m;}return this.mk(R.ESwitch(a,g,b),c,this.tokenMax);default:return null}},parseExprNext:function(a){var c=this.token();switch(c[1]){case 3:var d=c[2];if(this.unops.get(d)){var q;if(!(q=this.isBlock(a)))switch(a.e[1]){case 3:q=!0;break;default:q=!1}return q?(this.tokens.push({t:c,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax,
a):this.parseExprNext(this.mk(R.EUnop(d,!1,a),a.pmin,null))}return this.makeBinop(d,a,this.parseExpr());case 8:c=this.token();d=null;switch(c[1]){case 2:d=c[2];break;default:this.unexpected(c)}return this.parseExprNext(this.mk(R.EField(a,d),a.pmin,null));case 4:return this.parseExprNext(this.mk(R.ECall(a,this.parseExprList(M.TPClose)),a.pmin,null));case 11:return c=this.parseExpr(),this.ensure(M.TBkClose),this.parseExprNext(this.mk(R.EArray(a,c),a.pmin,null));case 13:return c=this.parseExpr(),this.ensure(M.TDoubleDot),
d=this.parseExpr(),this.mk(R.ETernary(a,c,d),a.pmin,d.pmax);default:return this.tokens.push({t:c,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax,a}},parseType:function(){var a=this.token();switch(a[1]){case 2:for(var c=[a[2]];;){a=this.token();if(a!=M.TDot)break;a=this.token();switch(a[1]){case 2:c.push(a[2]);break;default:this.unexpected(a)}}var d=null;switch(a[1]){case 3:if("<"==a[2]){d=[];try{for(;;){d.push(this.parseType());a=this.token();switch(a[1]){case 9:continue;
case 3:if(">"==a[2])throw"__break__";}this.unexpected(a)}}catch(q){if("__break__"!=q)throw q;}}else this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax;break;default:this.tokens.push({t:a,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax}return this.parseTypeNext(Qc.CTPath(c,d));case 4:return a=this.parseType(),this.ensure(M.TPClose),this.parseTypeNext(Qc.CTParent(a));case 6:c=[];
try{for(;;)switch(a=this.token(),a[1]){case 7:throw"__break__";case 2:d=a[2];this.ensure(M.TDoubleDot);c.push({name:d,t:this.parseType()});a=this.token();switch(a[1]){case 9:break;case 7:throw"__break__";default:this.unexpected(a)}break;default:this.unexpected(a)}}catch(b){if("__break__"!=b)throw b;}return this.parseTypeNext(Qc.CTAnon(c));default:return this.unexpected(a)}},parseTypeNext:function(a){var c=this.token();switch(c[1]){case 3:if("->"!=c[2])return this.tokens.push({t:c,min:this.tokenMin,
max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax,a;break;default:return this.tokens.push({t:c,min:this.tokenMin,max:this.tokenMax}),this.tokenMin=this.oldTokenMin,this.tokenMax=this.oldTokenMax,a}c=this.parseType();switch(c[1]){case 1:return c[2].unshift(a),c;default:return Qc.CTFun([a],c)}},parseExprList:function(a){var c=[],d=this.token();if(d==a)return c;this.tokens.push({t:d,min:this.tokenMin,max:this.tokenMax});this.tokenMin=this.oldTokenMin;this.tokenMax=this.oldTokenMax;
try{for(;;)switch(c.push(this.parseExpr()),d=this.token(),d[1]){case 9:break;default:if(d==a)throw"__break__";this.unexpected(d)}}catch(q){if("__break__"!=q)throw q;}return c},readChar:function(){this.readPos++;try{return this.input.readByte()}catch(a){return a instanceof K&&(a=a.val),0}},readString:function(a){for(var c=0,d=new Ie,q=!1,b=this.line,g=this.input,e=this.readPos-1;;){try{this.readPos++,c=g.readByte()}catch(f){throw f instanceof K&&(f=f.val),this.line=b,new K(new Bd(Ha.EUnterminatedString,
e,e));}if(q)switch(q=!1,c){case 110:d.writeByte(10);break;case 114:d.writeByte(13);break;case 116:d.writeByte(9);break;case 39:case 34:case 92:d.writeByte(c);break;case 47:this.allowJSON?d.writeByte(c):this.invalidChar(c);break;case 117:if(!this.allowJSON)throw new K(this.invalidChar(c));var h=null;try{this.readPos++,this.readPos++,this.readPos++,this.readPos++,h=g.readString(4)}catch(k){throw k instanceof K&&(k=k.val),this.line=b,new K(new Bd(Ha.EUnterminatedString,e,e));}for(var l=0,m=0;4>m;){var y=
m++,l=l<<4,y=N.cca(h,y);if(null!=y)switch(y){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:l+=y-48;break;case 65:case 66:case 67:case 68:case 69:case 70:l+=y-55;break;case 97:case 98:case 99:case 100:case 101:case 102:l+=y-87;break;default:this.invalidChar(y)}else this.invalidChar(y)}127>=l?d.writeByte(l):(2047>=l?d.writeByte(192|l>>6):(d.writeByte(224|l>>12),d.writeByte(128|l>>6&63)),d.writeByte(128|l&63));break;default:this.invalidChar(c)}else if(92==c)q=!0;else if(c==
a)break;else 10==c&&this.line++,d.writeByte(c)}return d.getBytes().toString()},token:function(){var a=this.tokens.pop();if(null!=a)return this.tokenMin=a.min,this.tokenMax=a.max,a.t;this.oldTokenMin=this.tokenMin;this.oldTokenMax=this.tokenMax;this.tokenMin=0>this["char"]?this.readPos:this.readPos-1;a=this._token();this.tokenMax=0>this["char"]?this.readPos-1:this.readPos-2;return a},_token:function(){var a;0>this["char"]?a=this.readChar():(a=this["char"],this["char"]=-1);for(;;){switch(a){case 0:return M.TEof;
case 32:case 9:case 13:this.tokenMin++;break;case 10:this.line++;this.tokenMin++;break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:for(var c=1*(a-48),d=0;;)switch(a=this.readChar(),d*=10,a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:c=10*c+(a-48);break;case 46:if(0<d){if(10==d&&46==this.readChar())return this.push(M.TOp("...")),a=c|0,M.TConst(a==c?vc.CInt(a):vc.CFloat(c));this.invalidChar(a)}d=1;break;case 120:(0<c||0<d)&&this.invalidChar(a);
for(var q=0;;)switch(a=this.readChar(),a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:q=(q<<4)+a-48;break;case 65:case 66:case 67:case 68:case 69:case 70:q=(q<<4)+(a-55);break;case 97:case 98:case 99:case 100:case 101:case 102:q=(q<<4)+(a-87);break;default:return this["char"]=a,M.TConst(vc.CInt(q))}break;default:return this["char"]=a,a=c|0,M.TConst(0<d?vc.CFloat(10*c/d):a==c?vc.CInt(a):vc.CFloat(c))}break;case 59:return M.TSemicolon;case 40:return M.TPOpen;case 41:return M.TPClose;
case 44:return M.TComma;case 46:a=this.readChar();switch(a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:c=a-48;for(d=1;;)switch(a=this.readChar(),d*=10,a){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:c=10*c+(a-48);break;default:return this["char"]=a,M.TConst(vc.CFloat(c/d))}break;case 46:return a=this.readChar(),46!=a&&this.invalidChar(a),M.TOp("...");default:return this["char"]=a,M.TDot}break;case 123:return M.TBrOpen;case 125:return M.TBrClose;
case 91:return M.TBkOpen;case 93:return M.TBkClose;case 39:return M.TConst(vc.CString(this.readString(39)));case 34:return M.TConst(vc.CString(this.readString(34)));case 63:return M.TQuestion;case 58:return M.TDoubleDot;default:if(this.ops[a])for(c=String.fromCharCode(a);;){a=this.readChar();if(!this.ops[a]){if(47==N.cca(c,0))return this.tokenComment(c,a);this["char"]=a;return M.TOp(c)}c+=String.fromCharCode(a)}if(this.idents[a])for(c=String.fromCharCode(a);;){a=this.readChar();if(!this.idents[a])return this["char"]=
a,M.TId(c);c+=String.fromCharCode(a)}this.invalidChar(a)}a=this.readChar()}return null},tokenComment:function(a,c){var d=N.cca(a,1),q=this.input;if(47==d){try{for(;10!=c&&13!=c;)this.readPos++,c=q.readByte();this["char"]=c}catch(b){b instanceof K&&(b=b.val)}return this.token()}if(42==d){d=this.line;try{for(;;){for(;42!=c;)10==c&&this.line++,this.readPos++,c=q.readByte();this.readPos++;c=q.readByte();if(47==c)break}}catch(g){throw g instanceof K&&(g=g.val),this.line=d,new K(new Bd(Ha.EUnterminatedComment,
this.tokenMin,this.tokenMin));}return this.token()}this["char"]=c;return M.TOp(a)},constString:function(a){switch(a[1]){case 0:return a=a[2],null==a?"null":""+a;case 1:return a=a[2],null==a?"null":""+a;case 2:return a[2]}},tokenString:function(a){switch(a[1]){case 0:return"<eof>";case 1:return this.constString(a[2]);case 2:return a[2];case 3:return a[2];case 4:return"(";case 5:return")";case 6:return"{";case 7:return"}";case 8:return".";case 9:return",";case 10:return";";case 11:return"[";case 12:return"]";
case 13:return"?";case 14:return":"}},__class__:Cd};var K=function(a){Error.call(this);this.val=a;Object.prototype.hasOwnProperty.call(a,"name")?this.name=ma.field(a,"name"):this.name="Error";Object.prototype.hasOwnProperty.call(a,"message")?this.message=ma.field(a,"message"):this.message=X.string(a);Error.captureStackTrace&&Error.captureStackTrace(this,K)};k["js._Boot.HaxeError"]=K;K.__name__=!0;K.__super__=Error;K.prototype=l(Error.prototype,{__class__:K});var W=function(){};k["js.Boot"]=W;W.__name__=
!0;W.__unhtml=function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;")};W.__trace=function(a,c){var d;d=null!=c?c.fileName+":"+c.lineNumber+": ":"";d+=W.__string_rec(a,"");if(null!=c&&null!=c.customParams)for(var q=0,$b=c.customParams;q<$b.length;){var g=$b[q];++q;d+=","+W.__string_rec(g,"")}var e;"undefined"!=typeof document&&null!=(e=document.getElementById("haxe:trace"))?e.innerHTML+=W.__unhtml(d)+"<br/>":"undefined"!=typeof b&&null!=b.log&&b.log(d)};W.getClass=
function(a){if(a instanceof Array&&null==a.__enum__)return Array;var c=a.__class__;if(null!=c)return c;a=W.__nativeClassName(a);return null!=a?W.__resolveNativeClass(a):null};W.__string_rec=function(a,c){if(null==a)return"null";if(5<=c.length)return"<...>";var d=typeof a;"function"==d&&(a.__name__||a.__ename__)&&(d="object");switch(d){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];d=a[0]+"(";c+="\t";for(var q=2,b=a.length;q<b;)var g=q++,d=2!=g?d+(","+W.__string_rec(a[g],
c)):d+W.__string_rec(a[g],c);return d+")"}d=a.length;q="[";c+="\t";for(b=0;b<d;)g=b++,q+=(0<g?",":"")+W.__string_rec(a[g],c);return q+"]"}try{q=a.toString}catch(e){return e instanceof K&&(e=e.val),"???"}if(null!=q&&q!=Object.toString&&"function"==typeof q&&(d=a.toString(),"[object Object]"!=d))return d;d=null;q="{\n";c+="\t";b=null!=a.hasOwnProperty;for(d in a)b&&!a.hasOwnProperty(d)||"prototype"==d||"__class__"==d||"__super__"==d||"__interfaces__"==d||"__properties__"==d||(2!=q.length&&(q+=", \n"),
q+=c+d+" : "+W.__string_rec(a[d],c));c=c.substring(1);return q+("\n"+c+"}");case "function":return"<function>";case "string":return a;default:return String(a)}};W.__interfLoop=function(a,c){if(null==a)return!1;if(a==c)return!0;var d=a.__interfaces__;if(null!=d)for(var q=0,b=d.length;q<b;){var g=q++,g=d[g];if(g==c||W.__interfLoop(g,c))return!0}return W.__interfLoop(a.__super__,c)};W.__instanceof=function(a,c){if(null==c)return!1;switch(c){case pg:return(a|0)===a;case Pb:return"number"==typeof a;case eg:return"boolean"==
typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case qg:return!0;default:if(null!=a)if("function"==typeof c){if(a instanceof c||W.__interfLoop(W.getClass(a),c))return!0}else{if("object"==typeof c&&W.__isNativeObj(c)&&a instanceof c)return!0}else return!1;return c==Jf&&null!=a.__name__||c==wc&&null!=a.__ename__?!0:a.__enum__==c}};W.__cast=function(a,c){if(W.__instanceof(a,c))return a;throw new K("Cannot cast "+X.string(a)+" to "+X.string(c));};W.__nativeClassName=
function(a){a=W.__toStr.call(a).slice(8,-1);return"Object"==a||"Function"==a||"Math"==a||"JSON"==a?null:a};W.__isNativeObj=function(a){return null!=W.__nativeClassName(a)};W.__resolveNativeClass=function(a){return Function("return typeof "+a+' != "undefined" ? '+a+" : null")()};var nb=function(a){if(a instanceof Array&&null==a.__enum__)this.a=a,this.byteLength=a.length;else{this.a=[];for(var c=0;c<a;){var d=c++;this.a[d]=0}this.byteLength=a}};k["js.html.compat.ArrayBuffer"]=nb;nb.__name__=!0;nb.sliceImpl=
function(a,c){var d=new rb(this,a,null==c?null:c-a),q=new le(d.byteLength);(new rb(q)).set(d);return q};nb.prototype={slice:function(a,c){return new nb(this.a.slice(a,c))},__class__:nb};var Vb=function(a,c,d){this.buf=a;this.offset=null==c?0:c;this.length=null==d?a.byteLength-this.offset:d;if(0>this.offset||0>this.length||this.offset+this.length>a.byteLength)throw new K(ec.OutsideBounds);};k["js.html.compat.DataView"]=Vb;Vb.__name__=!0;Vb.prototype={getInt8:function(a){a=this.buf.a[this.offset+a];
return 128<=a?a-256:a},getUint8:function(a){return this.buf.a[this.offset+a]},getInt16:function(a,c){var d=this.getUint16(a,c);return 32768<=d?d-65536:d},getUint16:function(a,c){return c?this.buf.a[this.offset+a]|this.buf.a[this.offset+a+1]<<8:this.buf.a[this.offset+a]<<8|this.buf.a[this.offset+a+1]},getInt32:function(a,c){var d=this.offset+a,q=this.buf.a[d++],b=this.buf.a[d++],g=this.buf.a[d++],d=this.buf.a[d++];return c?q|b<<8|g<<16|d<<24:d|g<<8|b<<16|q<<24},getUint32:function(a,c){var d=this.getInt32(a,
c);return 0>d?d+4294967296:d},getFloat32:function(a,c){return Vc.i32ToFloat(this.getInt32(a,c))},getFloat64:function(a,c){var d=this.getInt32(a,c),q=this.getInt32(a+4,c);return Vc.i64ToDouble(c?d:q,c?q:d)},setInt8:function(a,c){this.buf.a[a+this.offset]=0>c?c+128&255:c&255},setUint8:function(a,c){this.buf.a[a+this.offset]=c&255},setInt16:function(a,c,d){this.setUint16(a,0>c?c+65536:c,d)},setUint16:function(a,c,d){a+=this.offset;d?(this.buf.a[a]=c&255,this.buf.a[a++]=c>>8&255):(this.buf.a[a++]=c>>
8&255,this.buf.a[a]=c&255)},setInt32:function(a,c,d){this.setUint32(a,c,d)},setUint32:function(a,c,d){a+=this.offset;d?(this.buf.a[a++]=c&255,this.buf.a[a++]=c>>8&255,this.buf.a[a++]=c>>16&255,this.buf.a[a++]=c>>>24):(this.buf.a[a++]=c>>>24,this.buf.a[a++]=c>>16&255,this.buf.a[a++]=c>>8&255,this.buf.a[a++]=c&255)},setFloat32:function(a,c,d){this.setUint32(a,Vc.floatToI32(c),d)},setFloat64:function(a,c,d){c=Vc.doubleToI64(c);d?(this.setUint32(a,c.low),this.setUint32(a,c.high)):(this.setUint32(a,c.high),
this.setUint32(a,c.low))},__class__:Vb};var vd=function(){};k["js.html.compat.Uint8Array"]=vd;vd.__name__=!0;vd._new=function(a,c,d){if("number"==typeof a){d=[];for(c=0;c<a;){var q=c++;d[q]=0}d.byteLength=d.length;d.byteOffset=0;d.buffer=new nb(d)}else if(W.__instanceof(a,nb))null==c&&(c=0),null==d&&(d=a.byteLength-c),d=0==c?a.a:a.a.slice(c,c+d),d.byteLength=d.length,d.byteOffset=c,d.buffer=a;else if(a instanceof Array&&null==a.__enum__)d=a.slice(),d.byteLength=d.length,d.byteOffset=0,d.buffer=new nb(d);
else throw new K("TODO "+X.string(a));d.subarray=vd._subarray;d.set=vd._set;return d};vd._set=function(a,c){if(W.__instanceof(a.buffer,nb)){if(a.byteLength+c>this.byteLength)throw new K("set() outside of range");for(var d=0,q=a.byteLength;d<q;){var b=d++;this[b+c]=a[b]}}else if(a instanceof Array&&null==a.__enum__){if(a.length+c>this.byteLength)throw new K("set() outside of range");d=0;for(q=a.length;d<q;)b=d++,this[b+c]=a[b]}else throw new K("TODO");};vd._subarray=function(a,c){var d=vd._new(this.slice(a,
c));d.byteOffset=a;return d};var qe=function(){this.enabled=!0;this.audio=new ba;this.font=new ba;this.image=new ba};k["lime.AssetCache"]=qe;qe.__name__=!0;qe.prototype={clear:function(a){if(null==a)this.audio=new ba,this.font=new ba,this.image=new ba;else{for(var c=this.audio.keys();c.hasNext();){var d=c.next();na.startsWith(d,a)&&this.audio.remove(d)}for(c=this.font.keys();c.hasNext();)d=c.next(),na.startsWith(d,a)&&this.font.remove(d);for(c=this.image.keys();c.hasNext();)d=c.next(),na.startsWith(d,
a)&&this.image.remove(d)}},__class__:qe};var Va=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_Void_Void"]=Va;Va.__name__=!0;Va.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},remove:function(a){for(var c=this.listeners.length;0<=
--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(){for(var a=this.listeners,c=this.repeat,d=0;d<a.length;)a[d](),c[d]?d++:this.remove(a[d])},__class__:Va};var ka=function(){};k["lime.Assets"]=ka;ka.__name__=!0;ka.exists=function(a,c){ka.initialize();null==c&&(c="BINARY");var d=a.substring(0,a.indexOf(":")),b;b=a.indexOf(":")+1;b=N.substr(a,b,null);d=ka.getLibrary(d);return null!=d?d.exists(b,c):!1};ka.getFont=
function(a,c){null==c&&(c=!0);ka.initialize();if(c&&ka.cache.enabled&&ka.cache.font.exists(a))return ka.cache.font.get(a);var d=a.substring(0,a.indexOf(":")),b;b=a.indexOf(":")+1;b=N.substr(a,b,null);var e=ka.getLibrary(d);if(null!=e)if(e.exists(b,"FONT")){if(e.isLocal(b,"FONT"))return d=e.getFont(b),c&&ka.cache.enabled&&ka.cache.font.set(a,d),d;ab.trace('[Assets] Font asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:234,className:"lime.Assets",methodName:"getFont"})}else ab.trace('[Assets] There is no Font asset with an ID of "'+
a+'"',{fileName:"Assets.hx",lineNumber:240,className:"lime.Assets",methodName:"getFont"});else ab.trace('[Assets] There is no asset library named "'+d+'"',{fileName:"Assets.hx",lineNumber:246,className:"lime.Assets",methodName:"getFont"});return null};ka.getImage=function(a,c){null==c&&(c=!0);ka.initialize();if(c&&ka.cache.enabled&&ka.cache.image.exists(a)){var d=ka.cache.image.get(a);if(ka.isValidImage(d))return d}var d=a.substring(0,a.indexOf(":")),b;b=a.indexOf(":")+1;b=N.substr(a,b,null);var e=
ka.getLibrary(d);if(null!=e)if(e.exists(b,"IMAGE")){if(e.isLocal(b,"IMAGE"))return d=e.getImage(b),c&&ka.cache.enabled&&ka.cache.image.set(a,d),d;ab.trace('[Assets] Image asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:304,className:"lime.Assets",methodName:"getImage"})}else ab.trace('[Assets] There is no Image asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:310,className:"lime.Assets",methodName:"getImage"});else ab.trace('[Assets] There is no asset library named "'+
d+'"',{fileName:"Assets.hx",lineNumber:316,className:"lime.Assets",methodName:"getImage"});return null};ka.getLibrary=function(a){if(null==a||""==a)a="default";return ka.libraries.get(a)};ka.getText=function(a){ka.initialize();var c=a.substring(0,a.indexOf(":")),d;d=a.indexOf(":")+1;d=N.substr(a,d,null);var b=ka.getLibrary(c);if(null!=b)if(b.exists(d,"TEXT")){if(b.isLocal(d,"TEXT"))return b.getText(d);ab.trace('[Assets] String asset "'+a+'" exists, but only asynchronously',{fileName:"Assets.hx",lineNumber:407,
className:"lime.Assets",methodName:"getText"})}else ab.trace('[Assets] There is no String asset with an ID of "'+a+'"',{fileName:"Assets.hx",lineNumber:413,className:"lime.Assets",methodName:"getText"});else ab.trace('[Assets] There is no asset library named "'+c+'"',{fileName:"Assets.hx",lineNumber:419,className:"lime.Assets",methodName:"getText"});return null};ka.initialize=function(){ka.initialized||(ka.registerLibrary("default",new Ia),ka.initialized=!0)};ka.isValidImage=function(a){return!0};
ka.registerLibrary=function(a,c){if(ka.libraries.exists(a)){if(ka.libraries.get(a)==c)return;ka.unloadLibrary(a)}null!=c&&c.onChange.add(ka.library_onChange);ka.libraries.set(a,c)};ka.unloadLibrary=function(a){ka.initialize();var c=ka.libraries.get(a);null!=c&&(ka.cache.clear(a+":"),c.onChange.remove(ka.library_onChange),c.unload());ka.libraries.remove(a)};ka.library_onChange=function(){ka.cache.clear();ka.onChange.dispatch()};var ed=function(a){this.parent=a;this.nextUpdate=this.lastUpdate=this.currentUpdate=
0;this.framePeriod=-1;Fd.init()};k["lime._backend.html5.HTML5Application"]=ed;ed.__name__=!0;ed.prototype={convertKeyCode:function(a){if(65<=a&&90>=a)return a+32;switch(a){case 16:return 1073742049;case 17:return 1073742048;case 18:return 1073742050;case 20:return 1073741881;case 144:return 1073741907;case 37:return 1073741904;case 38:return 1073741906;case 39:return 1073741903;case 40:return 1073741905;case 45:return 1073741897;case 46:return 127;case 36:return 1073741898;case 35:return 1073741901;
case 33:return 1073741899;case 34:return 1073741902;case 112:return 1073741882;case 113:return 1073741883;case 114:return 1073741884;case 115:return 1073741885;case 116:return 1073741886;case 117:return 1073741887;case 118:return 1073741888;case 119:return 1073741889;case 120:return 1073741890;case 121:return 1073741891;case 122:return 1073741892;case 123:return 1073741893;case 124:return 1073741928;case 125:return 1073741929;case 126:return 1073741930;case 186:return 59;case 187:return 61;case 188:return 44;
case 189:return 45;case 190:return 46;case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}return a},create:function(a){},exec:function(){window.addEventListener("keydown",u(this,this.handleKeyEvent),!1);window.addEventListener("keyup",u(this,this.handleKeyEvent),!1);window.addEventListener("focus",u(this,this.handleWindowEvent),!1);window.addEventListener("blur",u(this,this.handleWindowEvent),!1);window.addEventListener("resize",u(this,
this.handleWindowEvent),!1);window.addEventListener("beforeunload",u(this,this.handleWindowEvent),!1);for(var a=0,c=["ms","moz","webkit","o"],d=0;d<c.length&&!window.requestAnimationFrame;++d)window.requestAnimationFrame=window[c[d]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[c[d]+"CancelAnimationFrame"]||window[c[d]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(c,d){var b=(new Date).getTime(),e=Math.max(0,16-(b-a)),f=window.setTimeout(function(){c(b+
e)},e);a=b+e;return f});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)});window.requestAnimFrame=window.requestAnimationFrame;this.lastUpdate=(new Date).getTime();this.handleApplicationEvent();return 0},exit:function(){},handleApplicationEvent:function(a){this.currentUpdate=(new Date).getTime();this.currentUpdate>=this.nextUpdate&&(this.deltaTime=this.currentUpdate-this.lastUpdate,this.parent.onUpdate.dispatch(this.deltaTime|0),null!=this.parent.renderers[0]&&
(this.parent.renderers[0].onRender.dispatch(),this.parent.renderers[0].flip()),this.nextUpdate=0>this.framePeriod?this.nextUpdate=this.currentUpdate:this.currentUpdate+this.framePeriod,this.lastUpdate=this.currentUpdate);window.requestAnimationFrame(u(this,this.handleApplicationEvent))},handleKeyEvent:function(a){if(null!=this.parent.windows[0]){var c=this.convertKeyCode(null!=a.keyCode?a.keyCode:a.which),d;d=(a.shiftKey?3:0)|(a.ctrlKey?192:0)|(a.altKey?768:0)|(a.metaKey?3072:0);"keydown"==a.type?
this.parent.windows[0].onKeyDown.dispatch(c,d):this.parent.windows[0].onKeyUp.dispatch(c,d)}},handleWindowEvent:function(a){if(null!=this.parent.windows[0])switch(a.type){case "focus":this.parent.windows[0].onFocusIn.dispatch();this.parent.windows[0].onActivate.dispatch();break;case "blur":this.parent.windows[0].onFocusOut.dispatch();this.parent.windows[0].onDeactivate.dispatch();break;case "resize":a=this.parent.windows[0].__width;var c=this.parent.windows[0].__height;this.parent.windows[0].backend.handleResize();
this.parent.windows[0].__width==a&&this.parent.windows[0].__height==c||this.parent.windows[0].onResize.dispatch(this.parent.windows[0].__width,this.parent.windows[0].__height);break;case "beforeunload":this.parent.windows[0].onClose.dispatch()}},setFrameRate:function(a){this.framePeriod=60<=a?-1:0<a?1E3/a:1E3;return a},__class__:ed};var xc=function(){};k["lime._backend.html5.HTML5Mouse"]=xc;xc.__name__=!0;xc.__cursor=null;xc.__hidden=null;xc.set_cursor=function(a){if(xc.__cursor!=a){if(!xc.__hidden)for(var c=
0,d=Ab.current.windows;c<d.length;){var b=d[c];++c;switch(a[1]){case 0:b.backend.element.style.cursor="default";break;case 1:b.backend.element.style.cursor="crosshair";break;case 3:b.backend.element.style.cursor="move";break;case 4:b.backend.element.style.cursor="pointer";break;case 5:b.backend.element.style.cursor="nesw-resize";break;case 6:b.backend.element.style.cursor="ns-resize";break;case 7:b.backend.element.style.cursor="nwse-resize";break;case 8:b.backend.element.style.cursor="ew-resize";
break;case 9:b.backend.element.style.cursor="text";break;case 10:b.backend.element.style.cursor="wait";break;case 11:b.backend.element.style.cursor="wait";break;default:b.backend.element.style.cursor="auto"}}xc.__cursor=a}return xc.__cursor};var re=function(a){this.parent=a};k["lime._backend.html5.HTML5Renderer"]=re;re.__name__=!0;re.prototype={create:function(){this.createContext();switch(this.parent.context[1]){case 0:this.parent.window.backend.canvas.addEventListener("webglcontextlost",u(this,
this.handleEvent),!1),this.parent.window.backend.canvas.addEventListener("webglcontextrestored",u(this,this.handleEvent),!1)}},createContext:function(){null!=this.parent.window.backend.div?(this.parent.context=Wb.DOM(this.parent.window.backend.div),this.parent.type=bb.DOM):null!=this.parent.window.backend.canvas&&(this.parent.context=Wb.CANVAS(this.parent.window.backend.canvas.getContext("2d")),this.parent.type=bb.CANVAS)},flip:function(){},handleEvent:function(a){switch(a.type){case "webglcontextlost":a.preventDefault();
this.parent.context=null;this.parent.onContextLost.dispatch();break;case "webglcontextrestored":this.createContext(),this.parent.onContextRestored.dispatch(this.parent.context)}},__class__:re};var Oa=function(a){this.unusedTouchesPool=new bc;this.currentTouches=new qb;this.parent=a;null!=a.config&&Object.prototype.hasOwnProperty.call(a.config,"element")&&(this.element=a.config.element)};k["lime._backend.html5.HTML5Window"]=Oa;Oa.__name__=!0;Oa.textInput=null;Oa.prototype={close:function(){this.parent.application.removeWindow(this.parent)},
create:function(a){this.setWidth=this.parent.__width;this.setHeight=this.parent.__height;this.parent.id=Oa.windowID++;W.__instanceof(this.element,HTMLCanvasElement)?this.canvas=this.element:this.canvas=window.document.createElement("canvas");null!=this.canvas?(a=this.canvas.style,a.setProperty("-webkit-transform","translateZ(0)",null),a.setProperty("transform","translateZ(0)",null)):null!=this.div&&(a=this.div.style,a.setProperty("-webkit-transform","translate3D(0,0,0)",null),a.setProperty("transform",
"translate3D(0,0,0)",null),a.position="relative",a.overflow="hidden",a.setProperty("-webkit-user-select","none",null),a.setProperty("-moz-user-select","none",null),a.setProperty("-ms-user-select","none",null),a.setProperty("-o-user-select","none",null));0==this.parent.__width&&0==this.parent.__height&&(null!=this.element?(this.parent.set_width(this.element.clientWidth),this.parent.set_height(this.element.clientHeight)):(this.parent.set_width(window.innerWidth),this.parent.set_height(window.innerHeight)),
this.parent.set_fullscreen(!0));null!=this.canvas?(this.canvas.width=this.parent.__width,this.canvas.height=this.parent.__height):(this.div.style.width=this.parent.__width+"px",this.div.style.height=this.parent.__height+"px");this.handleResize();if(null!=this.element){null!=this.canvas?this.element!=this.canvas&&this.element.appendChild(this.canvas):this.element.appendChild(this.div);a="mousedown mouseenter mouseleave mousemove mouseup wheel".split(" ");for(var c=0;c<a.length;){var d=a[c];++c;this.element.addEventListener(d,
u(this,this.handleMouseEvent),!0)}window.document.addEventListener("dragstart",function(a){return"img"==a.target.nodeName.toLowerCase()?(a.preventDefault(),!1):!0},!1);this.element.addEventListener("touchstart",u(this,this.handleTouchEvent),!0);this.element.addEventListener("touchmove",u(this,this.handleTouchEvent),!0);this.element.addEventListener("touchend",u(this,this.handleTouchEvent),!0)}},getDisplay:function(){return Sd.getDisplay(0)},handleFocusEvent:function(a){this.enableTextEvents&&Uc.delay(function(){Oa.textInput.focus()},
20)},handleInputEvent:function(a){""!=Oa.textInput.value&&(this.parent.onTextInput.dispatch(Oa.textInput.value),Oa.textInput.value="")},handleMouseEvent:function(a){var c=0,d=0;if("wheel"!=a.type)switch(null!=this.element?null!=this.canvas?(d=this.canvas.getBoundingClientRect(),c=this.parent.__width/d.width*(a.clientX-d.left),d=this.parent.__height/d.height*(a.clientY-d.top)):null!=this.div?(d=this.div.getBoundingClientRect(),c=a.clientX-d.left,d=a.clientY-d.top):(d=this.element.getBoundingClientRect(),
c=this.parent.__width/d.width*(a.clientX-d.left),d=this.parent.__height/d.height*(a.clientY-d.top)):(c=a.clientX,d=a.clientY),a.type){case "mousedown":this.parent.onMouseDown.dispatch(c,d,a.button);break;case "mouseenter":this.parent.onEnter.dispatch();break;case "mouseleave":this.parent.onLeave.dispatch();break;case "mouseup":this.parent.onMouseUp.dispatch(c,d,a.button);break;case "mousemove":this.parent.onMouseMove.dispatch(c,d)}else this.parent.onMouseWheel.dispatch(a.deltaX,-a.deltaY)},handleResize:function(){var a=
this.parent.__fullscreen||0==this.setWidth&&0==this.setHeight;if(null!=this.element&&(null==this.div||null!=this.div&&a))if(a){if(this.parent.__width!=this.element.clientWidth||this.parent.__height!=this.element.clientHeight)this.parent.set_width(this.element.clientWidth),this.parent.set_height(this.element.clientHeight),null!=this.canvas?this.element!=this.canvas&&(this.canvas.width=this.element.clientWidth,this.canvas.height=this.element.clientHeight):(this.div.style.width=this.element.clientWidth+
"px",this.div.style.height=this.element.clientHeight+"px")}else a=Math.min(this.element.clientWidth/this.setWidth,this.element.clientHeight/this.setHeight),null!=this.canvas?this.element!=this.canvas&&(this.canvas.style.width=this.setWidth*a+"px",this.canvas.style.height=this.setHeight*a+"px",this.canvas.style.marginLeft=(this.element.clientWidth-this.setWidth*a)/2+"px",this.canvas.style.marginTop=(this.element.clientHeight-this.setHeight*a)/2+"px"):(this.div.style.width=this.setWidth*a+"px",this.div.style.height=
this.setHeight*a+"px",this.div.style.marginLeft=(this.element.clientWidth-this.setWidth*a)/2+"px",this.div.style.marginTop=(this.element.clientHeight-this.setHeight*a)/2+"px")},handleTouchEvent:function(a){a.preventDefault();var c=null;null!=this.element&&(c=null!=this.canvas?this.canvas.getBoundingClientRect():null!=this.div?this.div.getBoundingClientRect():this.element.getBoundingClientRect());for(var d=0,b=a.changedTouches;d<b.length;){var e=b[d];++d;var g=0,f=0;null!=c?(g=this.parent.__width/
c.width*(e.clientX-c.left),f=this.parent.__height/c.height*(e.clientY-c.top)):(g=e.clientX,f=e.clientY);switch(a.type){case "touchstart":var h=this.unusedTouchesPool.pop();null==h?h=new Xb(g/this.setWidth,f/this.setHeight,e.identifier,0,0,e.force,this.parent.id):(h.x=g/this.setWidth,h.y=f/this.setHeight,h.id=e.identifier,h.dx=0,h.dy=0,h.pressure=e.force,h.device=this.parent.id);this.currentTouches.h[e.identifier]=h;Xb.onStart.dispatch(h);null==this.primaryTouch&&(this.primaryTouch=h);h==this.primaryTouch&&
this.parent.onMouseDown.dispatch(g,f,0);break;case "touchend":h=this.currentTouches.h[e.identifier];if(null!=h){var l=h.x,k=h.y;h.x=g/this.setWidth;h.y=f/this.setHeight;h.dx=h.x-l;h.dy=h.y-k;h.pressure=e.force;Xb.onEnd.dispatch(h);this.currentTouches.remove(e.identifier);this.unusedTouchesPool.add(h);h==this.primaryTouch&&(this.parent.onMouseUp.dispatch(g,f,0),this.primaryTouch=null)}break;case "touchmove":h=this.currentTouches.h[e.identifier],null!=h&&(l=h.x,k=h.y,h.x=g/this.setWidth,h.y=f/this.setHeight,
h.dx=h.x-l,h.dy=h.y-k,h.pressure=e.force,Xb.onMove.dispatch(h),h==this.primaryTouch&&this.parent.onMouseMove.dispatch(g,f))}}},resize:function(a,c){},setEnableTextEvents:function(a){a?(null==Oa.textInput&&(Oa.textInput=window.document.createElement("input"),Oa.textInput.type="text",Oa.textInput.style.position="absolute",Oa.textInput.style.opacity="0",Oa.textInput.style.color="transparent",Oa.textInput.value="",Oa.textInput.autocapitalize="off",Oa.textInput.autocorrect="off",Oa.textInput.autocomplete=
"off",Oa.textInput.style.left="0px",Oa.textInput.style.top="50%",(new Qa("(iPad|iPhone|iPod).*OS 8_","gi")).match(window.navigator.userAgent)?(Oa.textInput.style.fontSize="0px",Oa.textInput.style.width="0px",Oa.textInput.style.height="0px"):(Oa.textInput.style.width="1px",Oa.textInput.style.height="1px"),Oa.textInput.style.pointerEvents="none",Oa.textInput.style.zIndex="-10000000",window.document.body.appendChild(Oa.textInput)),this.enableTextEvents||(Oa.textInput.addEventListener("input",u(this,
this.handleInputEvent),!0),Oa.textInput.addEventListener("blur",u(this,this.handleFocusEvent),!0)),Oa.textInput.focus()):null!=Oa.textInput&&(Oa.textInput.removeEventListener("input",u(this,this.handleInputEvent),!0),Oa.textInput.removeEventListener("blur",u(this,this.handleFocusEvent),!0),Oa.textInput.blur());return this.enableTextEvents=a},setFullscreen:function(a){return!1},__class__:Oa};var of=function(){};k["lime.app.IModule"]=of;of.__name__=!0;of.prototype={__class__:of};var Ke=function(){this.onExit=
new Td};k["lime.app.Module"]=Ke;Ke.__name__=!0;Ke.__interfaces__=[of];Ke.prototype={onGamepadAxisMove:function(a,c,d){},onGamepadButtonDown:function(a,c){},onGamepadButtonUp:function(a,c){},onGamepadConnect:function(a){},onGamepadDisconnect:function(a){},onJoystickAxisMove:function(a,c,d){},onJoystickButtonDown:function(a,c){},onJoystickButtonUp:function(a,c){},onJoystickConnect:function(a){},onJoystickDisconnect:function(a){},onJoystickHatMove:function(a,c,d){},onJoystickTrackballMove:function(a,
c,d){},onKeyDown:function(a,c,d){},onKeyUp:function(a,c,d){},onModuleExit:function(a){},onMouseDown:function(a,c,d,b){},onMouseMove:function(a,c,d){},onMouseMoveRelative:function(a,c,d){},onMouseUp:function(a,c,d,b){},onMouseWheel:function(a,c,d){},onPreloadComplete:function(){},onPreloadProgress:function(a,c){},onRenderContextLost:function(a){},onRenderContextRestored:function(a,c){},onTextEdit:function(a,c,d,b){},onTextInput:function(a,c){},onTouchEnd:function(a){},onTouchMove:function(a){},onTouchStart:function(a){},
onWindowActivate:function(a){},onWindowClose:function(a){},onWindowCreate:function(a){},onWindowDeactivate:function(a){},onWindowEnter:function(a){},onWindowFocusIn:function(a){},onWindowFocusOut:function(a){},onWindowFullscreen:function(a){},onWindowLeave:function(a){},onWindowMove:function(a,c,d){},onWindowMinimize:function(a){},onWindowResize:function(a,c,d){},onWindowRestore:function(a){},render:function(a){},update:function(a){},__class__:Ke};var Ab=function(){this.onUpdate=new Td;this.onExit=
new Td;null==Ab.current&&(Ab.current=this);this.modules=[];this.renderers=[];this.windows=[];this.windowByID=new qb;this.backend=new ed(this);this.onExit.add(u(this,this.onModuleExit));this.onUpdate.add(u(this,this.update));fd.onConnect.add(u(this,this.onGamepadConnect));Le.onConnect.add(u(this,this.onJoystickConnect));Xb.onStart.add(u(this,this.onTouchStart));Xb.onMove.add(u(this,this.onTouchMove));Xb.onEnd.add(u(this,this.onTouchEnd))};k["lime.app.Application"]=Ab;Ab.__name__=!0;Ab.current=null;
Ab.__super__=Ke;Ab.prototype=l(Ke.prototype,{addModule:function(a){this.modules.push(a);if(0<this.windows.length){for(var c=0,d=this.windows;c<d.length;){var b=d[c];++c;a.onWindowCreate(b)}if(null==this.preloader||this.preloader.complete)a.onPreloadComplete()}},addRenderer:function(a){a.onRender.add(function(a,d){return function(){a(d)}}(u(this,this.render),a));a.onContextLost.add(function(a,d){return function(){a(d)}}(u(this,this.onRenderContextLost),a));a.onContextRestored.add(function(a,d){return function(b){a(d,
b)}}(u(this,this.onRenderContextRestored),a));this.renderers.push(a)},createWindow:function(a){a.onActivate.add(function(a,c){return function(){a(c)}}(u(this,this.onWindowActivate),a));a.onClose.add(function(a,c){return function(){a(c)}}(u(this,this.onWindowClose),a));a.onCreate.add(function(a,c){return function(){a(c)}}(u(this,this.onWindowCreate),a));a.onDeactivate.add(function(a,c){return function(){a(c)}}(u(this,this.onWindowDeactivate),a));a.onEnter.add(function(a,c){return function(){a(c)}}(u(this,
this.onWindowEnter),a));a.onFocusIn.add(function(a,c){return function(){a(c)}}(u(this,this.onWindowFocusIn),a));a.onFocusOut.add(function(a,c){return function(){a(c)}}(u(this,this.onWindowFocusOut),a));a.onFullscreen.add(function(a,c){return function(){a(c)}}(u(this,this.onWindowFullscreen),a));a.onKeyDown.add(function(a,c){return function(b,g){a(c,b,g)}}(u(this,this.onKeyDown),a));a.onKeyUp.add(function(a,c){return function(b,g){a(c,b,g)}}(u(this,this.onKeyUp),a));a.onLeave.add(function(a,c){return function(){a(c)}}(u(this,
this.onWindowLeave),a));a.onMinimize.add(function(a,c){return function(){a(c)}}(u(this,this.onWindowMinimize),a));a.onMouseDown.add(function(a,c){return function(b,g,e){a(c,b,g,e)}}(u(this,this.onMouseDown),a));a.onMouseMove.add(function(a,c){return function(b,g){a(c,b,g)}}(u(this,this.onMouseMove),a));a.onMouseMoveRelative.add(function(a,c){return function(b,g){a(c,b,g)}}(u(this,this.onMouseMoveRelative),a));a.onMouseUp.add(function(a,c){return function(b,g,e){a(c,b,g,e)}}(u(this,this.onMouseUp),
a));a.onMouseWheel.add(function(a,c){return function(b,g){a(c,b,g)}}(u(this,this.onMouseWheel),a));a.onMove.add(function(a,c){return function(b,g){a(c,b,g)}}(u(this,this.onWindowMove),a));a.onResize.add(function(a,c){return function(b,g){a(c,b,g)}}(u(this,this.onWindowResize),a));a.onRestore.add(function(a,c){return function(){a(c)}}(u(this,this.onWindowRestore),a));a.onTextEdit.add(function(a,c){return function(b,g,e){a(c,b,g,e)}}(u(this,this.onTextEdit),a));a.onTextInput.add(function(a,c){return function(b){a(c,
b)}}(u(this,this.onTextInput),a));if(null==a.renderer){var c=new Gd(a);this.addRenderer(c)}a.create(this);this.windows.push(a);this.windowByID.h[a.id]=a;a.onCreate.dispatch()},exec:function(){Ab.current=this;return this.backend.exec()},onGamepadAxisMove:function(a,c,d){for(var b=0,e=this.modules;b<e.length;){var g=e[b];++b;g.onGamepadAxisMove(a,c,d)}},onGamepadButtonDown:function(a,c){for(var d=0,b=this.modules;d<b.length;){var e=b[d];++d;e.onGamepadButtonDown(a,c)}},onGamepadButtonUp:function(a,
c){for(var d=0,b=this.modules;d<b.length;){var e=b[d];++d;e.onGamepadButtonUp(a,c)}},onGamepadConnect:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onGamepadConnect(a)}a.onAxisMove.add(function(a,c){return function(d,b){a(c,d,b)}}(u(this,this.onGamepadAxisMove),a));a.onButtonDown.add(function(a,c){return function(d){a(c,d)}}(u(this,this.onGamepadButtonDown),a));a.onButtonUp.add(function(a,c){return function(d){a(c,d)}}(u(this,this.onGamepadButtonUp),a));a.onDisconnect.add(function(a,
c){return function(){a(c)}}(u(this,this.onGamepadDisconnect),a))},onGamepadDisconnect:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onGamepadDisconnect(a)}},onJoystickAxisMove:function(a,c,d){for(var b=0,e=this.modules;b<e.length;){var g=e[b];++b;g.onJoystickAxisMove(a,c,d)}},onJoystickButtonDown:function(a,c){for(var d=0,b=this.modules;d<b.length;){var e=b[d];++d;e.onJoystickButtonDown(a,c)}},onJoystickButtonUp:function(a,c){for(var d=0,b=this.modules;d<b.length;){var e=b[d];
++d;e.onJoystickButtonUp(a,c)}},onJoystickConnect:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onJoystickConnect(a)}a.onAxisMove.add(function(a,c){return function(d,b){a(c,d,b)}}(u(this,this.onJoystickAxisMove),a));a.onButtonDown.add(function(a,c){return function(d){a(c,d)}}(u(this,this.onJoystickButtonDown),a));a.onButtonUp.add(function(a,c){return function(d){a(c,d)}}(u(this,this.onJoystickButtonUp),a));a.onDisconnect.add(function(a,c){return function(){a(c)}}(u(this,this.onJoystickDisconnect),
a));a.onHatMove.add(function(a,c){return function(d,b){a(c,d,b)}}(u(this,this.onJoystickHatMove),a));a.onTrackballMove.add(function(a,c){return function(d,b){a(c,d,b)}}(u(this,this.onJoystickTrackballMove),a))},onJoystickDisconnect:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onJoystickDisconnect(a)}},onJoystickHatMove:function(a,c,d){for(var b=0,e=this.modules;b<e.length;){var g=e[b];++b;g.onJoystickHatMove(a,c,d)}},onJoystickTrackballMove:function(a,c,d){for(var b=0,e=this.modules;b<
e.length;){var g=e[b];++b;g.onJoystickTrackballMove(a,c,d)}},onKeyDown:function(a,c,d){for(var b=0,e=this.modules;b<e.length;){var g=e[b];++b;g.onKeyDown(a,c,d)}},onKeyUp:function(a,c,d){for(var b=0,e=this.modules;b<e.length;){var g=e[b];++b;g.onKeyUp(a,c,d)}},onModuleExit:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onModuleExit(a)}this.backend.exit()},onMouseDown:function(a,c,d,b){for(var e=0,g=this.modules;e<g.length;){var f=g[e];++e;f.onMouseDown(a,c,d,b)}},onMouseMove:function(a,
c,d){for(var b=0,e=this.modules;b<e.length;){var g=e[b];++b;g.onMouseMove(a,c,d)}},onMouseMoveRelative:function(a,c,d){for(var b=0,e=this.modules;b<e.length;){var g=e[b];++b;g.onMouseMoveRelative(a,c,d)}},onMouseUp:function(a,c,d,b){for(var e=0,g=this.modules;e<g.length;){var f=g[e];++e;f.onMouseUp(a,c,d,b)}},onMouseWheel:function(a,c,d){for(var b=0,e=this.modules;b<e.length;){var g=e[b];++b;g.onMouseWheel(a,c,d)}},onPreloadComplete:function(){for(var a=0,c=this.modules;a<c.length;){var d=c[a];++a;
d.onPreloadComplete()}},onPreloadProgress:function(a,c){for(var d=0,b=this.modules;d<b.length;){var e=b[d];++d;e.onPreloadProgress(a,c)}},onRenderContextLost:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onRenderContextLost(a)}},onRenderContextRestored:function(a,c){for(var d=0,b=this.modules;d<b.length;){var e=b[d];++d;e.onRenderContextRestored(a,c)}},onTextEdit:function(a,c,d,b){for(var e=0,g=this.modules;e<g.length;){var f=g[e];++e;f.onTextEdit(a,c,d,b)}},onTextInput:function(a,
c){for(var d=0,b=this.modules;d<b.length;){var e=b[d];++d;e.onTextInput(a,c)}},onTouchEnd:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onTouchEnd(a)}},onTouchMove:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onTouchMove(a)}},onTouchStart:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onTouchStart(a)}},onWindowActivate:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowActivate(a)}},onWindowClose:function(a){for(var c=
0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowClose(a)}this.removeWindow(a)},onWindowCreate:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowCreate(a)}},onWindowDeactivate:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowDeactivate(a)}},onWindowEnter:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowEnter(a)}},onWindowFocusIn:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowFocusIn(a)}},
onWindowFocusOut:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowFocusOut(a)}},onWindowFullscreen:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowFullscreen(a)}},onWindowLeave:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowLeave(a)}},onWindowMinimize:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowMinimize(a)}},onWindowMove:function(a,c,d){for(var b=0,e=this.modules;b<e.length;){var g=
e[b];++b;g.onWindowMove(a,c,d)}},onWindowResize:function(a,c,d){for(var b=0,e=this.modules;b<e.length;){var g=e[b];++b;g.onWindowResize(a,c,d)}},onWindowRestore:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.onWindowRestore(a)}},removeWindow:function(a){null!=a&&this.windowByID.h.hasOwnProperty(a.id)&&(N.remove(this.windows,a),this.windowByID.remove(a.id),a.close(),this.windows[0]==a&&(this.window=null))},render:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];
++c;b.render(a)}},setPreloader:function(a){null!=this.preloader&&(this.preloader.onProgress.remove(u(this,this.onPreloadProgress)),this.preloader.onComplete.remove(u(this,this.onPreloadComplete)));this.preloader=a;if(a.complete)this.onPreloadComplete();else a.onProgress.add(u(this,this.onPreloadProgress)),a.onComplete.add(u(this,this.onPreloadComplete))},update:function(a){for(var c=0,d=this.modules;c<d.length;){var b=d[c];++c;b.update(a)}},__class__:Ab});var gd=function(){this.listeners=[];this.priorities=
[];this.repeat=[]};k["lime.app.Event_Float_Float_Int_Void"]=gd;gd.__name__=!0;gd.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,
1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a,c,d){for(var b=this.listeners,e=this.repeat,g=0;g<b.length;)b[g](a,c,d),e[g]?g++:this.remove(b[g])},__class__:gd};var Ud=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_Float_Float_Void"]=Ud;Ud.__name__=!0;Ud.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,
0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a,c){for(var d=this.listeners,b=this.repeat,e=0;e<d.length;)d[e](a,c),b[e]?e++:this.remove(d[e])},__class__:Ud};var pf=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_Int_Float_Void"]=
pf;pf.__name__=!0;pf.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},__class__:pf};var qf=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_Int_Int_Void"]=qf;qf.__name__=!0;qf.prototype={add:function(a,c,d){null==d&&
(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a,c){for(var d=this.listeners,b=this.repeat,
e=0;e<d.length;)d[e](a,c),b[e]?e++:this.remove(d[e])},__class__:qf};var Td=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_Int_Void"]=Td;Td.__name__=!0;Td.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},remove:function(a){for(var c=
this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a){for(var c=this.listeners,d=this.repeat,b=0;b<c.length;)c[b](a),d[b]?b++:this.remove(c[b])},__class__:Td};var Me=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_Int_lime_ui_JoystickHatPosition_Void"]=Me;Me.__name__=!0;Me.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,
e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},__class__:Me};var Kf=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_String_Int_Int_Void"]=Kf;Kf.__name__=!0;Kf.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,
0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},__class__:Kf};var rf=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_String_Void"]=rf;rf.__name__=!0;rf.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);
return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},has:function(a){for(var c=0,d=this.listeners;c<d.length;){var b=d[c];++c;if(ma.compareMethods(b,a))return!0}return!1},remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a){for(var c=this.listeners,d=this.repeat,b=0;b<c.length;)c[b](a),d[b]?b++:this.remove(c[b])},__class__:rf};
var Vd=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_graphics_RenderContext_Void"]=Vd;Vd.__name__=!0;Vd.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},remove:function(a){for(var c=this.listeners.length;0<=
--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a){for(var c=this.listeners,d=this.repeat,b=0;b<c.length;)c[b](a),d[b]?b++:this.remove(c[b])},__class__:Vd};var Hd=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_net_URLLoader_Int_Int_Void"]=Hd;Hd.__name__=!0;Hd.prototype={remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],
a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a,c,d){for(var b=this.listeners,e=this.repeat,g=0;g<b.length;)b[g](a,c,d),e[g]?g++:this.remove(b[g])},__class__:Hd};var sf=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_net_URLLoader_Int_Void"]=sf;sf.__name__=!0;sf.prototype={remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,
1),this.repeat.splice(c,1))},dispatch:function(a,c){for(var d=this.listeners,b=this.repeat,e=0;e<d.length;)d[e](a,c),b[e]?e++:this.remove(d[e])},__class__:sf};var Wd=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_net_URLLoader_String_Void"]=Wd;Wd.__name__=!0;Wd.prototype={remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a,
c){for(var d=this.listeners,b=this.repeat,e=0;e<d.length;)d[e](a,c),b[e]?e++:this.remove(d[e])},__class__:Wd};var tf=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_net_URLLoader_Void"]=tf;tf.__name__=!0;tf.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);
this.priorities.push(d);this.repeat.push(!c)},remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a){for(var c=this.listeners,d=this.repeat,b=0;b<c.length;)c[b](a),d[b]?b++:this.remove(c[b])},__class__:tf};var se=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_ui_GamepadAxis_Float_Void"]=se;se.__name__=!0;se.prototype=
{add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},__class__:se};var Ne=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_ui_GamepadButton_Void"]=Ne;Ne.__name__=!0;Ne.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&
(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},__class__:Ne};var Lf=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_ui_Gamepad_Void"]=Lf;Lf.__name__=!0;Lf.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=
b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},__class__:Lf};var uf=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_ui_Joystick_Void"]=uf;uf.__name__=!0;uf.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,
0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},__class__:uf};var vf=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_ui_KeyCode_lime_ui_KeyModifier_Void"]=vf;vf.__name__=!0;vf.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,
d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},dispatch:function(a,c){for(var d=this.listeners,b=this.repeat,e=0;e<d.length;)d[e](a,c),b[e]?e++:this.remove(d[e])},__class__:vf};var te=function(){this.listeners=[];this.priorities=[];this.repeat=[]};k["lime.app.Event_lime_ui_Touch_Void"]=
te;te.__name__=!0;te.prototype={add:function(a,c,d){null==d&&(d=0);null==c&&(c=!1);for(var b=0,e=this.priorities.length;b<e;){var g=b++;if(d>this.priorities[g]){this.listeners.splice(g,0,a);this.priorities.splice(g,0,d);this.repeat.splice(g,0,!c);return}}this.listeners.push(a);this.priorities.push(d);this.repeat.push(!c)},remove:function(a){for(var c=this.listeners.length;0<=--c;)ma.compareMethods(this.listeners[c],a)&&(this.listeners.splice(c,1),this.priorities.splice(c,1),this.repeat.splice(c,1))},
dispatch:function(a){for(var c=this.listeners,d=this.repeat,b=0;b<c.length;)c[b](a),d[b]?b++:this.remove(c[b])},__class__:te};var yb=function(){this.loaded=this.total=0;this.onProgress=new qf;this.onComplete=new Va;this.onProgress.add(u(this,this.update))};k["lime.app.Preloader"]=yb;yb.__name__=!0;yb.prototype={create:function(a){},load:function(a,c){for(var d=null,b=0,e=a.length;b<e;){var g=b++,d=a[g];switch(c[g]){case "IMAGE":yb.images.exists(d)||(g=new Image,yb.images.set(d,g),g.onload=u(this,
this.image_onLoad),g.src=d,this.total++);break;case "BINARY":yb.loaders.exists(d)||(g=new wf,g.set_dataFormat(jc.BINARY),yb.loaders.set(d,g),this.total++);break;case "TEXT":yb.loaders.exists(d)||(g=new wf,yb.loaders.set(d,g),this.total++);break;case "FONT":this.total++,this.loadFont(d)}}for(d=yb.loaders.keys();d.hasNext();)b=d.next(),e=yb.loaders.get(b),e.onComplete.add(u(this,this.loader_onComplete)),e.load(new Xd(b));0==this.total&&this.start()},loadFont:function(a){var c=this;if(window.document.fonts&&
(Oe=window.document.fonts,u(Oe,Oe.load)))window.document.fonts.load("1em '"+a+"'").then(function(a){c.loaded++;c.onProgress.dispatch(c.loaded,c.total);c.loaded==c.total&&c.start()});else{var d=window.document.createElement("span");d.innerHTML="giItT1WQy@!-/#";var b=d.style;b.position="absolute";b.left="-10000px";b.top="-10000px";b.fontSize="300px";b.fontFamily="sans-serif";b.fontVariant="normal";b.fontStyle="normal";b.fontWeight="normal";b.letterSpacing="0";window.document.body.appendChild(d);var e=
d.offsetWidth;b.fontFamily="'"+a+"', sans-serif";var g=null,f=!1;a=function(){if(d.offsetWidth!=e){if(!f)return f=!0,!1;c.loaded++;null!=g&&window.clearInterval(g);d.parentNode.removeChild(d);d=null;c.onProgress.dispatch(c.loaded,c.total);c.loaded==c.total&&c.start();return!0}return!1};a()||(g=window.setInterval(a,50))}},start:function(){this.complete=!0;this.onComplete.dispatch()},update:function(a,c){},image_onLoad:function(a){this.loaded++;this.onProgress.dispatch(this.loaded,this.total);this.loaded==
this.total&&this.start()},loader_onComplete:function(a){this.loaded++;this.onProgress.dispatch(this.loaded,this.total);this.loaded==this.total&&this.start()},__class__:yb};var fg=function(){};k["lime.audio.ALAudioContext"]=fg;fg.__name__=!0;var Uf=function(){};k["lime.audio.ALCAudioContext"]=Uf;Uf.__name__=!0;var xf=function(){};k["lime.audio.AudioBuffer"]=xf;xf.__name__=!0;var Xc=k["lime.audio.AudioContext"]={__ename__:!0,__constructs__:["OPENAL","HTML5","WEB","FLASH","CUSTOM"]};Xc.OPENAL=function(a,
c){var d=["OPENAL",0,a,c];d.__enum__=Xc;d.toString=r;return d};Xc.HTML5=function(a){a=["HTML5",1,a];a.__enum__=Xc;a.toString=r;return a};Xc.WEB=function(a){a=["WEB",2,a];a.__enum__=Xc;a.toString=r;return a};Xc.FLASH=function(a){a=["FLASH",3,a];a.__enum__=Xc;a.toString=r;return a};Xc.CUSTOM=function(a){a=["CUSTOM",4,a];a.__enum__=Xc;a.toString=r;return a};var Fd=function(){};k["lime.audio.AudioManager"]=Fd;Fd.__name__=!0;Fd.context=null;Fd.init=function(a){if(null==Fd.context)if(null==a)try{window.AudioContext=
window.AudioContext||window.webkitAudioContext,Fd.context=Xc.WEB(new AudioContext)}catch(c){c instanceof K&&(c=c.val),Fd.context=Xc.HTML5(new yf)}else Fd.context=a};var Vf=function(){};k["lime.audio.FlashAudioContext"]=Vf;Vf.__name__=!0;var yf=function(){};k["lime.audio.HTML5AudioContext"]=yf;yf.__name__=!0;yf.prototype={__class__:yf};var Mf=function(){};k["lime.graphics.ConsoleRenderContext"]=Mf;Mf.__name__=!0;Mf.prototype={__class__:Mf};var Pe=function(){};k["lime.graphics.FlashRenderContext"]=
Pe;Pe.__name__=!0;var Mc=function(a,c,d,b,e,g,f){null==e&&(e=-1);null==b&&(b=-1);null==d&&(d=0);null==c&&(c=0);this.offsetX=c;this.offsetY=d;this.width=b;this.height=e;if(null==f)if(null!=Ab.current&&null!=Ab.current.renderers[0])switch(Ab.current.renderers[0].context[1]){case 2:case 1:this.type=pb.CANVAS;break;case 3:this.type=pb.FLASH;break;default:this.type=pb.DATA}else this.type=pb.DATA;else this.type=f;if(null==a){if(0<b&&0<e)switch(this.type[1]){case 0:this.buffer=new hd(null,b,e);ia.createCanvas(this,
b,e);null!=g&&this.fillRect(new yc(0,0,b,e),g);break;case 1:a=b*e*4,a=null!=a?new rb(a):null,this.buffer=new hd(a,b,e),null!=g&&this.fillRect(new yc(0,0,b,e),g)}}else this.__fromImageBuffer(a)};k["lime.graphics.Image"]=Mc;Mc.__name__=!0;Mc.fromCanvas=function(a){if(null==a)return null;var c=new hd(null,a.width,a.height);c.set_src(a);return new Mc(c)};Mc.fromImageElement=function(a){if(null==a)return null;var c=new hd(null,a.width,a.height);c.set_src(a);return new Mc(c)};Mc.prototype={clone:function(){if(null!=
this.buffer){this.type==pb.CANVAS&&null==this.buffer.__srcImage&&(ia.convertToCanvas(this),ia.sync(this,!0));var a=new Mc(this.buffer.clone(),this.offsetX,this.offsetY,this.width,this.height,null,this.type);a.dirty=this.dirty;return a}return new Mc(null,this.offsetX,this.offsetY,this.width,this.height,null,this.type)},colorTransform:function(a,c){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type[1]){case 0:ia.colorTransform(this,a,c);break;case 1:ia.convertToData(this);mb.colorTransform(this,
a,c);break;case 2:a.offset(this.offsetX,this.offsetY),this.buffer.__srcBitmapData.colorTransform(a.__toFlashRectangle(),sa.__toFlashColorTransform(c))}},copyChannel:function(a,c,d,b,e){c=this.__clipRect(c);if(null!=this.buffer&&null!=c&&!(e==Yb.ALPHA&&!this.get_transparent()||0>=c.width||0>=c.height))switch(c.x+c.width>a.width&&(c.width=a.width-c.x),c.y+c.height>a.height&&(c.height=a.height-c.y),this.type[1]){case 0:ia.copyChannel(this,a,c,d,b,e);break;case 1:ia.convertToData(this);mb.copyChannel(this,
a,c,d,b,e);break;case 2:var g;switch(b[1]){case 0:g=1;break;case 1:g=2;break;case 2:g=4;break;case 3:g=8}var f;switch(e[1]){case 0:f=1;break;case 1:f=2;break;case 2:f=4;break;case 3:f=8}c.offset(a.offsetX,a.offsetY);d.offset(this.offsetX,this.offsetY);this.buffer.__srcBitmapData.copyChannel(a.buffer.get_src(),c.__toFlashRectangle(),d.__toFlashPoint(),g,f)}},copyPixels:function(a,c,d,b,e,g){null==g&&(g=!1);if(null!=this.buffer&&null!=a&&!(0>=c.width||0>=c.height||0>=this.width||0>=this.height))switch(c.x+
c.width>a.width&&(c.width=a.width-c.x),c.y+c.height>a.height&&(c.height=a.height-c.y),0>c.x&&(c.width+=c.x,c.x=0),0>c.y&&(c.height+=c.y,c.y=0),d.x+c.width>this.width&&(c.width=this.width-d.x),d.y+c.height>this.height&&(c.height=this.height-d.y),0>d.x&&(c.width+=d.x,c.x=-d.x,d.x=0),0>d.y&&(c.height+=d.y,c.y=-d.y,d.y=0),this.type[1]){case 0:ia.convertToCanvas(this);ia.copyPixels(this,a,c,d,b,e,g);break;case 1:ia.convertToData(this);ia.convertToData(a);mb.copyPixels(this,a,c,d,b,e,g);break;case 2:c.offset(a.offsetX,
a.offsetY),d.offset(this.offsetX,this.offsetY),null!=b&&null!=e&&e.offset(b.offsetX,b.offsetY),this.buffer.__srcBitmapData.copyPixels(a.buffer.__srcBitmapData,c.__toFlashRectangle(),d.__toFlashPoint(),null!=b?b.buffer.get_src():null,null!=e?e.__toFlashPoint():null,g)}},fillRect:function(a,c,d){a=this.__clipRect(a);if(null!=this.buffer&&null!=a)switch(this.type[1]){case 0:ia.fillRect(this,a,c,d);break;case 1:ia.convertToData(this);if(0==this.buffer.data.length)break;mb.fillRect(this,a,c,d);break;case 2:a.offset(this.offsetX,
this.offsetY);if(null!=d)switch(d){case 1:break;case 2:c=(c&255)<<24|(c>>8&255)<<16|(c>>16&255)<<8|c>>24&255;break;default:c=(c&255)<<24|(c>>24&255)<<16|(c>>16&255)<<8|c>>8&255}else c=(c&255)<<24|(c>>24&255)<<16|(c>>16&255)<<8|c>>8&255;this.buffer.__srcBitmapData.fillRect(a.__toFlashRectangle(),c)}},getPixel:function(a,c,d){if(null==this.buffer||0>a||0>c||a>=this.width||c>=this.height)return 0;switch(this.type[1]){case 0:return ia.getPixel(this,a,c,d);case 1:return ia.convertToData(this),mb.getPixel(this,
a,c,d);case 2:if(a=this.buffer.__srcBitmapData.getPixel(a+this.offsetX,c+this.offsetY),null!=d)switch(d){case 1:return a;case 2:return(a&255)<<24|(a>>8&255)<<16|(a>>16&255)<<8|a>>24&255;default:return(a>>16&255)<<24|(a>>8&255)<<16|(a&255)<<8|a>>24&255}else return(a>>16&255)<<24|(a>>8&255)<<16|(a&255)<<8|a>>24&255;default:return 0}},getPixel32:function(a,c,d){if(null==this.buffer||0>a||0>c||a>=this.width||c>=this.height)return 0;switch(this.type[1]){case 0:return ia.getPixel32(this,a,c,d);case 1:return ia.convertToData(this),
mb.getPixel32(this,a,c,d);case 2:if(a=this.buffer.__srcBitmapData.getPixel32(a+this.offsetX,c+this.offsetY),null!=d)switch(d){case 1:return a;case 2:return(a&255)<<24|(a>>8&255)<<16|(a>>16&255)<<8|a>>24&255;default:return(a>>16&255)<<24|(a>>8&255)<<16|(a&255)<<8|a>>24&255}else return(a>>16&255)<<24|(a>>8&255)<<16|(a&255)<<8|a>>24&255;default:return 0}},setPixel32:function(a,c,d,b){if(!(null==this.buffer||0>a||0>c||a>=this.width||c>=this.height))switch(this.type[1]){case 0:ia.setPixel32(this,a,c,d,
b);break;case 1:ia.convertToData(this);mb.setPixel32(this,a,c,d,b);break;case 2:if(null!=b)switch(b){case 1:break;case 2:d=(d&255)<<24|(d>>8&255)<<16|(d>>16&255)<<8|d>>24&255;break;default:d=(d&255)<<24|(d>>24&255)<<16|(d>>16&255)<<8|d>>8&255}else d=(d&255)<<24|(d>>24&255)<<16|(d>>16&255)<<8|d>>8&255;this.buffer.__srcBitmapData.setPixel32(a+this.offsetX,c+this.offsetY,d)}},__clipRect:function(a){return null==a||0>a.x&&(a.width-=-a.x,a.x=0,0>=a.x+a.width)||0>a.y&&(a.height-=-a.y,a.y=0,0>=a.y+a.height)||
a.x+a.width>=this.width&&(a.width-=a.x+a.width-this.width,0>=a.width)||a.y+a.height>=this.height&&(a.height-=a.y+a.height-this.height,0>=a.height)?null:a},__fromImageBuffer:function(a){this.buffer=a;null!=a&&(-1==this.width&&(this.width=a.width),-1==this.height&&(this.height=a.height))},get_data:function(){null==this.buffer.data&&0<this.buffer.width&&0<this.buffer.height&&(ia.convertToCanvas(this),ia.sync(this,!1),ia.createImageData(this));return this.buffer.data},get_format:function(){return this.buffer.format},
set_format:function(a){if(this.buffer.format!=a)switch(this.type[1]){case 1:mb.setFormat(this,a)}return this.buffer.format=a},get_powerOfTwo:function(){return 0!=this.buffer.width&&(this.buffer.width&~this.buffer.width+1)==this.buffer.width&&0!=this.buffer.height&&(this.buffer.height&~this.buffer.height+1)==this.buffer.height},get_premultiplied:function(){return this.buffer.premultiplied},set_premultiplied:function(a){if(a&&!this.buffer.premultiplied)switch(this.type[1]){case 1:ia.convertToData(this),
mb.multiplyAlpha(this)}else if(!a&&this.buffer.premultiplied)switch(this.type[1]){case 1:ia.convertToData(this),mb.unmultiplyAlpha(this)}return a},get_rect:function(){return new yc(0,0,this.width,this.height)},get_src:function(){null==this.buffer.__srcCanvas&&ia.convertToCanvas(this);return this.buffer.get_src()},get_transparent:function(){return null==this.buffer?!1:this.buffer.transparent},set_transparent:function(a){return null==this.buffer?!1:this.buffer.transparent=a},__class__:Mc,__properties__:{get_rect:"get_rect",
set_transparent:"set_transparent",get_transparent:"get_transparent",get_src:"get_src",set_premultiplied:"set_premultiplied",get_premultiplied:"get_premultiplied",get_powerOfTwo:"get_powerOfTwo",set_format:"set_format",get_format:"get_format",get_data:"get_data"}};var hd=function(a,c,d,b,e){null==b&&(b=32);null==d&&(d=0);null==c&&(c=0);this.data=a;this.width=c;this.height=d;this.bitsPerPixel=b;this.format=null==e?0:e;this.transparent=!0};k["lime.graphics.ImageBuffer"]=hd;hd.__name__=!0;hd.prototype=
{clone:function(){var a=new hd(this.data,this.width,this.height,this.bitsPerPixel);if(null!=this.data){var c=this.data.byteLength,c=null!=c?new rb(c):null;a.data=c;c=this.data;c=null!=c?new rb(c):null;a.data.set(c)}else null!=this.__srcImageData?(a.__srcCanvas=window.document.createElement("canvas"),a.__srcContext=a.__srcCanvas.getContext("2d"),a.__srcCanvas.width=this.__srcImageData.width,a.__srcCanvas.height=this.__srcImageData.height,a.__srcImageData=a.__srcContext.createImageData(this.__srcImageData.width,
this.__srcImageData.height),c=new Uint8ClampedArray(this.__srcImageData.data),a.__srcImageData.data.set(c)):null!=this.__srcCanvas?(a.__srcCanvas=window.document.createElement("canvas"),a.__srcContext=a.__srcCanvas.getContext("2d"),a.__srcCanvas.width=this.__srcCanvas.width,a.__srcCanvas.height=this.__srcCanvas.height,a.__srcContext.drawImage(this.__srcCanvas,0,0)):a.__srcImage=this.__srcImage;a.bitsPerPixel=this.bitsPerPixel;a.format=this.format;a.premultiplied=this.premultiplied;a.transparent=this.transparent;
return a},get_src:function(){return null!=this.__srcImage?this.__srcImage:this.__srcCanvas},set_src:function(a){W.__instanceof(a,Image)?this.__srcImage=a:W.__instanceof(a,HTMLCanvasElement)&&(this.__srcCanvas=a,this.__srcContext=this.__srcCanvas.getContext("2d"));return a},get_stride:function(){return 4*this.width},__class__:hd,__properties__:{get_stride:"get_stride",set_src:"set_src",get_src:"get_src"}};var Yb=k["lime.graphics.ImageChannel"]={__ename__:!0,__constructs__:["RED","GREEN","BLUE","ALPHA"]};
Yb.RED=["RED",0];Yb.RED.toString=r;Yb.RED.__enum__=Yb;Yb.GREEN=["GREEN",1];Yb.GREEN.toString=r;Yb.GREEN.__enum__=Yb;Yb.BLUE=["BLUE",2];Yb.BLUE.toString=r;Yb.BLUE.__enum__=Yb;Yb.ALPHA=["ALPHA",3];Yb.ALPHA.toString=r;Yb.ALPHA.__enum__=Yb;var pb=k["lime.graphics.ImageType"]={__ename__:!0,__constructs__:["CANVAS","DATA","FLASH","CUSTOM"]};pb.CANVAS=["CANVAS",0];pb.CANVAS.toString=r;pb.CANVAS.__enum__=pb;pb.DATA=["DATA",1];pb.DATA.toString=r;pb.DATA.__enum__=pb;pb.FLASH=["FLASH",2];pb.FLASH.toString=r;
pb.FLASH.__enum__=pb;pb.CUSTOM=["CUSTOM",3];pb.CUSTOM.toString=r;pb.CUSTOM.__enum__=pb;var Wb=k["lime.graphics.RenderContext"]={__ename__:!0,__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM NONE".split(" ")};Wb.OPENGL=function(a){a=["OPENGL",0,a];a.__enum__=Wb;a.toString=r;return a};Wb.CANVAS=function(a){a=["CANVAS",1,a];a.__enum__=Wb;a.toString=r;return a};Wb.DOM=function(a){a=["DOM",2,a];a.__enum__=Wb;a.toString=r;return a};Wb.FLASH=function(a){a=["FLASH",3,a];a.__enum__=Wb;a.toString=
r;return a};Wb.CAIRO=function(a){a=["CAIRO",4,a];a.__enum__=Wb;a.toString=r;return a};Wb.CONSOLE=function(a){a=["CONSOLE",5,a];a.__enum__=Wb;a.toString=r;return a};Wb.CUSTOM=function(a){a=["CUSTOM",6,a];a.__enum__=Wb;a.toString=r;return a};Wb.NONE=["NONE",7];Wb.NONE.toString=r;Wb.NONE.__enum__=Wb;var Gd=function(a){this.onRender=new Va;this.onContextRestored=new Vd;this.onContextLost=new Va;this.window=a;this.backend=new re(this);this.window.renderer=this};k["lime.graphics.Renderer"]=Gd;Gd.__name__=
!0;Gd.prototype={create:function(){this.backend.create()},flip:function(){this.backend.flip()},__class__:Gd};var bb=k["lime.graphics.RendererType"]={__ename__:!0,__constructs__:"OPENGL CANVAS DOM FLASH CAIRO CONSOLE CUSTOM".split(" ")};bb.OPENGL=["OPENGL",0];bb.OPENGL.toString=r;bb.OPENGL.__enum__=bb;bb.CANVAS=["CANVAS",1];bb.CANVAS.toString=r;bb.CANVAS.__enum__=bb;bb.DOM=["DOM",2];bb.DOM.toString=r;bb.DOM.__enum__=bb;bb.FLASH=["FLASH",3];bb.FLASH.toString=r;bb.FLASH.__enum__=bb;bb.CAIRO=["CAIRO",
4];bb.CAIRO.toString=r;bb.CAIRO.__enum__=bb;bb.CONSOLE=["CONSOLE",5];bb.CONSOLE.toString=r;bb.CONSOLE.__enum__=bb;bb.CUSTOM=["CUSTOM",6];bb.CUSTOM.toString=r;bb.CUSTOM.__enum__=bb;var Qe=function(){};k["lime.graphics.cairo.Cairo"]=Qe;Qe.__name__=!0;Qe.prototype={arc:function(a,c,d,b,e){},clip:function(){},curveTo:function(a,c,d,b,e,g){},fill:function(){},identityMatrix:function(){},lineTo:function(a,c){},moveTo:function(a,c){},newPath:function(){},paint:function(){},paintWithAlpha:function(a){},popGroupToSource:function(){},
pushGroup:function(){},rectangle:function(a,c,d,b){},restore:function(){},save:function(){},setSourceRGB:function(a,c,d){},get_currentPoint:function(){return null},get_hasCurrentPoint:function(){return!1},set_matrix:function(a){return a},set_source:function(a){return a},__class__:Qe,__properties__:{set_source:"set_source",set_matrix:"set_matrix",get_hasCurrentPoint:"get_hasCurrentPoint",get_currentPoint:"get_currentPoint"}};var Yd={};k["lime.graphics.cairo._CairoImageSurface.CairoImageSurface_Impl_"]=
Yd;Yd.__name__=!0;Yd.fromImage=function(a){return null};var Id={};k["lime.graphics.cairo._CairoPattern.CairoPattern_Impl_"]=Id;Id.__name__=!0;Id.__properties__={set_filter:"set_filter"};Id.createForSurface=function(a){return 0};Id.set_filter=function(a,c){return c};var ue={};k["lime.graphics.cairo._CairoSurface.CairoSurface_Impl_"]=ue;ue.__name__=!0;ue.flush=function(a){};var zf=function(){};k["lime.graphics.opengl.GL"]=zf;zf.__name__=!0;zf.context=null;var ia=function(){};k["lime.graphics.utils.ImageCanvasUtil"]=
ia;ia.__name__=!0;ia.colorTransform=function(a,c,d){ia.convertToCanvas(a);ia.createImageData(a);mb.colorTransform(a,c,d)};ia.convertToCanvas=function(a){var c=a.buffer;null!=c.__srcImage?(null==c.__srcCanvas&&(ia.createCanvas(a,c.__srcImage.width,c.__srcImage.height),c.__srcContext.drawImage(c.__srcImage,0,0)),c.__srcImage=null):null!=c.data&&null==c.__srcCanvas&&(ia.createCanvas(a,c.width,c.height),ia.createImageData(a))};ia.convertToData=function(a){null==a.buffer.data&&(ia.convertToCanvas(a),ia.sync(a,
!1),ia.createImageData(a),a.buffer.__srcCanvas=null,a.buffer.__srcContext=null)};ia.copyChannel=function(a,c,d,b,e,g){ia.convertToCanvas(c);ia.createImageData(c);ia.convertToCanvas(a);ia.createImageData(a);mb.copyChannel(a,c,d,b,e,g)};ia.copyPixels=function(a,c,d,b,e,g,f){null==f&&(f=!1);null==b||b.x>=a.width||b.y>=a.height||null==d||1>d.width||1>d.height||(null!=e&&e.get_transparent()&&(null==g&&(g=new Pc),c=a.clone(),c.copyChannel(e,new yc(g.x,g.y,d.width,d.height),new Pc(d.x,d.y),Yb.ALPHA,Yb.ALPHA)),
ia.sync(a,!0),f||a.get_transparent()&&c.get_transparent()&&a.buffer.__srcContext.clearRect(b.x+a.offsetX,b.y+a.offsetY,d.width+a.offsetX,d.height+a.offsetY),ia.sync(c,!1),null!=c.buffer.get_src()&&a.buffer.__srcContext.drawImage(c.buffer.get_src(),d.x+c.offsetX|0,d.y+c.offsetY|0,d.width|0,d.height|0,b.x+a.offsetX|0,b.y+a.offsetY|0,d.width|0,d.height|0))};ia.createCanvas=function(a,c,d){var b=a.buffer;null==b.__srcCanvas&&(b.__srcCanvas=window.document.createElement("canvas"),b.__srcCanvas.width=c,
b.__srcCanvas.height=d,a.get_transparent()?b.__srcContext=b.__srcCanvas.getContext("2d"):(a.get_transparent()||b.__srcCanvas.setAttribute("moz-opaque","true"),b.__srcContext=b.__srcCanvas.getContext("2d",{alpha:!1})),b.__srcContext.mozImageSmoothingEnabled=!1,b.__srcContext.msImageSmoothingEnabled=!1,b.__srcContext.imageSmoothingEnabled=!1)};ia.createImageData=function(a){a=a.buffer;if(null==a.__srcImageData){null==a.data?a.__srcImageData=a.__srcContext.getImageData(0,0,a.width,a.height):(a.__srcImageData=
a.__srcContext.createImageData(a.width,a.height),a.__srcImageData.data.set(a.data));var c=a.__srcImageData.data.buffer,c=null!=c?new rb(c):null;a.data=c}};ia.fillRect=function(a,c,d,b){ia.convertToCanvas(a);ia.sync(a,!0);if(0==c.x&&0==c.y&&c.width==a.width&&c.height==a.height&&a.get_transparent()&&0==(d&255))a.buffer.__srcCanvas.width=a.buffer.width;else{var e,g;1==b?(b=d>>16&255,e=d>>8&255,g=d&255,d=a.get_transparent()?d>>24&255:255):(b=d>>24&255,e=d>>16&255,g=d>>8&255,d=a.get_transparent()?d&255:
255);a.buffer.__srcContext.fillStyle="rgba("+b+", "+e+", "+g+", "+d/255+")";a.buffer.__srcContext.fillRect(c.x+a.offsetX,c.y+a.offsetY,c.width+a.offsetX,c.height+a.offsetY)}};ia.getPixel=function(a,c,d,b){ia.convertToCanvas(a);ia.createImageData(a);return mb.getPixel(a,c,d,b)};ia.getPixel32=function(a,c,d,b){ia.convertToCanvas(a);ia.createImageData(a);return mb.getPixel32(a,c,d,b)};ia.setPixel32=function(a,c,d,b,e){ia.convertToCanvas(a);ia.createImageData(a);mb.setPixel32(a,c,d,b,e)};ia.sync=function(a,
c){a.dirty&&null!=a.buffer.__srcImageData&&a.type!=pb.DATA&&(a.buffer.__srcContext.putImageData(a.buffer.__srcImageData,0,0),a.buffer.data=null,a.dirty=!1);c&&(a.buffer.__srcImageData=null,a.buffer.data=null)};var mb=function(){};k["lime.graphics.utils.ImageDataUtil"]=mb;mb.__name__=!0;mb.colorTransform=function(a,c,d){var b=a.buffer.data;if(null!=b){var e=a.buffer.format,g=a.buffer.premultiplied;c=new jd(a,c);var f=sa.getAlphaTable(d),h=sa.getRedTable(d),l=sa.getGreenTable(d);d=sa.getBlueTable(d);
for(var k,m,r,y=0,u=c.height;y<u;){k=y++;k=c.offset+c.stride*k;for(var t=0,v=c.width;t<v;){m=t++;m=k+4*m;switch(e){case 2:r=(b[m+2]&255)<<24|(b[m+1]&255)<<16|(b[m]&255)<<8|b[m+3]&255;break;case 0:r=(b[m]&255)<<24|(b[m+1]&255)<<16|(b[m+2]&255)<<8|b[m+3]&255;break;case 1:r=(b[m+1]&255)<<24|(b[m+2]&255)<<16|(b[m+3]&255)<<8|b[m]&255}if(g&&0!=(r&255)&&255!=(r&255)){G.unmult=255/(r&255);var w;w=Math.round((r>>24&255)*G.unmult);w=G.__clamp[w];var z;z=Math.round((r>>16&255)*G.unmult);z=G.__clamp[z];var x=
Math.round((r>>8&255)*G.unmult);r=(w&255)<<24|(z&255)<<16|(G.__clamp[x]&255)<<8|r&255}r=(h[r>>24&255]&255)<<24|(l[r>>16&255]&255)<<16|(d[r>>8&255]&255)<<8|f[r&255]&255;g&&(0==(r&255)?0!=r&&(r=0):255!=(r&255)&&(G.a16=G.__alpha16[r&255],r=((r>>24&255)*G.a16>>16&255)<<24|((r>>16&255)*G.a16>>16&255)<<16|((r>>8&255)*G.a16>>16&255)<<8|r&255));switch(e){case 2:b[m]=r>>8&255;b[m+1]=r>>16&255;b[m+2]=r>>24&255;b[m+3]=r&255;break;case 0:b[m]=r>>24&255;b[m+1]=r>>16&255;b[m+2]=r>>8&255;b[m+3]=r&255;break;case 1:b[m]=
r&255,b[m+1]=r>>24&255,b[m+2]=r>>16&255,b[m+3]=r>>8&255}}}a.dirty=!0}};mb.copyChannel=function(a,c,d,b,e,g){var f;switch(g[1]){case 0:f=0;break;case 1:f=1;break;case 2:f=2;break;case 3:f=3}var h;switch(e[1]){case 0:h=0;break;case 1:h=1;break;case 2:h=2;break;case 3:h=3}e=c.buffer.data;g=a.buffer.data;if(null!=e&&null!=g){d=new jd(c,d);b=new jd(a,new yc(b.x,b.y,d.width,d.height));var k=c.buffer.format,l=a.buffer.format;c=c.buffer.premultiplied;for(var m=a.buffer.premultiplied,r,y,u,t,v=0,w=0,z=b.height;w<
z;){y=w++;r=d.offset+d.stride*y;y=b.offset+b.stride*y;for(var x=0,H=b.width;x<H;){x++;switch(k){case 2:u=(e[r+2]&255)<<24|(e[r+1]&255)<<16|(e[r]&255)<<8|e[r+3]&255;break;case 0:u=(e[r]&255)<<24|(e[r+1]&255)<<16|(e[r+2]&255)<<8|e[r+3]&255;break;case 1:u=(e[r+1]&255)<<24|(e[r+2]&255)<<16|(e[r+3]&255)<<8|e[r]&255}if(c&&0!=(u&255)&&255!=(u&255)){G.unmult=255/(u&255);var U;U=Math.round((u>>24&255)*G.unmult);U=G.__clamp[U];var T;T=Math.round((u>>16&255)*G.unmult);T=G.__clamp[T];var pa=Math.round((u>>8&
255)*G.unmult);u=(U&255)<<24|(T&255)<<16|(G.__clamp[pa]&255)<<8|u&255}switch(l){case 2:t=(g[y+2]&255)<<24|(g[y+1]&255)<<16|(g[y]&255)<<8|g[y+3]&255;break;case 0:t=(g[y]&255)<<24|(g[y+1]&255)<<16|(g[y+2]&255)<<8|g[y+3]&255;break;case 1:t=(g[y+1]&255)<<24|(g[y+2]&255)<<16|(g[y+3]&255)<<8|g[y]&255}m&&0!=(t&255)&&255!=(t&255)&&(G.unmult=255/(t&255),U=Math.round((t>>24&255)*G.unmult),U=G.__clamp[U],T=Math.round((t>>16&255)*G.unmult),T=G.__clamp[T],pa=Math.round((t>>8&255)*G.unmult),t=(U&255)<<24|(T&255)<<
16|(G.__clamp[pa]&255)<<8|t&255);switch(h){case 0:v=u>>24&255;break;case 1:v=u>>16&255;break;case 2:v=u>>8&255;break;case 3:v=u&255}switch(f){case 0:t=(v&255)<<24|(t>>16&255)<<16|(t>>8&255)<<8|t&255;v;break;case 1:t=(t>>24&255)<<24|(v&255)<<16|(t>>8&255)<<8|t&255;v;break;case 2:t=(t>>24&255)<<24|(t>>16&255)<<16|(v&255)<<8|t&255;v;break;case 3:t=(t>>24&255)<<24|(t>>16&255)<<16|(t>>8&255)<<8|v&255,v}m&&(0==(t&255)?0!=t&&(t=0):255!=(t&255)&&(G.a16=G.__alpha16[t&255],t=((t>>24&255)*G.a16>>16&255)<<24|
((t>>16&255)*G.a16>>16&255)<<16|((t>>8&255)*G.a16>>16&255)<<8|t&255));switch(l){case 2:g[y]=t>>8&255;g[y+1]=t>>16&255;g[y+2]=t>>24&255;g[y+3]=t&255;break;case 0:g[y]=t>>24&255;g[y+1]=t>>16&255;g[y+2]=t>>8&255;g[y+3]=t&255;break;case 1:g[y]=t&255,g[y+1]=t>>24&255,g[y+2]=t>>16&255,g[y+3]=t>>8&255}r+=4;y+=4}}a.dirty=!0}};mb.copyPixels=function(a,c,d,b,e,g,f){null==f&&(f=!1);var h=c.buffer.data,k=a.buffer.data;if(null!=h&&null!=k){d=new jd(c,d);b=new jd(a,new yc(b.x,b.y,d.width,d.height));var l=c.buffer.format,
m=a.buffer.format,r=c.buffer.premultiplied,y=a.buffer.premultiplied,t;if(f&&c.get_transparent()){var u,v,w,z,x;if(null==e){var H=0;for(c=b.height;H<c;){g=H++;e=d.offset+d.stride*g;g=b.offset+b.stride*g;f=0;for(var U=b.width;f<U;){f++;switch(l){case 2:t=(h[e+2]&255)<<24|(h[e+1]&255)<<16|(h[e]&255)<<8|h[e+3]&255;break;case 0:t=(h[e]&255)<<24|(h[e+1]&255)<<16|(h[e+2]&255)<<8|h[e+3]&255;break;case 1:t=(h[e+1]&255)<<24|(h[e+2]&255)<<16|(h[e+3]&255)<<8|h[e]&255}if(r&&0!=(t&255)&&255!=(t&255)){G.unmult=
255/(t&255);var T;T=Math.round((t>>24&255)*G.unmult);T=G.__clamp[T];var pa;pa=Math.round((t>>16&255)*G.unmult);pa=G.__clamp[pa];var da=Math.round((t>>8&255)*G.unmult);t=(T&255)<<24|(pa&255)<<16|(G.__clamp[da]&255)<<8|t&255}switch(m){case 2:x=(k[g+2]&255)<<24|(k[g+1]&255)<<16|(k[g]&255)<<8|k[g+3]&255;break;case 0:x=(k[g]&255)<<24|(k[g+1]&255)<<16|(k[g+2]&255)<<8|k[g+3]&255;break;case 1:x=(k[g+1]&255)<<24|(k[g+2]&255)<<16|(k[g+3]&255)<<8|k[g]&255}y&&0!=(x&255)&&255!=(x&255)&&(G.unmult=255/(x&255),T=
Math.round((x>>24&255)*G.unmult),T=G.__clamp[T],pa=Math.round((x>>16&255)*G.unmult),pa=G.__clamp[pa],da=Math.round((x>>8&255)*G.unmult),x=(T&255)<<24|(pa&255)<<16|(G.__clamp[da]&255)<<8|x&255);u=(t&255)/255;v=(x&255)/255;w=1-u;z=u+v*w;0==z?x=0:(T=Math.round(((t>>24&255)*u+(x>>24&255)*v*w)/z),T=G.__clamp[T],x=(T&255)<<24|(x>>16&255)<<16|(x>>8&255)<<8|x&255,T,T=Math.round(((t>>16&255)*u+(x>>16&255)*v*w)/z),T=G.__clamp[T],x=(x>>24&255)<<24|(T&255)<<16|(x>>8&255)<<8|x&255,T,T=Math.round(((t>>8&255)*u+
(x>>8&255)*v*w)/z),T=G.__clamp[T],x=(x>>24&255)<<24|(x>>16&255)<<16|(T&255)<<8|x&255,T,T=Math.round(255*z),T=G.__clamp[T],x=(x>>24&255)<<24|(x>>16&255)<<16|(x>>8&255)<<8|T&255,T);y&&(0==(x&255)?0!=x&&(x=0):255!=(x&255)&&(G.a16=G.__alpha16[x&255],x=((x>>24&255)*G.a16>>16&255)<<24|((x>>16&255)*G.a16>>16&255)<<16|((x>>8&255)*G.a16>>16&255)<<8|x&255));switch(m){case 2:k[g]=x>>8&255;k[g+1]=x>>16&255;k[g+2]=x>>24&255;k[g+3]=x&255;break;case 0:k[g]=x>>24&255;k[g+1]=x>>16&255;k[g+2]=x>>8&255;k[g+3]=x&255;
break;case 1:k[g]=x&255,k[g+1]=x>>24&255,k[g+2]=x>>16&255,k[g+3]=x>>8&255}e+=4;g+=4}}}else{null==g&&(g=new Pc);c=e.buffer.data;f=e.buffer.format;U=e.buffer.premultiplied;T=new jd(e,new yc(g.x,g.y,b.width,b.height));var wa;pa=0;for(da=T.height;pa<da;){wa=pa++;e=d.offset+d.stride*wa;g=b.offset+b.stride*wa;wa=T.offset+T.stride*wa;for(var vb=0,wb=T.width;vb<wb;){vb++;switch(l){case 2:t=(h[e+2]&255)<<24|(h[e+1]&255)<<16|(h[e]&255)<<8|h[e+3]&255;break;case 0:t=(h[e]&255)<<24|(h[e+1]&255)<<16|(h[e+2]&255)<<
8|h[e+3]&255;break;case 1:t=(h[e+1]&255)<<24|(h[e+2]&255)<<16|(h[e+3]&255)<<8|h[e]&255}r&&0!=(t&255)&&255!=(t&255)&&(G.unmult=255/(t&255),z=Math.round((t>>24&255)*G.unmult),z=G.__clamp[z],u=Math.round((t>>16&255)*G.unmult),u=G.__clamp[u],v=Math.round((t>>8&255)*G.unmult),t=(z&255)<<24|(u&255)<<16|(G.__clamp[v]&255)<<8|t&255);switch(m){case 2:x=(k[g+2]&255)<<24|(k[g+1]&255)<<16|(k[g]&255)<<8|k[g+3]&255;break;case 0:x=(k[g]&255)<<24|(k[g+1]&255)<<16|(k[g+2]&255)<<8|k[g+3]&255;break;case 1:x=(k[g+1]&
255)<<24|(k[g+2]&255)<<16|(k[g+3]&255)<<8|k[g]&255}y&&0!=(x&255)&&255!=(x&255)&&(G.unmult=255/(x&255),z=Math.round((x>>24&255)*G.unmult),z=G.__clamp[z],u=Math.round((x>>16&255)*G.unmult),u=G.__clamp[u],v=Math.round((x>>8&255)*G.unmult),x=(z&255)<<24|(u&255)<<16|(G.__clamp[v]&255)<<8|x&255);switch(f){case 2:H=(c[wa+2]&255)<<24|(c[wa+1]&255)<<16|(c[wa]&255)<<8|c[wa+3]&255;break;case 0:H=(c[wa]&255)<<24|(c[wa+1]&255)<<16|(c[wa+2]&255)<<8|c[wa+3]&255;break;case 1:H=(c[wa+1]&255)<<24|(c[wa+2]&255)<<16|
(c[wa+3]&255)<<8|c[wa]&255}U&&0!=(H&255)&&255!=(H&255)&&(G.unmult=255/(H&255),z=Math.round((H>>24&255)*G.unmult),z=G.__clamp[z],u=Math.round((H>>16&255)*G.unmult),u=G.__clamp[u],v=Math.round((H>>8&255)*G.unmult),H=(z&255)<<24|(u&255)<<16|(G.__clamp[v]&255)<<8|H&255);u=(H&255)/255;v=(x&255)/255;w=1-u;z=u+v*w;if(0==z)x=0;else{var Sa;Sa=Math.round(((t>>24&255)*u+(x>>24&255)*v*w)/z);Sa=G.__clamp[Sa];x=(Sa&255)<<24|(x>>16&255)<<16|(x>>8&255)<<8|x&255;Sa;Sa=Math.round(((t>>16&255)*u+(x>>16&255)*v*w)/z);
Sa=G.__clamp[Sa];x=(x>>24&255)<<24|(Sa&255)<<16|(x>>8&255)<<8|x&255;Sa;u=Math.round(((t>>8&255)*u+(x>>8&255)*v*w)/z);u=G.__clamp[u];x=(x>>24&255)<<24|(x>>16&255)<<16|(u&255)<<8|x&255;u;z=Math.round(255*z);z=G.__clamp[z];x=(x>>24&255)<<24|(x>>16&255)<<16|(x>>8&255)<<8|z&255;z}y&&(0==(x&255)?0!=x&&(x=0):255!=(x&255)&&(G.a16=G.__alpha16[x&255],x=((x>>24&255)*G.a16>>16&255)<<24|((x>>16&255)*G.a16>>16&255)<<16|((x>>8&255)*G.a16>>16&255)<<8|x&255));switch(m){case 2:k[g]=x>>8&255;k[g+1]=x>>16&255;k[g+2]=
x>>24&255;k[g+3]=x&255;break;case 0:k[g]=x>>24&255;k[g+1]=x>>16&255;k[g+2]=x>>8&255;k[g+3]=x&255;break;case 1:k[g]=x&255,k[g+1]=x>>24&255,k[g+2]=x>>16&255,k[g+3]=x>>8&255}e+=4;g+=4}}}}else for(x=0,H=b.height;x<H;)for(g=x++,e=d.offset+d.stride*g,g=b.offset+b.stride*g,c=0,f=b.width;c<f;){c++;switch(l){case 2:t=(h[e+2]&255)<<24|(h[e+1]&255)<<16|(h[e]&255)<<8|h[e+3]&255;break;case 0:t=(h[e]&255)<<24|(h[e+1]&255)<<16|(h[e+2]&255)<<8|h[e+3]&255;break;case 1:t=(h[e+1]&255)<<24|(h[e+2]&255)<<16|(h[e+3]&255)<<
8|h[e]&255}r&&0!=(t&255)&&255!=(t&255)&&(G.unmult=255/(t&255),U=Math.round((t>>24&255)*G.unmult),U=G.__clamp[U],T=Math.round((t>>16&255)*G.unmult),T=G.__clamp[T],pa=Math.round((t>>8&255)*G.unmult),t=(U&255)<<24|(T&255)<<16|(G.__clamp[pa]&255)<<8|t&255);y&&(0==(t&255)?0!=t&&(t=0):255!=(t&255)&&(G.a16=G.__alpha16[t&255],t=((t>>24&255)*G.a16>>16&255)<<24|((t>>16&255)*G.a16>>16&255)<<16|((t>>8&255)*G.a16>>16&255)<<8|t&255));switch(m){case 2:k[g]=t>>8&255;k[g+1]=t>>16&255;k[g+2]=t>>24&255;k[g+3]=t&255;
break;case 0:k[g]=t>>24&255;k[g+1]=t>>16&255;k[g+2]=t>>8&255;k[g+3]=t&255;break;case 1:k[g]=t&255,k[g+1]=t>>24&255,k[g+2]=t>>16&255,k[g+3]=t>>8&255}e+=4;g+=4}a.dirty=!0}};mb.fillRect=function(a,c,d,b){switch(b){case 1:d=(d>>16&255)<<24|(d>>8&255)<<16|(d&255)<<8|d>>24&255;break;case 2:d=(d>>8&255)<<24|(d>>16&255)<<16|(d>>24&255)<<8|d&255;break}a.get_transparent()||(d=(d>>24&255)<<24|(d>>16&255)<<16|(d>>8&255)<<8|255,255);b=a.buffer.data;if(null!=b){var e=a.buffer.format,g=a.buffer.premultiplied;c=
new jd(a,c);for(var f,h=0,k=c.height;h<k;){f=h++;f=c.offset+c.stride*f;for(var l=0,m=c.width;l<m;){var r=l++,r=f+4*r;g&&(0==(d&255)?0!=d&&(d=0):255!=(d&255)&&(G.a16=G.__alpha16[d&255],d=((d>>24&255)*G.a16>>16&255)<<24|((d>>16&255)*G.a16>>16&255)<<16|((d>>8&255)*G.a16>>16&255)<<8|d&255));switch(e){case 2:b[r]=d>>8&255;b[r+1]=d>>16&255;b[r+2]=d>>24&255;b[r+3]=d&255;break;case 0:b[r]=d>>24&255;b[r+1]=d>>16&255;b[r+2]=d>>8&255;b[r+3]=d&255;break;case 1:b[r]=d&255,b[r+1]=d>>24&255,b[r+2]=d>>16&255,b[r+
3]=d>>8&255}}}a.dirty=!0}};mb.getPixel=function(a,c,d,b){var e,g=a.buffer.data;c=4*(d+a.offsetY)*a.buffer.width+4*(c+a.offsetX);switch(a.buffer.format){case 2:e=(g[c+2]&255)<<24|(g[c+1]&255)<<16|(g[c]&255)<<8|g[c+3]&255;break;case 0:e=(g[c]&255)<<24|(g[c+1]&255)<<16|(g[c+2]&255)<<8|g[c+3]&255;break;case 1:e=(g[c+1]&255)<<24|(g[c+2]&255)<<16|(g[c+3]&255)<<8|g[c]&255}a.buffer.premultiplied&&0!=(e&255)&&255!=(e&255)&&(G.unmult=255/(e&255),a=Math.round((e>>24&255)*G.unmult),a=G.__clamp[a],g=Math.round((e>>
16&255)*G.unmult),g=G.__clamp[g],c=Math.round((e>>8&255)*G.unmult),e=(a&255)<<24|(g&255)<<16|(G.__clamp[c]&255)<<8|e&255);e=(e>>24&255)<<24|(e>>16&255)<<16|(e>>8&255)<<8|0;0;switch(b){case 1:return function(a){a=0;return a=(e&255)<<24|(e>>24&255)<<16|(e>>16&255)<<8|e>>8&255}(this);case 2:return function(a){a=0;return a=(e>>8&255)<<24|(e>>16&255)<<16|(e>>24&255)<<8|e&255}(this);default:return e}};mb.getPixel32=function(a,c,d,b){var e,g=a.buffer.data;c=4*(d+a.offsetY)*a.buffer.width+4*(c+a.offsetX);
switch(a.buffer.format){case 2:e=(g[c+2]&255)<<24|(g[c+1]&255)<<16|(g[c]&255)<<8|g[c+3]&255;break;case 0:e=(g[c]&255)<<24|(g[c+1]&255)<<16|(g[c+2]&255)<<8|g[c+3]&255;break;case 1:e=(g[c+1]&255)<<24|(g[c+2]&255)<<16|(g[c+3]&255)<<8|g[c]&255}a.buffer.premultiplied&&0!=(e&255)&&255!=(e&255)&&(G.unmult=255/(e&255),a=Math.round((e>>24&255)*G.unmult),a=G.__clamp[a],g=Math.round((e>>16&255)*G.unmult),g=G.__clamp[g],c=Math.round((e>>8&255)*G.unmult),e=(a&255)<<24|(g&255)<<16|(G.__clamp[c]&255)<<8|e&255);
switch(b){case 1:return function(a){a=0;return a=(e&255)<<24|(e>>24&255)<<16|(e>>16&255)<<8|e>>8&255}(this);case 2:return function(a){a=0;return a=(e>>8&255)<<24|(e>>16&255)<<16|(e>>24&255)<<8|e&255}(this);default:return e}};mb.multiplyAlpha=function(a){var c=a.buffer.data;if(null!=c&&a.buffer.transparent){for(var d=a.buffer.format,b=c.length/4|0,e,g=0;g<b;){var f=g++,h=4*f;switch(d){case 2:e=(c[h+2]&255)<<24|(c[h+1]&255)<<16|(c[h]&255)<<8|c[h+3]&255;break;case 0:e=(c[h]&255)<<24|(c[h+1]&255)<<16|
(c[h+2]&255)<<8|c[h+3]&255;break;case 1:e=(c[h+1]&255)<<24|(c[h+2]&255)<<16|(c[h+3]&255)<<8|c[h]&255}f*=4;0==(e&255)?0!=e&&(e=0):255!=(e&255)&&(G.a16=G.__alpha16[e&255],e=((e>>24&255)*G.a16>>16&255)<<24|((e>>16&255)*G.a16>>16&255)<<16|((e>>8&255)*G.a16>>16&255)<<8|e&255);switch(d){case 2:c[f]=e>>8&255;c[f+1]=e>>16&255;c[f+2]=e>>24&255;c[f+3]=e&255;break;case 0:c[f]=e>>24&255;c[f+1]=e>>16&255;c[f+2]=e>>8&255;c[f+3]=e&255;break;case 1:c[f]=e&255,c[f+1]=e>>24&255,c[f+2]=e>>16&255,c[f+3]=e>>8&255}}a.buffer.premultiplied=
!0;a.dirty=!0}};mb.setFormat=function(a,c){var d=a.buffer.data;if(null!=d){var b,e=d.length/4|0,g,f,h,k,l,m,r,y,t,u,v,w;switch(a.get_format()){case 0:g=0;f=1;h=2;k=3;break;case 1:g=1;f=2;h=3;k=0;break;case 2:g=2,f=1,h=0,k=3}switch(c){case 0:l=0;m=1;r=2;y=3;break;case 1:l=1;m=2;r=3;y=0;break;case 2:l=2,m=1,r=0,y=3}for(var x=0;x<e;)b=4*x++,t=d[b+g],u=d[b+f],v=d[b+h],w=d[b+k],d[b+l]=t,d[b+m]=u,d[b+r]=v,d[b+y]=w;a.buffer.format=c;a.dirty=!0}};mb.setPixel32=function(a,c,d,b,e){switch(e){case 1:b=(b>>16&
255)<<24|(b>>8&255)<<16|(b&255)<<8|b>>24&255;break;case 2:b=(b>>8&255)<<24|(b>>16&255)<<16|(b>>24&255)<<8|b&255;break}a.get_transparent()||(b=(b>>24&255)<<24|(b>>16&255)<<16|(b>>8&255)<<8|255,255);e=a.buffer.data;c=4*(d+a.offsetY)*a.buffer.width+4*(c+a.offsetX);a.buffer.premultiplied&&(0==(b&255)?0!=b&&(b=0):255!=(b&255)&&(G.a16=G.__alpha16[b&255],b=((b>>24&255)*G.a16>>16&255)<<24|((b>>16&255)*G.a16>>16&255)<<16|((b>>8&255)*G.a16>>16&255)<<8|b&255));switch(a.buffer.format){case 2:e[c]=b>>8&255;e[c+
1]=b>>16&255;e[c+2]=b>>24&255;e[c+3]=b&255;break;case 0:e[c]=b>>24&255;e[c+1]=b>>16&255;e[c+2]=b>>8&255;e[c+3]=b&255;break;case 1:e[c]=b&255,e[c+1]=b>>24&255,e[c+2]=b>>16&255,e[c+3]=b>>8&255}a.dirty=!0};mb.unmultiplyAlpha=function(a){var c=a.buffer.data;if(null!=c){for(var d=a.buffer.format,b=c.length/4|0,e,g=0;g<b;){var f=g++,h=4*f;switch(d){case 2:e=(c[h+2]&255)<<24|(c[h+1]&255)<<16|(c[h]&255)<<8|c[h+3]&255;break;case 0:e=(c[h]&255)<<24|(c[h+1]&255)<<16|(c[h+2]&255)<<8|c[h+3]&255;break;case 1:e=
(c[h+1]&255)<<24|(c[h+2]&255)<<16|(c[h+3]&255)<<8|c[h]&255}if(0!=(e&255)&&255!=(e&255)){G.unmult=255/(e&255);var h=Math.round((e>>24&255)*G.unmult),h=G.__clamp[h],k;k=Math.round((e>>16&255)*G.unmult);k=G.__clamp[k];var l=Math.round((e>>8&255)*G.unmult);e=(h&255)<<24|(k&255)<<16|(G.__clamp[l]&255)<<8|e&255}f*=4;switch(d){case 2:c[f]=e>>8&255;c[f+1]=e>>16&255;c[f+2]=e>>24&255;c[f+3]=e&255;break;case 0:c[f]=e>>24&255;c[f+1]=e>>16&255;c[f+2]=e>>8&255;c[f+3]=e&255;break;case 1:c[f]=e&255,c[f+1]=e>>24&
255,c[f+2]=e>>16&255,c[f+3]=e>>8&255}}a.buffer.premultiplied=!1;a.dirty=!0}};var jd=function(a,c){this.image=a;null==c?this.rect=a.get_rect():(0>c.x&&(c.x=0),0>c.y&&(c.y=0),c.x+c.width>a.width&&(c.width=a.width-c.x),c.y+c.height>a.height&&(c.height=a.height-c.y),0>c.width&&(c.width=0),0>c.height&&(c.height=0),this.rect=c);this.stride=a.buffer.get_stride();this.x=Math.ceil(this.rect.x);this.y=Math.ceil(this.rect.y);this.width=Math.floor(this.rect.width);this.height=Math.floor(this.rect.height);this.offset=
this.stride*(this.y+a.offsetY)+4*(this.x+a.offsetX)};k["lime.graphics.utils._ImageDataUtil.ImageDataView"]=jd;jd.__name__=!0;jd.prototype={__class__:jd};var sa={};k["lime.math._ColorMatrix.ColorMatrix_Impl_"]=sa;sa.__name__=!0;sa.getAlphaTable=function(a){var c;c=new rb(256);var d=a[18];a=255*a[19];for(var b,e=0;256>e;){var g=e++;b=Math.floor(g*d+a);255<b&&(b=255);0>b&&(b=0);c[g]=b}return c};sa.getBlueTable=function(a){var c;c=new rb(256);var d=a[12];a=255*a[14];for(var b,e=0;256>e;){var g=e++;b=
Math.floor(g*d+a);255<b&&(b=255);0>b&&(b=0);c[g]=b}return c};sa.getGreenTable=function(a){var c;c=new rb(256);var d=a[6];a=255*a[9];for(var b,e=0;256>e;){var g=e++;b=Math.floor(g*d+a);255<b&&(b=255);0>b&&(b=0);c[g]=b}return c};sa.getRedTable=function(a){var c;c=new rb(256);var d=a[0];a=255*a[4];for(var b,e=0;256>e;){var g=e++;b=Math.floor(g*d+a);255<b&&(b=255);0>b&&(b=0);c[g]=b}return c};sa.__toFlashColorTransform=function(a){return null};var jf=function(a,c,d,b,e,g){null==g&&(g=0);null==e&&(e=0);
null==b&&(b=1);null==d&&(d=0);null==c&&(c=0);null==a&&(a=1);this.a=a;this.b=c;this.c=d;this.d=b;this.tx=e;this.ty=g};k["lime.math.Matrix3"]=jf;jf.__name__=!0;jf.prototype={__class__:jf};var yc=function(a,c,d,b){null==b&&(b=0);null==d&&(d=0);null==c&&(c=0);null==a&&(a=0);this.x=a;this.y=c;this.width=d;this.height=b};k["lime.math.Rectangle"]=yc;yc.__name__=!0;yc.prototype={offset:function(a,c){this.x+=a;this.y+=c},__toFlashRectangle:function(){return null},__class__:yc};var Pc=function(a,c){null==c&&
(c=0);null==a&&(a=0);this.x=a;this.y=c};k["lime.math.Vector2"]=Pc;Pc.__name__=!0;Pc.prototype={offset:function(a,c){this.x+=a;this.y+=c},__toFlashPoint:function(){return null},__class__:Pc};var gg=function(){};k["lime.math.Vector4"]=gg;gg.__name__=!0;var G={};k["lime.math.color._RGBA.RGBA_Impl_"]=G;G.__name__=!0;G.__alpha16=null;G.__clamp=null;G.a16=null;G.unmult=null;var wf=function(a){this.onSecurityError=new Wd;this.onProgress=new Hd;this.onOpen=new tf;this.onIOError=new Wd;this.onHTTPStatus=new sf;
this.onComplete=new tf;this.bytesTotal=this.bytesLoaded=0;this.set_dataFormat(jc.TEXT);null!=a&&this.load(a)};k["lime.net.URLLoader"]=wf;wf.__name__=!0;wf.prototype={getData:function(){return null},load:function(a){this.requestUrl(a.url,a.method,a.data,a.formatRequestHeaders())},registerEvents:function(a){var c=this,d=this;"undefined"!=typeof XMLHttpRequestProgressEvent&&a.addEventListener("progress",u(this,this.__onProgress),!1);a.onreadystatechange=function(){if(4==a.readyState){var b;try{b=a.status}catch(e){e instanceof
K&&(e=e.val),b=null}void 0==b&&(b=null);null!=b&&d.onHTTPStatus.dispatch(c,b);null!=b&&200<=b&&400>b?d.__onData(a.response):null==b?d.onIOError.dispatch(c,"Failed to connect or resolve host"):12029==b?d.onIOError.dispatch(c,"Failed to connect to host"):12007==b?d.onIOError.dispatch(c,"Unknown host"):0==b?(d.onIOError.dispatch(c,"Unable to make request (may be blocked due to cross-domain permissions)"),d.onSecurityError.dispatch(c,"Unable to make request (may be blocked due to cross-domain permissions)")):
d.onIOError.dispatch(c,"Http Error #"+a.status)}}},requestUrl:function(a,c,d,b){var e=new XMLHttpRequest;this.registerEvents(e);var g="";if(W.__instanceof(d,ac))switch(this.dataFormat[1]){case 0:g=d.data.buffer;break;default:g=d.readUTFBytes(d.length)}else if(W.__instanceof(d,Wf))for(var f=0,h=ma.fields(d);f<h.length;){var k=h[f];++f;0!=g.length&&(g+="&");g+=encodeURIComponent(k)+"="+na.urlEncode(ma.field(d,k))}else null!=d&&(g=d.toString());try{if("GET"==c&&null!=g&&""!=g){var l=1>=a.split("?").length;
e.open("GET",a+(l?"?":"&")+X.string(g),!0);g=""}else e.open(W.__cast(c,String),a,!0)}catch(m){m instanceof K&&(m=m.val);this.onIOError.dispatch(this,m.toString());return}switch(this.dataFormat[1]){case 0:e.responseType="arraybuffer"}for(a=0;a<b.length;)c=b[a],++a,e.setRequestHeader(c.name,c.value);e.send(g);this.onOpen.dispatch(this);this.getData=function(){return null!=e.response?e.response:e.responseText}},__onData:function(a){a=this.getData();switch(this.dataFormat[1]){case 0:this.data=ac.__ofBuffer(a);
break;default:this.data=X.string(a)}this.onComplete.dispatch(this)},__onProgress:function(a){this.bytesLoaded=a.loaded;this.bytesTotal=a.total;this.onProgress.dispatch(this,this.bytesLoaded,this.bytesTotal)},set_dataFormat:function(a){a!=jc.BINARY||ma.hasField(window,"ArrayBuffer")?this.dataFormat=a:this.dataFormat=jc.TEXT;return this.dataFormat},__class__:wf,__properties__:{set_dataFormat:"set_dataFormat"}};var jc=k["lime.net.URLLoaderDataFormat"]={__ename__:!0,__constructs__:["BINARY","TEXT","VARIABLES"]};
jc.BINARY=["BINARY",0];jc.BINARY.toString=r;jc.BINARY.__enum__=jc;jc.TEXT=["TEXT",1];jc.TEXT.toString=r;jc.TEXT.__enum__=jc;jc.VARIABLES=["VARIABLES",2];jc.VARIABLES.toString=r;jc.VARIABLES.__enum__=jc;var Xd=function(a){null!=a&&(this.url=a);this.requestHeaders=[];this.method="GET";this.contentType=null};k["lime.net.URLRequest"]=Xd;Xd.__name__=!0;Xd.prototype={formatRequestHeaders:function(){var a=this.requestHeaders;null==a&&(a=[]);if("GET"==this.method||null==this.data)return a;if("string"==typeof this.data||
W.__instanceof(this.data,ac))a=a.slice(),a.push(new Re("Content-Type",null!=this.contentType?this.contentType:"application/x-www-form-urlencoded"));return a},__class__:Xd};var Re=function(a,c){null==c&&(c="");null==a&&(a="");this.name=a;this.value=c};k["lime.net.URLRequestHeader"]=Re;Re.__name__=!0;Re.prototype={__class__:Re};var Wf=function(){};k["lime.net.URLVariables"]=Wf;Wf.__name__=!0;var Zd=function(){};k["lime.system.Clipboard"]=Zd;Zd.__name__=!0;Zd.__properties__={set_text:"set_text",get_text:"get_text"};
Zd.get_text=function(){return null};Zd.set_text=function(a){return null};var Nf=function(){};k["lime.system.Display"]=Nf;Nf.__name__=!0;Nf.prototype={__class__:Nf};var Af=function(a,c,d,b){this.width=a;this.height=c;this.refreshRate=d;this.pixelFormat=b};k["lime.system.DisplayMode"]=Af;Af.__name__=!0;Af.prototype={__class__:Af};var Sd=function(){};k["lime.system.System"]=Sd;Sd.__name__=!0;Sd.embed=f.lime.embed=function(a,c,d,b,e){var g=null,g="string"==typeof a?window.document.getElementById(W.__cast(a,
String)):null==a?window.document.createElement("div"):a;a=null;null!=b&&(b=na.replace(b,"#",""),a=-1<b.indexOf("0x")?X.parseInt(b):X.parseInt("0x"+b));null==c&&(c=0);null==d&&(d=0);F.config.windows[0].background=a;F.config.windows[0].element=g;F.config.windows[0].width=c;F.config.windows[0].height=d;F.config.assetsPrefix=e;F.create()};Sd.getDisplay=function(a){return 0==a?(a=new Nf,a.id=0,a.name="Generic Display",a.currentMode=new Af(window.screen.width,window.screen.height,60,1),a.supportedModes=
[a.currentMode],a.bounds=new yc(0,0,a.currentMode.width,a.currentMode.height),a):null};Sd.getTimer=function(){return(new Date).getTime()};var Od=function(a){null!=a&&(this.name=a);null!=this.__fontPath&&this.__fromFile(this.__fontPath)};k["lime.text.Font"]=Od;Od.__name__=!0;Od.prototype={__fromFile:function(a){this.__fontPath=a},__class__:Od};var fd=function(){this.onDisconnect=new Va;this.onButtonUp=new Ne;this.onButtonDown=new Ne;this.onAxisMove=new se};k["lime.ui.Gamepad"]=fd;fd.__name__=!0;fd.prototype=
{__class__:fd};var Le=function(){this.onTrackballMove=new pf;this.onHatMove=new Me;this.onDisconnect=new Va;this.onButtonUp=new Td;this.onButtonDown=new Td;this.onAxisMove=new pf};k["lime.ui.Joystick"]=Le;Le.__name__=!0;Le.prototype={__class__:Le};var ib={};k["lime.ui._KeyModifier.KeyModifier_Impl_"]=ib;ib.__name__=!0;ib.__properties__={get_shiftKey:"get_shiftKey",get_metaKey:"get_metaKey",get_ctrlKey:"get_ctrlKey",get_altKey:"get_altKey"};ib.get_altKey=function(a){return 0<(a&256)||0<(a&512)};ib.get_ctrlKey=
function(a){return 0<(a&64)||0<(a&128)};ib.get_metaKey=function(a){return 0<(a&1024)||0<(a&2048)};ib.get_shiftKey=function(a){return 0<(a&1)||0<(a&2)};var ve=function(){};k["lime.ui.Mouse"]=ve;ve.__name__=!0;ve.__properties__={set_cursor:"set_cursor"};ve.set_cursor=function(a){return xc.set_cursor(a)};var ua=k["lime.ui.MouseCursor"]={__ename__:!0,__constructs__:"ARROW CROSSHAIR DEFAULT MOVE POINTER RESIZE_NESW RESIZE_NS RESIZE_NWSE RESIZE_WE TEXT WAIT WAIT_ARROW CUSTOM".split(" ")};ua.ARROW=["ARROW",
0];ua.ARROW.toString=r;ua.ARROW.__enum__=ua;ua.CROSSHAIR=["CROSSHAIR",1];ua.CROSSHAIR.toString=r;ua.CROSSHAIR.__enum__=ua;ua.DEFAULT=["DEFAULT",2];ua.DEFAULT.toString=r;ua.DEFAULT.__enum__=ua;ua.MOVE=["MOVE",3];ua.MOVE.toString=r;ua.MOVE.__enum__=ua;ua.POINTER=["POINTER",4];ua.POINTER.toString=r;ua.POINTER.__enum__=ua;ua.RESIZE_NESW=["RESIZE_NESW",5];ua.RESIZE_NESW.toString=r;ua.RESIZE_NESW.__enum__=ua;ua.RESIZE_NS=["RESIZE_NS",6];ua.RESIZE_NS.toString=r;ua.RESIZE_NS.__enum__=ua;ua.RESIZE_NWSE=["RESIZE_NWSE",
7];ua.RESIZE_NWSE.toString=r;ua.RESIZE_NWSE.__enum__=ua;ua.RESIZE_WE=["RESIZE_WE",8];ua.RESIZE_WE.toString=r;ua.RESIZE_WE.__enum__=ua;ua.TEXT=["TEXT",9];ua.TEXT.toString=r;ua.TEXT.__enum__=ua;ua.WAIT=["WAIT",10];ua.WAIT.toString=r;ua.WAIT.__enum__=ua;ua.WAIT_ARROW=["WAIT_ARROW",11];ua.WAIT_ARROW.toString=r;ua.WAIT_ARROW.__enum__=ua;ua.CUSTOM=["CUSTOM",12];ua.CUSTOM.toString=r;ua.CUSTOM.__enum__=ua;var Xb=function(a,c,d,b,e,g,f){this.x=a;this.y=c;this.id=d;this.dx=b;this.dy=e;this.pressure=g;this.device=
f};k["lime.ui.Touch"]=Xb;Xb.__name__=!0;Xb.prototype={__class__:Xb};var Jd=function(a){this.onTextInput=new rf;this.onTextEdit=new Kf;this.onRestore=new Va;this.onResize=new qf;this.onMove=new Ud;this.onMouseWheel=new Ud;this.onMouseUp=new gd;this.onMouseMoveRelative=new Ud;this.onMouseMove=new Ud;this.onMouseDown=new gd;this.onMinimize=new Va;this.onLeave=new Va;this.onKeyUp=new vf;this.onKeyDown=new vf;this.onFullscreen=new Va;this.onFocusOut=new Va;this.onFocusIn=new Va;this.onEnter=new Va;this.onDeactivate=
new Va;this.onCreate=new Va;this.onClose=new Va;this.onActivate=new Va;this.config=a;this.__height=this.__width=0;this.__fullscreen=!1;this.__scale=1;this.__y=this.__x=0;this.__title="";this.id=-1;null!=a&&(Object.prototype.hasOwnProperty.call(a,"width")&&(this.__width=a.width),Object.prototype.hasOwnProperty.call(a,"height")&&(this.__height=a.height),Object.prototype.hasOwnProperty.call(a,"x")&&(this.__x=a.x),Object.prototype.hasOwnProperty.call(a,"y")&&(this.__y=a.y),Object.prototype.hasOwnProperty.call(a,
"fullscreen")&&(this.__fullscreen=a.fullscreen),Object.prototype.hasOwnProperty.call(a,"title")&&(this.__title=a.title));this.backend=new Oa(this)};k["lime.ui.Window"]=Jd;Jd.__name__=!0;Jd.prototype={close:function(){this.backend.close()},create:function(a){this.application=a;this.backend.create(a);null!=this.renderer&&this.renderer.create()},resize:function(a,c){this.backend.resize(a,c);this.__width=a;this.__height=c},get_display:function(){return this.backend.getDisplay()},set_fullscreen:function(a){return this.__fullscreen=
this.backend.setFullscreen(a)},set_height:function(a){this.resize(this.__width,a);return this.__height},set_width:function(a){this.resize(a,this.__height);return this.__width},__class__:Jd,__properties__:{get_display:"get_display",set_width:"set_width",set_height:"set_height",set_fullscreen:"set_fullscreen"}};var ac=function(a){null==a&&(a=0);this.length=this.position=this.allocated=0;0<a&&(this.allocated=a);this.___resizeBuffer(this.allocated);this.set_length(this.allocated)};k["lime.utils.ByteArray"]=
ac;ac.__name__=!0;ac.__ofBuffer=function(a){var c=new ac;c.set_length(c.allocated=a.byteLength);c.data=new oa(a);c.byteView=new rb(a);return c};ac.prototype={readUTFBytes:function(a){var c="";for(a=this.position+a;this.position<a;){var d=this.data,b=d.getUint8(this.position++);if(128>b){if(0==b)break;c+=String.fromCharCode(b)}else if(224>b)c+=String.fromCharCode((b&63)<<6|d.getUint8(this.position++)&127);else if(240>b)var e=d.getUint8(this.position++),c=c+String.fromCharCode((b&31)<<12|(e&127)<<6|
d.getUint8(this.position++)&127);else var e=d.getUint8(this.position++),g=d.getUint8(this.position++),c=c+String.fromCharCode((b&15)<<18|(e&127)<<12|g<<6&127|d.getUint8(this.position++)&127)}return c},writeByte:function(a){var c=this.position+1;this.length<c&&(this.allocated<c?this.___resizeBuffer(this.allocated=X["int"](Math.max(c,2*this.allocated))):this.allocated>2*c&&this.___resizeBuffer(this.allocated=c),this.length=c,c);this.data.setInt8(this.position,a);this.position+=1},writeUTFBytes:function(a){for(var c=
0,d=a.length;c<d;){var b=c++,b=a.charCodeAt(b);127>=b?this.writeByte(b):(2047>=b?this.writeByte(192|b>>6):(65535>=b?this.writeByte(224|b>>12):(this.writeByte(240|b>>18),this.writeByte(128|b>>12&63)),this.writeByte(128|b>>6&63)),this.writeByte(128|b&63))}},__get:function(a){return this.data.getInt8(a)},___resizeBuffer:function(a){var c=this.byteView,d=new rb(a);null!=c&&(c.length<=a?d.set(c):d.set(c.subarray(0,a)));this.byteView=d;this.data=new oa(d.buffer)},__set:function(a,c){this.data.setUint8(a,
c)},set_length:function(a){this.allocated<a?this.___resizeBuffer(this.allocated=X["int"](Math.max(a,2*this.allocated))):this.allocated>2*a&&this.___resizeBuffer(this.allocated=a);return this.length=a},__class__:ac,__properties__:{set_length:"set_length"}};var Of=function(){};k["openfl.IAssetCache"]=Of;Of.__name__=!0;Of.prototype={__class__:Of,__properties__:{get_enabled:"get_enabled"}};var Se=function(){this.__enabled=!0;this.bitmapData=new ba;this.font=new ba;this.sound=new ba};k["openfl.AssetCache"]=
Se;Se.__name__=!0;Se.__interfaces__=[Of];Se.prototype={getBitmapData:function(a){return this.bitmapData.get(a)},getFont:function(a){return this.font.get(a)},hasBitmapData:function(a){return this.bitmapData.exists(a)},hasFont:function(a){return this.font.exists(a)},setBitmapData:function(a,c){this.bitmapData.set(a,c)},setFont:function(a,c){this.font.set(a,c)},get_enabled:function(){return this.__enabled},__class__:Se,__properties__:{get_enabled:"get_enabled"}};var ub=function(){};k["openfl.Assets"]=
ub;ub.__name__=!0;ub.exists=function(a,c){return ka.exists(a,c)};ub.getBitmapData=function(a,c){null==c&&(c=!0);if(c&&ub.cache.get_enabled()&&ub.cache.hasBitmapData(a)){var d=ub.cache.getBitmapData(a);if(ub.isValidBitmapData(d))return d}d=ka.getImage(a,!1);return null!=d?(d=fb.fromImage(d),c&&ub.cache.get_enabled()&&ub.cache.setBitmapData(a,d),d):null};ub.getFont=function(a,c){null==c&&(c=!0);if(c&&ub.cache.get_enabled()&&ub.cache.hasFont(a))return ub.cache.getFont(a);var d=ka.getFont(a,!1);return null!=
d?(d=$d.__fromLimeFont(d),c&&ub.cache.get_enabled()&&ub.cache.setFont(a,d),d):new $d};ub.getText=function(a){return ka.getText(a)};ub.isValidBitmapData=function(a){return null!=a&&null!=a.image};var we=function(){Ba.call(this);this.__currentFrame=0;this.__currentLabels=[];this.__totalFrames=0;this.enabled=!0};k["openfl.display.MovieClip"]=we;we.__name__=!0;we.__super__=Ba;we.prototype=l(Ba.prototype,{__class__:we});var qd=function(){C.call(this);this.applicationDomain=ae.currentDomain;this.bytesTotal=
this.bytesLoaded=0;this.childAllowsParent=!0;this.parameters={}};k["openfl.display.LoaderInfo"]=qd;qd.__name__=!0;qd.create=function(a){var c=new qd;c.uncaughtErrorEvents=new Te;null!=a?c.loader=a:c.url=qd.__rootURL;return c};qd.__super__=C;qd.prototype=l(C.prototype,{__class__:qd});var ae=function(a){this.parentDomain=null!=a?a:ae.currentDomain};k["openfl.system.ApplicationDomain"]=ae;ae.__name__=!0;ae.prototype={__class__:ae};var Te=function(a){C.call(this,a)};k["openfl.events.UncaughtErrorEvents"]=
Te;Te.__name__=!0;Te.__super__=C;Te.prototype=l(C.prototype,{__class__:Te});var La=function(){};k["openfl.Lib"]=La;La.__name__=!0;La.application=null;La.embed=f.openfl.embed=function(a,c,d,b,e){Sd.embed(a,c,d,b,e)};La.getTimer=function(){return Sd.getTimer()};La.getURL=function(a,c){null==c&&(c="_blank");window.open(a.url,c)};var Kd=function(){this.length=0};k["openfl.VectorData"]=Kd;Kd.__name__=!0;Kd.prototype={__class__:Kd};var Yc=function(a){this.renderSession=a};k["openfl._internal.renderer.AbstractMaskManager"]=
Yc;Yc.__name__=!0;Yc.prototype={pushMask:function(a){},pushRect:function(a,c){},popMask:function(){},popRect:function(){},saveState:function(){},restoreState:function(){},__class__:Yc};var Qb=function(a,c){this.width=a;this.height=c};k["openfl._internal.renderer.AbstractRenderer"]=Qb;Qb.__name__=!0;Qb.prototype={render:function(a){},resize:function(a,c){},__class__:Qb};var Ue=function(){this.types=[];this.b=[];this.i=[];this.f=[];this.o=[];this.ff=[];this.ii=[];this.ts=[]};k["openfl._internal.renderer.DrawCommandBuffer"]=
Ue;Ue.__name__=!0;Ue.prototype={append:function(a){for(var c=new wd(a),d=0,b=a.types;d<b.length;){var e=b[d];++d;switch(e[1]){case 0:c.advance();c.prev=B.BEGIN_BITMAP_FILL;e=c;this.beginBitmapFill(e.buffer.o[e.oPos],e.buffer.o[e.oPos+1],e.buffer.b[e.bPos],e.buffer.b[e.bPos+1]);break;case 1:c.advance();c.prev=B.BEGIN_FILL;e=c;this.beginFill(e.buffer.i[e.iPos],e.buffer.f[e.fPos]);break;case 2:c.advance();c.prev=B.BEGIN_GRADIENT_FILL;e=c;this.beginGradientFill(e.buffer.o[e.oPos],e.buffer.ii[e.iiPos],
e.buffer.ff[e.ffPos],e.buffer.ii[e.iiPos+1],e.buffer.o[e.oPos+1],e.buffer.o[e.oPos+2],e.buffer.o[e.oPos+3],e.buffer.o[e.oPos+4]);break;case 3:c.advance();c.prev=B.CUBIC_CURVE_TO;e=c;this.cubicCurveTo(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+3],e.buffer.f[e.fPos+4],e.buffer.f[e.fPos+5],e.buffer.f[e.fPos+6]);break;case 4:c.advance();c.prev=B.CURVE_TO;e=c;this.curveTo(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2],e.buffer.f[e.fPos+3]);break;case 5:c.advance();c.prev=B.DRAW_CIRCLE;
e=c;this.drawCircle(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2]);break;case 6:c.advance();c.prev=B.DRAW_ELLIPSE;e=c;this.drawEllipse(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2],e.buffer.f[e.fPos+3]);break;case 7:c.advance();c.prev=B.DRAW_PATH;e=c;this.drawPath(e.buffer.o[e.oPos],e.buffer.o[e.oPos+1],e.buffer.o[e.oPos+2]);break;case 8:c.advance();c.prev=B.DRAW_RECT;e=c;this.drawRect(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2],e.buffer.f[e.fPos+3]);
break;case 9:c.advance();c.prev=B.DRAW_ROUND_RECT;e=c;this.drawRoundRect(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1],e.buffer.f[e.fPos+2],e.buffer.f[e.fPos+3],e.buffer.f[e.fPos+4],e.buffer.f[e.fPos+5]);break;case 10:c.advance();c.prev=B.DRAW_TILES;e=c;this.drawTiles(e.buffer.ts[e.tsPos],e.buffer.ff[e.ffPos],e.buffer.b[e.bPos],e.buffer.i[e.iPos],e.buffer.i[e.iPos+1]);break;case 11:c.advance();c.prev=B.DRAW_TRIANGLES;e=c;this.drawTriangles(e.buffer.o[e.oPos],e.buffer.o[e.oPos+1],e.buffer.o[e.oPos+2],e.buffer.o[e.oPos+
3],e.buffer.o[e.oPos+4],e.buffer.i[e.iPos]);break;case 12:c.advance();c.prev=B.END_FILL;this.endFill();break;case 13:c.advance();c.prev=B.LINE_BITMAP_STYLE;e=c;this.lineBitmapStyle(e.buffer.o[e.oPos],e.buffer.o[e.oPos+1],e.buffer.b[e.bPos],e.buffer.b[e.bPos+1]);break;case 14:c.advance();c.prev=B.LINE_GRADIENT_STYLE;e=c;this.lineGradientStyle(e.buffer.o[e.oPos],e.buffer.ii[e.iiPos],e.buffer.ff[e.ffPos],e.buffer.ii[e.iiPos+1],e.buffer.o[e.oPos+1],e.buffer.o[e.oPos+2],e.buffer.o[e.oPos+3],e.buffer.o[e.oPos+
4]);break;case 15:c.advance();c.prev=B.LINE_STYLE;e=c;this.lineStyle(e.buffer.o[e.oPos],e.buffer.o[e.oPos+1],e.buffer.o[e.oPos+2],e.buffer.o[e.oPos+3],e.buffer.o[e.oPos+4],e.buffer.o[e.oPos+5],e.buffer.o[e.oPos+6],e.buffer.o[e.oPos+7]);break;case 16:c.advance();c.prev=B.LINE_TO;e=c;this.lineTo(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1]);break;case 17:c.advance();c.prev=B.MOVE_TO;e=c;this.moveTo(e.buffer.f[e.fPos],e.buffer.f[e.fPos+1]);break;case 18:c.advance(),c.prev=B.OVERRIDE_MATRIX,e=c,this.overrideMatrix(e.buffer.o[e.oPos])}}c.destroy();
return a},beginBitmapFill:function(a,c,d,b){this.types.push(B.BEGIN_BITMAP_FILL);this.o.push(a);this.o.push(c);this.b.push(d);this.b.push(b)},beginFill:function(a,c){this.types.push(B.BEGIN_FILL);this.i.push(a);this.f.push(c)},beginGradientFill:function(a,c,d,b,e,g,f,h){this.types.push(B.BEGIN_GRADIENT_FILL);this.o.push(a);this.ii.push(c);this.ff.push(d);this.ii.push(b);this.o.push(e);this.o.push(g);this.o.push(f);this.o.push(h)},clear:function(){this.types.splice(0,this.types.length);this.b.splice(0,
this.b.length);this.i.splice(0,this.i.length);this.f.splice(0,this.f.length);this.o.splice(0,this.o.length);this.ff.splice(0,this.ff.length);this.ii.splice(0,this.ii.length);this.ts.splice(0,this.ts.length)},cubicCurveTo:function(a,c,d,b,e,g){this.types.push(B.CUBIC_CURVE_TO);this.f.push(a);this.f.push(c);this.f.push(d);this.f.push(b);this.f.push(e);this.f.push(g)},curveTo:function(a,c,d,b){this.types.push(B.CURVE_TO);this.f.push(a);this.f.push(c);this.f.push(d);this.f.push(b)},drawCircle:function(a,
c,d){this.types.push(B.DRAW_CIRCLE);this.f.push(a);this.f.push(c);this.f.push(d)},drawEllipse:function(a,c,d,b){this.types.push(B.DRAW_ELLIPSE);this.f.push(a);this.f.push(c);this.f.push(d);this.f.push(b)},drawPath:function(a,c,d){this.types.push(B.DRAW_PATH);this.o.push(a);this.o.push(c);this.o.push(d)},drawRect:function(a,c,d,b){this.types.push(B.DRAW_RECT);this.f.push(a);this.f.push(c);this.f.push(d);this.f.push(b)},drawRoundRect:function(a,c,d,b,e,g){this.types.push(B.DRAW_ROUND_RECT);this.f.push(a);
this.f.push(c);this.f.push(d);this.f.push(b);this.f.push(e);this.f.push(g)},drawTiles:function(a,c,d,b,e){this.types.push(B.DRAW_TILES);this.ts.push(a);this.ff.push(c);this.b.push(d);this.i.push(b);this.i.push(e)},drawTriangles:function(a,c,d,b,e,g){this.types.push(B.DRAW_TRIANGLES);this.o.push(a);this.o.push(c);this.o.push(d);this.o.push(b);this.o.push(e);this.i.push(g)},endFill:function(){this.types.push(B.END_FILL)},lineBitmapStyle:function(a,c,d,b){this.types.push(B.LINE_BITMAP_STYLE);this.o.push(a);
this.o.push(c);this.b.push(d);this.b.push(b)},lineGradientStyle:function(a,c,d,b,e,g,f,h){this.types.push(B.LINE_GRADIENT_STYLE);this.o.push(a);this.ii.push(c);this.ff.push(d);this.ii.push(b);this.o.push(e);this.o.push(g);this.o.push(f);this.o.push(h)},lineStyle:function(a,c,d,b,e,g,f,h){this.types.push(B.LINE_STYLE);this.o.push(a);this.o.push(c);this.o.push(d);this.o.push(b);this.o.push(e);this.o.push(g);this.o.push(f);this.o.push(h)},lineTo:function(a,c){this.types.push(B.LINE_TO);this.f.push(a);
this.f.push(c)},moveTo:function(a,c){this.types.push(B.MOVE_TO);this.f.push(a);this.f.push(c)},overrideMatrix:function(a){this.types.push(B.OVERRIDE_MATRIX);this.o.push(a)},get_length:function(){return this.types.length},__class__:Ue,__properties__:{get_length:"get_length"}};var wd=function(a){this.buffer=a;this.bPos=this.iPos=this.fPos=this.oPos=this.ffPos=this.iiPos=this.tsPos=0;this.prev=B.UNKNOWN};k["openfl._internal.renderer.DrawCommandReader"]=wd;wd.__name__=!0;wd.prototype={advance:function(){switch(this.prev[1]){case 0:this.oPos+=
2;this.bPos+=2;break;case 1:this.iPos+=1;this.fPos+=1;break;case 2:this.oPos+=5;this.iiPos+=2;this.ffPos+=1;break;case 3:this.fPos+=6;break;case 4:this.fPos+=4;break;case 5:this.fPos+=3;break;case 6:this.fPos+=4;break;case 7:this.oPos+=3;break;case 8:this.fPos+=4;break;case 9:this.fPos+=6;break;case 10:this.tsPos+=1;this.ffPos+=1;this.bPos+=1;this.iPos+=2;break;case 11:this.oPos+=5;this.iPos+=1;break;case 13:this.oPos+=2;this.bPos+=2;break;case 14:this.oPos+=5;this.iiPos+=2;this.ffPos+=1;break;case 15:this.oPos+=
8;break;case 16:this.fPos+=2;break;case 17:this.fPos+=2;break;case 18:this.oPos+=1}},destroy:function(){this.buffer=null;this.reset()},reset:function(){this.bPos=this.iPos=this.fPos=this.oPos=this.ffPos=this.iiPos=this.tsPos=0},__class__:wd};var B=k["openfl._internal.renderer.DrawCommandType"]={__ename__:!0,__constructs__:"BEGIN_BITMAP_FILL BEGIN_FILL BEGIN_GRADIENT_FILL CUBIC_CURVE_TO CURVE_TO DRAW_CIRCLE DRAW_ELLIPSE DRAW_PATH DRAW_RECT DRAW_ROUND_RECT DRAW_TILES DRAW_TRIANGLES END_FILL LINE_BITMAP_STYLE LINE_GRADIENT_STYLE LINE_STYLE LINE_TO MOVE_TO OVERRIDE_MATRIX UNKNOWN".split(" ")};
B.BEGIN_BITMAP_FILL=["BEGIN_BITMAP_FILL",0];B.BEGIN_BITMAP_FILL.toString=r;B.BEGIN_BITMAP_FILL.__enum__=B;B.BEGIN_FILL=["BEGIN_FILL",1];B.BEGIN_FILL.toString=r;B.BEGIN_FILL.__enum__=B;B.BEGIN_GRADIENT_FILL=["BEGIN_GRADIENT_FILL",2];B.BEGIN_GRADIENT_FILL.toString=r;B.BEGIN_GRADIENT_FILL.__enum__=B;B.CUBIC_CURVE_TO=["CUBIC_CURVE_TO",3];B.CUBIC_CURVE_TO.toString=r;B.CUBIC_CURVE_TO.__enum__=B;B.CURVE_TO=["CURVE_TO",4];B.CURVE_TO.toString=r;B.CURVE_TO.__enum__=B;B.DRAW_CIRCLE=["DRAW_CIRCLE",5];B.DRAW_CIRCLE.toString=
r;B.DRAW_CIRCLE.__enum__=B;B.DRAW_ELLIPSE=["DRAW_ELLIPSE",6];B.DRAW_ELLIPSE.toString=r;B.DRAW_ELLIPSE.__enum__=B;B.DRAW_PATH=["DRAW_PATH",7];B.DRAW_PATH.toString=r;B.DRAW_PATH.__enum__=B;B.DRAW_RECT=["DRAW_RECT",8];B.DRAW_RECT.toString=r;B.DRAW_RECT.__enum__=B;B.DRAW_ROUND_RECT=["DRAW_ROUND_RECT",9];B.DRAW_ROUND_RECT.toString=r;B.DRAW_ROUND_RECT.__enum__=B;B.DRAW_TILES=["DRAW_TILES",10];B.DRAW_TILES.toString=r;B.DRAW_TILES.__enum__=B;B.DRAW_TRIANGLES=["DRAW_TRIANGLES",11];B.DRAW_TRIANGLES.toString=
r;B.DRAW_TRIANGLES.__enum__=B;B.END_FILL=["END_FILL",12];B.END_FILL.toString=r;B.END_FILL.__enum__=B;B.LINE_BITMAP_STYLE=["LINE_BITMAP_STYLE",13];B.LINE_BITMAP_STYLE.toString=r;B.LINE_BITMAP_STYLE.__enum__=B;B.LINE_GRADIENT_STYLE=["LINE_GRADIENT_STYLE",14];B.LINE_GRADIENT_STYLE.toString=r;B.LINE_GRADIENT_STYLE.__enum__=B;B.LINE_STYLE=["LINE_STYLE",15];B.LINE_STYLE.toString=r;B.LINE_STYLE.__enum__=B;B.LINE_TO=["LINE_TO",16];B.LINE_TO.toString=r;B.LINE_TO.__enum__=B;B.MOVE_TO=["MOVE_TO",17];B.MOVE_TO.toString=
r;B.MOVE_TO.__enum__=B;B.OVERRIDE_MATRIX=["OVERRIDE_MATRIX",18];B.OVERRIDE_MATRIX.toString=r;B.OVERRIDE_MATRIX.__enum__=B;B.UNKNOWN=["UNKNOWN",19];B.UNKNOWN.toString=r;B.UNKNOWN.__enum__=B;var ob=function(){};k["openfl._internal.renderer.GraphicsPaths"]=ob;ob.__name__=!0;ob.ellipse=function(a,c,d,b,e,g){var f=2*Math.PI/g,h=0;for(g+=1;h<g;){var k=h++;a.push(c+Math.sin(f*k)*b);a.push(d+Math.cos(f*k)*e)}};ob.cubicCurveTo=function(a,c,d,b,e,g,f){for(var h=0,k=0,l=0,m=0,r=0,y=a[a.length-2],t=a[a.length-
1],u=0,v=h=0,w=1;21>w;)v=w++/20,h=1-v,k=h*h,l=k*h,m=v*v,r=m*v,u=l*y+3*k*v*c+3*h*m*b+r*g,h=l*t+3*k*v*d+3*h*m*e+r*f,a.push(u),a.push(h)};ob.curveTo=function(a,c,d,b,e){for(var g=0,f=0,h=a[a.length-2],k=a[a.length-1],l=f=g=0,m=1;21>m;)l=m++/20,g=h+(c-h)*l,f=k+(d-k)*l,g+=(c+(b-c)*l-g)*l,f+=(d+(e-d)*l-f)*l,a.push(g),a.push(f)};ob.roundRectangle=function(a,c,d,b,e,g,f){b=c+b;e=d+e;var h=-g+g*ob.SIN45,k=-g+g*ob.TAN22,l=-f+f*ob.SIN45,m=-f+f*ob.TAN22;a.push(b);a.push(e-f);ob.curveTo(a,b,e+m,b+h,e+l);ob.curveTo(a,
b+k,e,b-g,e);a.push(c+g);a.push(e);ob.curveTo(a,c-k,e,c-h,e+l);ob.curveTo(a,c,e+m,c,e-f);a.push(c);a.push(d+f);ob.curveTo(a,c,d-m,c-h,d-l);ob.curveTo(a,c-k,d,c+g,d);a.push(b-g);a.push(d);ob.curveTo(a,b+k,d,b+h,d-l);ob.curveTo(a,b,d-m,b,d+f);a.push(b);a.push(e-f)};var be=function(){};k["openfl._internal.renderer.PolyK"]=be;be.__name__=!0;be.triangulate=function(a,c){var d=!0,b=c.length>>1;if(3>b)return[];var e;e=[];for(var g=0;g<b;){var f=g++;e.push(f)}for(var g=0,f=b,h=!1;3<f;){var k=e[g%f],l=e[(g+
1)%f],m=e[(g+2)%f],r=c[2*k],y=c[2*k+1],t=c[2*l],u=c[2*l+1],v=c[2*m],w=c[2*m+1],h=!1;if(be._convex(r,y,t,u,v,w,d))for(var h=!0,x=0;x<f;){var z=x++,z=e[z];if(z!=k&&z!=l&&z!=m&&be._PointInTriangle(c[2*z],c[2*z+1],r,y,t,u,v,w)){h=!1;break}}if(h)a.push(k),a.push(l),a.push(m),e.splice((g+1)%f,1),f--,g=0;else if(g++>3*f)if(d){a=[];d=[];for(e=0;e<b;)g=e++,d.push(g);e=d;g=0;f=b;d=!1}else return ab.trace("Warning: shape too complex to fill",{fileName:"PolyK.hx",lineNumber:104,className:"openfl._internal.renderer.PolyK",
methodName:"triangulate"}),[]}a.push(e[0]);a.push(e[1]);a.push(e[2]);return a};be._PointInTriangle=function(a,c,d,b,e,g,f,h){f=f-d|0;h=h-b|0;e=e-d|0;g=g-b|0;a=a-d|0;d=c-b|0;c=f*f+h*h;b=f*e+h*g;f=f*a+h*d;h=e*e+g*g;e=e*a+g*d;g=1/(c*h-b*b);h=(h*f-b*e)*g;f=(c*e-b*f)*g;return 0<=h&&0<=f&&1>h+f};be._convex=function(a,c,d,b,e,g,f){return 0<=(c-b)*(e-d)+(d-a)*(g-b)==f};var xd=function(){};k["openfl._internal.renderer.RenderSession"]=xd;xd.__name__=!0;xd.prototype={__class__:xd};var xe=function(){};k["openfl._internal.renderer.cairo.CairoBitmap"]=
xe;xe.__name__=!0;xe.render=function(a,c){if(a.__renderable&&!(0>=a.__worldAlpha)){var d=c.cairo;if(null!=a.bitmapData&&a.bitmapData.__isValid){null!=a.__mask&&c.maskManager.pushMask(a.__mask);var b=a.__worldTransform,e=a.get_scrollRect();c.roundPixels?(b=b.__toMatrix3(),b.tx=Math.round(b.tx),b.ty=Math.round(b.ty),d.set_matrix(b)):d.set_matrix(b.__toMatrix3());b=a.bitmapData.getSurface();null!=b&&(b=Id.createForSurface(b),Id.set_filter(b,a.smoothing?1:3),null!=e?(d.pushGroup(),d.set_source(b),d.newPath(),
d.rectangle(e.x,e.y,e.width,e.height),d.fill(),d.popGroupToSource()):d.set_source(b),1==a.__worldAlpha?d.paint():d.paintWithAlpha(a.__worldAlpha));null!=a.__mask&&c.maskManager.popMask()}}};var Ta=function(){};k["openfl._internal.renderer.cairo.CairoGraphics"]=Ta;Ta.__name__=!0;Ta.cairo=null;Ta.drawRoundRect=function(a,c,d,b,e,g){-1==g&&(g=e);e*=0.5;g*=0.5;e>d/2&&(e=d/2);g>b/2&&(g=b/2);d=a+d;b=c+b;var f=-e+e*Ta.SIN45,h=-e+e*Ta.TAN22,k=-g+g*Ta.SIN45,l=-g+g*Ta.TAN22;Ta.cairo.moveTo(d,b-g);Ta.quadraticCurveTo(d,
b+l,d+f,b+k);Ta.quadraticCurveTo(d+h,b,d-e,b);Ta.cairo.lineTo(a+e,b);Ta.quadraticCurveTo(a-h,b,a-f,b+k);Ta.quadraticCurveTo(a,b+l,a,b-g);Ta.cairo.lineTo(a,c+g);Ta.quadraticCurveTo(a,c-l,a-f,c-k);Ta.quadraticCurveTo(a-h,c,a+e,c);Ta.cairo.lineTo(d-e,c);Ta.quadraticCurveTo(d+h,c,d+f,c-k);Ta.quadraticCurveTo(d,c-l,d,c+g);Ta.cairo.lineTo(d,b-g)};Ta.quadraticCurveTo=function(a,c,d,b){var e=null;Ta.cairo.get_hasCurrentPoint()?e=Ta.cairo.get_currentPoint():(Ta.cairo.moveTo(a,c),e=new Pc(a,c));Ta.cairo.curveTo(e.x+
0.6666666666666666*(a-e.x),e.y+0.6666666666666666*(c-e.y),d+0.6666666666666666*(a-d),b+0.6666666666666666*(c-b),d,b)};Ta.renderMask=function(a,c){if(0!=a.__commands.get_length()){for(var d=c.cairo,b=new wd(a.__commands),e=0,g=a.__commands.types;e<g.length;){var f=g[e];++e;switch(f[1]){case 3:b.advance();b.prev=B.CUBIC_CURVE_TO;f=b;d.curveTo(f.buffer.f[f.fPos]-0,f.buffer.f[f.fPos+1]-0,f.buffer.f[f.fPos+3]-0,f.buffer.f[f.fPos+4]-0,f.buffer.f[f.fPos+5]-0,f.buffer.f[f.fPos+6]-0);break;case 4:b.advance();
b.prev=B.CURVE_TO;f=b;Ta.quadraticCurveTo(f.buffer.f[f.fPos]-0,f.buffer.f[f.fPos+1]-0,f.buffer.f[f.fPos+2]-0,f.buffer.f[f.fPos+3]-0);break;case 5:b.advance();b.prev=B.DRAW_CIRCLE;f=b;d.arc(f.buffer.f[f.fPos]-0,f.buffer.f[f.fPos+1]-0,f.buffer.f[f.fPos+2],0,2*Math.PI);break;case 6:var h;b.advance();b.prev=B.DRAW_ELLIPSE;h=b;var f=h.buffer.f[h.fPos],k=h.buffer.f[h.fPos+1],l=h.buffer.f[h.fPos+2],m=h.buffer.f[h.fPos+3],f=f-0,k=k-0;h=l/2*0.5522848;var r=m/2*0.5522848,y=f+l,t=k+m,l=f+l/2,m=k+m/2;d.moveTo(f,
m);d.curveTo(f,m-r,l-h,k,l,k);d.curveTo(l+h,k,y,m-r,y,m);d.curveTo(y,m+r,l+h,t,l,t);d.curveTo(l-h,t,f,m+r,f,m);break;case 8:b.advance();b.prev=B.DRAW_RECT;f=b;d.rectangle(f.buffer.f[f.fPos]-0,f.buffer.f[f.fPos+1]-0,f.buffer.f[f.fPos+2],f.buffer.f[f.fPos+3]);break;case 9:b.advance();b.prev=B.DRAW_ROUND_RECT;f=b;Ta.drawRoundRect(f.buffer.f[f.fPos]-0,f.buffer.f[f.fPos+1]-0,f.buffer.f[f.fPos+2],f.buffer.f[f.fPos+3],f.buffer.f[f.fPos+4],f.buffer.f[f.fPos+5]);break;case 16:b.advance();b.prev=B.LINE_TO;
f=b;d.lineTo(f.buffer.f[f.fPos]-0,f.buffer.f[f.fPos+1]-0);break;case 17:b.advance();b.prev=B.MOVE_TO;f=b;d.moveTo(f.buffer.f[f.fPos]-0,f.buffer.f[f.fPos+1]-0);break;default:b.advance(),b.prev=f}}b.destroy()}};var kd=function(a){this.renderSession=a};k["openfl._internal.renderer.cairo.CairoMaskManager"]=kd;kd.__name__=!0;kd.__super__=Yc;kd.prototype=l(Yc.prototype,{pushMask:function(a){var c=this.renderSession.cairo;c.save();var d=a.__getWorldTransform();c.set_matrix(d.__toMatrix3());c.newPath();a.__renderCairoMask(this.renderSession);
c.clip()},pushRect:function(a,c){var d=this.renderSession.cairo;d.save();d.set_matrix(new jf(c.a,c.c,c.b,c.d,c.tx,c.ty));d.newPath();d.rectangle(a.x,a.y,a.width,a.height);d.clip()},popMask:function(){this.renderSession.cairo.restore()},popRect:function(){this.renderSession.context.restore()},__class__:kd});var ye=function(a,c,d){Qb.call(this,a,c);this.cairo=d;this.renderSession=new xd;this.renderSession.cairo=d;this.renderSession.roundPixels=!0;this.renderSession.renderer=this;this.renderSession.maskManager=
new kd(this.renderSession)};k["openfl._internal.renderer.cairo.CairoRenderer"]=ye;ye.__name__=!0;ye.__super__=Qb;ye.prototype=l(Qb.prototype,{render:function(a){this.cairo.identityMatrix();a.__clearBeforeRender&&(this.cairo.setSourceRGB(a.__colorSplit[0],a.__colorSplit[1],a.__colorSplit[2]),this.cairo.paint());a.__renderCairo(this.renderSession)},__class__:ye});var qa=function(){};k["openfl._internal.renderer.cairo.CairoShape"]=qa;qa.__name__=!0;qa.render=function(a,c){};var Ld=function(){};k["openfl._internal.renderer.cairo.CairoTextField"]=
Ld;Ld.__name__=!0;Ld.render=function(a,c){};var Bf=function(){};k["openfl._internal.renderer.canvas.CanvasBitmap"]=Bf;Bf.__name__=!0;Bf.render=function(a,c){if(a.__renderable&&!(0>=a.__worldAlpha)){var d=c.context;if(null!=a.bitmapData&&a.bitmapData.__isValid){null!=a.__mask&&c.maskManager.pushMask(a.__mask);a.bitmapData.__sync();d.globalAlpha=a.__worldAlpha;var b=a.__worldTransform,e=a.get_scrollRect();c.roundPixels?d.setTransform(b.a,b.b,b.c,b.d,b.tx|0,b.ty|0):d.setTransform(b.a,b.b,b.c,b.d,b.tx,
b.ty);a.smoothing||(d.mozImageSmoothingEnabled=!1,d.msImageSmoothingEnabled=!1,d.imageSmoothingEnabled=!1);null==e?d.drawImage(a.bitmapData.image.get_src(),0,0):d.drawImage(a.bitmapData.image.get_src(),e.x,e.y,e.width,e.height,e.x,e.y,e.width,e.height);a.smoothing||(d.mozImageSmoothingEnabled=!0,d.msImageSmoothingEnabled=!0,d.imageSmoothingEnabled=!0);null!=a.__mask&&c.maskManager.popMask()}}};var v=function(){};k["openfl._internal.renderer.canvas.CanvasGraphics"]=v;v.__name__=!0;v.bitmapFill=null;
v.bitmapRepeat=null;v.bounds=null;v.graphics=null;v.hasFill=null;v.hasStroke=null;v.hitTesting=null;v.inversePendingMatrix=null;v.pendingMatrix=null;v.context=null;v.closePath=function(){null!=v.context.strokeStyle&&(v.context.closePath(),v.context.stroke(),v.context.beginPath())};v.createBitmapFill=function(a,c){a.__sync();return v.context.createPattern(a.image.get_src(),c?"repeat":"no-repeat")};v.createGradientPattern=function(a,c,d,b,e,g,f,h){g=null;switch(a[1]){case 0:null==e&&(e=new Xa);g=e.transformPoint(new Na(1638.4,
0));g=v.context.createRadialGradient(e.tx,e.ty,0,e.tx,e.ty,(g.x-e.tx)/2);break;case 1:e=null!=e?e:new Xa,g=e.transformPoint(new Na(-819.2,0)),e=e.transformPoint(new Na(819.2,0)),g=v.context.createLinearGradient(g.x,g.y,e.x,e.y)}e=0;for(a=c.length;e<a;){var k=e++,l=c[k];f=d[k];h=(l&16711680)>>>16;var m=(l&65280)>>>8,l=l&255,k=b[k]/255;0>k&&(k=0);1<k&&(k=1);g.addColorStop(k,"rgba("+h+", "+m+", "+l+", "+f+")")}return g};v.createTempPatternCanvas=function(a,c,d,b){var e=window.document.createElement("canvas"),
g=e.getContext("2d");e.width=d;e.height=b;g.fillStyle=g.createPattern(a.image.get_src(),c?"repeat":"no-repeat");g.beginPath();g.moveTo(0,0);g.lineTo(0,b);g.lineTo(d,b);g.lineTo(d,0);g.lineTo(0,0);g.closePath();v.hitTesting||g.fill();return e};v.drawRoundRect=function(a,c,d,b,e,g){-1==g&&(g=e);e*=0.5;g*=0.5;e>d/2&&(e=d/2);g>b/2&&(g=b/2);d=a+d;b=c+b;var f=-e+e*v.SIN45,h=-e+e*v.TAN22,k=-g+g*v.SIN45,l=-g+g*v.TAN22;v.context.moveTo(d,b-g);v.context.quadraticCurveTo(d,b+l,d+f,b+k);v.context.quadraticCurveTo(d+
h,b,d-e,b);v.context.lineTo(a+e,b);v.context.quadraticCurveTo(a-h,b,a-f,b+k);v.context.quadraticCurveTo(a,b+l,a,b-g);v.context.lineTo(a,c+g);v.context.quadraticCurveTo(a,c-l,a-f,c-k);v.context.quadraticCurveTo(a-h,c,a+e,c);v.context.lineTo(d-e,c);v.context.quadraticCurveTo(d+h,c,d+f,c-k);v.context.quadraticCurveTo(d,c-l,d,c+g);v.context.lineTo(d,b-g)};v.endFill=function(){v.context.beginPath();v.playCommands(v.fillCommands,!1);v.fillCommands.clear()};v.endStroke=function(){v.context.beginPath();v.playCommands(v.strokeCommands,
!0);v.context.closePath();v.strokeCommands.clear()};v.hitTest=function(a,c,d){if(!(0==a.__commands.get_length()||null==v.bounds||0>=v.bounds.width||0>=v.bounds.height)){v.hitTesting=!0;c-=v.bounds.x;d-=v.bounds.y;null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),a.__context=a.__canvas.getContext("2d"));v.context=a.__context;v.fillCommands.clear();v.strokeCommands.clear();v.hasFill=!1;v.hasStroke=!1;v.bitmapFill=null;v.bitmapRepeat=!1;v.context.beginPath();var b=new wd(a.__commands),
e=0;for(a=a.__commands.types;e<a.length;){var g=a[e];++e;switch(g[1]){case 3:b.advance();b.prev=B.CUBIC_CURVE_TO;g=b;v.fillCommands.cubicCurveTo(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+3],g.buffer.f[g.fPos+4],g.buffer.f[g.fPos+5],g.buffer.f[g.fPos+6]);v.strokeCommands.cubicCurveTo(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+3],g.buffer.f[g.fPos+4],g.buffer.f[g.fPos+5],g.buffer.f[g.fPos+6]);break;case 4:b.advance();b.prev=B.CURVE_TO;g=b;v.fillCommands.curveTo(g.buffer.f[g.fPos],
g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3]);v.strokeCommands.curveTo(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3]);break;case 16:b.advance();b.prev=B.LINE_TO;g=b;v.fillCommands.lineTo(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1]);v.strokeCommands.lineTo(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1]);break;case 17:b.advance();b.prev=B.MOVE_TO;g=b;v.fillCommands.moveTo(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1]);v.strokeCommands.moveTo(g.buffer.f[g.fPos],g.buffer.f[g.fPos+
1]);break;case 14:b.advance();b.prev=B.LINE_GRADIENT_STYLE;g=b;v.strokeCommands.lineGradientStyle(g.buffer.o[g.oPos],g.buffer.ii[g.iiPos],g.buffer.ff[g.ffPos],g.buffer.ii[g.iiPos+1],g.buffer.o[g.oPos+1],g.buffer.o[g.oPos+2],g.buffer.o[g.oPos+3],g.buffer.o[g.oPos+4]);break;case 13:b.advance();b.prev=B.LINE_BITMAP_STYLE;g=b;v.strokeCommands.lineBitmapStyle(g.buffer.o[g.oPos],g.buffer.o[g.oPos+1],g.buffer.b[g.bPos],g.buffer.b[g.bPos+1]);break;case 15:b.advance();b.prev=B.LINE_STYLE;g=b;v.strokeCommands.lineStyle(g.buffer.o[g.oPos],
g.buffer.o[g.oPos+1],1,g.buffer.o[g.oPos+3],g.buffer.o[g.oPos+4],g.buffer.o[g.oPos+5],g.buffer.o[g.oPos+6],g.buffer.o[g.oPos+7]);break;case 12:b.advance();b.prev=B.END_FILL;b;v.endFill();v.endStroke();if(v.hasFill&&v.context.isPointInPath(c,d)||v.hasStroke&&v.context.isPointInStroke(c,d))return b.destroy(),!0;v.hasFill=!1;v.bitmapFill=null;break;case 0:case 1:case 2:v.endFill();v.endStroke();if(v.hasFill&&v.context.isPointInPath(c,d)||v.hasStroke&&v.context.isPointInStroke(c,d))return b.destroy(),
!0;g==B.BEGIN_BITMAP_FILL?(b.advance(),b.prev=B.BEGIN_BITMAP_FILL,g=b,v.fillCommands.beginBitmapFill(g.buffer.o[g.oPos],g.buffer.o[g.oPos+1],g.buffer.b[g.bPos],g.buffer.b[g.bPos+1]),v.strokeCommands.beginBitmapFill(g.buffer.o[g.oPos],g.buffer.o[g.oPos+1],g.buffer.b[g.bPos],g.buffer.b[g.bPos+1])):g==B.BEGIN_GRADIENT_FILL?(b.advance(),b.prev=B.BEGIN_GRADIENT_FILL,g=b,v.fillCommands.beginGradientFill(g.buffer.o[g.oPos],g.buffer.ii[g.iiPos],g.buffer.ff[g.ffPos],g.buffer.ii[g.iiPos+1],g.buffer.o[g.oPos+
1],g.buffer.o[g.oPos+2],g.buffer.o[g.oPos+3],g.buffer.o[g.oPos+4]),v.strokeCommands.beginGradientFill(g.buffer.o[g.oPos],g.buffer.ii[g.iiPos],g.buffer.ff[g.ffPos],g.buffer.ii[g.iiPos+1],g.buffer.o[g.oPos+1],g.buffer.o[g.oPos+2],g.buffer.o[g.oPos+3],g.buffer.o[g.oPos+4])):(b.advance(),b.prev=B.BEGIN_FILL,g=b,v.fillCommands.beginFill(g.buffer.i[g.iPos],1),v.strokeCommands.beginFill(g.buffer.i[g.iPos],1));break;case 5:b.advance();b.prev=B.DRAW_CIRCLE;g=b;v.fillCommands.drawCircle(g.buffer.f[g.fPos],
g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+2]);v.strokeCommands.drawCircle(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+2]);break;case 6:b.advance();b.prev=B.DRAW_ELLIPSE;g=b;v.fillCommands.drawEllipse(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3]);v.strokeCommands.drawEllipse(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3]);break;case 8:b.advance();b.prev=B.DRAW_RECT;g=b;v.fillCommands.drawRect(g.buffer.f[g.fPos],g.buffer.f[g.fPos+
1],g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3]);v.strokeCommands.drawRect(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3]);break;case 9:b.advance();b.prev=B.DRAW_ROUND_RECT;g=b;v.fillCommands.drawRoundRect(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3],g.buffer.f[g.fPos+4],g.buffer.f[g.fPos+5]);v.strokeCommands.drawRoundRect(g.buffer.f[g.fPos],g.buffer.f[g.fPos+1],g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3],g.buffer.f[g.fPos+4],g.buffer.f[g.fPos+
5]);break;default:b.advance(),b.prev=g}}0<v.fillCommands.get_length()&&v.endFill();0<v.strokeCommands.get_length()&&v.endStroke();b.destroy();if(v.hasFill&&v.context.isPointInPath(c,d)||v.hasStroke&&v.context.isPointInStroke(c,d))return!0}return!1};v.normalizeUVT=function(a,c){null==c&&(c=!1);for(var d=-Infinity,b=-Infinity,e=a.length,g=1,f=e+1;g<f;)b=g++,c&&0==b%3||(b=a.data[b-1],d<b&&(d=b));g=new Kd;g.data=[];g.length=0;g.fixed=!1;f=1;for(e+=1;f<e;)if(b=f++,!c||0!=b%3){if(!g.fixed){g.length++;if(g.data.length<
g.length){var h;h=Array(g.data.length+10);dc.blit(g.data,0,h,0,g.data.length);g.data=h}g.data[g.length-1]=a.data[b-1]/d}g.length}return{max:d,uvt:g}};v.playCommands=function(a,c){null==c&&(c=!1);v.bounds=v.graphics.__bounds;for(var d=v.bounds.x,b=v.bounds.y,e=0,g=0,f=!1,h=0,k=0,l=new wd(a),m=0,r=a.types;m<r.length;){var y=r[m];++m;switch(y[1]){case 3:l.advance();l.prev=B.CUBIC_CURVE_TO;y=l;v.context.bezierCurveTo(y.buffer.f[y.fPos]-d,y.buffer.f[y.fPos+1]-b,y.buffer.f[y.fPos+3]-d,y.buffer.f[y.fPos+
4]-b,y.buffer.f[y.fPos+5]-d,y.buffer.f[y.fPos+6]-b);break;case 4:l.advance();l.prev=B.CURVE_TO;y=l;v.context.quadraticCurveTo(y.buffer.f[y.fPos]-d,y.buffer.f[y.fPos+1]-b,y.buffer.f[y.fPos+2]-d,y.buffer.f[y.fPos+3]-b);break;case 5:l.advance();l.prev=B.DRAW_CIRCLE;y=l;v.context.moveTo(y.buffer.f[y.fPos]-d+y.buffer.f[y.fPos+2],y.buffer.f[y.fPos+1]-b);v.context.arc(y.buffer.f[y.fPos]-d,y.buffer.f[y.fPos+1]-b,y.buffer.f[y.fPos+2],0,2*Math.PI,!0);break;case 6:var t;l.advance();l.prev=B.DRAW_ELLIPSE;t=l;
var y=t.buffer.f[t.fPos],u=t.buffer.f[t.fPos+1],w=t.buffer.f[t.fPos+2],x=t.buffer.f[t.fPos+3],y=y-d,u=u-b;t=w/2*0.5522848;var z=x/2*0.5522848,C=y+w,H=u+x,w=y+w/2,x=u+x/2;v.context.moveTo(y,x);v.context.bezierCurveTo(y,x-z,w-t,u,w,u);v.context.bezierCurveTo(w+t,u,C,x-z,C,x);v.context.bezierCurveTo(C,x+z,w+t,H,w,H);v.context.bezierCurveTo(w-t,H,y,x+z,y,x);break;case 9:l.advance();l.prev=B.DRAW_ROUND_RECT;y=l;v.drawRoundRect(y.buffer.f[y.fPos]-d,y.buffer.f[y.fPos+1]-b,y.buffer.f[y.fPos+2],y.buffer.f[y.fPos+
3],y.buffer.f[y.fPos+4],y.buffer.f[y.fPos+5]);break;case 16:l.advance();l.prev=B.LINE_TO;g=l;v.context.lineTo(g.buffer.f[g.fPos]-d,g.buffer.f[g.fPos+1]-b);e=g.buffer.f[g.fPos];g=g.buffer.f[g.fPos+1];break;case 17:l.advance();l.prev=B.MOVE_TO;k=l;v.context.moveTo(k.buffer.f[k.fPos]-d,k.buffer.f[k.fPos+1]-b);e=k.buffer.f[k.fPos];g=k.buffer.f[k.fPos+1];f=!0;h=k.buffer.f[k.fPos];k=k.buffer.f[k.fPos+1];break;case 15:l.advance();l.prev=B.LINE_STYLE;y=l;c&&v.hasStroke&&(v.context.closePath(),v.hitTesting||
v.context.stroke(),v.context.beginPath());v.context.moveTo(e-d,g-b);if(null==y.buffer.o[y.oPos])v.hasStroke=!1;else{v.context.lineWidth=0<y.buffer.o[y.oPos]?y.buffer.o[y.oPos]:1;v.context.lineJoin=null==y.buffer.o[y.oPos+6]?"round":X.string(y.buffer.o[y.oPos+6]).toLowerCase();if(null==y.buffer.o[y.oPos+5])v.context.lineCap="round";else switch(y.buffer.o[y.oPos+5][1]){case 0:v.context.lineCap="butt";break;default:v.context.lineCap=X.string(y.buffer.o[y.oPos+5]).toLowerCase()}v.context.miterLimit=null==
y.buffer.o[y.oPos+7]?3:y.buffer.o[y.oPos+7];1==y.buffer.o[y.oPos+2]||null==y.buffer.o[y.oPos+2]?v.context.strokeStyle=null==y.buffer.o[y.oPos+1]?"#000000":"#"+na.hex(y.buffer.o[y.oPos+1]&16777215,6):(u=(y.buffer.o[y.oPos+1]&16711680)>>>16,t=(y.buffer.o[y.oPos+1]&65280)>>>8,z=y.buffer.o[y.oPos+1]&255,v.context.strokeStyle=null==y.buffer.o[y.oPos+1]?"#000000":"rgba("+u+", "+t+", "+z+", "+y.buffer.o[y.oPos+2]+")");v.hasStroke=!0}break;case 14:l.advance();l.prev=B.LINE_GRADIENT_STYLE;y=l;c&&v.hasStroke&&
v.closePath();v.context.moveTo(e-d,g-b);v.context.strokeStyle=v.createGradientPattern(y.buffer.o[y.oPos],y.buffer.ii[y.iiPos],y.buffer.ff[y.ffPos],y.buffer.ii[y.iiPos+1],y.buffer.o[y.oPos+1],y.buffer.o[y.oPos+2],y.buffer.o[y.oPos+3],y.buffer.o[y.oPos+4]);v.hasStroke=!0;break;case 13:l.advance();l.prev=B.LINE_BITMAP_STYLE;y=l;c&&v.hasStroke&&v.closePath();v.context.moveTo(e-d,g-b);v.context.strokeStyle=v.createBitmapFill(y.buffer.o[y.oPos],y.buffer.b[y.bPos]);v.hasStroke=!0;break;case 0:l.advance();
l.prev=B.BEGIN_BITMAP_FILL;y=l;v.context.fillStyle=v.createBitmapFill(y.buffer.o[y.oPos],!0);v.hasFill=!0;null!=y.buffer.o[y.oPos+1]?(v.pendingMatrix=y.buffer.o[y.oPos+1],v.inversePendingMatrix=y.buffer.o[y.oPos+1].clone(),v.inversePendingMatrix.invert()):(v.pendingMatrix=null,v.inversePendingMatrix=null);break;case 1:l.advance();l.prev=B.BEGIN_FILL;y=l;0.005>y.buffer.f[y.fPos]?v.hasFill=!1:(v.context.fillStyle=1==y.buffer.f[y.fPos]?"#"+na.hex(y.buffer.i[y.iPos],6):"rgba("+((y.buffer.i[y.iPos]&16711680)>>>
16)+", "+((y.buffer.i[y.iPos]&65280)>>>8)+", "+(y.buffer.i[y.iPos]&255)+", "+y.buffer.f[y.fPos]+")",v.bitmapFill=null,v.hasFill=!0);break;case 2:l.advance();l.prev=B.BEGIN_GRADIENT_FILL;y=l;v.context.fillStyle=v.createGradientPattern(y.buffer.o[y.oPos],y.buffer.ii[y.iiPos],y.buffer.ff[y.ffPos],y.buffer.ii[y.iiPos+1],y.buffer.o[y.oPos+1],y.buffer.o[y.oPos+2],y.buffer.o[y.oPos+3],y.buffer.o[y.oPos+4]);v.bitmapFill=null;v.hasFill=!0;break;case 8:l.advance();l.prev=B.DRAW_RECT;y=l;u=!1;null!=v.bitmapFill&&
(H=C=w=t=0,z=!0,null!=v.pendingMatrix?0!=v.pendingMatrix.b||0!=v.pendingMatrix.c?z=!1:(C=v.inversePendingMatrix.transformPoint(new Na(y.buffer.f[y.fPos],y.buffer.f[y.fPos+1])),w=v.inversePendingMatrix.transformPoint(new Na(y.buffer.f[y.fPos]+y.buffer.f[y.fPos+2],y.buffer.f[y.fPos+1]+y.buffer.f[y.fPos+3])),t=C.y,H=C.x,C=w.y,w=w.x):(t=y.buffer.f[y.fPos+1],H=y.buffer.f[y.fPos],C=y.buffer.f[y.fPos+1]+y.buffer.f[y.fPos+3],w=y.buffer.f[y.fPos]+y.buffer.f[y.fPos+2]),z&&0<=t&&0<=H&&w<=v.bitmapFill.width&&
C<=v.bitmapFill.height&&(u=!0,v.hitTesting||v.context.drawImage(v.bitmapFill.image.get_src(),H,t,w-H,C-t,y.buffer.f[y.fPos]-d,y.buffer.f[y.fPos+1]-b,y.buffer.f[y.fPos+2],y.buffer.f[y.fPos+3])));u||v.context.rect(y.buffer.f[y.fPos]-d,y.buffer.f[y.fPos+1]-b,y.buffer.f[y.fPos+2],y.buffer.f[y.fPos+3]);break;default:l.advance(),l.prev=y}}l.destroy();c&&v.hasStroke&&(v.hasFill&&f?v.context.lineTo(h-d,k-b):f&&e==h&&g==k&&v.context.closePath(),v.hitTesting||v.context.stroke());c||!v.hasFill&&null==v.bitmapFill||
(v.context.translate(-v.bounds.x,-v.bounds.y),null!=v.pendingMatrix?(v.context.transform(v.pendingMatrix.a,v.pendingMatrix.b,v.pendingMatrix.c,v.pendingMatrix.d,v.pendingMatrix.tx,v.pendingMatrix.ty),v.hitTesting||v.context.fill(),v.context.transform(v.inversePendingMatrix.a,v.inversePendingMatrix.b,v.inversePendingMatrix.c,v.inversePendingMatrix.d,v.inversePendingMatrix.tx,v.inversePendingMatrix.ty)):v.hitTesting||v.context.fill(),v.context.translate(v.bounds.x,v.bounds.y),v.context.closePath())};
v.render=function(a,c){if(a.__dirty){v.hitTesting=!1;v.graphics=a;v.bounds=a.__bounds;if(!a.__visible||0==a.__commands.get_length()||null==v.bounds||0>=v.bounds.width||0>=v.bounds.height)a.__canvas=null,a.__context=null,a.__bitmap=null;else{null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),a.__context=a.__canvas.getContext("2d"));v.context=a.__context;a.__canvas.width=Math.ceil(v.bounds.width);a.__canvas.height=Math.ceil(v.bounds.height);v.fillCommands.clear();v.strokeCommands.clear();
v.hasFill=!1;v.hasStroke=!1;v.bitmapFill=null;v.bitmapRepeat=!1;var d=new wd(a.__commands),b=0,e=a.__commands.types;try{for(;b<e.length;){var g=e[b];++b;switch(g[1]){case 3:var f;d.advance();d.prev=B.CUBIC_CURVE_TO;f=d;v.fillCommands.cubicCurveTo(f.buffer.f[f.fPos],f.buffer.f[f.fPos+1],f.buffer.f[f.fPos+3],f.buffer.f[f.fPos+4],f.buffer.f[f.fPos+5],f.buffer.f[f.fPos+6]);v.strokeCommands.cubicCurveTo(f.buffer.f[f.fPos],f.buffer.f[f.fPos+1],f.buffer.f[f.fPos+3],f.buffer.f[f.fPos+4],f.buffer.f[f.fPos+
5],f.buffer.f[f.fPos+6]);break;case 4:var h;d.advance();d.prev=B.CURVE_TO;h=d;v.fillCommands.curveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);v.strokeCommands.curveTo(h.buffer.f[h.fPos],h.buffer.f[h.fPos+1],h.buffer.f[h.fPos+2],h.buffer.f[h.fPos+3]);break;case 16:var k;d.advance();d.prev=B.LINE_TO;k=d;v.fillCommands.lineTo(k.buffer.f[k.fPos],k.buffer.f[k.fPos+1]);v.strokeCommands.lineTo(k.buffer.f[k.fPos],k.buffer.f[k.fPos+1]);break;case 17:var l;d.advance();
d.prev=B.MOVE_TO;l=d;v.fillCommands.moveTo(l.buffer.f[l.fPos],l.buffer.f[l.fPos+1]);v.strokeCommands.moveTo(l.buffer.f[l.fPos],l.buffer.f[l.fPos+1]);break;case 12:d.advance();d.prev=B.END_FILL;d;v.endFill();v.endStroke();v.hasFill=!1;v.bitmapFill=null;break;case 15:var m;d.advance();d.prev=B.LINE_STYLE;m=d;v.strokeCommands.lineStyle(m.buffer.o[m.oPos],m.buffer.o[m.oPos+1],m.buffer.o[m.oPos+2],m.buffer.o[m.oPos+3],m.buffer.o[m.oPos+4],m.buffer.o[m.oPos+5],m.buffer.o[m.oPos+6],m.buffer.o[m.oPos+7]);
break;case 14:var r;d.advance();d.prev=B.LINE_GRADIENT_STYLE;r=d;v.strokeCommands.lineGradientStyle(r.buffer.o[r.oPos],r.buffer.ii[r.iiPos],r.buffer.ff[r.ffPos],r.buffer.ii[r.iiPos+1],r.buffer.o[r.oPos+1],r.buffer.o[r.oPos+2],r.buffer.o[r.oPos+3],r.buffer.o[r.oPos+4]);break;case 13:var t;d.advance();d.prev=B.LINE_BITMAP_STYLE;t=d;v.strokeCommands.lineBitmapStyle(t.buffer.o[t.oPos],t.buffer.o[t.oPos+1],t.buffer.b[t.bPos],t.buffer.b[t.bPos+1]);break;case 0:case 1:case 2:v.endFill();v.endStroke();if(g==
B.BEGIN_BITMAP_FILL){var u;d.advance();d.prev=B.BEGIN_BITMAP_FILL;u=d;v.fillCommands.beginBitmapFill(u.buffer.o[u.oPos],u.buffer.o[u.oPos+1],u.buffer.b[u.bPos],u.buffer.b[u.bPos+1]);v.strokeCommands.beginBitmapFill(u.buffer.o[u.oPos],u.buffer.o[u.oPos+1],u.buffer.b[u.bPos],u.buffer.b[u.bPos+1])}else if(g==B.BEGIN_GRADIENT_FILL){var w;d.advance();d.prev=B.BEGIN_GRADIENT_FILL;w=d;v.fillCommands.beginGradientFill(w.buffer.o[w.oPos],w.buffer.ii[w.iiPos],w.buffer.ff[w.ffPos],w.buffer.ii[w.iiPos+1],w.buffer.o[w.oPos+
1],w.buffer.o[w.oPos+2],w.buffer.o[w.oPos+3],w.buffer.o[w.oPos+4]);v.strokeCommands.beginGradientFill(w.buffer.o[w.oPos],w.buffer.ii[w.iiPos],w.buffer.ff[w.ffPos],w.buffer.ii[w.iiPos+1],w.buffer.o[w.oPos+1],w.buffer.o[w.oPos+2],w.buffer.o[w.oPos+3],w.buffer.o[w.oPos+4])}else{var x;d.advance();d.prev=B.BEGIN_FILL;x=d;v.fillCommands.beginFill(x.buffer.i[x.iPos],x.buffer.f[x.fPos]);v.strokeCommands.beginFill(x.buffer.i[x.iPos],x.buffer.f[x.fPos])}break;case 5:var z;d.advance();d.prev=B.DRAW_CIRCLE;z=
d;v.fillCommands.drawCircle(z.buffer.f[z.fPos],z.buffer.f[z.fPos+1],z.buffer.f[z.fPos+2]);v.strokeCommands.drawCircle(z.buffer.f[z.fPos],z.buffer.f[z.fPos+1],z.buffer.f[z.fPos+2]);break;case 6:var C;d.advance();d.prev=B.DRAW_ELLIPSE;C=d;v.fillCommands.drawEllipse(C.buffer.f[C.fPos],C.buffer.f[C.fPos+1],C.buffer.f[C.fPos+2],C.buffer.f[C.fPos+3]);v.strokeCommands.drawEllipse(C.buffer.f[C.fPos],C.buffer.f[C.fPos+1],C.buffer.f[C.fPos+2],C.buffer.f[C.fPos+3]);break;case 8:var E;d.advance();d.prev=B.DRAW_RECT;
E=d;v.fillCommands.drawRect(E.buffer.f[E.fPos],E.buffer.f[E.fPos+1],E.buffer.f[E.fPos+2],E.buffer.f[E.fPos+3]);v.strokeCommands.drawRect(E.buffer.f[E.fPos],E.buffer.f[E.fPos+1],E.buffer.f[E.fPos+2],E.buffer.f[E.fPos+3]);break;case 9:var H;d.advance();d.prev=B.DRAW_ROUND_RECT;H=d;v.fillCommands.drawRoundRect(H.buffer.f[H.fPos],H.buffer.f[H.fPos+1],H.buffer.f[H.fPos+2],H.buffer.f[H.fPos+3],H.buffer.f[H.fPos+4],H.buffer.f[H.fPos+5]);v.strokeCommands.drawRoundRect(H.buffer.f[H.fPos],H.buffer.f[H.fPos+
1],H.buffer.f[H.fPos+2],H.buffer.f[H.fPos+3],H.buffer.f[H.fPos+4],H.buffer.f[H.fPos+5]);break;case 11:v.endFill();v.endStroke();var U;d.advance();d.prev=B.DRAW_TRIANGLES;U=d;var T=U.buffer.o[U.oPos],pa=U.buffer.o[U.oPos+1],da=U.buffer.o[U.oPos+2],wa=null,vb=null==v.bitmapFill;if(vb&&null!=da)throw"__break__";if(!vb){if(null==da){var wb;wb=new Kd;wb.data=[];wb.length=0;wb.fixed=!1;for(var da=wb,Sa=0,Rc=T.length/2|0;Sa<Rc;){var zc=Sa++;if(!da.fixed){da.length++;if(da.data.length<da.length){var A;A=
Array(da.data.length+10);dc.blit(da.data,0,A,0,da.data.length);da.data=A}da.data[da.length-1]=T.data[2*zc]/v.bitmapFill.width}da.length;if(!da.fixed){da.length++;if(da.data.length<da.length){var Ve;Ve=Array(da.data.length+10);dc.blit(da.data,0,Ve,0,da.data.length);da.data=Ve}da.data[da.length-1]=T.data[2*zc+1]/v.bitmapFill.height}da.length}}var Z=v.normalizeUVT(da,da.length!=T.length),ha=Z.max,da=Z.uvt,wa=1<ha?v.createTempPatternCanvas(v.bitmapFill,v.bitmapRepeat,v.bounds.width|0,v.bounds.height|
0):v.createTempPatternCanvas(v.bitmapFill,v.bitmapRepeat,v.bitmapFill.width,v.bitmapFill.height)}for(var Sa=0,P=pa.length,D,Fc,F,O,ja,G,Ia,I,N,Ba,K,L,M,ca,Q,fa,R,S,aa,qb,ba,V,W,X,Y,Qa,$,ud;Sa<P;){D=Sa;Fc=Sa+1;F=Sa+2;O=2*pa.data[D];ja=2*pa.data[D]+1;G=2*pa.data[Fc];Ia=2*pa.data[Fc]+1;I=2*pa.data[F];N=2*pa.data[F]+1;Ba=T.data[O];K=T.data[ja];L=T.data[G];M=T.data[Ia];ca=T.data[I];Q=T.data[N];switch(U.buffer.o[U.oPos+3][1]){case 2:if(!(0>(L-Ba)*(Q-K)-(M-K)*(ca-Ba))){Sa+=3;continue}break;case 0:if(0>(L-
Ba)*(Q-K)-(M-K)*(ca-Ba)){Sa+=3;continue}}vb?(v.context.beginPath(),v.context.moveTo(Ba,K),v.context.lineTo(L,M),v.context.lineTo(ca,Q),v.context.closePath(),v.hitTesting||v.context.fill()):(v.context.save(),v.context.beginPath(),v.context.moveTo(Ba,K),v.context.lineTo(L,M),v.context.lineTo(ca,Q),v.context.closePath(),v.context.clip(),fa=da.data[O]*wa.width,S=da.data[G]*wa.width,qb=da.data[I]*wa.width,R=da.data[ja]*wa.height,aa=da.data[Ia]*wa.height,ba=da.data[N]*wa.height,V=fa*(ba-aa)-S*ba+qb*aa+
(S-qb)*R,0!=V&&(W=-(R*(ca-L)-aa*ca+ba*L+(aa-ba)*Ba)/V,X=(aa*Q+R*(M-Q)-ba*M+(ba-aa)*K)/V,Y=(fa*(ca-L)-S*ca+qb*L+(S-qb)*Ba)/V,Qa=-(S*Q+fa*(M-Q)-qb*M+(qb-S)*K)/V,$=(fa*(ba*L-aa*ca)+R*(S*ca-qb*L)+(qb*aa-S*ba)*Ba)/V,ud=(fa*(ba*M-aa*Q)+R*(S*Q-qb*M)+(qb*aa-S*ba)*K)/V,v.context.transform(W,X,Y,Qa,$,ud),v.context.drawImage(wa,0,0),v.context.restore()));Sa+=3}break;case 10:var J;d.advance();d.prev=B.DRAW_TILES;J=d;var ea=0<(J.buffer.i[J.iPos]&1),Gc=v.bounds.x,Ca=v.bounds.y,ia=0<(J.buffer.i[J.iPos]&2),ka=0<
(J.buffer.i[J.iPos]&16),ma=0<(J.buffer.i[J.iPos]&4),na=0<(J.buffer.i[J.iPos]&8),la=0<(J.buffer.i[J.iPos]&32),qa=0<(J.buffer.i[J.iPos]&64),ra=0<(J.buffer.i[J.iPos]&65536);ka&&(ia=ea=!1);var sa=Sa=wa=0,Ga=0,Ea=3;la&&(Ea=qa?8:6);ea&&(wa=Ea,Ea++);ia&&(Sa=Ea,Ea++);ka&&(Ga=Ea,Ea+=4);ma&&(Ea+=3);na&&(sa=Ea,Ea++);var ua=J.buffer.ff[J.ffPos].length;0<=J.buffer.i[J.iPos+1]&&ua>J.buffer.i[J.iPos+1]&&(ua=J.buffer.i[J.iPos+1]);var ga=0,oa=null,va=null,ya=-1,za;J.buffer.ts[J.tsPos].__bitmap.__sync();za=J.buffer.ts[J.tsPos].__bitmap.image.get_src();
ra&&(v.context.globalCompositeOperation="lighter");for(;ga<ua;){var xa;xa=la?-1:J.buffer.ff[J.ffPos][ga+2]|0;la||xa==ya?la&&(oa=J.buffer.ts[J.tsPos].__rectTile,oa.setTo(J.buffer.ff[J.ffPos][ga+2],J.buffer.ff[J.ffPos][ga+3],J.buffer.ff[J.ffPos][ga+4],J.buffer.ff[J.ffPos][ga+5]),va=J.buffer.ts[J.tsPos].__point,qa?(va.x=J.buffer.ff[J.ffPos][ga+6],va.y=J.buffer.ff[J.ffPos][ga+7]):(va.x=0,va.y=0)):(oa=J.buffer.ts[J.tsPos].__tileRects[xa],va=J.buffer.ts[J.tsPos].__centerPoints[xa],ya=xa);if(null!=oa&&0<
oa.width&&0<oa.height&&null!=va){v.context.save();v.context.translate(J.buffer.ff[J.ffPos][ga]-Gc,J.buffer.ff[J.ffPos][ga+1]-Ca);ia&&v.context.rotate(J.buffer.ff[J.ffPos][ga+Sa]);var Aa=1;ea&&(Aa=J.buffer.ff[J.ffPos][ga+wa]);ka&&v.context.transform(J.buffer.ff[J.ffPos][ga+Ga],J.buffer.ff[J.ffPos][ga+Ga+1],J.buffer.ff[J.ffPos][ga+Ga+2],J.buffer.ff[J.ffPos][ga+Ga+3],0,0);na&&(v.context.globalAlpha=J.buffer.ff[J.ffPos][ga+sa]);v.context.drawImage(za,oa.x,oa.y,oa.width,oa.height,-va.x*Aa,-va.y*Aa,oa.width*
Aa,oa.height*Aa);v.context.restore()}ga+=Ea}ra&&(v.context.globalCompositeOperation="source-over");break;default:d.advance(),d.prev=g}}}catch(Da){if("__break__"!=Da)throw Da;}0<v.fillCommands.get_length()&&v.endFill();0<v.strokeCommands.get_length()&&v.endStroke();d.destroy();a.__bitmap=fb.fromCanvas(a.__canvas)}a.set___dirty(!1)}};v.renderMask=function(a,c){if(0!=a.__commands.get_length()){v.context=c.context;for(var d=new wd(a.__commands),b=0,e=a.__commands.types;b<e.length;){var g=e[b];++b;switch(g[1]){case 3:d.advance();
d.prev=B.CUBIC_CURVE_TO;g=d;v.context.bezierCurveTo(g.buffer.f[g.fPos]-0,g.buffer.f[g.fPos+1]-0,g.buffer.f[g.fPos+3]-0,g.buffer.f[g.fPos+4]-0,g.buffer.f[g.fPos+5]-0,g.buffer.f[g.fPos+6]-0);break;case 4:d.advance();d.prev=B.CURVE_TO;g=d;v.context.quadraticCurveTo(g.buffer.f[g.fPos]-0,g.buffer.f[g.fPos+1]-0,g.buffer.f[g.fPos+2]-0,g.buffer.f[g.fPos+3]-0);break;case 5:d.advance();d.prev=B.DRAW_CIRCLE;g=d;v.context.arc(g.buffer.f[g.fPos]-0,g.buffer.f[g.fPos+1]-0,g.buffer.f[g.fPos+2],0,2*Math.PI,!0);break;
case 6:var f;d.advance();d.prev=B.DRAW_ELLIPSE;f=d;var g=f.buffer.f[f.fPos],h=f.buffer.f[f.fPos+1],k=f.buffer.f[f.fPos+2],l=f.buffer.f[f.fPos+3],g=g-0,h=h-0;f=k/2*0.5522848;var m=l/2*0.5522848,r=g+k,t=h+l,k=g+k/2,l=h+l/2;v.context.moveTo(g,l);v.context.bezierCurveTo(g,l-m,k-f,h,k,h);v.context.bezierCurveTo(k+f,h,r,l-m,r,l);v.context.bezierCurveTo(r,l+m,k+f,t,k,t);v.context.bezierCurveTo(k-f,t,g,l+m,g,l);break;case 8:d.advance();d.prev=B.DRAW_RECT;g=d;v.context.rect(g.buffer.f[g.fPos]-0,g.buffer.f[g.fPos+
1]-0,g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3]);break;case 9:d.advance();d.prev=B.DRAW_ROUND_RECT;g=d;v.drawRoundRect(g.buffer.f[g.fPos]-0,g.buffer.f[g.fPos+1]-0,g.buffer.f[g.fPos+2],g.buffer.f[g.fPos+3],g.buffer.f[g.fPos+4],g.buffer.f[g.fPos+5]);break;case 16:d.advance();d.prev=B.LINE_TO;g=d;v.context.lineTo(g.buffer.f[g.fPos]-0,g.buffer.f[g.fPos+1]-0);break;case 17:d.advance();d.prev=B.MOVE_TO;g=d;v.context.moveTo(g.buffer.f[g.fPos]-0,g.buffer.f[g.fPos+1]-0);break;default:d.advance(),d.prev=g}}d.destroy()}};
var Za=function(a){this.renderSession=a};k["openfl._internal.renderer.canvas.CanvasMaskManager"]=Za;Za.__name__=!0;Za.__super__=Yc;Za.prototype=l(Yc.prototype,{pushMask:function(a){var c=this.renderSession.context;c.save();var d=a.__getWorldTransform();c.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty);c.beginPath();a.__renderCanvasMask(this.renderSession);c.clip()},pushRect:function(a,c){var d=this.renderSession.context;d.save();d.setTransform(c.a,c.b,c.c,c.d,c.tx,c.ty);d.beginPath();d.rect(a.x,a.y,a.width,
a.height);d.clip()},popMask:function(){this.renderSession.context.restore()},popRect:function(){this.renderSession.context.restore()},__class__:Za});var ld=function(a,c,d){Qb.call(this,a,c);this.context=d;this.renderSession=new xd;this.renderSession.context=d;this.renderSession.roundPixels=!0;this.renderSession.renderer=this;this.renderSession.maskManager=new Za(this.renderSession)};k["openfl._internal.renderer.canvas.CanvasRenderer"]=ld;ld.__name__=!0;ld.__super__=Qb;ld.prototype=l(Qb.prototype,
{render:function(a){this.context.setTransform(1,0,0,1,0,0);this.context.globalAlpha=1;!a.__transparent&&a.__clearBeforeRender?(this.context.fillStyle=a.__colorString,this.context.fillRect(0,0,a.stageWidth,a.stageHeight)):a.__transparent&&a.__clearBeforeRender&&this.context.clearRect(0,0,a.stageWidth,a.stageHeight);a.__renderCanvas(this.renderSession)},__class__:ld});var Tc=function(){};k["openfl._internal.renderer.canvas.CanvasShape"]=Tc;Tc.__name__=!0;Tc.render=function(a,c){if(a.__renderable&&!(0>=
a.__worldAlpha)){var d=a.__graphics;if(null!=d&&(v.render(d,c),null!=d.__canvas)){var b=c.context,e=a.get_scrollRect();if(0<d.__bounds.width&&0<d.__bounds.height&&(null==e||0<e.width&&0<e.height)){null!=a.__mask&&c.maskManager.pushMask(a.__mask);b.globalAlpha=a.__worldAlpha;var g=a.__worldTransform;c.roundPixels?b.setTransform(g.a,g.b,g.c,g.d,g.tx|0,g.ty|0):b.setTransform(g.a,g.b,g.c,g.d,g.tx,g.ty);null==e?b.drawImage(d.__canvas,d.__bounds.x,d.__bounds.y):b.drawImage(d.__canvas,Math.ceil(d.__bounds.x+
e.x),Math.ceil(d.__bounds.y+e.y),e.width,e.height,Math.ceil(d.__bounds.x+e.x),Math.ceil(d.__bounds.y+e.y),e.width,e.height);null!=a.__mask&&c.maskManager.popMask()}}}};var Ma=function(){};k["openfl._internal.renderer.canvas.CanvasTextField"]=Ma;Ma.__name__=!0;Ma.context=null;Ma.render=function(a,c){if(a.__dirty){var d=a.__textEngine;a.__updateLayout();if(!(null!=d.text&&""!=d.text||d.background||d.border||d.__hasFocus)||(0>=d.width||0>=d.height)&&d.autoSize!=Bb.NONE)a.__graphics.__canvas=null,a.__graphics.__context=
null,a.__graphics.set___dirty(!1),a.__dirty=!1;else{var b=d.bounds;if(null==a.__graphics||null==a.__graphics.__canvas)null==a.__graphics&&(a.__graphics=new $c),a.__graphics.__canvas=window.document.createElement("canvas"),a.__graphics.__context=a.__graphics.__canvas.getContext("2d"),a.__graphics.__bounds=new ya(0,0,b.width,b.height);var e=a.__graphics;Ma.context=e.__context;if(null!=d.text&&""!=d.text||d.__hasFocus){var g=d.text;if(d.displayAsPassword){for(var g=g.length,f="",h=0;h<g;)h++,f+="*";
g=f}e.__canvas.width=Math.ceil(b.width);e.__canvas.height=Math.ceil(b.height);d.antiAliasType!=ic.ADVANCED||d.gridFitType!=kc.PIXEL?(e.__context.mozImageSmoothingEnabled=!0,e.__context.msImageSmoothingEnabled=!0,e.__context.imageSmoothingEnabled=!0):(e.__context.mozImageSmoothingEnabled=!1,e.__context.msImageSmoothingEnabled=!1,e.__context.imageSmoothingEnabled=!1);if(d.border||d.background)Ma.context.rect(0.5,0.5,b.width-1,b.height-1),d.background&&(Ma.context.fillStyle="#"+na.hex(d.backgroundColor,
6),Ma.context.fill()),d.border&&(Ma.context.lineWidth=1,Ma.context.strokeStyle="#"+na.hex(d.borderColor,6),Ma.context.stroke());Ma.context.textBaseline="top";Ma.context.textAlign="start";for(var b=-a.get_scrollH(),h=f=0,k=a.get_scrollV()-1;h<k;)var l=h++,f=f-d.lineHeights[l];for(var m,h=0,k=(new Qa("(iPad|iPhone|iPod|Firefox)","g")).match(window.navigator.userAgent),l=0,r=d.layoutGroups;l<r.length;){var t=r[l];++l;if(!(t.lineIndex<a.get_scrollV()-1)){if(t.lineIndex>a.get_scrollV()+d.bottomScrollV-
2)break;Ma.context.font=jb.getFont(t.format);Ma.context.fillStyle="#"+na.hex(t.format.color,6);k&&(h=0.185*t.format.size);Ma.context.fillText(g.substring(t.startIndex,t.endIndex),t.offsetX+b,t.offsetY+h+f);if(-1<a.__caretIndex&&d.selectable)if(a.__selectionIndex==a.__caretIndex){if(a.__showCursor&&t.startIndex<=a.__caretIndex&&t.endIndex>=a.__caretIndex){for(var u=m=0,w=a.__caretIndex-t.startIndex;u<w;){var v=u++;if(t.advances.length<=v)break;m+=t.advances[v]}Ma.context.fillRect(t.offsetX+m,t.offsetY,
1,t.height)}}else if(t.startIndex<=a.__caretIndex&&t.endIndex>=a.__caretIndex||t.startIndex<=a.__selectionIndex&&t.endIndex>=a.__selectionIndex)m=X["int"](Math.min(a.__selectionIndex,a.__caretIndex)),u=X["int"](Math.max(a.__selectionIndex,a.__caretIndex)),t.startIndex>m&&(m=t.startIndex),t.endIndex<u&&(u=t.endIndex),w=a.getCharBoundaries(m),u>=d.text.length?(v=a.getCharBoundaries(d.text.length-1),v.x+=v.width+2):v=a.getCharBoundaries(u),null!=w&&null!=v&&(Ma.context.fillStyle="#000000",Ma.context.fillRect(w.x,
w.y,v.x-w.x,t.height),Ma.context.fillStyle="#FFFFFF",Ma.context.fillText(g.substring(m,u),b+w.x,t.offsetY+h+f))}}}else if(e.__canvas.width=Math.ceil(b.width),e.__canvas.height=Math.ceil(b.height),d.border||d.background)d.border?Ma.context.rect(0.5,0.5,b.width-1,b.height-1):Ma.context.rect(0,0,b.width,b.height),d.background&&(Ma.context.fillStyle="#"+na.hex(d.backgroundColor,6),Ma.context.fill()),d.border&&(Ma.context.lineWidth=1,Ma.context.lineCap="square",Ma.context.strokeStyle="#"+na.hex(d.borderColor,
6),Ma.context.stroke());e.__bitmap=fb.fromCanvas(a.__graphics.__canvas);a.__dirty=!1;e.set___dirty(!1)}}};var ce=function(a,c,d){Qb.call(this,a,c);throw new K("ConsoleRenderer not supported");};k["openfl._internal.renderer.console.ConsoleRenderer"]=ce;ce.__name__=!0;ce.__super__=Qb;ce.prototype=l(Qb.prototype,{render:function(a){},__class__:ce});var ze=function(){};k["openfl._internal.renderer.dom.DOMBitmap"]=ze;ze.__name__=!0;ze.renderCanvas=function(a,c){null!=a.__image&&(c.element.removeChild(a.__image),
a.__image=null);null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),a.__context=a.__canvas.getContext("2d"),a.smoothing||(a.__context.mozImageSmoothingEnabled=!1,a.__context.msImageSmoothingEnabled=!1,a.__context.imageSmoothingEnabled=!1),rc.initializeElement(a,a.__canvas,c));a.bitmapData.__sync();a.__canvas.width=a.bitmapData.width;a.__canvas.height=a.bitmapData.height;a.__context.globalAlpha=a.__worldAlpha;a.__context.drawImage(a.bitmapData.image.buffer.__srcCanvas,0,0);rc.applyStyle(a,
c,!0,!1,!0)};ze.renderImage=function(a,c){null!=a.__canvas&&(c.element.removeChild(a.__canvas),a.__canvas=null);null==a.__image&&(a.__image=window.document.createElement("img"),a.__image.src=a.bitmapData.image.buffer.__srcImage.src,rc.initializeElement(a,a.__image,c));rc.applyStyle(a,c,!0,!0,!0)};var We=function(a){this.renderSession=a};k["openfl._internal.renderer.dom.DOMMaskManager"]=We;We.__name__=!0;We.__super__=Yc;We.prototype=l(Yc.prototype,{pushMask:function(a){},pushRect:function(a,c){},popMask:function(){},
__class__:We});var rc=function(a,c,d){Qb.call(this,a,c);this.element=d;this.renderSession=new xd;this.renderSession.element=d;this.renderSession.roundPixels=!0;a=window.getComputedStyle(document.documentElement,"");a=(Array.prototype.slice.call(a).join("").match(/-(moz|webkit|ms)-/)||""===a.OLink&&["","o"])[1];"WebKit|Moz|MS|O".match(RegExp("("+a+")","i"));a[0].toUpperCase();a.substr(1);this.renderSession.vendorPrefix=a;this.renderSession.transformProperty="webkit"==a?"-webkit-transform":"transform";
this.renderSession.transformOriginProperty="webkit"==a?"-webkit-transform-origin":"transform-origin";this.renderSession.maskManager=new We(this.renderSession);this.renderSession.renderer=this};k["openfl._internal.renderer.dom.DOMRenderer"]=rc;rc.__name__=!0;rc.applyStyle=function(a,c,d,b,e){var g=a.__style;d&&a.__worldTransformChanged&&g.setProperty(c.transformProperty,a.__worldTransform.to3DString(c.roundPixels),null);a.__worldZ!=++c.z&&(a.__worldZ=c.z,g.setProperty("z-index",null==a.__worldZ?"null":
""+a.__worldZ,null));b&&a.__worldAlphaChanged&&(1>a.__worldAlpha?g.setProperty("opacity",null==a.__worldAlpha?"null":""+a.__worldAlpha,null):g.removeProperty("opacity"));e&&a.__worldClipChanged&&(null==a.__worldClip?g.removeProperty("clip"):(c=ya.__temp,d=Xa.__temp,d.copyFrom(a.__worldTransform),d.invert(),a.__worldClip.__transform(c,d),g.setProperty("clip","rect("+c.y+"px, "+c.get_right()+"px, "+c.get_bottom()+"px, "+c.x+"px)",null)))};rc.initializeElement=function(a,c,d){var b=a.__style=c.style;
b.setProperty("position","absolute",null);b.setProperty("top","0",null);b.setProperty("left","0",null);b.setProperty(d.transformOriginProperty,"0 0 0",null);d.element.appendChild(c);a.__worldAlphaChanged=!0;a.__worldClipChanged=!0;a.__worldTransformChanged=!0;a.__worldVisibleChanged=!0;a.__worldZ=-1};rc.__super__=Qb;rc.prototype=l(Qb.prototype,{render:function(a){this.element.style.background=a.__colorString;this.renderSession.z=1;a.__renderDOM(this.renderSession)},__class__:rc});var Fe=function(){};
k["openfl._internal.renderer.dom.DOMShape"]=Fe;Fe.__name__=!0;Fe.render=function(a,c){var d=a.__graphics;if(null!=a.stage&&a.__worldVisible&&a.__renderable&&null!=d){if(d.__dirty||a.__worldAlphaChanged||null==a.__canvas&&null!=d.__canvas)v.render(d,c),null!=d.__canvas?(null==a.__canvas&&(a.__canvas=window.document.createElement("canvas"),a.__context=a.__canvas.getContext("2d"),rc.initializeElement(a,a.__canvas,c)),a.__canvas.width=d.__canvas.width,a.__canvas.height=d.__canvas.height,a.__context.globalAlpha=
a.__worldAlpha,a.__context.drawImage(d.__canvas,0,0)):null!=a.__canvas&&(c.element.removeChild(a.__canvas),a.__canvas=null,a.__style=null);if(null!=a.__canvas){if(a.__worldTransformChanged||d.__transformDirty){d.__transformDirty=!1;var b=Xa.__temp;b.identity();b.translate(d.__bounds.x,d.__bounds.y);b.concat(a.__worldTransform);a.__style.setProperty(c.transformProperty,c.roundPixels?"matrix3d("+b.a+", "+b.b+", 0, 0, "+b.c+", "+b.d+", 0, 0, 0, 0, 1, 0, "+(b.tx|0)+", "+(b.ty|0)+", 0, 1)":"matrix3d("+
b.a+", "+b.b+", 0, 0, "+b.c+", "+b.d+", 0, 0, 0, 0, 1, 0, "+b.tx+", "+b.ty+", 0, 1)",null)}rc.applyStyle(a,c,!1,!1,!0)}}else null!=a.__canvas&&(c.element.removeChild(a.__canvas),a.__canvas=null,a.__style=null)};var Pf=function(){};k["openfl._internal.renderer.dom.DOMTextField"]=Pf;Pf.__name__=!0;Pf.render=function(a,c){var d=a.__textEngine;if(null!=a.stage&&a.__worldVisible&&a.__renderable){if(a.__dirty||null==a.__div)if(""!=d.text||d.background||d.border||d.type==Zc.INPUT){null==a.__div&&(a.__div=
window.document.createElement("div"),rc.initializeElement(a,a.__div,c),a.__style.setProperty("outline","none",null),a.__div.addEventListener("input",function(c){c.preventDefault();a.get_htmlText()!=a.__div.innerHTML&&(a.set_htmlText(a.__div.innerHTML),a.__dirty=!1)},!0));d.selectable?a.__style.setProperty("cursor","text",null):a.__style.setProperty("cursor","inherit",null);a.__div.contentEditable=d.type==Zc.INPUT;var b=a.__style;a.__div.innerHTML=d.text;d.background?b.setProperty("background-color",
"#"+na.hex(d.backgroundColor,6),null):b.removeProperty("background-color");d.border?b.setProperty("border","solid 1px #"+na.hex(d.borderColor,6),null):b.removeProperty("border");b.setProperty("font",jb.getFont(a.__textFormat),null);b.setProperty("color","#"+na.hex(a.__textFormat.color,6),null);d.autoSize!=Bb.NONE?b.setProperty("width","auto",null):b.setProperty("width",d.width+"px",null);b.setProperty("height",d.height+"px",null);switch(a.__textFormat.align[1]){case 3:b.setProperty("text-align","center",
null);break;case 1:b.setProperty("text-align","right",null);break;default:b.setProperty("text-align","left",null)}a.__dirty=!1}else null!=a.__div&&(c.element.removeChild(a.__div),a.__div=null);null!=a.__div&&rc.applyStyle(a,c,!0,!0,!1)}else null!=a.__div&&(c.element.removeChild(a.__div),a.__div=null,a.__style=null)};var Xf=function(){};k["openfl._internal.renderer.opengl.GLBitmap"]=Xf;Xf.__name__=!0;Xf.flipMatrix=function(a,c){var d=a.tx,b=a.ty;a.tx=0;a.ty=0;a.scale(1,-1);a.translate(0,c);a.tx+=d;
a.ty-=b};var Eb=function(a,c,d,b,e,g){null==g&&(g=!1);null==e&&(e=!1);null==b&&(b=!1);null==c&&(c=600);null==a&&(a=800);this.vpX=this.vpY=this.vpWidth=this.vpHeight=0;Qb.call(this,a,c);this.transparent=b;this.preserveDrawingBuffer=g;this.width=a;this.height=c;this.viewport=new ya;this.options={alpha:b,antialias:e,premultipliedAlpha:b,stencil:!0,preserveDrawingBuffer:g};this._glContextId=Eb.glContextId++;this.gl=d;this.defaultFramebuffer=null;Eb.glContexts[this._glContextId]=d;this.projectionMatrix=
new Xa;this.projection=new Na;this.projection.x=this.width/2;this.projection.y=-this.height/2;this.offset=new Na(0,0);this.resize(this.width,this.height);this.contextLost=!1;this.shaderManager=new la(d);this.spriteBatch=new yd(d);this.filterManager=new de(d,this.transparent);this.stencilManager=new Sc(d);this.blendModeManager=new Qf(d);this.renderSession=new xd;this.renderSession.gl=this.gl;this.renderSession.drawCount=0;this.renderSession.shaderManager=this.shaderManager;this.renderSession.filterManager=
this.filterManager;this.renderSession.blendModeManager=this.blendModeManager;this.renderSession.spriteBatch=this.spriteBatch;this.renderSession.stencilManager=this.stencilManager;this.renderSession.renderer=this;this.renderSession.defaultFramebuffer=this.defaultFramebuffer;this.renderSession.projectionMatrix=this.projectionMatrix;this.maskManager=new Xe(this.renderSession);this.renderSession.maskManager=this.maskManager;this.shaderManager.setShader(this.shaderManager.defaultShader);d.disable(d.DEPTH_TEST);
d.disable(d.CULL_FACE);d.enable(d.BLEND);d.colorMask(!0,!0,!0,this.transparent)};k["openfl._internal.renderer.opengl.GLRenderer"]=Eb;Eb.__name__=!0;Eb.renderBitmap=function(a,c,d){null==d&&(d=!0);if(a.__renderable&&!(0>=a.__worldAlpha)&&null!=a.__graphics&&null!=a.__graphics.__bitmap){var b=ya.__temp,e=Xa.__temp;b.setEmpty();e.identity();a.__getBounds(b,e);b=a.__graphics.__bitmap;e.translate(a.__graphics.__bounds.x,a.__graphics.__bounds.y);e.concat(a.__renderTransform);c.spriteBatch.renderBitmapData(b,
d,e,a.__worldColorTransform,a.__worldAlpha,a.__blendMode,hc.ALWAYS)}};Eb.__super__=Qb;Eb.prototype=l(Qb.prototype,{setViewport:function(a,c,d,b){if(this.vpX!=a||this.vpY!=c||this.vpWidth!=d||this.vpHeight!=b)this.vpX=a,this.vpY=c,this.vpWidth=d,this.vpHeight=b,this.gl.viewport(a,c,d,b),this.setOrtho(a,c,d,b),this.viewport.setTo(a,c,d,b)},setOrtho:function(a,c,d,b){var e=this.projectionMatrix;e.identity();e.a=1/d*2;e.d=-1/b*2;e.tx=-1-a*e.a;e.ty=1-c*e.d},render:function(a){if(!this.contextLost){var c=
this.gl;this.setViewport(0,0,this.width,this.height);c.bindFramebuffer(c.FRAMEBUFFER,this.defaultFramebuffer);this.transparent?c.clearColor(0,0,0,0):c.clearColor(a.__colorSplit[0],a.__colorSplit[1],a.__colorSplit[2],1);c.clear(c.COLOR_BUFFER_BIT);this.renderDisplayObject(a,this.projection)}},renderDisplayObject:function(a,c,d){this.renderSession.blendModeManager.setBlendMode(J.NORMAL);this.renderSession.drawCount=0;this.renderSession.currentBlendMode=null;this.spriteBatch.begin(this.renderSession);
this.filterManager.begin(this.renderSession,d);a.__renderGL(this.renderSession);this.spriteBatch.finish()},resize:function(a,c){this.width=a;this.height=c;Qb.prototype.resize.call(this,a,c);this.setViewport(0,0,a,c);this.projection.x=a/2;this.projection.y=-c/2},__class__:Eb});var hb=function(a){this.uniforms=new ba;this.attributes=new ba;this.ID=hb.UID++;this.gl=a;this.program=null};k["openfl._internal.renderer.opengl.shaders2.Shader"]=hb;hb.__name__=!0;hb.compileProgram=function(a,c,d){c=hb.compileShader(a,
c,a.VERTEX_SHADER);d=hb.compileShader(a,d,a.FRAGMENT_SHADER);var b=a.createProgram();null!=c&&null!=d&&(a.attachShader(b,c),a.attachShader(b,d),a.linkProgram(b),0==a.getProgramParameter(b,a.LINK_STATUS)&&ab.trace("Could not initialize shaders",{fileName:"Shader.hx",lineNumber:127,className:"openfl._internal.renderer.opengl.shaders2.Shader",methodName:"compileProgram"}));return b};hb.compileShader=function(a,c,d){c=c.join("\n");d=a.createShader(d);a.shaderSource(d,c);a.compileShader(d);return 0==a.getShaderParameter(d,
a.COMPILE_STATUS)?(ab.trace(a.getShaderInfoLog(d),{fileName:"Shader.hx",lineNumber:141,className:"openfl._internal.renderer.opengl.shaders2.Shader",methodName:"compileShader"}),null):d};hb.prototype={init:function(){this.program=hb.compileProgram(this.gl,this.vertexSrc,this.fragmentSrc);this.gl.useProgram(this.program)},getAttribLocation:function(a){if(null==this.program)throw new K("Shader isn't initialized");if(this.attributes.exists(a))return this.attributes.get(a);var c=this.gl.getAttribLocation(this.program,
a);this.attributes.set(a,c);return c},getUniformLocation:function(a){if(null==this.program)throw new K("Shader isn't initialized");if(this.uniforms.exists(a))return this.uniforms.get(a);var c=this.gl.getUniformLocation(this.program,a);this.uniforms.set(a,c);return c},enableVertexAttribute:function(a,c,d){var b=this.getAttribLocation(a.name);this.gl.enableVertexAttribArray(b);this.gl.vertexAttribPointer(b,a.components,a.type,a.normalized,c,4*d)},disableVertexAttribute:function(a,c){null==c&&(c=!0);
var d=this.getAttribLocation(a.name);this.gl.disableVertexAttribArray(d);if(c)switch(a.components){case 1:this.gl.vertexAttrib1fv(d,a.defaultValue.subarray(0,1));break;case 2:this.gl.vertexAttrib2fv(d,a.defaultValue.subarray(0,2));break;case 3:this.gl.vertexAttrib3fv(d,a.defaultValue.subarray(0,3));break;default:this.gl.vertexAttrib4fv(d,a.defaultValue.subarray(0,4))}},bindVertexArray:function(a){var c=0,d=a.get_stride(),b=0;for(a=a.attributes;b<a.length;){var e=a[b];++b;e.enabled?(this.enableVertexAttribute(e,
d,c),c+=Math.floor(e.components*e.getElementsBytes()/4)):this.disableVertexAttribute(e,!0)}},__class__:hb};var Ye=function(a){hb.call(this,a);this.vertexSrc=["attribute vec2 aPosition;","attribute vec2 aTexCoord0;","attribute vec4 aColor;","uniform mat3 uProjectionMatrix;","varying vec2 vTexCoord;","varying vec4 vColor;","void main(void) {","   gl_Position = vec4((uProjectionMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);","   vTexCoord = aTexCoord0;","   vColor = aColor;","}"];this.fragmentSrc=["#ifdef GL_ES",
"precision lowp float;","#endif","uniform sampler2D uSampler0;","uniform vec4 uColorMultiplier;","uniform vec4 uColorOffset;","varying vec2 vTexCoord;","varying vec4 vColor;","vec4 colorTransform(const vec4 color, const vec4 tint, const vec4 multiplier, const vec4 offset) {","\tvec4 unmultiply;","\tif (color.a == 0.0) {","\t\tunmultiply = vec4(0.0, 0.0, 0.0, 0.0);","\t} else {","   \tunmultiply = vec4(color.rgb / color.a, color.a);","\t}","   vec4 result = unmultiply * tint * multiplier;","   result = result + offset;",
"   result = clamp(result, 0., 1.);","   result = vec4(result.rgb * result.a, result.a);","   return result;","}","void main(void) {","   vec4 tc = texture2D(uSampler0, vTexCoord);","   gl_FragColor = colorTransform(tc, vColor, uColorMultiplier, uColorOffset);","}"];this.init()};k["openfl._internal.renderer.opengl.shaders2.DefaultShader"]=Ye;Ye.__name__=!0;Ye.__super__=hb;Ye.prototype=l(hb.prototype,{init:function(){hb.prototype.init.call(this);this.getAttribLocation("aPosition");this.getAttribLocation("aTexCoord0");
this.getAttribLocation("aColor");this.getUniformLocation("uProjectionMatrix");this.getUniformLocation("uSampler0");this.getUniformLocation("uColorMultiplier");this.getUniformLocation("uColorOffset")},__class__:Ye});var Ze=function(a){hb.call(this,a);this.vertexSrc=["attribute vec2 aPosition;","attribute vec2 aTexCoord0;","attribute vec4 aColor;","uniform mat3 uProjectionMatrix;","varying vec2 vTexCoord;","varying vec4 vColor;","void main(void) {","   gl_Position = vec4((uProjectionMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);",
"   vTexCoord = aTexCoord0;","   vColor = aColor.bgra;","}"];this.fragmentSrc=["#ifdef GL_ES","precision lowp float;","#endif","uniform sampler2D uSampler0;","uniform vec3 uColor;","uniform bool uUseTexture;","uniform float uAlpha;","uniform vec4 uColorMultiplier;","uniform vec4 uColorOffset;","varying vec2 vTexCoord;","varying vec4 vColor;","vec4 tmp;","vec4 colorTransform(const vec4 color, const vec4 tint, const vec4 multiplier, const vec4 offset) {","   vec4 unmultiply = vec4(color.rgb / color.a, color.a);",
"   vec4 result = unmultiply * tint * multiplier;","   result = result + offset;","   result = clamp(result, 0., 1.);","   result = vec4(result.rgb * result.a, result.a);","   return result;","}","void main(void) {","   if(uUseTexture) {","       tmp = texture2D(uSampler0, vTexCoord);","   } else {","       tmp = vec4(uColor, 1.);","   }","   gl_FragColor = colorTransform(tmp, vColor, uColorMultiplier, uColorOffset);","}"];this.init()};k["openfl._internal.renderer.opengl.shaders2.DrawTrianglesShader"]=
Ze;Ze.__name__=!0;Ze.__super__=hb;Ze.prototype=l(hb.prototype,{init:function(){hb.prototype.init.call(this);this.getAttribLocation("aPosition");this.getAttribLocation("aTexCoord0");this.getAttribLocation("aColor");this.getUniformLocation("uSampler0");this.getUniformLocation("uProjectionMatrix");this.getUniformLocation("uColor");this.getUniformLocation("uAlpha");this.getUniformLocation("uUseTexture");this.getUniformLocation("uColorMultiplier");this.getUniformLocation("uColorOffset")},__class__:Ze});
var Ae=function(a){hb.call(this,a);this.vertexSrc=["attribute vec2 aPosition;","uniform mat3 uTranslationMatrix;","uniform mat3 uProjectionMatrix;","uniform vec4 uColor;","uniform float uAlpha;","uniform vec4 uColorMultiplier;","uniform vec4 uColorOffset;","varying vec4 vColor;","vec4 colorTransform(const vec4 color, const float alpha, const vec4 multiplier, const vec4 offset) {","   vec4 result = color * multiplier;","   result.a *= alpha;","   result = result + offset;","   result = clamp(result, 0., 1.);",
"   result = vec4(result.rgb * result.a, result.a);","   return result;","}","void main(void) {","   gl_Position = vec4((uProjectionMatrix * uTranslationMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);","   vColor = colorTransform(uColor, uAlpha, uColorMultiplier, uColorOffset);","}"];this.fragmentSrc="#ifdef GL_ES,precision lowp float;,#endif,varying vec4 vColor;,void main(void) {,   gl_FragColor = vColor;,}".split(",");this.init()};k["openfl._internal.renderer.opengl.shaders2.FillShader"]=Ae;Ae.__name__=
!0;Ae.__super__=hb;Ae.prototype=l(hb.prototype,{init:function(){hb.prototype.init.call(this);this.getAttribLocation("aPosition");this.getUniformLocation("uTranslationMatrix");this.getUniformLocation("uProjectionMatrix");this.getUniformLocation("uColor");this.getUniformLocation("uColorMultiplier");this.getUniformLocation("uColorOffset")},__class__:Ae});var $e=function(a){hb.call(this,a);this.vertexSrc=["attribute vec2 aPosition;","uniform mat3 uTranslationMatrix;","uniform mat3 uProjectionMatrix;",
"uniform mat3 uPatternMatrix;","varying vec2 vPosition;","void main(void) {","   gl_Position = vec4((uProjectionMatrix * uTranslationMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);","   vPosition = (uPatternMatrix * vec3(aPosition, 1)).xy;","}"];this.fragmentSrc=["#ifdef GL_ES","precision lowp float;","#endif","uniform float uAlpha;","uniform vec2 uPatternTL;","uniform vec2 uPatternBR;","uniform sampler2D uSampler0;","uniform vec4 uColorMultiplier;","uniform vec4 uColorOffset;","varying vec2 vPosition;",
"vec4 colorTransform(const vec4 color, const float alpha, const vec4 multiplier, const vec4 offset) {","   vec4 unmultiply = vec4(color.rgb / color.a, color.a);","   vec4 result = unmultiply * multiplier;","   result.a *= alpha;","   result = result + offset;","   result = clamp(result, 0., 1.);","   result = vec4(result.rgb * result.a, result.a);","   return result;","}","void main(void) {","   vec2 pos = mix(uPatternTL, uPatternBR, vPosition);","   vec4 tcol = texture2D(uSampler0, pos);","   gl_FragColor = colorTransform(tcol, uAlpha, uColorMultiplier, uColorOffset);",
"}"];this.init()};k["openfl._internal.renderer.opengl.shaders2.PatternFillShader"]=$e;$e.__name__=!0;$e.__super__=hb;$e.prototype=l(hb.prototype,{init:function(){hb.prototype.init.call(this);this.getAttribLocation("aPosition");this.getUniformLocation("uTranslationMatrix");this.getUniformLocation("uPatternMatrix");this.getUniformLocation("uProjectionMatrix");this.getUniformLocation("uSampler0");this.getUniformLocation("uPatternTL");this.getUniformLocation("uPatternBR");this.getUniformLocation("uAlpha");
this.getUniformLocation("uColorMultiplier");this.getUniformLocation("uColorOffset")},__class__:$e});var Rb=function(a){hb.call(this,a);this.vertexSrc=["attribute vec2 aPosition;","attribute vec4 aColor;","uniform mat3 uTranslationMatrix;","uniform mat3 uProjectionMatrix;","uniform vec4 uColorMultiplier;","uniform vec4 uColorOffset;","uniform float uAlpha;","varying vec4 vColor;","vec4 colorTransform(const vec4 color, const float alpha, const vec4 multiplier, const vec4 offset) {","   vec4 result = color * multiplier;",
"   result.a *= alpha;","   result = result + offset;","   result = clamp(result, 0., 1.);","   result = vec4(result.rgb * result.a, result.a);","   return result;","}","void main(void) {","   gl_Position = vec4((uProjectionMatrix * uTranslationMatrix * vec3(aPosition, 1.0)).xy, 0.0, 1.0);","   vColor = colorTransform(aColor, uAlpha, uColorMultiplier, uColorOffset);","}"];this.fragmentSrc="#ifdef GL_ES,precision lowp float;,#endif,varying vec4 vColor;,void main(void) {,   gl_FragColor = vColor;,}".split(",");
this.init()};k["openfl._internal.renderer.opengl.shaders2.PrimitiveShader"]=Rb;Rb.__name__=!0;Rb.__super__=hb;Rb.prototype=l(hb.prototype,{init:function(){hb.prototype.init.call(this);this.getAttribLocation("aPosition");this.getAttribLocation("aColor");this.getUniformLocation("uTranslationMatrix");this.getUniformLocation("uProjectionMatrix");this.getUniformLocation("uAlpha");this.getUniformLocation("uColorMultiplier");this.getUniformLocation("uColorOffset")},__class__:Rb});var Qf=function(a){this.gl=
a;this.currentBlendMode=null};k["openfl._internal.renderer.opengl.utils.BlendModeManager"]=Qf;Qf.__name__=!0;Qf.prototype={setBlendMode:function(a,c){null==c&&(c=!1);null==a&&(a=J.NORMAL,c=!0);if(!c&&this.currentBlendMode==a)return!1;this.currentBlendMode=a;switch(a[1]){case 0:this.gl.blendEquation(32774);this.gl.blendFunc(1,1);break;case 9:this.gl.blendEquation(32774);this.gl.blendFunc(774,771);break;case 12:this.gl.blendEquation(32774);this.gl.blendFunc(1,769);break;case 13:this.gl.blendEquation(32779);
this.gl.blendFunc(1,1);break;default:this.gl.blendEquation(32774),this.gl.blendFunc(1,771)}return!0},__class__:Qf};var $a=function(a){null==a&&(a=!0);this.type=Aa.Polygon;this.points=null;this.winding=0;this.isRemovable=!0;this.fillIndex=0;this.line=new mc;this.fill=xb.None;a&&(this.points=[])};k["openfl._internal.renderer.opengl.utils.DrawPath"]=$a;$a.__name__=!0;$a.getStack=function(a,c){return w.build(a,c)};$a.prototype={update:function(a,c,d,b){this.updateLine(a);this.fill=c;this.fillIndex=d;
this.winding=b},updateLine:function(a){this.line.width=a.width;this.line.color=a.color;this.line.alpha=null==a.alpha?1:a.alpha;this.line.scaleMode=null==a.scaleMode?Cb.NORMAL:a.scaleMode;this.line.caps=null==a.caps?sc.ROUND:a.caps;this.line.joints=null==a.joints?Hc.ROUND:a.joints;this.line.miterLimit=a.miterLimit},__class__:$a};var w=function(){};k["openfl._internal.renderer.opengl.utils.PathBuiler"]=w;w.__name__=!0;w.__currentPath=null;w.__drawPaths=null;w.__line=null;w.__fill=null;w.closePath=function(){var a;
a=null==w.__currentPath.points?0:w.__currentPath.points.length;if(!(0>=a)&&w.__currentPath.type==Aa.Polygon&&w.__currentPath.fill!=xb.None){var c=w.__currentPath.points[0],d=w.__currentPath.points[1],b=w.__currentPath.points[a-1];c==w.__currentPath.points[a-2]&&d==b||w.lineTo(c,d)}};w.endFill=function(){w.__fill=xb.None;w.__fillIndex++};w.lineTo=function(a,c){var d=w.__currentPath.points,b=!0;if(1<d.length){var e=d[d.length-1];d[d.length-2]==a&&e==c&&(b=!1)}!0==b&&(w.__currentPath.points.push(a),
w.__currentPath.points.push(c))};w.build=function(a,c){var d=null,b=a.__bounds;w.__drawPaths=[];w.__currentPath=new $a;w.__line=new mc;w.__fill=xb.None;w.__fillIndex=0;d=a.__glStack[Eb.glContextId];null==d&&(d=a.__glStack[Eb.glContextId]=new ee(c));if(a.__visible&&0!=a.__commands.get_length()&&null!=b&&0!=b.width&&0!=b.height){for(var b=new wd(a.__commands),e=0,g=a.__commands.types;e<g.length;){var f=g[e];++e;switch(f[1]){case 0:b.advance();b.prev=B.BEGIN_BITMAP_FILL;f=b;w.endFill();w.__fill=null!=
f.buffer.o[f.oPos]?xb.Texture(f.buffer.o[f.oPos],f.buffer.o[f.oPos+1],f.buffer.b[f.bPos],f.buffer.b[f.bPos+1]):xb.None;if(null==w.__currentPath.points||0==w.__currentPath.points.length)!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop(),w.__currentPath=new $a,w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding),w.__currentPath.points=[],w.__currentPath.type=Aa.Polygon,w.__drawPaths.push(w.__currentPath);
break;case 1:b.advance();b.prev=B.BEGIN_FILL;f=b;w.endFill();w.__fill=0<f.buffer.f[f.fPos]?xb.Color(f.buffer.i[f.iPos]&16777215,f.buffer.f[f.fPos]):xb.None;if(null==w.__currentPath.points||0==w.__currentPath.points.length)!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop(),w.__currentPath=new $a,w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding),w.__currentPath.points=[],w.__currentPath.type=Aa.Polygon,
w.__drawPaths.push(w.__currentPath);break;case 3:b.advance();b.prev=B.CUBIC_CURVE_TO;f=b;if(null==w.__currentPath.points||0==w.__currentPath.points.length)!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop(),w.__currentPath=new $a,w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding),w.__currentPath.type=Aa.Polygon,w.__currentPath.points.push(0),w.__currentPath.points.push(0),w.__drawPaths.push(w.__currentPath);
ob.cubicCurveTo(w.__currentPath.points,f.buffer.f[f.fPos],f.buffer.f[f.fPos+1],f.buffer.f[f.fPos+3],f.buffer.f[f.fPos+4],f.buffer.f[f.fPos+5],f.buffer.f[f.fPos+6]);break;case 4:b.advance();b.prev=B.CURVE_TO;f=b;if(null==w.__currentPath.points||0==w.__currentPath.points.length)!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop(),w.__currentPath=new $a,w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding),
w.__currentPath.type=Aa.Polygon,w.__currentPath.points.push(0),w.__currentPath.points.push(0),w.__drawPaths.push(w.__currentPath);ob.curveTo(w.__currentPath.points,f.buffer.f[f.fPos],f.buffer.f[f.fPos+1],f.buffer.f[f.fPos+2],f.buffer.f[f.fPos+3]);break;case 5:b.advance();b.prev=B.DRAW_CIRCLE;f=b;!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__currentPath=new $a;w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,
w.__currentWinding);w.__currentPath.type=Aa.Circle;w.__currentPath.points=[f.buffer.f[f.fPos],f.buffer.f[f.fPos+1],f.buffer.f[f.fPos+2]];w.__drawPaths.push(w.__currentPath);break;case 6:b.advance();b.prev=B.DRAW_ELLIPSE;f=b;!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__currentPath=new $a;w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding);w.__currentPath.type=Aa.Ellipse;w.__currentPath.points=
[f.buffer.f[f.fPos],f.buffer.f[f.fPos+1],f.buffer.f[f.fPos+2],f.buffer.f[f.fPos+3]];w.__drawPaths.push(w.__currentPath);break;case 8:b.advance();b.prev=B.DRAW_RECT;f=b;!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__currentPath=new $a;w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding);w.__currentPath.type=Aa.Rectangle(!1);w.__currentPath.points=[f.buffer.f[f.fPos],f.buffer.f[f.fPos+1],f.buffer.f[f.fPos+
2],f.buffer.f[f.fPos+3]];w.__drawPaths.push(w.__currentPath);break;case 9:var h;b.advance();b.prev=B.DRAW_ROUND_RECT;h=b;var f=h.buffer.f[h.fPos],k=h.buffer.f[h.fPos+1],l=h.buffer.f[h.fPos+2],m=h.buffer.f[h.fPos+3],r=h.buffer.f[h.fPos+4];h=h.buffer.f[h.fPos+5];-1==h&&(h=r);r*=0.5;h*=0.5;r>l/2&&(r=l/2);h>m/2&&(h=m/2);!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__currentPath=new $a;w.__currentPath.update(w.__line,w.__fill,
w.__fillIndex,w.__currentWinding);w.__currentPath.type=Aa.Rectangle(!0);w.__currentPath.points=[f,k,l,m,r,h];w.__drawPaths.push(w.__currentPath);break;case 12:b.advance();b.prev=B.END_FILL;w.endFill();break;case 15:b.advance();b.prev=B.LINE_STYLE;f=b;w.__line=new mc;null==f.buffer.o[f.oPos]||isNaN(f.buffer.o[f.oPos])||0>f.buffer.o[f.oPos]?w.__line.width=0:w.__line.width=0==f.buffer.o[f.oPos]?1:f.buffer.o[f.oPos];!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?
w.closePath():w.__drawPaths.pop();w.__line.color=null==f.buffer.o[f.oPos+1]?0:f.buffer.o[f.oPos+1];w.__line.alpha=null==f.buffer.o[f.oPos+2]?1:f.buffer.o[f.oPos+2];w.__line.scaleMode=f.buffer.o[f.oPos+4];w.__line.caps=f.buffer.o[f.oPos+5];w.__line.joints=f.buffer.o[f.oPos+6];w.__line.miterLimit=f.buffer.o[f.oPos+7];w.__currentPath=new $a;w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding);w.__currentPath.points=[];w.__currentPath.type=Aa.Polygon;w.__drawPaths.push(w.__currentPath);
break;case 16:b.advance();b.prev=B.LINE_TO;f=b;w.lineTo(f.buffer.f[f.fPos],f.buffer.f[f.fPos+1]);break;case 17:b.advance();b.prev=B.MOVE_TO;f=b;!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__currentPath=new $a;w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding);w.__currentPath.type=Aa.Polygon;w.__currentPath.points.push(f.buffer.f[f.fPos]);w.__currentPath.points.push(f.buffer.f[f.fPos+1]);w.__drawPaths.push(w.__currentPath);
break;case 11:b.advance();b.prev=B.DRAW_TRIANGLES;h=b;r=h.buffer.o[h.oPos+2];f=h.buffer.o[h.oPos];k=h.buffer.o[h.oPos+1];l=h.buffer.o[h.oPos+3];m=h.buffer.o[h.oPos+4];h=h.buffer.i[h.iPos];var t;switch(w.__fill[1]){case 1:t=!0;break;default:t=!1}if(t&&null!=r)continue;!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__currentPath=new $a;w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding);if(null==
r)switch(r=new Kd,r.data=[],r.length=0,r.fixed=!1,t=w.__fill,t[1]){case 2:t=t[2];for(var u=0,v=f.length/2|0;u<v;){var x=u++;if(!r.fixed){r.length++;if(r.data.length<r.length){var z;z=Array(r.data.length+10);dc.blit(r.data,0,z,0,r.data.length);r.data=z}r.data[r.length-1]=f.data[2*x]/t.width}r.length;r.fixed||(r.length++,r.data.length<r.length&&(z=Array(r.data.length+10),dc.blit(r.data,0,z,0,r.data.length),r.data=z),r.data[r.length-1]=f.data[2*x+1]/t.height);r.length}}w.__currentPath.type=Aa.DrawTriangles(f,
k,r,l,m,h);w.__currentPath.isRemovable=!1;w.__drawPaths.push(w.__currentPath);break;case 10:b.advance();b.prev=B.DRAW_TILES;f=b;!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__fillIndex++;w.__currentPath=new $a(!1);w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding);w.__currentPath.type=Aa.DrawTiles(f.buffer.ts[f.tsPos],f.buffer.ff[f.ffPos],f.buffer.b[f.bPos],f.buffer.i[f.iPos],f.buffer.i[f.iPos+
1]);w.__currentPath.isRemovable=!1;w.__drawPaths.push(w.__currentPath);break;case 7:b.advance();b.prev=B.DRAW_PATH;f=b;!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();switch(f.buffer.o[f.oPos+2]){case md.EVEN_ODD:w.__currentWinding=0;break;case md.NON_ZERO:w.__currentWinding=1;break;default:w.__currentWinding=0}l=k=0;for(m=f.buffer.o[f.oPos].length;l<m;)switch(r=l++,r=f.buffer.o[f.oPos].data[r],r){case 1:v=f.buffer.o[f.oPos+
1].data[k];x=f.buffer.o[f.oPos+1].data[k+1];k+=2;!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__currentPath=new $a;w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding);w.__currentPath.type=Aa.Polygon;w.__currentPath.points.push(v);w.__currentPath.points.push(x);w.__drawPaths.push(w.__currentPath);break;case 4:v=f.buffer.o[f.oPos+1].data[k+2];x=f.buffer.o[f.oPos+1].data[k+3];k+=4;!w.__currentPath.isRemovable||
null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__currentPath=new $a;w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding);w.__currentPath.type=Aa.Polygon;w.__currentPath.points.push(v);w.__currentPath.points.push(x);w.__drawPaths.push(w.__currentPath);break;case 2:v=f.buffer.o[f.oPos+1].data[k];x=f.buffer.o[f.oPos+1].data[k+1];k+=2;w.lineTo(v,x);break;case 5:v=f.buffer.o[f.oPos+1].data[k+2];x=f.buffer.o[f.oPos+1].data[k+3];k+=
4;w.lineTo(v,x);break;case 3:r=f.buffer.o[f.oPos+1].data[k];h=f.buffer.o[f.oPos+1].data[k+1];v=f.buffer.o[f.oPos+1].data[k+2];x=f.buffer.o[f.oPos+1].data[k+3];k+=4;if(null==w.__currentPath.points||0==w.__currentPath.points.length)!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop(),w.__currentPath=new $a,w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding),w.__currentPath.type=Aa.Polygon,w.__currentPath.points.push(0),
w.__currentPath.points.push(0),w.__drawPaths.push(w.__currentPath);ob.curveTo(w.__currentPath.points,r,h,v,x);break;case 6:r=f.buffer.o[f.oPos+1].data[k];h=f.buffer.o[f.oPos+1].data[k+1];t=f.buffer.o[f.oPos+1].data[k+2];u=f.buffer.o[f.oPos+1].data[k+3];v=f.buffer.o[f.oPos+1].data[k+4];x=f.buffer.o[f.oPos+1].data[k+5];k+=6;if(null==w.__currentPath.points||0==w.__currentPath.points.length)!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop(),
w.__currentPath=new $a,w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding),w.__currentPath.type=Aa.Polygon,w.__currentPath.points.push(0),w.__currentPath.points.push(0),w.__drawPaths.push(w.__currentPath);ob.cubicCurveTo(w.__currentPath.points,r,h,t,u,v,x)}w.__currentWinding=0;break;case 18:b.advance();b.prev=B.OVERRIDE_MATRIX;f=b;!w.__currentPath.isRemovable||null!=w.__currentPath.points&&0!=w.__currentPath.points.length?w.closePath():w.__drawPaths.pop();w.__currentPath=new $a;
w.__currentPath.update(w.__line,w.__fill,w.__fillIndex,w.__currentWinding);w.__currentPath.type=Aa.OverrideMatrix(f.buffer.o[f.oPos]);w.__currentPath.isRemovable=!1;w.__drawPaths.push(w.__currentPath);break;default:b.advance(),b.prev=f}}w.closePath();b.destroy()}a.__drawPaths=w.__drawPaths;return d};var mc=function(){this.color=this.width=0;this.alpha=1;this.scaleMode=Cb.NORMAL;this.caps=sc.ROUND;this.joints=Hc.ROUND;this.miterLimit=3};k["openfl._internal.renderer.opengl.utils.LineStyle"]=mc;mc.__name__=
!0;mc.prototype={__class__:mc};var xb=k["openfl._internal.renderer.opengl.utils.FillType"]={__ename__:!0,__constructs__:["None","Color","Texture","Gradient"]};xb.None=["None",0];xb.None.toString=r;xb.None.__enum__=xb;xb.Color=function(a,c){var b=["Color",1,a,c];b.__enum__=xb;b.toString=r;return b};xb.Texture=function(a,c,b,e){a=["Texture",2,a,c,b,e];a.__enum__=xb;a.toString=r;return a};xb.Gradient=["Gradient",3];xb.Gradient.toString=r;xb.Gradient.__enum__=xb;var de=function(a,c){this.transparent=
c;this.filterStack=[];this.offsetY=this.offsetX=0;this.setContext(a)};k["openfl._internal.renderer.opengl.utils.FilterManager"]=de;de.__name__=!0;de.prototype={begin:function(a,c){this.renderSession=a;this.defaultShader=a.shaderManager.defaultShader;this.height=this.width=0;this.buffer=c},initShaderBuffers:function(){var a=this.gl;this.vertexBuffer=a.createBuffer();this.uvBuffer=a.createBuffer();this.colorBuffer=a.createBuffer();this.indexBuffer=a.createBuffer();var c=[0,0,1,0,0,1,1,1];this.vertexArray=
null!=c?new Float32Array(c):null;a.bindBuffer(a.ARRAY_BUFFER,this.vertexBuffer);a.bufferData(a.ARRAY_BUFFER,this.vertexArray,a.STATIC_DRAW);c=[0,0,1,0,0,1,1,1];this.uvArray=null!=c?new Float32Array(c):null;a.bindBuffer(a.ARRAY_BUFFER,this.uvBuffer);a.bufferData(a.ARRAY_BUFFER,this.uvArray,a.STATIC_DRAW);c=[1,16777215,1,16777215,1,16777215,1,16777215];this.colorArray=null!=c?new Float32Array(c):null;a.bindBuffer(a.ARRAY_BUFFER,this.colorBuffer);a.bufferData(a.ARRAY_BUFFER,this.colorArray,a.STATIC_DRAW);
a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,function(a){a=[0,1,2,1,3,2];return null!=a?new Uint16Array(a):null}(this),a.STATIC_DRAW)},setContext:function(a){this.gl=a;this.texturePool=[];this.initShaderBuffers()},__class__:de};var Rf=function(){};k["openfl._internal.renderer.opengl.utils.FilterTexture"]=Rf;Rf.__name__=!0;Rf.prototype={destroy:function(){this.gl.deleteFramebuffer(this.frameBuffer);this.gl.deleteTexture(this.texture);this.texture=this.frameBuffer=
null},__class__:Rf};var Xe=function(a){this.renderSession=a;this.setContext(a.gl);this.clips=[]};k["openfl._internal.renderer.opengl.utils.GLMaskManager"]=Xe;Xe.__name__=!0;Xe.__super__=Yc;Xe.prototype=l(Yc.prototype,{pushRect:function(a,c){if(null!=a){var b=new Xa(c.a,c.b,c.c,c.d,c.tx,c.ty);Xf.flipMatrix(b,this.renderSession.renderer.viewport.height);var e=a.clone();e.__transform(e,b);null!=this.currentClip&&(e=this.currentClip.intersection(e));b=null==this.currentClip||e.isEmpty()||this.currentClip.containsRect(e);
this.clips.push(e);this.currentClip=e;b&&(this.renderSession.spriteBatch.stop(),this.renderSession.spriteBatch.start(this.currentClip))}},pushMask:function(a){this.renderSession.spriteBatch.stop();this.renderSession.stencilManager.pushMask(a,this.renderSession);this.renderSession.spriteBatch.start(this.currentClip)},popMask:function(){this.renderSession.spriteBatch.stop();this.renderSession.stencilManager.popMask(null,this.renderSession);this.renderSession.spriteBatch.start(this.currentClip)},popRect:function(){this.renderSession.spriteBatch.stop();
this.clips.pop();this.currentClip=this.clips[this.clips.length-1];this.renderSession.spriteBatch.start(this.currentClip)},saveState:function(){this.savedClip=this.currentClip;this.currentClip=null},restoreState:function(){this.currentClip=this.savedClip;this.savedClip=null},setContext:function(a){null!=this.renderSession&&(this.renderSession.gl=a);this.gl=a},__class__:Xe});var Da=function(a,c,b,e,f){null==b&&(b=!1);this.enabled=!0;this.normalized=!1;this.components=a;this.type=c;this.normalized=b;
this.name=e;this.defaultValue=null==f?null!=a?new Float32Array(a):null:f};k["openfl._internal.renderer.opengl.utils.VertexAttribute"]=Da;Da.__name__=!0;Da.prototype={copy:function(){return new Da(this.components,this.type,this.normalized,this.name,this.defaultValue)},getElementsBytes:function(){switch(this.type){case 5120:case 5121:return 1;case 5122:case 5123:return 2;default:return 4}},__class__:Da};var ya=function(a,c,b,e){null==e&&(e=0);null==b&&(b=0);null==c&&(c=0);null==a&&(a=0);this.x=a;this.y=
c;this.width=b;this.height=e};k["openfl.geom.Rectangle"]=ya;ya.__name__=!0;ya.prototype={clone:function(){return new ya(this.x,this.y,this.width,this.height)},contains:function(a,c){return a>=this.x&&c>=this.y&&a<this.get_right()&&c<this.get_bottom()},containsPoint:function(a){return this.contains(a.x,a.y)},containsRect:function(a){return 0>=a.width||0>=a.height?a.x>this.x&&a.y>this.y&&a.get_right()<this.get_right()&&a.get_bottom()<this.get_bottom():a.x>=this.x&&a.y>=this.y&&a.get_right()<=this.get_right()&&
a.get_bottom()<=this.get_bottom()},copyFrom:function(a){this.x=a.x;this.y=a.y;this.width=a.width;this.height=a.height},intersection:function(a){var c;c=this.x<a.x?a.x:this.x;var b;b=this.get_right()>a.get_right()?a.get_right():this.get_right();if(b<=c)return new ya;var e;e=this.y<a.y?a.y:this.y;a=this.get_bottom()>a.get_bottom()?a.get_bottom():this.get_bottom();return a<=e?new ya:new ya(c,e,b-c,a-e)},isEmpty:function(){return 0>=this.width||0>=this.height},setEmpty:function(){this.x=this.y=this.width=
this.height=0},setTo:function(a,c,b,e){this.x=a;this.y=c;this.width=b;this.height=e},__expand:function(a,c,b,e){if(0==this.width&&0==this.height)this.x=a,this.y=c,this.width=b,this.height=e;else{var f=this.get_right(),g=this.get_bottom();this.x>a&&(this.x=a,this.width=f-a);this.y>c&&(this.y=c,this.height=g-c);f<a+b&&(this.width=a+b-this.x);g<c+e&&(this.height=c+e-this.y)}},__toLimeRectangle:function(){return new yc(this.x,this.y,this.width,this.height)},__transform:function(a,c){var b=c.a*this.x+
c.c*this.y,e=b,f=c.b*this.x+c.d*this.y,g=f,h=c.a*(this.x+this.width)+c.c*this.y,k=c.b*(this.x+this.width)+c.d*this.y;h<b&&(b=h);k<f&&(f=k);h>e&&(e=h);k>g&&(g=k);h=c.a*(this.x+this.width)+c.c*(this.y+this.height);k=c.b*(this.x+this.width)+c.d*(this.y+this.height);h<b&&(b=h);k<f&&(f=k);h>e&&(e=h);k>g&&(g=k);h=c.a*this.x+c.c*(this.y+this.height);k=c.b*this.x+c.d*(this.y+this.height);h<b&&(b=h);k<f&&(f=k);h>e&&(e=h);k>g&&(g=k);a.setTo(b+c.tx,f+c.ty,e-b,g-f)},get_bottom:function(){return this.y+this.height},
get_left:function(){return this.x},get_right:function(){return this.x+this.width},get_top:function(){return this.y},get_topLeft:function(){return new Na(this.x,this.y)},__class__:ya,__properties__:{get_topLeft:"get_topLeft",get_top:"get_top",get_right:"get_right",get_left:"get_left",get_bottom:"get_bottom"}};var V=function(){};k["openfl._internal.renderer.opengl.utils.GraphicsRenderer"]=V;V.__name__=!0;V.overrideMatrix=null;V.buildCircle=function(a,c,b){null==b&&(b=!1);var e=a.points,f=e[0],g=e[1],
h=e[2],e=3==e.length?h:e[3];a.type==Aa.Ellipse&&(h/=2,e/=2,f+=h,g+=e);b&&(f-=V.objectBounds.x,g-=V.objectBounds.y);b=2*Math.PI/40;c=V.prepareBucket(a,c);var k=c.getData(nc.Fill);if(null!=k){var l=k.verts,k=k.indices,m=l.length/2|0;k.push(m);for(var r=0;41>r;){var t=r++;l.push(f);l.push(g);l.push(f+Math.sin(b*t)*h);l.push(g+Math.cos(b*t)*e);k.push(m++);k.push(m++)}k.push(m-1)}0<a.line.width&&(b=a.points,a.points=[],ob.ellipse(a.points,f,g,h,e,40),V.buildLine(a,c),a.points=b)};V.buildComplexPoly=function(a,
c,b){null==b&&(b=!1);var e=null;if(6<=a.points.length){var f=a.points.slice();if(b)for(var e=0,g=f.length/2|0;e<g;){var h=e++;f[2*h]-=V.objectBounds.x;f[2*h+1]-=V.objectBounds.y}e=V.prepareBucket(a,c);g=e.getData(nc.Fill);g.drawMode=c.gl.TRIANGLE_FAN;g.verts=f;g=g.indices;f=f.length/2|0;for(h=0;h<f;){var k=h++;g.push(k)}}0<a.line.width&&(null==e&&(e=V.prepareBucket(a,c)),V.buildLine(a,e,b))};V.buildLine=function(a,c,b){null==b&&(b=!1);var e=a.points;if(0!=e.length){c=c.getData(nc.Line);if(b){b=0;
for(var f=e.length/2|0;b<f;){var g=b++;e[2*g]-=V.objectBounds.x;e[2*g+1]-=V.objectBounds.y}}f=new Na(e[0],e[1]);g=new Na(e[e.length-2|0],e[e.length-1|0]);f.x==g.x&&f.y==g.y&&(e=e.slice(),e.pop(),e.pop(),g=new Na(e[e.length-2|0],e[e.length-1|0]),b=g.x+0.5*(f.x-g.x),f=g.y+0.5*(f.y-g.y),e.unshift(f),e.unshift(b),e.push(b),e.push(f));b=c.verts;c=c.indices;var h=e.length/2|0,f=e.length,g=b.length/6|0,k=a.line.width/2,l=V.hex2rgb(a.line.color);a=a.line.alpha;var m=l[0],r=l[1],l=l[2],t,u,w,v,x,z,C,E,H,U,
T,pa,da,wa;w=e[0];v=e[1];x=e[2];z=e[3];E=-(v-z);H=w-x;u=Math.sqrt(Math.abs(E*E+H*H));E=E/u*k;H=H/u*k;b.push(w-E);b.push(v-H);b.push(m);b.push(r);b.push(l);b.push(a);b.push(w+E);b.push(v+H);b.push(m);b.push(r);b.push(l);b.push(a);for(var vb=1,wb=h-1;vb<wb;)H=vb++,w=e[2*(H-1)],v=e[2*(H-1)+1],x=e[2*H],z=e[2*H+1],t=e[2*(H+1)],C=e[2*(H+1)+1],E=-(v-z),H=w-x,u=Math.sqrt(Math.abs(E*E+H*H)),E/=u,H/=u,E*=k,H*=k,U=-(z-C),T=x-t,u=Math.sqrt(Math.abs(U*U+T*T)),U/=u,T/=u,U*=k,T*=k,u=-H+v-(-H+z),pa=-E+x-(-E+w),w=
(-E+w)*(-H+z)-(-E+x)*(-H+v),v=-T+C-(-T+z),da=-U+x-(-U+t),C=(-U+t)*(-T+z)-(-U+x)*(-T+C),wa=u*da-v*pa,0.1>Math.abs(wa)?(b.push(x-E),b.push(z-H),b.push(m),b.push(r),b.push(l),b.push(a),b.push(x+E),b.push(z+H),b.push(m),b.push(r),b.push(l),b.push(a)):(t=(pa*C-da*w)/wa,u=(v*w-u*C)/wa,pa=(t-x)*(t-x)+(u-z)+(u-z),19600<pa?(E-=U,H-=T,u=Math.sqrt(Math.abs(E*E+H*H)),E/=u,H/=u,E*=k,H*=k,b.push(x-E),b.push(z-H),b.push(m),b.push(r),b.push(l),b.push(a),b.push(x+E),b.push(z+H),b.push(m),b.push(r),b.push(l),b.push(a),
b.push(x-E),b.push(z-H),b.push(m),b.push(r),b.push(l),b.push(a),f++):(b.push(t),b.push(u),b.push(m),b.push(r),b.push(l),b.push(a),b.push(x-(t-x)),b.push(z-(u-z)),b.push(m),b.push(r),b.push(l),b.push(a)));w=e[2*(h-2)];v=e[2*(h-2)+1];x=e[2*(h-1)];z=e[2*(h-1)+1];E=-(v-z);H=w-x;u=Math.sqrt(Math.abs(E*E+H*H));isFinite(u)||ab.trace(E*E+H*H,{fileName:"GraphicsRenderer.hx",lineNumber:406,className:"openfl._internal.renderer.opengl.utils.GraphicsRenderer",methodName:"buildLine"});E/=u;H/=u;E*=k;H*=k;b.push(x-
E);b.push(z-H);b.push(m);b.push(r);b.push(l);b.push(a);b.push(x+E);b.push(z+H);b.push(m);b.push(r);b.push(l);b.push(a);c.push(g);for(e=0;e<f;)e++,c.push(g++);c.push(g-1)}};V.buildRectangle=function(a,c,b){null==b&&(b=!1);var e=a.points,f=e[0],g=e[1],h=e[2],e=e[3];b&&(f-=V.objectBounds.x,g-=V.objectBounds.y);c=V.prepareBucket(a,c);var k=c.getData(nc.Fill);if(null!=k){b=k.verts;var k=k.indices,l=b.length/2|0;b.push(f);b.push(g);b.push(f+h);b.push(g);b.push(f);b.push(g+e);b.push(f+h);b.push(g+e);k.push(l);
k.push(l);k.push(l+1);k.push(l+2);k.push(l+3);k.push(l+3)}0<a.line.width&&(b=a.points,a.points=[f,g,f+h,g,f+h,g+e,f,g+e,f,g],V.buildLine(a,c),a.points=b)};V.buildRoundedRectangle=function(a,c,b){null==b&&(b=!1);var e=a.points.slice(),f=e[0],g=e[1],h=e[2],k=e[3],l=e[4],e=e[5];b&&(f-=V.objectBounds.x,g-=V.objectBounds.y);b=[];ob.roundRectangle(b,f,g,h,k,l,e);c=V.prepareBucket(a,c);g=c.getData(nc.Fill);if(null!=g){f=g.verts;g=g.indices;h=f.length/2;k=[];be.triangulate(k,b);for(l=0;l<k.length;)g.push(k[l]+
h|0),g.push(k[l]+h|0),g.push(k[l+1]+h|0),g.push(k[l+2]+h|0),g.push(k[l+2]+h|0),l+=3;for(l=0;l<b.length;)f.push(b[l]),f.push(b[++l]),l++}0<a.line.width&&(f=a.points,a.points=b,V.buildLine(a,c),a.points=f)};V.buildDrawTriangles=function(a,c,b,e){null==e&&(e=!1);var f=a.type.slice(2),g=f[0],h=f[1],k=f[2],l=f[3],f=f[4],m,r,t,u,w;e?(m=1,t=r=0,u=1,c=w=0):(m=c.__worldTransform.a,r=c.__worldTransform.b,t=c.__worldTransform.c,u=c.__worldTransform.d,w=c.__worldTransform.tx,c=c.__worldTransform.ty);var v=null!=
f&&0<f.length;b=V.prepareBucket(a,b).getData(nc.Fill);a=b.vertexArray.attributes[2];a.enabled=v;var x=[1,1,1,1],x=null!=x?new Float32Array(x):null;a.defaultValue=x;b.rawVerts=!0;b.glLength=h.length;b.stride=X["int"](b.vertexArray.get_stride()/4);a=b.glLength*b.stride;null==b.glVerts||b.glVerts.length<a?(a=null!=a?new Float32Array(a):null,b.glVerts=a):a=b.glVerts;b=a.buffer;b=null!=b?new Uint32Array(b,0):null;for(var z=0,E=0,C=0,H=0,U=0,T=0,pa=0,da=0,wa=0,vb=0,wb=0,Sa=0,Rc=x=0,zc=h.length/3|0;Rc<zc;){T=
Rc++;H=h.data[3*T];U=h.data[3*T+1];T=h.data[3*T+2];z=2*H;E=2*U;C=2*T;pa=g.data[z];da=g.data[z+1];wa=g.data[E];vb=g.data[E+1];wb=g.data[C];Sa=g.data[C+1];e&&(pa-=V.objectBounds.x,da-=V.objectBounds.y,wa-=V.objectBounds.x,vb-=V.objectBounds.y,wb-=V.objectBounds.x,Sa-=V.objectBounds.y);switch(l[1]){case 2:if(!(0>(wa-pa)*(Sa-da)-(vb-da)*(wb-pa)))continue;break;case 0:if(0>(wa-pa)*(Sa-da)-(vb-da)*(wb-pa))continue}var B=x++;a[B]=m*pa+t*da+w;B=x++;a[B]=r*pa+u*da+c;pa=x++;a[pa]=k.data[z];pa=x++;a[pa]=k.data[z+
1];v&&(z=x++,b[z]=f.data[H]);H=x++;a[H]=m*wa+t*vb+w;H=x++;a[H]=r*wa+u*vb+c;wa=x++;a[wa]=k.data[E];wa=x++;a[wa]=k.data[E+1];v&&(E=x++,b[E]=f.data[U]);U=x++;a[U]=m*wb+t*Sa+w;U=x++;a[U]=r*wb+u*Sa+c;wb=x++;a[wb]=k.data[C];wb=x++;a[wb]=k.data[C+1];v&&(C=x++,b[C]=f.data[T])}};V.render=function(a,c){var b=a.__graphics,e=b.__bounds,f=b.__dirty;b.__visible&&0!=b.__commands.get_length()&&null!=e&&0!=e.width&&0!=e.height?(f&&V.updateGraphics(a,a.__graphics,c.gl,a.cacheAsBitmap),V.renderGraphics(a,c,!1)):b.__glStack.splice(0,
b.__glStack.length)};V.renderGraphics=function(a,c,b){null==b&&(b=!1);var e=c.gl,f=a.__graphics.__glStack[Eb.glContextId];if(null!=f){var g,h;h=b?Xa.__identity:a.__worldTransform;for(var k=c.spriteBatch.clipRect,l=c.spriteBatch.drawing,m=0,r=f.buckets.length;m<r;){g=m++;(l=c.spriteBatch.drawing)&&!b&&c.spriteBatch.finish();c.blendModeManager.setBlendMode(a.__blendMode);null!=k&&(e.enable(e.SCISSOR_TEST),e.scissor(Math.floor(k.x),Math.floor(k.y),Math.floor(k.width),Math.floor(k.height)));g=f.buckets[g];
switch(g.mode[1]){case 1:case 2:c.stencilManager.pushBucket(g,c,h.toArray(!0));l=V.prepareShader(g,c,a,h.toArray(!0));V.renderFill(g,l,c);c.stencilManager.popBucket(a,g,c);break;case 5:l=V.prepareShader(g,c,a,null);V.renderDrawTriangles(g,l,c);break;case 6:l||c.spriteBatch.begin(c,k),l=g.graphicType.slice(2),c.spriteBatch.renderTiles(a,l[0],l[1],l[2],l[3],l[4]),c.spriteBatch.finish()}var l=a.__worldColorTransform,t=0;for(g=g.lines;t<g.length;){var u=g[t];++t;if(null!=u&&0<u.verts.length){var w=c.shaderManager.primitiveShader;
c.shaderManager.setShader(w);e.uniformMatrix3fv(w.getUniformLocation("uTranslationMatrix"),!1,h.toArray(!0));e.uniformMatrix3fv(w.getUniformLocation("uProjectionMatrix"),!1,c.projectionMatrix.toArray(!0));e.uniform1f(w.getUniformLocation("uAlpha"),1);e.uniform4f(w.getUniformLocation("uColorMultiplier"),l.redMultiplier,l.greenMultiplier,l.blueMultiplier,l.alphaMultiplier);e.uniform4f(w.getUniformLocation("uColorOffset"),l.redOffset/255,l.greenOffset/255,l.blueOffset/255,l.alphaOffset/255);u.vertexArray.bind();
w.bindVertexArray(u.vertexArray);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,u.indexBuffer);e.drawElements(e.TRIANGLE_STRIP,u.indices.length,e.UNSIGNED_SHORT,0)}}null!=k&&e.disable(e.SCISSOR_TEST);(l=c.spriteBatch.drawing)||b||c.spriteBatch.begin(c,k)}}};V.updateGraphics=function(a,c,b,e){null==e&&(e=!1);V.objectPosition.setTo(a.get_x(),a.get_y());null==c.__bounds?V.objectBounds=new ya:V.objectBounds.copyFrom(c.__bounds);var f=null;c.__dirty&&(f=$a.getStack(c,b));c.set___dirty(!1);b=0;for(var g=f.buckets;b<
g.length;){var h=g[b];++b;h.reset();V.bucketPool.push(h)}f.reset();b=f.lastIndex;for(g=c.__drawPaths.length;b<g;){var h=b++,h=c.__drawPaths[h],k=h.type;switch(k[1]){case 0:V.buildComplexPoly(h,f,e);break;case 1:k[2]?V.buildRoundedRectangle(h,f,e):V.buildRectangle(h,f,e);break;case 2:case 3:V.buildCircle(h,f,e);break;case 4:V.buildDrawTriangles(h,a,f,e);break;case 5:V.prepareBucket(h,f);break;case 6:V.overrideMatrix=k[2]}f.lastIndex++}a=0;for(c=f.buckets;a<c.length;)e=c[a],++a,e.uploadTileBuffer&&
e.uploadTile(Math.ceil(V.objectBounds.get_left()),Math.ceil(V.objectBounds.get_top()),Math.floor(V.objectBounds.get_right()),Math.floor(V.objectBounds.get_bottom())),e.optimize();f.upload()};V.prepareBucket=function(a,c){var b=null,b=a.fill;switch(b[1]){case 1:var e=b[3],f=b[2],b=V.switchBucket(a.fillIndex,c,Pa.Fill);b.color=null==f?[1,1,1]:[(f>>16&255)/255,(f>>8&255)/255,(f&255)/255];b.color[3]=e;b.uploadTileBuffer=!0;break;case 2:var e=b[5],f=b[4],g=b[3],h=b[2],b=V.switchBucket(a.fillIndex,c,Pa.PatternFill);
b.bitmap=h;b.textureRepeat=f;b.textureSmooth=e;b.texture=h.getTexture(c.gl);b.uploadTileBuffer=!0;e=null==g?new Xa:new Xa(g.a,g.b,g.c,g.d,g.tx,g.ty);e.invert();e.scale(1/h.width,1/h.height);f=e.tx;g=e.ty;e.tx=0;e.ty=0;b.textureTL.x=f;b.textureTL.y=g;b.textureBR.x=f+1;b.textureBR.y=g+1;b.textureMatrix=e;break;default:b=V.switchBucket(a.fillIndex,c,Pa.Line),b.uploadTileBuffer=!1}switch(a.type[1]){case 4:b.mode=Pa.DrawTriangles;b.uploadTileBuffer=!1;break;case 5:b.mode=Pa.DrawTiles,b.uploadTileBuffer=
!1}b.graphicType=a.type;b.overrideMatrix=V.overrideMatrix;return b};V.getBucket=function(a,c){var b=V.bucketPool.pop();null==b&&(b=new Cf(a.gl));b.mode=c;a.buckets.push(b);return b};V.switchBucket=function(a,c,b){for(var e=null,f=0,g=c.buckets;f<g.length;){var h=g[f];++f;if(h.fillIndex==a){e=h;break}}null==e&&(e=V.getBucket(c,b));e.dirty=!0;e.fillIndex=a;return e};V.prepareShader=function(a,c,b,e){var f=c.gl,g=null;switch(a.mode[1]){case 1:g=c.shaderManager.fillShader;break;case 2:g=c.shaderManager.patternFillShader;
break;case 5:g=c.shaderManager.drawTrianglesShader;break;default:g=null}if(null==g)return null;c.shaderManager.setShader(g);f.uniform1f(g.getUniformLocation("uAlpha"),b.__worldAlpha);f.uniformMatrix3fv(g.getUniformLocation("uProjectionMatrix"),!1,c.projectionMatrix.toArray(!0));c=b.__worldColorTransform;f.uniform4f(g.getUniformLocation("uColorMultiplier"),c.redMultiplier,c.greenMultiplier,c.blueMultiplier,c.alphaMultiplier);f.uniform4f(g.getUniformLocation("uColorOffset"),c.redOffset/255,c.greenOffset/
255,c.blueOffset/255,c.alphaOffset/255);switch(a.mode[1]){case 1:f.uniformMatrix3fv(g.getUniformLocation("uTranslationMatrix"),!1,e);f.uniform4fv(g.getUniformLocation("uColor"),function(c){c=a.color;return null!=c?new Float32Array(c):null}(this));break;case 2:f.uniformMatrix3fv(g.getUniformLocation("uTranslationMatrix"),!1,e);f.uniform2f(g.getUniformLocation("uPatternTL"),a.textureTL.x,a.textureTL.y);f.uniform2f(g.getUniformLocation("uPatternBR"),a.textureBR.x,a.textureBR.y);f.uniformMatrix3fv(g.getUniformLocation("uPatternMatrix"),
!1,a.textureMatrix.toArray(!0));break;case 5:null!=a.texture?f.uniform1i(g.getUniformLocation("uUseTexture"),1):(f.uniform1i(g.getUniformLocation("uUseTexture"),0),f.uniform4fv(g.getUniformLocation("uColor"),function(c){c=a.color;return null!=c?new Float32Array(c):null}(this)))}return g};V.renderFill=function(a,c,b){b=b.gl;a.mode==Pa.PatternFill&&null!=a.texture&&V.bindTexture(b,a);b.bindBuffer(b.ARRAY_BUFFER,a.tileBuffer);b.vertexAttribPointer(c.getAttribLocation("aPosition"),4,b.SHORT,!1,0,0);b.drawArrays(b.TRIANGLE_STRIP,
0,4)};V.renderDrawTriangles=function(a,c,b){b=b.gl;for(var e=0,f=a.fills;e<f.length;){var g=f[e];++e;g.available||(V.bindTexture(b,a),g.vertexArray.bind(),c.bindVertexArray(g.vertexArray),b.drawArrays(b.TRIANGLES,g.glStart,g.glLength))}};V.bindTexture=function(a,c){a.bindTexture(a.TEXTURE_2D,c.texture);c.textureRepeat&&c.bitmap.image.get_powerOfTwo()?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,
a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE));c.textureSmooth?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR)):(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST))};V.hex2rgb=function(a){return null==a?[1,1,1]:[(a>>16&255)/255,(a>>8&255)/255,(a&255)/255]};var ee=function(a){this.lastIndex=0;this.gl=a;this.buckets=[];this.lastIndex=
0};k["openfl._internal.renderer.opengl.utils.GLStack"]=ee;ee.__name__=!0;ee.prototype={reset:function(){this.buckets=[];this.lastIndex=0},upload:function(){for(var a=0,c=this.buckets;a<c.length;){var b=c[a];++a;b.dirty&&b.upload()}},__class__:ee};var Cf=function(a){this.textureSmooth=this.uploadTileBuffer=!0;this.textureRepeat=!1;this.lines=[];this.fills=[];this.fillIndex=-1;this.gl=a;this.color=[0,0,0];this.lastIndex=0;this.alpha=1;this.dirty=!0;this.mode=Pa.Fill;this.textureMatrix=new Xa;this.textureTL=
new Na;this.textureBR=new Na(1,1)};k["openfl._internal.renderer.opengl.utils.GLBucket"]=Cf;Cf.__name__=!0;Cf.prototype={getData:function(a){var c;switch(a[1]){case 1:c=this.fills;break;default:c=this.lines}for(var b=null,e=!1,f=0;f<c.length;){var g=c[f];++f;if(g.available){b=g;e=!0;break}}null==b&&(b=new Ic(this.gl));b.available=!1;b.parent=this;b.type=a;e&&N.remove(c,b);c.push(b);switch(a[1]){case 1:switch(this.mode[1]){case 1:case 2:b.vertexArray.attributes=V.fillVertexAttributes;break;case 5:b.vertexArray.attributes=
V.drawTrianglesVertexAttributes.slice(),b.vertexArray.attributes[2]=b.vertexArray.attributes[2].copy()}break;case 0:b.vertexArray.attributes=V.primitiveVertexAttributes}return b},optimize:function(){var a=this.lines;if(1<a.length){for(var c=[],b=null,e=null,f=0,g=0,h=0,k=0;k<a.length;){var l=a[k];++k;if(l.available||l.rawVerts||l.rawIndices)null!=b&&(c.push(b),b=null),c.push(l);else if(null==e||e.drawMode==l.drawMode){if(null==b)b=l;else{for(var g=b.verts.length,h=b.indices.length,e=0,m=l.verts.length;e<
m;){var r=e++;b.verts[r+g]=l.verts[r]}g=0;for(e=l.indices.length;g<e;)m=g++,b.indices[m+h]=l.indices[m]+f}f=b.indices[b.indices.length-1]+1}else null!=b&&(c.push(b),b=null),c.push(l);e=l}0==c.length&&null!=b&&c.push(b);if(0<c.length)switch(nc.Line[1]){case 1:this.fills=c;break;default:this.lines=c}}},reset:function(){for(var a=0,c=this.fills;a<c.length;){var b=c[a];++a;b.reset()}a=0;for(c=this.lines;a<c.length;)b=c[a],++a,b.reset();this.fillIndex=-1;this.uploadTileBuffer=!0;this.graphicType=Aa.Polygon},
uploadTile:function(a,c,b,e){null==this.tileBuffer&&(this.tileBuffer=this.gl.createBuffer());a=this.tile=[a,c,0,0,b,c,1,0,a,e,0,1,b,e,1,1];this.glTile=null!=a?new Int16Array(a):null;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.tileBuffer);this.gl.bufferData(this.gl.ARRAY_BUFFER,this.glTile,this.gl.STATIC_DRAW)},upload:function(){if(this.mode!=Pa.Line)for(var a=0,c=this.fills;a<c.length;){var b=c[a];++a;b.available||b.upload()}a=0;for(c=this.lines;a<c.length;)b=c[a],++a,b.available||b.upload();this.dirty=
!1},__class__:Cf};var Ic=function(a){this.rawIndices=this.available=!1;this.stride=0;this.rawVerts=!1;this.glLength=this.glStart=this.lastVertsSize=0;this.gl=a;this.drawMode=a.TRIANGLE_STRIP;this.verts=[];this.indices=[];this.vertexArray=new Md([])};k["openfl._internal.renderer.opengl.utils.GLBucketData"]=Ic;Ic.__name__=!0;Ic.prototype={reset:function(){this.available=!0;this.verts=[];this.indices=[];this.stride=this.glStart=this.glLength=0;this.rawIndices=this.rawVerts=!1;this.drawMode=this.gl.TRIANGLE_STRIP},
upload:function(){if(this.rawVerts&&null!=this.glVerts&&0<this.glVerts.length||0<this.verts.length){if(!this.rawVerts){var a=this.verts;this.glVerts=null!=a?new Float32Array(a):null}this.vertexArray.buffer=this.glVerts.buffer;this.glVerts.length<=this.lastVertsSize?(this.vertexArray.bind(),a=this.glLength*this.stride,0<this.glLength&&this.lastVertsSize>a?(a=this.glVerts.subarray(0,a),this.vertexArray.upload(a)):this.vertexArray.upload(this.glVerts)):(this.vertexArray.setContext(this.gl,this.glVerts),
this.lastVertsSize=this.glVerts.length)}0==this.glLength&&(this.rawIndices&&null!=this.glIndices&&0<this.glIndices.length||0<this.indices.length)&&(null==this.indexBuffer&&(this.indexBuffer=this.gl.createBuffer()),this.rawIndices||(a=this.indices,this.glIndices=null!=a?new Uint16Array(a):null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.glIndices,this.gl.STREAM_DRAW))},__class__:Ic};var Pa=k["openfl._internal.renderer.opengl.utils.BucketMode"]=
{__ename__:!0,__constructs__:"None Fill PatternFill Line PatternLine DrawTriangles DrawTiles".split(" ")};Pa.None=["None",0];Pa.None.toString=r;Pa.None.__enum__=Pa;Pa.Fill=["Fill",1];Pa.Fill.toString=r;Pa.Fill.__enum__=Pa;Pa.PatternFill=["PatternFill",2];Pa.PatternFill.toString=r;Pa.PatternFill.__enum__=Pa;Pa.Line=["Line",3];Pa.Line.toString=r;Pa.Line.__enum__=Pa;Pa.PatternLine=["PatternLine",4];Pa.PatternLine.toString=r;Pa.PatternLine.__enum__=Pa;Pa.DrawTriangles=["DrawTriangles",5];Pa.DrawTriangles.toString=
r;Pa.DrawTriangles.__enum__=Pa;Pa.DrawTiles=["DrawTiles",6];Pa.DrawTiles.toString=r;Pa.DrawTiles.__enum__=Pa;var nc=k["openfl._internal.renderer.opengl.utils.BucketDataType"]={__ename__:!0,__constructs__:["Line","Fill"]};nc.Line=["Line",0];nc.Line.toString=r;nc.Line.__enum__=nc;nc.Fill=["Fill",1];nc.Fill.toString=r;nc.Fill.__enum__=nc;var cg=function(){};k["openfl._internal.renderer.opengl.utils.GLGraphicsData"]=cg;cg.__name__=!0;var Aa=k["openfl._internal.renderer.opengl.utils.GraphicType"]={__ename__:!0,
__constructs__:"Polygon Rectangle Circle Ellipse DrawTriangles DrawTiles OverrideMatrix".split(" ")};Aa.Polygon=["Polygon",0];Aa.Polygon.toString=r;Aa.Polygon.__enum__=Aa;Aa.Rectangle=function(a){a=["Rectangle",1,a];a.__enum__=Aa;a.toString=r;return a};Aa.Circle=["Circle",2];Aa.Circle.toString=r;Aa.Circle.__enum__=Aa;Aa.Ellipse=["Ellipse",3];Aa.Ellipse.toString=r;Aa.Ellipse.__enum__=Aa;Aa.DrawTriangles=function(a,c,b,e,f,g){a=["DrawTriangles",4,a,c,b,e,f,g];a.__enum__=Aa;a.toString=r;return a};Aa.DrawTiles=
function(a,c,b,e,f){a=["DrawTiles",5,a,c,b,e,f];a.__enum__=Aa;a.toString=r;return a};Aa.OverrideMatrix=function(a){a=["OverrideMatrix",6,a];a.__enum__=Aa;a.toString=r;return a};var la=function(a){this.setContext(a)};k["openfl._internal.renderer.opengl.utils.ShaderManager"]=la;la.__name__=!0;la.prototype={setContext:function(a){this.gl=a;this.defaultShader=new Ye(a);this.fillShader=new Ae(a);this.patternFillShader=new $e(a);this.drawTrianglesShader=new Ze(a);this.primitiveShader=new Rb(a);this.setShader(this.defaultShader,
!0)},setShader:function(a,c){null==c&&(c=!1);if(null==a)return this.currentShader=null,this.gl.useProgram(null),!0;if(null!=this.currentShader&&!c&&this.currentShader.ID==a.ID)return!1;this.currentShader=a;this.gl.useProgram(a.program);return!0},__class__:la};var yd=function(a,c){null==c&&(c=2E3);this.uvs=new Be;this.matrix=new Xa;this.enableColor=this.lastEnableColor=!0;this.attributes=[];this.writtenVertexBytes=0;this.drawing=!1;this.dirty=!0;this.states=[];this.maxSprites=c;this.attributes.push(new Da(2,
5126,!1,"aPosition"));this.attributes.push(new Da(2,5126,!1,"aTexCoord0"));this.attributes.push(new Da(4,5121,!0,"aColor"));var b=[1,1,1,1],b=null!=b?new Float32Array(b):null;this.attributes[2].defaultValue=b;for(var b=this.maxElementsPerVertex=0,e=this.attributes;b<e.length;){var f=e[b];++b;this.maxElementsPerVertex+=Math.floor(f.components*f.getElementsBytes()/4)}this.vertexArraySize=c*this.maxElementsPerVertex*16;this.indexArraySize=6*c;this.vertexArray=new Md(this.attributes,this.vertexArraySize,
!1);b=this.vertexArray.buffer;this.positions=null!=b?new Float32Array(b,0):null;b=this.vertexArray.buffer;this.colors=null!=b?new Uint32Array(b,0):null;b=this.indexArraySize;this.indices=null!=b?new Uint16Array(b):null;for(e=b=0;b<this.indexArraySize;)this.indices[b]=e,this.indices[b+1]=e+1,this.indices[b+2]=e+2,this.indices[b+3]=e,this.indices[b+4]=e+2,this.indices[b+5]=e+3,b+=6,e+=4;this.currentState=new oc;this.dirty=!0;this.drawing=!1;this.batchedSprites=0;this.setContext(a)};k["openfl._internal.renderer.opengl.utils.SpriteBatch"]=
yd;yd.__name__=!0;yd.prototype={begin:function(a,c){this.renderSession=a;this.shader=a.shaderManager.defaultShader;this.drawing=!0;this.start(c)},finish:function(){this.stop();this.clipRect=null;this.drawing=!1},start:function(a){this.drawing||this.stop();this.dirty=!0;this.clipRect=a},stop:function(){this.flush()},renderBitmapData:function(a,c,b,e,f,g,h,k){null==f&&(f=1);if(null!=a){k=a.getTexture(this.gl);this.batchedSprites>=this.maxSprites&&this.flush();var l=a.__uvData;null!=l&&(f=((255*f|0)&
255)<<24|16777215,this.enableColor=!0,this.enableColor!=this.lastEnableColor&&(this.flush(),this.lastEnableColor=this.enableColor),this.attributes[2].enabled=this.lastEnableColor,this.elementsPerVertex=this.getElementsPerVertex(),this.fillVertices(4*this.batchedSprites*this.elementsPerVertex,a.width,a.height,b,l,null,f,h),this.setState(this.batchedSprites,k,c,g,e,!0),this.batchedSprites++)}},renderTiles:function(a,c,b,e,f,g){null==g&&(g=-1);null==f&&(f=0);null==e&&(e=!1);var h=c.__bitmap.getTexture(this.gl);
if(null!=h){var k=0<(f&1),l=0<(f&2),m=0<(f&16),r=0<(f&4),t=0<(f&8),u=0<(f&32),w=0<(f&64);switch(f&983040){case 65536:f=J.ADD;break;case 131072:f=J.MULTIPLY;break;case 262144:f=J.SCREEN;break;case 524288:f=J.SUBTRACT;break;default:switch(f&15728640){case 1048576:f=J.DARKEN;break;case 2097152:f=J.LIGHTEN;break;case 4194304:f=J.OVERLAY;break;case 8388608:f=J.HARDLIGHT;break;default:switch(f&251658240){case 16777216:f=J.DIFFERENCE;break;case 33554432:f=J.INVERT;break;default:f=J.NORMAL}}}m&&(l=k=!1);
var v=0,x=0,z=0,E=0,C=0,H=3;u&&(H=w?8:6);k&&(v=H,H++);l&&(x=H,H++);m&&(C=H,H+=4);r&&(z=H,H+=3);t&&(E=H,H++);var U=b.length;0<=g&&U>g&&(U=g);g=0;var T=-1,pa=c.__rectTile,T=c.__rectUV,da=c.__point,wa=0,vb=0,wb=1,Sa=16777215,wb=-1,Rc=1,zc=0,B=1,Ve=zc=Rc=B=zc=0,A=vb=wa=0,Z=0;this.matrix.identity();var ha=a.__worldTransform;this.uvs.reset();vb=0;this.enableColor=!0;this.enableColor!=this.lastEnableColor&&(this.flush(),this.lastEnableColor=this.enableColor);this.attributes[2].enabled=this.lastEnableColor;
for(this.elementsPerVertex=this.getElementsPerVertex();g<U;)this.batchedSprites>=this.maxSprites&&this.flush(),wa=b[g],vb=b[g+1],u?(pa.x=b[g+2],pa.y=b[g+3],pa.width=b[g+4],pa.height=b[g+5],w?(da.x=b[g+6],da.y=b[g+7]):(da.x=0,da.y=0),T.setTo(pa.get_left()/c.__bitmap.width,pa.get_top()/c.__bitmap.height,pa.get_right()/c.__bitmap.width,pa.get_bottom()/c.__bitmap.height)):(T=(null==b[g+2]?0:b[g+2])|0,pa=c.__tileRects[T],da=c.__centerPoints[T],T=c.__tileUVs[T]),null!=pa&&0<pa.width&&0<pa.height&&null!=
da&&(Sa=16777215,B=Rc=1,zc=0,this.matrix.identity(),wb=t?b[g+E]*a.__worldAlpha:a.__worldAlpha,r&&(Sa=(255*b[g+z]|0)<<16|(255*b[g+z+1]|0)<<8|255*b[g+z+2]|0),k&&(Rc=b[g+v]),l&&(zc=b[g+x],B=Math.cos(zc),zc=Math.sin(zc)),m?(B=b[g+C],Rc=b[g+C+1],zc=b[g+C+2],Ve=b[g+C+3]):(B*=Rc,Rc*=zc,zc=-Rc,Ve=B),A=da.x*B+da.y*zc,Z=da.x*Rc+da.y*Ve,wa-=A,vb-=Z,this.matrix.a=B*ha.a+Rc*ha.c,this.matrix.b=B*ha.b+Rc*ha.d,this.matrix.c=zc*ha.a+Ve*ha.c,this.matrix.d=zc*ha.b+Ve*ha.d,this.matrix.tx=wa*ha.a+vb*ha.c+ha.tx,this.matrix.ty=
wa*ha.b+vb*ha.d+ha.ty,this.uvs.x0=T.x,this.uvs.y0=T.y,this.uvs.x1=T.width,this.uvs.y1=T.y,this.uvs.x2=T.width,this.uvs.y2=T.height,this.uvs.x3=T.x,this.uvs.y3=T.height,vb=4*this.batchedSprites*this.elementsPerVertex,wb=((255*wb|0)&255)<<24|(Sa&255)<<16|(Sa>>8&255)<<8|Sa>>16&255,this.fillVertices(vb,pa.width,pa.height,this.matrix,this.uvs,null,wb,hc.NEVER),this.setState(this.batchedSprites,h,e,f,a.__worldColorTransform,!1),this.batchedSprites++),g+=H}},fillVertices:function(a,c,b,e,f,g,h,k){null==
h&&(h=-1);var l,m,r;null==g?(l=c,c=0,m=b,r=0):(l=c*(1-g.x),c*=-g.x,m=b*(1-g.y),r=b*-g.y);null==k&&(k=hc.NEVER);var t=k!=hc.NEVER;g=e.a;k=e.b;var u=e.c;b=e.d;var w=e.tx;e=e.ty;if(t){var v=a++,x=Math.round(g*c+u*r+w);this.positions[v]=x;v=a++;x=Math.round(b*r+k*c+e);this.positions[v]=x}else v=a++,this.positions[v]=g*c+u*r+w,v=a++,this.positions[v]=b*r+k*c+e;v=a++;this.positions[v]=f.x0;v=a++;this.positions[v]=f.y0;this.enableColor&&(v=a++,this.colors[v]=h);t?(v=a++,x=Math.round(g*l+u*r+w),this.positions[v]=
x,v=a++,r=Math.round(b*r+k*l+e),this.positions[v]=r):(v=a++,this.positions[v]=g*l+u*r+w,v=a++,this.positions[v]=b*r+k*l+e);r=a++;this.positions[r]=f.x1;r=a++;this.positions[r]=f.y1;this.enableColor&&(r=a++,this.colors[r]=h);t?(r=a++,v=Math.round(g*l+u*m+w),this.positions[r]=v,r=a++,l=Math.round(b*m+k*l+e),this.positions[r]=l):(r=a++,this.positions[r]=g*l+u*m+w,r=a++,this.positions[r]=b*m+k*l+e);l=a++;this.positions[l]=f.x2;l=a++;this.positions[l]=f.y2;this.enableColor&&(l=a++,this.colors[l]=h);t?
(l=a++,g=Math.round(g*c+u*m+w),this.positions[l]=g,g=a++,c=Math.round(b*m+k*c+e),this.positions[g]=c):(l=a++,this.positions[l]=g*c+u*m+w,g=a++,this.positions[g]=b*m+k*c+e);c=a++;this.positions[c]=f.x3;c=a++;this.positions[c]=f.y3;this.enableColor&&(f=a++,this.colors[f]=h);this.writtenVertexBytes=a},flush:function(){if(0!=this.batchedSprites){null!=this.clipRect&&(this.gl.enable(this.gl.SCISSOR_TEST),this.gl.scissor(Math.ceil(this.clipRect.x),Math.ceil(this.clipRect.y),Math.ceil(this.clipRect.width),
Math.ceil(this.clipRect.height)));this.dirty&&(this.dirty=!1,this.gl.activeTexture(this.gl.TEXTURE0),this.vertexArray.bind(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer));if(this.writtenVertexBytes>0.5*this.vertexArraySize)this.vertexArray.upload(this.positions);else{var a=this.positions.subarray(0,this.writtenVertexBytes);this.vertexArray.upload(a)}var c=0,b=0;this.currentState.shader=this.renderSession.shaderManager.defaultShader;this.currentState.texture=null;this.currentState.textureSmooth=
!1;this.currentState.blendMode=this.renderSession.blendModeManager.currentBlendMode;this.currentState.colorTransform=null;this.currentState.skipColorTransformAlpha=!1;for(var e=0,f=this.batchedSprites;e<f;){var g=e++,a=this.states[g];this.currentState.skipColorTransformAlpha=a.skipColorTransformAlpha;a.equals(this.currentState)||(this.renderBatch(this.currentState,c,b),b=g,c=0,this.currentState.shader=a.shader,this.currentState.texture=a.texture,this.currentState.textureSmooth=a.textureSmooth,this.currentState.blendMode=
a.blendMode,this.currentState.colorTransform=a.colorTransform);c++}this.renderBatch(this.currentState,c,b);this.writtenVertexBytes=this.batchedSprites=0;null!=this.clipRect&&this.gl.disable(this.gl.SCISSOR_TEST)}},renderBatch:function(a,c,b){if(0!=c&&null!=a.texture){var e;e=null==a.shader?this.renderSession.shaderManager.defaultShader:a.shader;this.renderSession.shaderManager.setShader(e);e.bindVertexArray(this.vertexArray);this.gl.uniformMatrix3fv(e.getUniformLocation("uProjectionMatrix"),!1,this.renderSession.projectionMatrix.toArray(!0));
if(null!=a.colorTransform){var f=a.colorTransform;this.gl.uniform4f(e.getUniformLocation("uColorMultiplier"),f.redMultiplier,f.greenMultiplier,f.blueMultiplier,a.skipColorTransformAlpha?1:f.alphaMultiplier);this.gl.uniform4f(e.getUniformLocation("uColorOffset"),f.redOffset/255,f.greenOffset/255,f.blueOffset/255,f.alphaOffset/255)}else this.gl.uniform4f(e.getUniformLocation("uColorMultiplier"),1,1,1,1),this.gl.uniform4f(e.getUniformLocation("uColorOffset"),0,0,0,0);this.renderSession.blendModeManager.setBlendMode(a.blendMode);
this.gl.bindTexture(this.gl.TEXTURE_2D,a.texture);a.textureSmooth?(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR)):(this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.NEAREST),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.NEAREST));this.gl.drawElements(this.gl.TRIANGLES,6*c,this.gl.UNSIGNED_SHORT,12*b);this.renderSession.drawCount++}},
setState:function(a,c,b,e,f,g){null==g&&(g=!1);null==b&&(b=!1);var h=this.states[a];null==h&&(h=this.states[a]=new oc);h.texture=c;h.textureSmooth=b;h.blendMode=e;h.colorTransform=f;h.skipColorTransformAlpha=g},setContext:function(a){this.gl=a;this.vertexArray.setContext(a,this.positions);this.indexBuffer=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.indexBuffer);a.bufferData(a.ELEMENT_ARRAY_BUFFER,this.indices,a.STATIC_DRAW)},getElementsPerVertex:function(){for(var a=0,c=0,b=this.attributes;c<
b.length;){var e=b[c];++c;e.enabled&&(a+=Math.floor(e.components*e.getElementsBytes()/4))}return a},__class__:yd};var oc=function(){this.skipColorTransformAlpha=!1;this.textureSmooth=!0};k["openfl._internal.renderer.opengl.utils._SpriteBatch.State"]=oc;oc.__name__=!0;oc.prototype={equals:function(a){return(null==this.shader||null==a.shader||this.shader.ID==a.shader.ID)&&this.texture==a.texture&&this.textureSmooth==a.textureSmooth&&this.blendMode==a.blendMode&&null!=this.colorTransform&&this.colorTransform.__equals(a.colorTransform,
this.skipColorTransformAlpha)},__class__:oc};var Sc=function(a){this.stencilMask=0;this.stencilStack=[];this.setContext(a);this.reverse=!0;this.count=0};k["openfl._internal.renderer.opengl.utils.StencilManager"]=Sc;Sc.__name__=!0;Sc.prototype={prepareGraphics:function(a,c,b){var e=c.shaderManager.fillShader;c.shaderManager.setShader(e);this.gl.uniformMatrix3fv(e.getUniformLocation("uTranslationMatrix"),!1,b);this.gl.uniformMatrix3fv(e.getUniformLocation("uProjectionMatrix"),!1,c.projectionMatrix.toArray(!0));
a.vertexArray.bind();e.bindVertexArray(a.vertexArray);this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.indexBuffer)},pushBucket:function(a,c,b,e){null==e&&(e=!1);e||(this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT),this.gl.stencilMask(255),this.gl.colorMask(!1,!1,!1,!1),this.gl.stencilFunc(this.gl.NEVER,1,255),this.gl.stencilOp(this.gl.INVERT,this.gl.KEEP,this.gl.KEEP),this.gl.clear(this.gl.STENCIL_BUFFER_BIT));var f=0;for(a=a.fills;f<a.length;){var g=a[f];++f;g.available||
(this.prepareGraphics(g,c,b),this.gl.drawElements(g.drawMode,g.glIndices.length,this.gl.UNSIGNED_SHORT,0))}e||(this.gl.colorMask(!0,!0,!0,c.renderer.transparent),this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP),this.gl.stencilFunc(this.gl.EQUAL,255,255))},popBucket:function(a,c,b){this.gl.disable(this.gl.STENCIL_TEST)},pushMask:function(a,c){var b=a.__maskGraphics;if(!(null==b||0>=b.__commands.get_length())){0==this.stencilMask&&(this.gl.enable(this.gl.STENCIL_TEST),this.gl.clear(this.gl.STENCIL_BUFFER_BIT));
this.stencilMask++;b.__dirty&&V.updateGraphics(a,b,c.gl);var e;e=1==this.stencilMask?this.gl.NEVER:this.gl.EQUAL;var f=this.stencilMask,g=255-this.stencilMask;this.gl.stencilMask(255);this.gl.colorMask(!1,!1,!1,!1);this.gl.stencilFunc(e,f,g);this.gl.stencilOp(this.gl.REPLACE,this.gl.KEEP,this.gl.KEEP);var b=b.__glStack[Eb.glContextId],h=a.__worldTransform;e=0;for(f=b.buckets.length;e<f;)switch(g=e++,g=b.buckets[g],h=null!=g.overrideMatrix?g.overrideMatrix:a.__worldTransform,g.mode[1]){case 1:case 2:this.pushBucket(g,
c,h.toArray(!0),!0)}this.gl.colorMask(!0,!0,!0,c.renderer.transparent);this.gl.stencilOp(this.gl.KEEP,this.gl.KEEP,this.gl.KEEP);this.gl.stencilFunc(this.gl.EQUAL,this.stencilMask,255)}},popMask:function(a,b){this.stencilMask--;0>=this.stencilMask&&(this.gl.disable(this.gl.STENCIL_TEST),this.stencilMask=0)},setContext:function(a){this.gl=a},__class__:Sc};var Md=function(a,b,d){null==d&&(d=!1);null==b&&(b=0);this.isStatic=!1;this.size=0;this.attributes=[];this.size=b;this.attributes=a;0<b&&(this.buffer=
new le(b));this.isStatic=d};k["openfl._internal.renderer.opengl.utils.VertexArray"]=Md;Md.__name__=!0;Md.prototype={bind:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.glBuffer)},upload:function(a){this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,a)},setContext:function(a,b){this.gl=a;this.glBuffer=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.glBuffer);a.bufferData(a.ARRAY_BUFFER,b,this.isStatic?a.STATIC_DRAW:a.DYNAMIC_DRAW)},get_stride:function(){for(var a=0,b=0,d=this.attributes;b<d.length;){var e=
d[b];++b;e.enabled&&(a+=4*Math.floor(e.components*e.getElementsBytes()/4))}return a},__class__:Md,__properties__:{get_stride:"get_stride"}};var jb=function(a){this.textField=a;this.height=this.width=100;this.text="";this.bounds=new ya(0,0,0,0);this.type=Zc.DYNAMIC;this.autoSize=Bb.NONE;this.embedFonts=this.displayAsPassword=!1;this.selectable=!0;this.borderColor=0;this.border=!1;this.backgroundColor=16777215;this.background=!1;this.gridFitType=kc.PIXEL;this.maxChars=0;this.multiline=!1;this.scrollH=
this.sharpness=0;this.scrollV=1;this.wordWrap=!1;this.lineAscents=[];this.lineBreaks=[];this.lineDescents=[];this.lineLeadings=[];this.lineHeights=[];this.lineWidths=[];this.layoutGroups=[];this.textFormatRanges=[];jb.__canvas=window.document.createElement("canvas");jb.__context=jb.__canvas.getContext("2d")};k["openfl._internal.text.TextEngine"]=jb;jb.__name__=!0;jb.__canvas=null;jb.__context=null;jb.getFont=function(a){var b;b=a.italic?"italic ":"normal ";b+="normal ";b=a.bold?b+"bold ":b+"normal ";
b+=a.size+"px";b+="/"+(a.size+a.leading+6)+"px ";switch(a.font){case "_sans":a="sans-serif";break;case "_serif":a="serif";break;case "_typewriter":a="monospace";break;default:a="'"+a.font+"'"}return b+=""+a};jb.prototype={getBounds:function(){var a;a=this.border?1:0;this.bounds.width=this.width+a;this.bounds.height=this.height+a},getLineMeasurements:function(){this.lineAscents.splice(0,this.lineAscents.length);this.lineDescents.splice(0,this.lineDescents.length);this.lineLeadings.splice(0,this.lineLeadings.length);
this.lineHeights.splice(0,this.lineHeights.length);this.lineWidths.splice(0,this.lineWidths.length);var a=0,b=0,d=null,e=0,f=0;this.textHeight=this.textWidth=0;this.numLines=1;for(var g=this.maxScrollH=this.bottomScrollV=0,h=this.layoutGroups;g<h.length;){var k=h[g];for(++g;k.lineIndex>this.numLines-1;)this.lineAscents.push(a),this.lineDescents.push(b),this.lineLeadings.push(null!=d?d:0),this.lineHeights.push(e),this.lineWidths.push(f),b=a=0,d=null,f=e=0,this.numLines++,this.textHeight<=this.height-
2&&this.bottomScrollV++;a=Math.max(a,k.ascent);b=Math.max(b,k.descent);d=null==d?k.leading:X["int"](Math.max(d,k.leading));e=Math.max(e,k.height);f=k.offsetX-2+k.width;f>this.textWidth&&(this.textWidth=f);this.textHeight=k.offsetY-2+k.ascent+k.descent}this.lineAscents.push(a);this.lineDescents.push(b);this.lineLeadings.push(null!=d?d:0);this.lineHeights.push(e);this.lineWidths.push(f);1==this.numLines?(this.bottomScrollV=1,0<d&&(this.textHeight+=d)):this.textHeight<=this.height-2&&this.bottomScrollV++;
this.maxScrollH=this.textWidth>this.width-4?this.textWidth-this.width+4|0:0;this.maxScrollV=this.numLines-this.bottomScrollV+1},getLayoutGroups:function(){this.layoutGroups.splice(0,this.layoutGroups.length);var a=-1,b=null,d=Ib.__defaultTextFormat.clone(),e=0,f=0,g=0,h,k,l,m=0,r=0,t=0,u=this.text.indexOf(" "),v=this.text.indexOf("\n"),w=0,x=2,z=2,E=0,C=0,H=null;a<this.textFormatRanges.length-1&&(a++,b=this.textFormatRanges[a],d.__merge(b.format),jb.__context.font=jb.getFont(d),f=d.size,g=0.185*d.size,
e=d.leading,m=f+g+e,-1<u&&(r=jb.__context.measureText(" ").width));for(var H=b.format,U;E<this.text.length;)if(-1<v&&(-1==u||v<u)&&b.end>=v){h=new Ce(b.format,E,v);k=this.text;for(U=[];E<v;)l=E++,U.push(jb.__context.measureText(k.charAt(l)).width);h.advances=U;h.offsetX=x;h.ascent=f;h.descent=g;h.leading=e;h.lineIndex=C;h.offsetY=z;x=h.advances;for(k=E=0;k<x.length;)U=x[k],++k,E+=U;h.width=E;h.height=m;this.layoutGroups.push(h);z+=m;x=2;this.wordWrap&&h.offsetX+h.width>this.width-2&&(h.offsetY=z,
h.offsetX=x,z+=m,C++);E=v+1;v=this.text.indexOf("\n",E);C++;b.end==v&&(a<this.textFormatRanges.length-1&&(a++,b=this.textFormatRanges[a],d.__merge(b.format),jb.__context.font=jb.getFont(d),f=d.size,g=0.185*d.size,e=d.leading,m=f+g+e,-1<u&&(r=jb.__context.measureText(" ").width)),H=b.format)}else if(b.end>=u&&-1<u)for(h=null,U=!1;;){-1==u&&(u=b.end);k=this.text;l=[];for(var T=E;T<u;){var pa=T++;l.push(jb.__context.measureText(k.charAt(pa)).width)}k=l;for(T=l=0;T<k.length;)pa=k[T],++T,l+=pa;this.wordWrap&&
x+l>this.width-2&&(U=!0);if(U){z+=m;x=this.layoutGroups.length-1;for(w=0;;){h=this.layoutGroups[x];if(0<x&&h.startIndex>t)w++;else break;x--}C++;x=2;if(0<w)for(t=this.layoutGroups[this.layoutGroups.length-w].offsetX,w=this.layoutGroups.length-w,U=this.layoutGroups.length;w<U;)h=w++,h=this.layoutGroups[h],h.offsetX-=t,h.offsetY=z,h.lineIndex=C,x+=h.width;h=new Ce(b.format,E,u);h.advances=k;h.offsetX=x;h.ascent=f;h.descent=g;h.leading=e;h.lineIndex=C;h.offsetY=z;h.width=l;h.height=m;this.layoutGroups.push(h);
x=l+r;w=r;U=!1}else null!=h&&E==u?(b.format.align!=Jb.JUSTIFY&&(h.endIndex=u),h.advances.push(r),w+=r):(null==h||H.align==Jb.JUSTIFY?(h=new Ce(b.format,E,u),h.advances=k,h.offsetX=x,h.ascent=f,h.descent=g,h.leading=e,h.lineIndex=C,h.offsetY=z,h.width=l,h.height=m,this.layoutGroups.push(h)):(h.endIndex=u,h.advances=h.advances.concat(k),h.width+=w+l),h.advances.push(r),w=r),x+=l+r;E=u+1;t=u;u=this.text.indexOf(" ",t+1);b.end<=t&&(h=null,a<this.textFormatRanges.length-1&&(a++,b=this.textFormatRanges[a],
d.__merge(b.format),jb.__context.font=jb.getFont(d),f=d.size,g=0.185*d.size,e=d.leading,m=f+g+e,-1<u&&(r=jb.__context.measureText(" ").width)));if(u>v&&-1<v||E>this.text.length||u>b.end||-1==u&&-1<v)break}else{if(E>=b.end)break;h=new Ce(b.format,E,b.end);k=this.text;for(U=[];E<b.end;)l=E++,U.push(jb.__context.measureText(k.charAt(l)).width);h.advances=U;h.offsetX=x;h.ascent=f;h.descent=g;h.leading=e;h.lineIndex=C;h.offsetY=z;E=h.advances;for(U=k=0;U<E.length;)l=E[U],++U,k+=l;h.width=k;h.height=m;
this.layoutGroups.push(h);x+=h.width;E=b.end;a<this.textFormatRanges.length-1&&(a++,b=this.textFormatRanges[a],d.__merge(b.format),jb.__context.font=jb.getFont(d),f=d.size,g=0.185*d.size,e=d.leading,m=f+g+e,-1<u&&(r=jb.__context.measureText(" ").width))}},setTextAlignment:function(){for(var a=-1,b=0,d,e,f=0,g=this.layoutGroups.length;f<g;){var h=f++;d=this.layoutGroups[h];if(d.lineIndex!=a)switch(a=d.lineIndex,d.format.align[1]){case 3:b=this.lineWidths[a]<this.width-4?Math.round((this.width-4-this.lineWidths[a])/
2):0;break;case 1:b=this.lineWidths[a]<this.width-4?Math.round(this.width-4-this.lineWidths[a]):0;break;case 2:if(this.lineWidths[a]<this.width-4){e=1;for(var b=h+1,k=this.layoutGroups.length;b<k;){var l=b++;if(this.layoutGroups[l].lineIndex==a)e++;else break}if(1<e&&(d=this.layoutGroups[h+e-1],d.endIndex<this.text.length&&"\n"!=this.text.charAt(d.endIndex)))for(b=(this.width-4-this.lineWidths[a])/(e-1),k=1;k<e;)l=k++,this.layoutGroups[h+l].offsetX+=b*l}b=0;break;default:b=0}0<b&&(d.offsetX+=b)}},
update:function(){null==this.text||""==na.trim(this.text)||0==this.textFormatRanges.length?(this.lineAscents.splice(0,this.lineAscents.length),this.lineBreaks.splice(0,this.lineBreaks.length),this.lineDescents.splice(0,this.lineDescents.length),this.lineLeadings.splice(0,this.lineLeadings.length),this.lineHeights.splice(0,this.lineHeights.length),this.lineWidths.splice(0,this.lineWidths.length),this.layoutGroups.splice(0,this.layoutGroups.length),this.textHeight=this.textWidth=0,this.numLines=1,this.maxScrollH=
0,this.bottomScrollV=this.maxScrollV=1):(this.getLayoutGroups(),this.getLineMeasurements(),this.setTextAlignment());this.getBounds()},__class__:jb};var fe=function(a,b,d){this.format=a;this.start=b;this.end=d};k["openfl._internal.text.TextFormatRange"]=fe;fe.__name__=!0;fe.prototype={__class__:fe};var Ce=function(a,b,d){this.format=a;this.startIndex=b;this.endIndex=d};k["openfl._internal.text.TextLayoutGroup"]=Ce;Ce.__name__=!0;Ce.prototype={__class__:Ce};var cf=function(){Ab.call(this);null==La.application&&
(La.application=this)};k["openfl.display.Application"]=cf;cf.__name__=!0;cf.__super__=Ab;cf.prototype=l(Ab.prototype,{create:function(a){this.config=a;this.backend.create(a);if(null!=a){Object.prototype.hasOwnProperty.call(a,"fps")&&this.backend.setFrameRate(a.fps);if(Object.prototype.hasOwnProperty.call(a,"windows"))for(a=a.windows;0<a.length;){a=new Ac(a[0]);this.createWindow(a);break}if(null==this.preloader||this.preloader.complete)this.onPreloadComplete()}},__class__:cf});var ke=function(a,b,
d){null==d&&(d=!1);z.call(this);this.bitmapData=a;this.pixelSnapping=b;this.smoothing=d;null==b&&(this.pixelSnapping=hc.AUTO)};k["openfl.display.Bitmap"]=ke;ke.__name__=!0;ke.__super__=z;ke.prototype=l(z.prototype,{__getBounds:function(a,b){if(null!=this.bitmapData){var d=ya.__temp;d.setTo(0,0,this.bitmapData.width,this.bitmapData.height);d.__transform(d,b);a.__expand(d.x,d.y,d.width,d.height)}},__hitTest:function(a,b,d,e,f){if(!this.get_visible()||this.__isMask||null==this.bitmapData||null!=this.get_mask()&&
!this.get_mask().__hitTestMask(a,b))return!1;this.__getWorldTransform();d=this.__worldTransform.__transformInverseX(a,b);a=this.__worldTransform.__transformInverseY(a,b);return 0<d&&0<a&&d<=this.bitmapData.width&&a<=this.bitmapData.height?(null==e||f||e.push(this),!0):!1},__hitTestMask:function(a,b){if(null==this.bitmapData)return!1;this.__getWorldTransform();var d=this.__worldTransform.__transformInverseX(a,b),e=this.__worldTransform.__transformInverseY(a,b);return 0<d&&0<e&&d<=this.bitmapData.width&&
e<=this.bitmapData.height?!0:!1},__renderCairo:function(a){xe.render(this,a)},__renderCairoMask:function(a){a.cairo.rectangle(0,0,this.get_width(),this.get_height())},__renderCanvas:function(a){Bf.render(this,a)},__renderCanvasMask:function(a){a.context.rect(0,0,this.get_width(),this.get_height())},__renderDOM:function(a){null!=this.stage&&this.__worldVisible&&this.__renderable&&null!=this.bitmapData&&this.bitmapData.__isValid?null!=this.bitmapData.image.buffer.__srcImage?ze.renderImage(this,a):ze.renderCanvas(this,
a):(null!=this.__image&&(a.element.removeChild(this.__image),this.__style=this.__image=null),null!=this.__canvas&&(a.element.removeChild(this.__canvas),this.__style=this.__canvas=null))},__renderGL:function(a){null!=this.__scrollRect&&a.maskManager.pushRect(this.__scrollRect,this.__renderTransform);null!=this.__mask&&null!=this.__maskGraphics&&0<this.__maskGraphics.__commands.get_length()&&a.maskManager.pushMask(this);!this.__renderable||0>=this.__worldAlpha||null==this.bitmapData||!this.bitmapData.__isValid?
null:a.spriteBatch.renderBitmapData(this.bitmapData,this.smoothing,this.__renderTransform,this.__worldColorTransform,this.__worldAlpha,this.__blendMode,this.pixelSnapping);null!=this.__mask&&null!=this.__maskGraphics&&0<this.__maskGraphics.__commands.get_length()&&a.maskManager.popMask();null!=this.__scrollRect&&a.maskManager.popRect()},__updateMask:function(a){a.__commands.overrideMatrix(this.__worldTransform);a.beginFill(0);a.drawRect(0,0,this.bitmapData.width,this.bitmapData.height);null==a.__bounds&&
(a.__bounds=new ya);this.__getBounds(a.__bounds,Xa.__identity);z.prototype.__updateMask.call(this,a)},get_height:function(){return null!=this.bitmapData?this.bitmapData.height*this.get_scaleY():0},set_height:function(a){return null!=this.bitmapData?(a!=this.bitmapData.height&&this.set_scaleY(a/this.bitmapData.height),a):0},get_width:function(){return null!=this.bitmapData?this.bitmapData.width*this.get_scaleX():0},set_width:function(a){return null!=this.bitmapData?(a!=this.bitmapData.width&&this.set_scaleX(a/
this.bitmapData.width),a):0},__class__:ke});var fb=function(a,b,d,e){null==e&&(e=-1);null==d&&(d=!0);this.__usingFramebuffer=!1;this.transparent=d;null==a&&(a=0);null==b&&(b=0);0>a&&(a=0);0>b&&(b=0);this.width=a;this.height=b;this.rect=new ya(0,0,a,b);0<a&&0<b&&(d?0==(e&-16777216)&&(e=0):e=-16777216|e&16777215,this.image=new Mc(null,0,0,a,b,e<<8|e>>24&255),this.image.set_transparent(d),this.__isValid=!0);this.__createUVs();this.__worldTransform=new Xa;this.__worldColorTransform=new pc};k["openfl.display.BitmapData"]=
fb;fb.__name__=!0;fb.__interfaces__=[Z];fb.fromCanvas=function(a,b){null==b&&(b=!0);if(null==a)return null;var d=new fb(0,0,b);d.__fromImage(Mc.fromCanvas(a));d.image.set_transparent(b);return d};fb.fromImage=function(a,b){null==b&&(b=!0);if(null==a||null==a.buffer)return null;var d=new fb(0,0,b);d.__fromImage(a);d.image.set_transparent(b);return d};fb.prototype={colorTransform:function(a,b){this.__isValid&&(this.image.colorTransform(a.__toLimeRectangle(),b.__toLimeColorMatrix()),this.__usingFramebuffer=
!1)},copyPixels:function(a,b,d,e,f,g){null==g&&(g=!1);this.__isValid&&null!=a&&(this.image.copyPixels(a.image,b.__toLimeRectangle(),d.__toLimeVector2(),null!=e?e.image:null,null!=f?f.__toLimeVector2():null,g),this.__usingFramebuffer=!1)},dispose:function(){this.image=null;this.height=this.width=0;this.rect=null;this.__isValid=!1;if(null!=this.__texture){var a=La.current.stage.__renderer;null!=a&&(a=a.renderSession.gl,null!=a&&(a.deleteTexture(this.__texture),this.__texture=null))}null!=this.__framebuffer&&
(this.__framebuffer.destroy(),this.__framebuffer=null)},draw:function(a,b,d,e,f,g){null==g&&(g=!1);if(this.__isValid){null!=d&&(e=new fb(ma.getProperty(a,"width"),ma.getProperty(a,"height"),!0,0),e.draw(a),e.colorTransform(e.rect,d),a=e);ia.convertToCanvas(this.image);ia.sync(this.image,!0);d=this.image.buffer;e=new xd;e.context=d.__srcContext;e.roundPixels=!0;e.maskManager=new Za(e);g||(d.__srcContext.mozImageSmoothingEnabled=!1,d.__srcContext.msImageSmoothingEnabled=!1,d.__srcContext.imageSmoothingEnabled=
!1);null!=f&&e.maskManager.pushRect(f,new Xa);var h=a.__worldTransform;a.__worldTransform=null!=b?b:new Xa;a.__updateChildren(!1);a.__renderCanvas(e);a.__worldTransform=h;a.__updateChildren(!0);g||(d.__srcContext.mozImageSmoothingEnabled=!0,d.__srcContext.msImageSmoothingEnabled=!0,d.__srcContext.imageSmoothingEnabled=!0);null!=f&&e.maskManager.popMask();d.__srcContext.setTransform(1,0,0,1,0,0);d.__srcImageData=null;d.data=null}},fillRect:function(a,b){this.__isValid&&null!=a&&(this.image.fillRect(a.__toLimeRectangle(),
b,1),this.__usingFramebuffer=!1)},getPixel:function(a,b){return this.__isValid?this.image.getPixel(a,b,1):0},getPixel32:function(a,b){return this.__isValid?this.image.getPixel32(a,b,1):0},getSurface:function(){if(!this.__isValid)return null;null==this.__surface&&(this.__surface=Yd.fromImage(this.image));return this.__surface},getTexture:function(a){if(!this.__isValid)return null;if(this.__usingFramebuffer&&null!=this.__framebuffer)return this.__framebuffer.texture;null==this.__texture&&(this.__texture=
a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.__texture),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),this.image.dirty=!0);if(null!=this.image&&this.image.dirty){var b,d;null!=this.__surface&&ue.flush(this.__surface);d=1==this.image.buffer.bitsPerPixel?b=a.ALPHA:b=a.RGBA;a.bindTexture(a.TEXTURE_2D,
this.__texture);var e=this.image;if(!e.get_premultiplied()&&e.get_transparent()||0!=e.get_format())e=e.clone(),e.set_format(0),e.set_premultiplied(!0);a.texImage2D(a.TEXTURE_2D,0,b,this.width,this.height,0,d,a.UNSIGNED_BYTE,e.get_data());a.bindTexture(a.TEXTURE_2D,null);this.image.dirty=!1}return this.__texture},lock:function(){},setPixel32:function(a,b,d){this.__isValid&&(this.image.setPixel32(a,b,d,1),this.__usingFramebuffer=!1)},unlock:function(a){},__createUVs:function(){null==this.__uvData&&
(this.__uvData=new Be);this.__uvData.x0=0;this.__uvData.y0=0;this.__uvData.x1=1;this.__uvData.y1=0;this.__uvData.x2=1;this.__uvData.y2=1;this.__uvData.x3=0;this.__uvData.y3=1},__fromImage:function(a){null!=a&&null!=a.buffer&&(this.image=a,this.width=a.width,this.height=a.height,this.rect=new ya(0,0,a.width,a.height),this.__isValid=!0)},__renderCanvas:function(a){if(this.__isValid){ia.sync(this.image,!1);var b=a.context;null==this.__worldTransform&&(this.__worldTransform=new Xa);b.globalAlpha=1;var d=
this.__worldTransform;a.roundPixels?b.setTransform(d.a,d.b,d.c,d.d,d.tx|0,d.ty|0):b.setTransform(d.a,d.b,d.c,d.d,d.tx,d.ty);b.drawImage(this.image.get_src(),0,0)}},__sync:function(){ia.sync(this.image,!1)},__updateChildren:function(a){},__class__:fb};var Be=function(){this.x0=this.x1=this.x2=this.x3=this.y0=this.y1=this.y2=this.y3=0};k["openfl.display.TextureUvs"]=Be;Be.__name__=!0;Be.prototype={reset:function(){this.x0=this.x1=this.x2=this.x3=this.y0=this.y1=this.y2=this.y3=0},__class__:Be};var J=
k["openfl.display.BlendMode"]={__ename__:!0,__constructs__:"ADD ALPHA DARKEN DIFFERENCE ERASE HARDLIGHT INVERT LAYER LIGHTEN MULTIPLY NORMAL OVERLAY SCREEN SUBTRACT".split(" ")};J.ADD=["ADD",0];J.ADD.toString=r;J.ADD.__enum__=J;J.ALPHA=["ALPHA",1];J.ALPHA.toString=r;J.ALPHA.__enum__=J;J.DARKEN=["DARKEN",2];J.DARKEN.toString=r;J.DARKEN.__enum__=J;J.DIFFERENCE=["DIFFERENCE",3];J.DIFFERENCE.toString=r;J.DIFFERENCE.__enum__=J;J.ERASE=["ERASE",4];J.ERASE.toString=r;J.ERASE.__enum__=J;J.HARDLIGHT=["HARDLIGHT",
5];J.HARDLIGHT.toString=r;J.HARDLIGHT.__enum__=J;J.INVERT=["INVERT",6];J.INVERT.toString=r;J.INVERT.__enum__=J;J.LAYER=["LAYER",7];J.LAYER.toString=r;J.LAYER.__enum__=J;J.LIGHTEN=["LIGHTEN",8];J.LIGHTEN.toString=r;J.LIGHTEN.__enum__=J;J.MULTIPLY=["MULTIPLY",9];J.MULTIPLY.toString=r;J.MULTIPLY.__enum__=J;J.NORMAL=["NORMAL",10];J.NORMAL.toString=r;J.NORMAL.__enum__=J;J.OVERLAY=["OVERLAY",11];J.OVERLAY.toString=r;J.OVERLAY.__enum__=J;J.SCREEN=["SCREEN",12];J.SCREEN.toString=r;J.SCREEN.__enum__=J;J.SUBTRACT=
["SUBTRACT",13];J.SUBTRACT.toString=r;J.SUBTRACT.__enum__=J;var sc=k["openfl.display.CapsStyle"]={__ename__:!0,__constructs__:["NONE","ROUND","SQUARE"]};sc.NONE=["NONE",0];sc.NONE.toString=r;sc.NONE.__enum__=sc;sc.ROUND=["ROUND",1];sc.ROUND.toString=r;sc.ROUND.__enum__=sc;sc.SQUARE=["SQUARE",2];sc.SQUARE.toString=r;sc.SQUARE.__enum__=sc;var Df=function(){};k["openfl.display.FrameLabel"]=Df;Df.__name__=!0;Df.__super__=C;Df.prototype=l(C.prototype,{__class__:Df});var ge=k["openfl.display.GradientType"]=
{__ename__:!0,__constructs__:["RADIAL","LINEAR"]};ge.RADIAL=["RADIAL",0];ge.RADIAL.toString=r;ge.RADIAL.__enum__=ge;ge.LINEAR=["LINEAR",1];ge.LINEAR.toString=r;ge.LINEAR.__enum__=ge;var $c=function(){this.__glStack=[];this.__dirty=!0;this.__commands=new Ue;this.__positionY=this.__positionX=this.__strokePadding=0;this.__hardware=!0;this.moveTo(0,0)};k["openfl.display.Graphics"]=$c;$c.__name__=!0;$c.prototype={beginFill:function(a,b){null==b&&(b=1);null==a&&(a=0);this.__commands.beginFill(a&16777215,
b);0<b&&(this.__visible=!0)},clear:function(){this.__commands.clear();this.__strokePadding=0;null!=this.__bounds&&(this.set___dirty(!0),this.__transformDirty=!0,this.__bounds=null);this.__visible=!1;this.__hardware=!0;this.moveTo(0,0)},drawRect:function(a,b,d,e){0>=d||0>=e||(this.__inflateBounds(a-this.__strokePadding,b-this.__strokePadding),this.__inflateBounds(a+d+this.__strokePadding,b+e+this.__strokePadding),this.__commands.drawRect(a,b,d,e),this.set___dirty(!0))},endFill:function(){this.__commands.endFill()},
lineTo:function(a,b){this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding);this.__inflateBounds(this.__positionX+this.__strokePadding,this.__positionY+this.__strokePadding);this.__positionX=a;this.__positionY=b;this.__inflateBounds(this.__positionX-this.__strokePadding,this.__positionY-this.__strokePadding);this.__inflateBounds(this.__positionX+2*this.__strokePadding,this.__positionY+this.__strokePadding);this.__commands.lineTo(a,b);this.__hardware=!1;this.set___dirty(!0)},
moveTo:function(a,b){this.__positionX=a;this.__positionY=b;this.__commands.moveTo(a,b)},__getBounds:function(a,b){if(null!=this.__bounds){var d=ya.__temp;this.__bounds.__transform(d,b);a.__expand(d.x,d.y,d.width,d.height)}},__hitTest:function(a,b,d,e){if(null==this.__bounds)return!1;var f=e.__transformInverseX(a,b);a=e.__transformInverseY(a,b);return f>this.__bounds.x&&a>this.__bounds.y&&this.__bounds.contains(f,a)?d?v.hitTest(this,f,a):!0:!1},__inflateBounds:function(a,b){null==this.__bounds?(this.__bounds=
new ya(a,b,0,0),this.__transformDirty=!0):(a<this.__bounds.x&&(this.__bounds.width+=this.__bounds.x-a,this.__bounds.x=a,this.__transformDirty=!0),b<this.__bounds.y&&(this.__bounds.height+=this.__bounds.y-b,this.__bounds.y=b,this.__transformDirty=!0),a>this.__bounds.x+this.__bounds.width&&(this.__bounds.width=a-this.__bounds.x),b>this.__bounds.y+this.__bounds.height&&(this.__bounds.height=b-this.__bounds.y))},set___dirty:function(a){a&&null!=this.__owner&&this.__owner.__setRenderDirty();return this.__dirty=
a},__class__:$c,__properties__:{set___dirty:"set___dirty"}};var md=k["openfl.display.GraphicsPathWinding"]={__ename__:!0,__constructs__:["EVEN_ODD","NON_ZERO"]};md.EVEN_ODD=["EVEN_ODD",0];md.EVEN_ODD.toString=r;md.EVEN_ODD.__enum__=md;md.NON_ZERO=["NON_ZERO",1];md.NON_ZERO.toString=r;md.NON_ZERO.__enum__=md;var Nd=k["openfl.display.InterpolationMethod"]={__ename__:!0,__constructs__:["RGB","LINEAR_RGB"]};Nd.RGB=["RGB",0];Nd.RGB.toString=r;Nd.RGB.__enum__=Nd;Nd.LINEAR_RGB=["LINEAR_RGB",1];Nd.LINEAR_RGB.toString=
r;Nd.LINEAR_RGB.__enum__=Nd;var Hc=k["openfl.display.JointStyle"]={__ename__:!0,__constructs__:["MITER","ROUND","BEVEL"]};Hc.MITER=["MITER",0];Hc.MITER.toString=r;Hc.MITER.__enum__=Hc;Hc.ROUND=["ROUND",1];Hc.ROUND.toString=r;Hc.ROUND.__enum__=Hc;Hc.BEVEL=["BEVEL",2];Hc.BEVEL.toString=r;Hc.BEVEL.__enum__=Hc;var Cb=k["openfl.display.LineScaleMode"]={__ename__:!0,__constructs__:["HORIZONTAL","NONE","NORMAL","VERTICAL"]};Cb.HORIZONTAL=["HORIZONTAL",0];Cb.HORIZONTAL.toString=r;Cb.HORIZONTAL.__enum__=Cb;
Cb.NONE=["NONE",1];Cb.NONE.toString=r;Cb.NONE.__enum__=Cb;Cb.NORMAL=["NORMAL",2];Cb.NORMAL.toString=r;Cb.NORMAL.__enum__=Cb;Cb.VERTICAL=["VERTICAL",3];Cb.VERTICAL.toString=r;Cb.VERTICAL.__enum__=Cb;var Ef=function(){};k["openfl.display.Loader"]=Ef;Ef.__name__=!0;Ef.__super__=Ba;Ef.prototype=l(Ba.prototype,{__class__:Ef});var hc=k["openfl.display.PixelSnapping"]={__ename__:!0,__constructs__:["NEVER","AUTO","ALWAYS"]};hc.NEVER=["NEVER",0];hc.NEVER.toString=r;hc.NEVER.__enum__=hc;hc.AUTO=["AUTO",1];
hc.AUTO.toString=r;hc.AUTO.__enum__=hc;hc.ALWAYS=["ALWAYS",2];hc.ALWAYS.toString=r;hc.ALWAYS.__enum__=hc;var Ka=function(a){yb.call(this);if(null!=a&&(this.display=a,La.current.addChild(a),W.__instanceof(a,Nb)))W.__cast(a,Nb).onInit()};k["openfl.display.Preloader"]=Ka;Ka.__name__=!0;Ka.__super__=yb;Ka.prototype=l(yb.prototype,{load:function(a,b){for(var d=[],e=null,f=0,g=a.length;f<g;){var h=f++,e=a[h];switch(b[h]){case "MUSIC":case "SOUND":e=sb.withoutExtension(e),N.remove(d,e)||this.total++,d.push(e)}}for(f=
0;f<d.length;)g=d[f],++f,e=new Jc,e.addEventListener(Q.COMPLETE,u(this,this.sound_onComplete)),e.addEventListener(Oc.IO_ERROR,u(this,this.sound_onIOError)),e.load(new rd(g+".ogg"));yb.prototype.load.call(this,a,b)},start:function(){null!=this.display&&W.__instanceof(this.display,Nb)?(this.display.addEventListener(Q.COMPLETE,u(this,this.display_onComplete)),W.__cast(this.display,Nb).onLoaded()):yb.prototype.start.call(this)},update:function(a,b){if(null!=this.display&&W.__instanceof(this.display,Nb))W.__cast(this.display,
Nb).onUpdate(a,b)},display_onComplete:function(a){this.display.removeEventListener(Q.COMPLETE,u(this,this.display_onComplete));La.current.removeChild(this.display);La.current.stage.set_focus(null);this.display=null;yb.prototype.start.call(this)},sound_onComplete:function(a){this.loaded++;this.onProgress.dispatch(this.loaded,this.total);this.loaded==this.total&&this.start()},sound_onIOError:function(a){this.loaded++;this.onProgress.dispatch(this.loaded,this.total);this.loaded==this.total&&this.start()},
__class__:Ka});var Ua=k["openfl.display.SpreadMethod"]={__ename__:!0,__constructs__:["REPEAT","REFLECT","PAD"]};Ua.REPEAT=["REPEAT",0];Ua.REPEAT.toString=r;Ua.REPEAT.__enum__=Ua;Ua.REFLECT=["REFLECT",1];Ua.REFLECT.toString=r;Ua.REFLECT.__enum__=Ua;Ua.PAD=["PAD",2];Ua.PAD.toString=r;Ua.PAD.__enum__=Ua;var Db=function(a,b){ha.call(this);this.application=a.application;this.window=a;null==b?(this.__transparent=!0,this.set_color(0)):this.set_color(b);this.set_name(null);this.__deltaTime=0;this.__displayState=
tb.NORMAL;this.__lastClickTime=this.__mouseY=this.__mouseX=0;this.stageWidth=a.__width;this.stageHeight=a.__height;this.stage=this;this.align=cb.TOP_LEFT;this.allowsFullScreenInteractive=this.allowsFullScreen=!1;this.quality=gc.HIGH;this.scaleMode=fc.NO_SCALE;this.stageFocusRect=!0;this.__macKeyboard=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent)||/Mac/.test(navigator.platform);this.__clearBeforeRender=!0;this.__stack=[];this.__mouseOutStack=[];var d;d=new Kd;d.data=
[];d.length=0;d.fixed=!1;d=this.stage3Ds=d;var e=new Ff;if(!d.fixed){d.length++;if(d.data.length<d.length){var f;f=Array(d.data.length+10);dc.blit(d.data,0,f,0,d.data.length);d.data=f}d.data[d.length-1]=e}d.length;null==La.current.stage&&this.stage.addChild(La.current)};k["openfl.display.Stage"]=Db;Db.__name__=!0;Db.__interfaces__=[of];Db.__super__=ha;Db.prototype=l(ha.prototype,{globalToLocal:function(a){return a.clone()},onGamepadAxisMove:function(a,b,d){Wa.__onGamepadAxisMove(a,b,d)},onGamepadButtonDown:function(a,
b){Wa.__onGamepadButtonDown(a,b)},onGamepadButtonUp:function(a,b){Wa.__onGamepadButtonUp(a,b)},onGamepadConnect:function(a){Wa.__onGamepadConnect(a)},onGamepadDisconnect:function(a){Wa.__onGamepadDisconnect(a)},onJoystickAxisMove:function(a,b,d){},onJoystickButtonDown:function(a,b){},onJoystickButtonUp:function(a,b){},onJoystickConnect:function(a){},onJoystickDisconnect:function(a){},onJoystickHatMove:function(a,b,d){},onJoystickTrackballMove:function(a,b,d){},onKeyDown:function(a,b,d){null!=this.window&&
this.window==a&&this.__onKey(Ub.KEY_DOWN,b,d)},onKeyUp:function(a,b,d){null!=this.window&&this.window==a&&this.__onKey(Ub.KEY_UP,b,d)},onModuleExit:function(a){null!=this.window&&(a=new Q(Q.DEACTIVATE),this.__broadcast(a,!0))},onMouseDown:function(a,b,d,e){if(null!=this.window&&this.window==a){switch(e){case 1:a=Y.MIDDLE_MOUSE_DOWN;break;case 2:a=Y.RIGHT_MOUSE_DOWN;break;default:a=Y.MOUSE_DOWN}this.__onMouse(a,b,d,e)}},onMouseMove:function(a,b,d){null!=this.window&&this.window==a&&this.__onMouse(Y.MOUSE_MOVE,
b,d,0)},onMouseMoveRelative:function(a,b,d){},onMouseUp:function(a,b,d,e){if(null!=this.window&&this.window==a){switch(e){case 1:a=Y.MIDDLE_MOUSE_UP;break;case 2:a=Y.RIGHT_MOUSE_UP;break;default:a=Y.MOUSE_UP}this.__onMouse(a,b,d,e)}},onMouseWheel:function(a,b,d){null!=this.window&&this.window==a&&this.__onMouseWheel(b,d)},onPreloadComplete:function(){},onPreloadProgress:function(a,b){},onRenderContextLost:function(a){},onRenderContextRestored:function(a,b){},onTextEdit:function(a,b,d,e){},onTextInput:function(a,
b){if(null!=this.window&&this.window==a){var d=[];null==this.__focus?this.__getInteractive(d):this.__focus.__getInteractive(d);var e=new tc(tc.TEXT_INPUT,!0,!1,b);0<d.length?(d.reverse(),this.__fireEvent(e,d)):this.__broadcast(e,!0)}},onTouchMove:function(a){this.__onTouch("touchMove",a)},onTouchEnd:function(a){this.__onTouch("touchEnd",a)},onTouchStart:function(a){this.__onTouch("touchBegin",a)},onWindowActivate:function(a){null!=this.window&&this.window==a&&(a=new Q(Q.ACTIVATE),this.__broadcast(a,
!0))},onWindowClose:function(a){this.window==a&&(this.window=null)},onWindowCreate:function(a){if(null!=this.window&&this.window==a&&null!=a.renderer)switch(a=a.renderer.context,a[1]){case 0:this.__renderer=new Eb(this.stageWidth,this.stageHeight,a[2]);break;case 1:this.__renderer=new ld(this.stageWidth,this.stageHeight,a[2]);break;case 2:this.__renderer=new rc(this.stageWidth,this.stageHeight,a[2]);break;case 4:this.__renderer=new ye(this.stageWidth,this.stageHeight,a[2]);break;case 5:this.__renderer=
new ce(this.stageWidth,this.stageHeight,a[2])}},onWindowDeactivate:function(a){null!=this.window&&this.window==a&&(a=new Q(Q.DEACTIVATE),this.__broadcast(a,!0))},onWindowEnter:function(a){},onWindowFocusIn:function(a){null!=this.window&&this.window==a&&(a=new Kb(Kb.FOCUS_IN,!0,!1,null,!1,0),this.__broadcast(a,!0))},onWindowFocusOut:function(a){null!=this.window&&this.window==a&&(a=new Kb(Kb.FOCUS_OUT,!0,!1,null,!1,0),this.__broadcast(a,!0))},onWindowFullscreen:function(a){},onWindowLeave:function(a){null!=
this.window&&this.window==a&&this.__dispatchEvent(new Q(Q.MOUSE_LEAVE))},onWindowMinimize:function(a){},onWindowMove:function(a,b,d){},onWindowResize:function(a,b,d){null!=this.window&&this.window==a&&(this.stageWidth=b,this.stageHeight=d,null!=this.__renderer&&this.__renderer.resize(b,d),a=new Q(Q.RESIZE),this.__broadcast(a,!1))},onWindowRestore:function(a){},render:function(a){if(null!=a.window&&a.window==this.window&&(null!=this.application&&0<this.application.windows.length&&(this.__transformDirty||
(this.__transformDirty=!0,z.__worldTransformDirty++),this.__renderDirty||(this.__renderDirty=!0,z.__worldRenderDirty++)),!this.__rendering)){this.__rendering=!0;this.__broadcast(new Q(Q.ENTER_FRAME),!0);this.__invalidated&&(this.__invalidated=!1,this.__broadcast(new Q(Q.RENDER),!0));this.__renderable=!0;this.__enterFrame(this.__deltaTime);this.__deltaTime=0;this.__update(!1,!0);if(null!=this.__renderer){a=a.context;switch(a[1]){case 4:a=a[2],W.__cast(this.__renderer,ye).cairo=a,this.__renderer.renderSession.cairo=
a}this.__renderer.render(this)}this.__rendering=!1}},update:function(a){this.__deltaTime=a},__drag:function(a){var b=this.__dragObject.parent;null!=b&&(a=b.globalToLocal(a));b=a.x+this.__dragOffsetX;a=a.y+this.__dragOffsetY;null!=this.__dragBounds&&(b<this.__dragBounds.x?b=this.__dragBounds.x:b>this.__dragBounds.get_right()&&(b=this.__dragBounds.get_right()),a<this.__dragBounds.y?a=this.__dragBounds.y:a>this.__dragBounds.get_bottom()&&(a=this.__dragBounds.get_bottom()));this.__dragObject.set_x(b);
this.__dragObject.set_y(a)},__fireEvent:function(a,b){var d=b.length;if(0==d)a.eventPhase=Sb.AT_TARGET,a.target.__broadcast(a,!1);else{a.eventPhase=Sb.CAPTURING_PHASE;a.target=b[b.length-1];for(var e=0,f=d-1;e<f;){var g=e++;b[g].__broadcast(a,!1);if(a.__isCancelled)return}a.eventPhase=Sb.AT_TARGET;a.target.__broadcast(a,!1);if(!a.__isCancelled&&a.bubbles)for(a.eventPhase=Sb.BUBBLING_PHASE,d-=2;0<=d;){b[d].__broadcast(a,!1);if(a.__isCancelled)break;d--}}},__getInteractive:function(a){null!=a&&a.push(this);
return!0},__onKey:function(a,b,d){Y.__altKey=ib.get_altKey(d);Y.__commandKey=ib.get_metaKey(d);Y.__ctrlKey=ib.get_ctrlKey(d);Y.__shiftKey=ib.get_shiftKey(d);var e=[];null==this.__focus?this.__getInteractive(e):this.__focus.__getInteractive(e);if(0<e.length){var f;switch(b){case 1073742048:case 1073742049:case 1073742050:case 1073742051:f=1;break;case 1073742052:case 1073742053:case 1073742054:case 1073742055:f=2;break;case 1073741908:case 1073741909:case 1073741910:case 1073741911:case 1073741912:case 1073741913:case 1073741914:case 1073741915:case 1073741916:case 1073741917:case 1073741918:case 1073741919:case 1073741920:case 1073741921:case 1073741922:case 1073741923:case 1073742044:f=
3;break;default:f=0}switch(b){case 8:b=8;break;case 9:b=9;break;case 13:b=13;break;case 27:b=27;break;case 32:b=32;break;case 33:b=49;break;case 34:b=222;break;case 35:b=51;break;case 36:b=52;break;case 37:b=53;break;case 38:b=55;break;case 39:b=222;break;case 40:b=57;break;case 41:b=48;break;case 42:b=56;break;case 44:b=188;break;case 45:b=189;break;case 46:b=190;break;case 47:b=191;break;case 48:b=48;break;case 49:b=49;break;case 50:b=50;break;case 51:b=51;break;case 52:b=52;break;case 53:b=53;
break;case 54:b=54;break;case 55:b=55;break;case 56:b=56;break;case 57:b=57;break;case 58:b=186;break;case 59:b=186;break;case 60:b=60;break;case 61:b=187;break;case 62:b=190;break;case 63:b=191;break;case 64:b=50;break;case 91:b=219;break;case 92:b=220;break;case 93:b=221;break;case 94:b=54;break;case 95:b=189;break;case 96:b=192;break;case 97:b=65;break;case 98:b=66;break;case 99:b=67;break;case 100:b=68;break;case 101:b=69;break;case 102:b=70;break;case 103:b=71;break;case 104:b=72;break;case 105:b=
73;break;case 106:b=74;break;case 107:b=75;break;case 108:b=76;break;case 109:b=77;break;case 110:b=78;break;case 111:b=79;break;case 112:b=80;break;case 113:b=81;break;case 114:b=82;break;case 115:b=83;break;case 116:b=84;break;case 117:b=85;break;case 118:b=86;break;case 119:b=87;break;case 120:b=88;break;case 121:b=89;break;case 122:b=90;break;case 127:b=46;break;case 1073741881:b=20;break;case 1073741882:b=112;break;case 1073741883:b=113;break;case 1073741884:b=114;break;case 1073741885:b=115;
break;case 1073741886:b=116;break;case 1073741887:b=117;break;case 1073741888:b=118;break;case 1073741889:b=119;break;case 1073741890:b=120;break;case 1073741891:b=121;break;case 1073741892:b=122;break;case 1073741893:b=123;break;case 1073741894:b=301;break;case 1073741895:b=145;break;case 1073741896:b=19;break;case 1073741897:b=45;break;case 1073741898:b=36;break;case 1073741899:b=33;break;case 1073741901:b=35;break;case 1073741902:b=34;break;case 1073741903:b=39;break;case 1073741904:b=37;break;
case 1073741905:b=40;break;case 1073741906:b=38;break;case 1073741907:b=144;break;case 1073741908:b=111;break;case 1073741909:b=106;break;case 1073741910:b=109;break;case 1073741911:b=107;break;case 1073741912:b=108;break;case 1073741913:b=97;break;case 1073741914:b=98;break;case 1073741915:b=99;break;case 1073741916:b=100;break;case 1073741917:b=101;break;case 1073741918:b=102;break;case 1073741919:b=103;break;case 1073741920:b=104;break;case 1073741921:b=105;break;case 1073741922:b=96;break;case 1073741923:b=
110;break;case 1073741925:b=302;break;case 1073741928:b=124;break;case 1073741929:b=125;break;case 1073741930:b=126;break;case 1073741982:b=13;break;case 1073742044:b=110;break;case 1073742048:b=17;break;case 1073742049:b=16;break;case 1073742050:b=18;break;case 1073742051:b=15;break;case 1073742052:b=17;break;case 1073742053:b=16;break;case 1073742054:b=18;break;case 1073742055:b=15;break}var g=af.__getCharCode(b,ib.get_shiftKey(d));a=new Ub(a,!0,!1,g,b,f,this.__macKeyboard?ib.get_ctrlKey(d)||ib.get_metaKey(d):
ib.get_ctrlKey(d),ib.get_altKey(d),ib.get_shiftKey(d),ib.get_ctrlKey(d),ib.get_metaKey(d));e.reverse();this.__fireEvent(a,e)}},__onMouse:function(a,b,d,e){if(!(2<e)){this.__mouseX=b;this.__mouseY=d;var f=[],g=null,h=new Na(b,d);this.__hitTest(b,d,!0,f,!0)?g=f[f.length-1]:(g=this,f=[this]);null==g&&(g=this);a==Y.MOUSE_DOWN&&(g.get_tabEnabled()?this.set_focus(g):this.set_focus(null));this.__fireEvent(Y.__create(a,e,this.__mouseX,this.__mouseY,g==this?h:g.globalToLocal(h),g),f);switch(a){case "mouseUp":b=
Y.CLICK;break;case "middleMouseUp":b=Y.MIDDLE_CLICK;break;case "rightMouseUp":b=Y.RIGHT_CLICK;break;default:b=null}null!=b&&(this.__fireEvent(Y.__create(b,e,this.__mouseX,this.__mouseY,g==this?h:g.globalToLocal(h),g),f),a==Y.MOUSE_UP&&W.__cast(g,E).doubleClickEnabled&&(a=La.getTimer(),500>a-this.__lastClickTime?(this.__fireEvent(Y.__create(Y.DOUBLE_CLICK,e,this.__mouseX,this.__mouseY,g==this?h:g.globalToLocal(h),g),f),this.__lastClickTime=0):this.__lastClickTime=a));g=null;for(e=0;e<f.length;)if(g=
f[e],++e,g=g.__getCursor(),null!=g){ve.set_cursor(g);break}null==g&&ve.set_cursor(ua.ARROW);e=0;for(g=this.__mouseOutStack;e<g.length;)a=g[e],++e,-1==N.indexOf(f,a,0)&&(N.remove(this.__mouseOutStack,a),b=a.globalToLocal(h),a.__dispatchEvent(new Y(Y.MOUSE_OUT,!1,!1,b.x,b.y,a)));for(e=0;e<f.length;)g=f[e],++e,-1==N.indexOf(this.__mouseOutStack,g,0)&&(g.hasEventListener(Y.MOUSE_OVER)&&(a=g.globalToLocal(h),g.__dispatchEvent(new Y(Y.MOUSE_OVER,!1,!1,a.x,a.y,g))),g.hasEventListener(Y.MOUSE_OUT)&&this.__mouseOutStack.push(g));
null!=this.__dragObject&&this.__drag(h)}},__onMouseWheel:function(a,b){var d=this.__mouseX,e=this.__mouseY,f=[];this.__hitTest(d,e,!1,f,!0)||(f=[this]);var g=f[f.length-1],d=new Na(d,e),e=b|0;this.__fireEvent(Y.__create(Y.MOUSE_WHEEL,0,this.__mouseX,this.__mouseY,g==this?d:g.globalToLocal(d),g,e),f)},__onTouch:function(a,b){var d=new Na(b.x*this.stageWidth,b.y*this.stageHeight);this.__mouseX=d.x;this.__mouseY=d.y;var e=[];if(this.__hitTest(b.x,b.y,!1,e,!0)){var f=e[e.length-1];null==f&&(f=this);d=
f.globalToLocal(d);f=nd.__create(a,null,this.__mouseX,this.__mouseY,d,f);f.touchPointID=b.id;f.isPrimaryTouchPoint=!0;this.__fireEvent(f,e)}else e=nd.__create(a,null,this.__mouseX,this.__mouseY,d,this),e.touchPointID=b.id,e.isPrimaryTouchPoint=!0,this.__fireEvent(e,[this.stage])},__update:function(a,b,d){if(a)0<z.__worldTransformDirty&&(ha.prototype.__update.call(this,!0,b,d),b&&(z.__worldTransformDirty=0,this.__dirty=!0));else if(0<z.__worldTransformDirty||this.__dirty||0<z.__worldRenderDirty)ha.prototype.__update.call(this,
!1,b,d),b&&(z.__worldTransformDirty=0,z.__worldRenderDirty=0,this.__dirty=!1)},get_mouseX:function(){return this.__mouseX},get_mouseY:function(){return this.__mouseY},set_color:function(a){this.__colorSplit=[((a&16711680)>>>16)/255,((a&65280)>>>8)/255,(a&255)/255];this.__colorString="#"+na.hex(a,6);return this.__color=a},set_displayState:function(a){if(null!=this.window)switch(a[1]){case 0:this.window.__fullscreen&&(this.window.set_fullscreen(!1),this.dispatchEvent(new S(S.FULL_SCREEN,!1,!1,!1,!0)));
break;default:this.window.__fullscreen||(this.window.set_fullscreen(!0),this.dispatchEvent(new S(S.FULL_SCREEN,!1,!1,!0,!0)))}return this.__displayState=a},get_focus:function(){return this.__focus},set_focus:function(a){if(a!=this.__focus){var b=this.__focus;this.__focus=a;if(null!=b){var d=new Kb(Kb.FOCUS_OUT,!0,!1,this.__focus,!1,0);this.__stack=[];b.__getInteractive(this.__stack);this.__stack.reverse();this.__fireEvent(d,this.__stack)}null!=this.__focus&&(b=new Kb(Kb.FOCUS_IN,!0,!1,b,!1,0),this.__stack=
[],a.__getInteractive(this.__stack),this.__stack.reverse(),this.__fireEvent(b,this.__stack))}return this.__focus},__class__:Db,__properties__:l(ha.prototype.__properties__,{set_focus:"set_focus",get_focus:"get_focus",set_displayState:"set_displayState",set_color:"set_color"})});var Ff=function(){C.call(this)};k["openfl.display.Stage3D"]=Ff;Ff.__name__=!0;Ff.__super__=C;Ff.prototype=l(C.prototype,{__class__:Ff});var cb=k["openfl.display.StageAlign"]={__ename__:!0,__constructs__:"TOP_RIGHT TOP_LEFT TOP RIGHT LEFT BOTTOM_RIGHT BOTTOM_LEFT BOTTOM".split(" ")};
cb.TOP_RIGHT=["TOP_RIGHT",0];cb.TOP_RIGHT.toString=r;cb.TOP_RIGHT.__enum__=cb;cb.TOP_LEFT=["TOP_LEFT",1];cb.TOP_LEFT.toString=r;cb.TOP_LEFT.__enum__=cb;cb.TOP=["TOP",2];cb.TOP.toString=r;cb.TOP.__enum__=cb;cb.RIGHT=["RIGHT",3];cb.RIGHT.toString=r;cb.RIGHT.__enum__=cb;cb.LEFT=["LEFT",4];cb.LEFT.toString=r;cb.LEFT.__enum__=cb;cb.BOTTOM_RIGHT=["BOTTOM_RIGHT",5];cb.BOTTOM_RIGHT.toString=r;cb.BOTTOM_RIGHT.__enum__=cb;cb.BOTTOM_LEFT=["BOTTOM_LEFT",6];cb.BOTTOM_LEFT.toString=r;cb.BOTTOM_LEFT.__enum__=cb;
cb.BOTTOM=["BOTTOM",7];cb.BOTTOM.toString=r;cb.BOTTOM.__enum__=cb;var tb=k["openfl.display.StageDisplayState"]={__ename__:!0,__constructs__:["NORMAL","FULL_SCREEN","FULL_SCREEN_INTERACTIVE"]};tb.NORMAL=["NORMAL",0];tb.NORMAL.toString=r;tb.NORMAL.__enum__=tb;tb.FULL_SCREEN=["FULL_SCREEN",1];tb.FULL_SCREEN.toString=r;tb.FULL_SCREEN.__enum__=tb;tb.FULL_SCREEN_INTERACTIVE=["FULL_SCREEN_INTERACTIVE",2];tb.FULL_SCREEN_INTERACTIVE.toString=r;tb.FULL_SCREEN_INTERACTIVE.__enum__=tb;var gc=k["openfl.display.StageQuality"]=
{__ename__:!0,__constructs__:["BEST","HIGH","MEDIUM","LOW"]};gc.BEST=["BEST",0];gc.BEST.toString=r;gc.BEST.__enum__=gc;gc.HIGH=["HIGH",1];gc.HIGH.toString=r;gc.HIGH.__enum__=gc;gc.MEDIUM=["MEDIUM",2];gc.MEDIUM.toString=r;gc.MEDIUM.__enum__=gc;gc.LOW=["LOW",3];gc.LOW.toString=r;gc.LOW.__enum__=gc;var fc=k["openfl.display.StageScaleMode"]={__ename__:!0,__constructs__:["SHOW_ALL","NO_SCALE","NO_BORDER","EXACT_FIT"]};fc.SHOW_ALL=["SHOW_ALL",0];fc.SHOW_ALL.toString=r;fc.SHOW_ALL.__enum__=fc;fc.NO_SCALE=
["NO_SCALE",1];fc.NO_SCALE.toString=r;fc.NO_SCALE.__enum__=fc;fc.NO_BORDER=["NO_BORDER",2];fc.NO_BORDER.toString=r;fc.NO_BORDER.__enum__=fc;fc.EXACT_FIT=["EXACT_FIT",3];fc.EXACT_FIT.toString=r;fc.EXACT_FIT.__enum__=fc;var hg=function(){};k["openfl.display.Tileset"]=hg;hg.__name__=!0;var he=function(){};k["openfl.display.Tilesheet"]=he;he.__name__=!0;he.prototype={__class__:he};var Bc=k["openfl.display.TriangleCulling"]={__ename__:!0,__constructs__:["NEGATIVE","NONE","POSITIVE"]};Bc.NEGATIVE=["NEGATIVE",
0];Bc.NEGATIVE.toString=r;Bc.NEGATIVE.__enum__=Bc;Bc.NONE=["NONE",1];Bc.NONE.toString=r;Bc.NONE.__enum__=Bc;Bc.POSITIVE=["POSITIVE",2];Bc.POSITIVE.toString=r;Bc.POSITIVE.__enum__=Bc;var Ac=function(a){Jd.call(this,a)};k["openfl.display.Window"]=Ac;Ac.__name__=!0;Ac.__super__=Jd;Ac.prototype=l(Jd.prototype,{create:function(a){Jd.prototype.create.call(this,a);this.stage=new Db(this,Object.prototype.hasOwnProperty.call(this.config,"background")?this.config.background:16777215);a.addModule(this.stage)},
__class__:Ac});var Q=function(a,b,d){null==d&&(d=!1);null==b&&(b=!1);this.type=a;this.bubbles=b;this.cancelable=d;this.eventPhase=Sb.AT_TARGET};k["openfl.events.Event"]=Q;Q.__name__=!0;Q.prototype={__class__:Q};var tc=function(a,b,d,e){null==e&&(e="");null==d&&(d=!1);null==b&&(b=!1);Q.call(this,a,b,d);this.text=e};k["openfl.events.TextEvent"]=tc;tc.__name__=!0;tc.__super__=Q;tc.prototype=l(Q.prototype,{__class__:tc});var od=function(a,b,d,e,f){null==f&&(f=0);null==e&&(e="");null==d&&(d=!1);null==
b&&(b=!1);tc.call(this,a,b,d,e);this.errorID=f};k["openfl.events.ErrorEvent"]=od;od.__name__=!0;od.__super__=tc;od.prototype=l(tc.prototype,{__class__:od});var je=function(a,b,d){this.callback=a;this.useCapture=b;this.priority=d};k["openfl.events._EventDispatcher.Listener"]=je;je.__name__=!0;je.prototype={match:function(a,b){return ma.compareMethods(this.callback,a)&&this.useCapture==b},__class__:je};var Sb=k["openfl.events.EventPhase"]={__ename__:!0,__constructs__:["CAPTURING_PHASE","AT_TARGET",
"BUBBLING_PHASE"]};Sb.CAPTURING_PHASE=["CAPTURING_PHASE",0];Sb.CAPTURING_PHASE.toString=r;Sb.CAPTURING_PHASE.__enum__=Sb;Sb.AT_TARGET=["AT_TARGET",1];Sb.AT_TARGET.toString=r;Sb.AT_TARGET.__enum__=Sb;Sb.BUBBLING_PHASE=["BUBBLING_PHASE",2];Sb.BUBBLING_PHASE.toString=r;Sb.BUBBLING_PHASE.__enum__=Sb;var Kb=function(a,b,d,e,f,g){null==g&&(g=0);null==f&&(f=!1);null==d&&(d=!1);null==b&&(b=!1);Q.call(this,a,b,d);this.keyCode=g;this.shiftKey=f;this.relatedObject=e};k["openfl.events.FocusEvent"]=Kb;Kb.__name__=
!0;Kb.__super__=Q;Kb.prototype=l(Q.prototype,{__class__:Kb});var S=function(a,b,d,e,f){null==f&&(f=!1);null==e&&(e=!1);null==d&&(d=!1);null==b&&(b=!1);Q.call(this,a,b,d);this.fullScreen=e;this.interactive=f};k["openfl.events.FullScreenEvent"]=S;S.__name__=!0;S.__super__=Q;S.prototype=l(Q.prototype,{__class__:S});var ga=function(a,b,d,e){null==d&&(d=!1);null==b&&(b=!0);Q.call(this,a,b,d);this.device=e};k["openfl.events.GameInputEvent"]=ga;ga.__name__=!0;ga.__super__=Q;ga.prototype=l(Q.prototype,{__class__:ga});
var lc=function(a,b,d,e){null==e&&(e=0);null==d&&(d=!1);null==b&&(b=!1);this.status=e;Q.call(this,a,b,d)};k["openfl.events.HTTPStatusEvent"]=lc;lc.__name__=!0;lc.__super__=Q;lc.prototype=l(Q.prototype,{__class__:lc});var Oc=function(a,b,d,e,f){null==f&&(f=0);null==e&&(e="");null==d&&(d=!1);null==b&&(b=!0);od.call(this,a,b,d,e,f)};k["openfl.events.IOErrorEvent"]=Oc;Oc.__name__=!0;Oc.__super__=od;Oc.prototype=l(od.prototype,{__class__:Oc});var Ub=function(a,b,d,e,f,g,h,k,l,m,r){null==r&&(r=!1);null==
m&&(m=!1);null==l&&(l=!1);null==k&&(k=!1);null==h&&(h=!1);null==f&&(f=0);null==e&&(e=0);null==d&&(d=!1);null==b&&(b=!1);Q.call(this,a,b,d);this.charCode=e;this.keyCode=f;this.keyLocation=null!=g?g:0;this.ctrlKey=h;this.altKey=k;this.shiftKey=l;this.controlKey=m;this.commandKey=r};k["openfl.events.KeyboardEvent"]=Ub;Ub.__name__=!0;Ub.__super__=Q;Ub.prototype=l(Q.prototype,{__class__:Ub});var Y=function(a,b,d,e,f,g,h,k,l,m,r,t,u){null==u&&(u=0);null==t&&(t=!1);null==r&&(r=0);null==m&&(m=!1);null==l&&
(l=!1);null==k&&(k=!1);null==h&&(h=!1);null==f&&(f=0);null==e&&(e=0);null==d&&(d=!1);null==b&&(b=!0);Q.call(this,a,b,d);this.shiftKey=l;this.altKey=k;this.ctrlKey=h;this.bubbles=b;this.relatedObject=g;this.delta=r;this.localX=e;this.localY=f;this.buttonDown=m;this.commandKey=t;this.clickCount=u};k["openfl.events.MouseEvent"]=Y;Y.__name__=!0;Y.__altKey=null;Y.__buttonDown=null;Y.__commandKey=null;Y.__ctrlKey=null;Y.__shiftKey=null;Y.__create=function(a,b,d,e,f,g,h){null==h&&(h=0);switch(a){case "mouseDown":Y.__buttonDown=
!0;break;case "mouseUp":Y.__buttonDown=!1}a=new Y(a,!0,!1,f.x,f.y,null,Y.__ctrlKey,Y.__altKey,Y.__shiftKey,Y.__buttonDown,h,Y.__commandKey);a.stageX=d;a.stageY=e;a.target=g;return a};Y.__super__=Q;Y.prototype=l(Q.prototype,{__class__:Y});var De=function(a,b,d,e,f){null==f&&(f=0);null==e&&(e=0);null==d&&(d=!1);null==b&&(b=!1);Q.call(this,a,b,d);this.bytesLoaded=e;this.bytesTotal=f};k["openfl.events.ProgressEvent"]=De;De.__name__=!0;De.__super__=Q;De.prototype=l(Q.prototype,{__class__:De});var zd=function(a,
b,d,e,f){null==f&&(f=0);null==e&&(e="");null==d&&(d=!1);null==b&&(b=!1);od.call(this,a,b,d,e,f)};k["openfl.events.SecurityErrorEvent"]=zd;zd.__name__=!0;zd.__super__=od;zd.prototype=l(od.prototype,{__class__:zd});var nd=function(a,b,d,e,f,g,h,k,l,m,r,t,u,w,v){null==w&&(w=!1);null==u&&(u=0);null==t&&(t=!1);null==r&&(r=!1);null==m&&(m=!1);null==l&&(l=!1);null==h&&(h=1);null==g&&(g=1);null==f&&(f=0);null==e&&(e=0);null==d&&(d=!1);null==b&&(b=!0);Q.call(this,a,b,d);this.shiftKey=r;this.altKey=m;this.ctrlKey=
l;this.bubbles=b;this.relatedObject=k;this.delta=u;this.localX=e;this.localY=f;this.sizeX=g;this.sizeY=h;this.buttonDown=t;this.commandKey=w;this.pressure=1;this.touchPointID=0;this.isPrimaryTouchPoint=!0};k["openfl.events.TouchEvent"]=nd;nd.__name__=!0;nd.__create=function(a,b,d,e,f,g){a=new nd(a,!0,!1,f.x,f.y,1,1,null,!1,!1,!1,!1,0,!1,0);a.stageX=d;a.stageY=e;a.target=g;return a};nd.__super__=Q;nd.prototype=l(Q.prototype,{__class__:nd});var Hb=function(){};k["openfl.external.ExternalInterface"]=
Hb;Hb.__name__=!0;Hb.call=function(a,b,d,e,f,g){var h=null,h=a.split(".").slice(0,-1).join(".");0<h.length&&(a+=".bind("+h+")");return h=null==b?eval(a)():null==d?eval(a)(b):null==e?eval(a)(b,d):null==f?eval(a)(b,d,e):null==g?eval(a)(b,d,e,f):eval(a)(b,d,e,f,g)};var Sf=function(){};k["openfl.filters.BitmapFilter"]=Sf;Sf.__name__=!0;var Cc=function(){};k["openfl.geom.Matrix3D"]=Cc;Cc.__name__=!0;Cc.prototype={__class__:Cc};var df=function(a){this.__colorTransform=new pc;this.concatenatedColorTransform=
new pc;this.pixelBounds=new ya;this.__displayObject=a;this.__hasMatrix=!0};k["openfl.geom.Transform"]=df;df.__name__=!0;df.prototype={get_colorTransform:function(){return this.__colorTransform},__class__:df,__properties__:{get_colorTransform:"get_colorTransform"}};var ig=function(){};k["openfl.geom.Vector3D"]=ig;ig.__name__=!0;var Yf=function(){};k["openfl.media.ID3Info"]=Yf;Yf.__name__=!0;var Jc=function(a,b){C.call(this,this);this.bytesTotal=this.bytesLoaded=0;this.id3=null;this.isBuffering=!1;
this.url=null;null!=a&&this.load(a,b)};k["openfl.media.Sound"]=Jc;Jc.__name__=!0;Jc.__super__=C;Jc.prototype=l(C.prototype,{load:function(a,b){this.url=a.url;this.__soundID=sb.withoutExtension(a.url);Jc.__registeredSounds.exists(this.__soundID)?this.dispatchEvent(new Q(Q.COMPLETE)):(Jc.__registeredSounds.set(this.__soundID,!0),createjs.Sound.addEventListener("fileload",u(this,this.SoundJS_onFileLoad)),createjs.Sound.addEventListener("fileerror",u(this,this.SoundJS_onFileError)),createjs.Sound.registerSound(this.url,
this.__soundID))},SoundJS_onFileLoad:function(a){a.id==this.__soundID&&(createjs.Sound.removeEventListener("fileload",u(this,this.SoundJS_onFileLoad)),createjs.Sound.removeEventListener("fileerror",u(this,this.SoundJS_onFileError)),this.dispatchEvent(new Q(Q.COMPLETE)))},SoundJS_onFileError:function(a){a.id==this.__soundID&&(createjs.Sound.removeEventListener("fileload",u(this,this.SoundJS_onFileLoad)),createjs.Sound.removeEventListener("fileerror",u(this,this.SoundJS_onFileError)),this.dispatchEvent(new Oc(Oc.IO_ERROR)))},
__class__:Jc});var jg=function(){};k["openfl.media.SoundLoaderContext"]=jg;jg.__name__=!0;var bf=function(){};k["openfl.media.SoundTransform"]=bf;bf.__name__=!0;var Ge=function(a){C.call(this);this.bytesTotal=this.bytesLoaded=0;this.set_dataFormat(Dc.TEXT);null!=a&&this.load(a)};k["openfl.net.URLLoader"]=Ge;Ge.__name__=!0;Ge.__super__=C;Ge.prototype=l(C.prototype,{getData:function(){return null},load:function(a){this.requestUrl(a.url,a.method,a.data,a.formatRequestHeaders())},registerEvents:function(a){var b=
this;"undefined"!=typeof XMLHttpRequestProgressEvent&&a.addEventListener("progress",u(this,this.onProgress),!1);a.onreadystatechange=function(){if(4==a.readyState){var d;try{d=a.status}catch(e){e instanceof K&&(e=e.val),d=null}void 0==d&&(d=null);if(null!=d)b.onStatus(d);if(null!=d&&200<=d&&400>d)b.onData(a.response);else if(null==d)b.onError("Failed to connect or resolve host");else if(12029==d)b.onError("Failed to connect to host");else if(12007==d)b.onError("Unknown host");else if(0==d)b.onError("Unable to make request (may be blocked due to cross-domain permissions)"),
b.onSecurityError("Unable to make request (may be blocked due to cross-domain permissions)");else b.onError("Http Error #"+a.status)}}},requestUrl:function(a,b,d,e){var f=new XMLHttpRequest;this.registerEvents(f);var g="";if(W.__instanceof(d,ac))switch(this.dataFormat[1]){case 0:g=d.data.buffer;break;default:g=d.readUTFBytes(d.length)}else if(W.__instanceof(d,Tf))for(var h=0,k=ma.fields(d);h<k.length;){var l=k[h];++h;0!=g.length&&(g+="&");g+=encodeURIComponent(l)+"="+na.urlEncode(ma.field(d,l))}else null!=
d&&(g=d.toString());try{if("GET"==b&&null!=g&&""!=g){var m=1>=a.split("?").length;f.open(b,a+(m?"?":"&")+X.string(g),!0);g=""}else f.open(b,a,!0)}catch(r){r instanceof K&&(r=r.val);this.onError(r.toString());return}switch(this.dataFormat[1]){case 0:f.responseType="arraybuffer"}for(a=0;a<e.length;)b=e[a],++a,f.setRequestHeader(b.name,b.value);f.send(g);this.onOpen();this.getData=function(){return null!=f.response?f.response:f.responseText}},onData:function(a){a=this.getData();switch(this.dataFormat[1]){case 0:this.data=
ac.__ofBuffer(a);break;default:this.data=X.string(a)}a=new Q(Q.COMPLETE);a.currentTarget=this;this.dispatchEvent(a)},onError:function(a){var b=new Oc(Oc.IO_ERROR);b.text=a;b.currentTarget=this;this.dispatchEvent(b)},onOpen:function(){var a=new Q(Q.OPEN);a.currentTarget=this;this.dispatchEvent(a)},onProgress:function(a){var b=new De(De.PROGRESS);b.currentTarget=this;b.bytesLoaded=a.loaded;b.bytesTotal=a.total;this.dispatchEvent(b)},onSecurityError:function(a){var b=new zd(zd.SECURITY_ERROR);b.text=
a;b.currentTarget=this;this.dispatchEvent(b)},onStatus:function(a){a=new lc(lc.HTTP_STATUS,!1,!1,a);a.currentTarget=this;this.dispatchEvent(a)},set_dataFormat:function(a){a!=Dc.BINARY||ma.hasField(window,"ArrayBuffer")?this.dataFormat=a:this.dataFormat=Dc.TEXT;return this.dataFormat},__class__:Ge,__properties__:{set_dataFormat:"set_dataFormat"}});var Dc=k["openfl.net.URLLoaderDataFormat"]={__ename__:!0,__constructs__:["BINARY","TEXT","VARIABLES"]};Dc.BINARY=["BINARY",0];Dc.BINARY.toString=r;Dc.BINARY.__enum__=
Dc;Dc.TEXT=["TEXT",1];Dc.TEXT.toString=r;Dc.TEXT.__enum__=Dc;Dc.VARIABLES=["VARIABLES",2];Dc.VARIABLES.toString=r;Dc.VARIABLES.__enum__=Dc;var rd=function(a){null!=a&&(this.url=a);this.requestHeaders=[];this.method="GET";this.contentType=null};k["openfl.net.URLRequest"]=rd;rd.__name__=!0;rd.prototype={formatRequestHeaders:function(){var a=this.requestHeaders;null==a&&(a=[]);if("GET"==this.method||null==this.data)return a;if("string"==typeof this.data||W.__instanceof(this.data,ac))a=a.slice(),a.push(new ie("Content-Type",
null!=this.contentType?this.contentType:"application/x-www-form-urlencoded"));return a},__class__:rd};var ie=function(a,b){null==b&&(b="");null==a&&(a="");this.name=a;this.value=b};k["openfl.net.URLRequestHeader"]=ie;ie.__name__=!0;ie.prototype={__class__:ie};var Tf=function(){};k["openfl.net.URLVariables"]=Tf;Tf.__name__=!0;var dd=function(){};k["openfl.system.Capabilities"]=dd;dd.__name__=!0;dd.__properties__={get_screenResolutionY:"get_screenResolutionY",get_screenResolutionX:"get_screenResolutionX"};
dd.get_screenResolutionX=function(){var a=La.application.windows[0];return null!=a&&(a=a.get_display(),null!=a)?a.currentMode.width:0};dd.get_screenResolutionY=function(){var a=La.application.windows[0];return null!=a&&(a=a.get_display(),null!=a)?a.currentMode.height:0};var ic=k["openfl.text.AntiAliasType"]={__ename__:!0,__constructs__:["ADVANCED","NORMAL"]};ic.ADVANCED=["ADVANCED",0];ic.ADVANCED.toString=r;ic.ADVANCED.__enum__=ic;ic.NORMAL=["NORMAL",1];ic.NORMAL.toString=r;ic.NORMAL.__enum__=ic;
var $d=function(a){Od.call(this,a)};k["openfl.text.Font"]=$d;$d.__name__=!0;$d.__fromLimeFont=function(a){var b=new $d;b.name=a.name;b.src=a.src;return b};$d.__super__=Od;$d.prototype=l(Od.prototype,{__class__:$d});var kc=k["openfl.text.GridFitType"]={__ename__:!0,__constructs__:["NONE","PIXEL","SUBPIXEL"]};kc.NONE=["NONE",0];kc.NONE.toString=r;kc.NONE.__enum__=kc;kc.PIXEL=["PIXEL",1];kc.PIXEL.toString=r;kc.PIXEL.__enum__=kc;kc.SUBPIXEL=["SUBPIXEL",2];kc.SUBPIXEL.toString=r;kc.SUBPIXEL.__enum__=kc;
var Ib=function(){E.call(this);this.__caretIndex=-1;this.__graphics=new $c;this.__textEngine=new jb(this);this.__tabEnabled=this.__layoutDirty=!0;null==Ib.__defaultTextFormat&&(Ib.__defaultTextFormat=new Je("Times New Roman",12,0,!1,!1,!1,"","",Jb.LEFT,0,0,0,0),Ib.__defaultTextFormat.blockIndent=0,Ib.__defaultTextFormat.bullet=!1,Ib.__defaultTextFormat.letterSpacing=0,Ib.__defaultTextFormat.kerning=!1);this.__textFormat=Ib.__defaultTextFormat.clone();this.__textEngine.textFormatRanges.push(new fe(this.__textFormat,
0,0));this.addEventListener(Y.MOUSE_DOWN,u(this,this.this_onMouseDown))};k["openfl.text.TextField"]=Ib;Ib.__name__=!0;Ib.__defaultTextFormat=null;Ib.__super__=E;Ib.prototype=l(E.prototype,{getCharBoundaries:function(a){if(0>a||a>this.__textEngine.text.length-1)return null;this.__updateLayout();for(var b=0,d=this.__textEngine.layoutGroups;b<d.length;){var e=d[b];++b;if(a>=e.startIndex&&a<=e.endIndex){for(var b=e.offsetX,d=0,f=a-e.startIndex;d<f;)var g=d++,b=b+e.advances[g];return new ya(b,e.offsetY,
e.advances[a-e.startIndex],e.ascent+e.descent)}}return null},replaceSelectedText:function(a){if(""!=a||this.__selectionIndex!=this.__caretIndex){var b;b=this.__caretIndex<this.__selectionIndex?this.__caretIndex:this.__selectionIndex;this.replaceText(b,this.__caretIndex>this.__selectionIndex?this.__caretIndex:this.__selectionIndex,a);this.__selectionIndex=this.__caretIndex=b+a.length}},replaceText:function(a,b,d){if(!(b<a||0>a||b>this.__textEngine.text.length||null==d)){this.__textEngine.text=this.__textEngine.text.substring(0,
a)+d+this.__textEngine.text.substring(b);d=d.length-(b-a);for(var e=0,f;e<this.__textEngine.textFormatRanges.length;)f=this.__textEngine.textFormatRanges[e],f.start<=a&&f.end>=b?(f.end+=d,e++):f.start>=a&&f.end<=b?(this.__textEngine.textFormatRanges.splice(e,1),d-=f.end-f.start):(f.start>a&&f.start<=b&&(f.start+=d),e++);this.__layoutDirty=this.__dirty=!0}},__getBounds:function(a,b){this.__updateLayout();var d=ya.__temp;this.__textEngine.bounds.__transform(d,b);a.__expand(d.x,d.y,d.width,d.height)},
__getCursor:function(){return this.__textEngine.selectable?ua.TEXT:null},__getPosition:function(a,b){this.__updateLayout();a+=this.get_scrollH();for(var d=0,e=this.get_scrollV()-1;d<e;){var f=d++;b+=this.__textEngine.lineHeights[f]}b>this.__textEngine.textHeight&&(b=this.__textEngine.textHeight);for(var e=!0,g,f=0,h=this.__textEngine.layoutGroups.length;f<h;)if(g=f++,d=this.__textEngine.layoutGroups[g],g=g<this.__textEngine.layoutGroups.length-1?this.__textEngine.layoutGroups[g+1]:null,e&&(b<d.offsetY&&
(b=d.offsetY),a<d.offsetX&&(a=d.offsetX),e=!1),b>=d.offsetY&&b<=d.offsetY+d.height||null==g)if(a>=d.offsetX&&a<=d.offsetX+d.width||null==g||g.lineIndex!=d.lineIndex){f=e=0;for(h=d.advances.length;f<h;)if(g=f++,e+=d.advances[g],a<=d.offsetX+e){if(a<=d.offsetX+(e-d.advances[g])+d.advances[g]/2)return d.startIndex+g;if(d.startIndex+g<d.endIndex)return d.startIndex+g+1;break}return d.endIndex}return this.__textEngine.text.length},__hitTest:function(a,b,d,e,f){if(!this.get_visible()||this.__isMask||f&&
!this.mouseEnabled||null!=this.get_mask()&&!this.get_mask().__hitTestMask(a,b))return!1;this.__getWorldTransform();this.__updateLayout();d=this.__worldTransform.__transformInverseX(a,b);a=this.__worldTransform.__transformInverseY(a,b);return this.__textEngine.bounds.contains(d,a)?(null!=e&&e.push(this),!0):!1},__hitTestMask:function(a,b){this.__getWorldTransform();this.__updateLayout();var d=this.__worldTransform.__transformInverseX(a,b),e=this.__worldTransform.__transformInverseY(a,b);return this.__textEngine.bounds.contains(d,
e)?!0:!1},__renderCairo:function(a){Ld.render(this,a);E.prototype.__renderCairo.call(this,a)},__renderCanvas:function(a){Ma.render(this,a);if(this.__textEngine.antiAliasType==ic.ADVANCED&&this.__textEngine.gridFitType==kc.PIXEL){var b=a.context.imageSmoothingEnabled;b&&(a.context.mozImageSmoothingEnabled=!1,a.context.msImageSmoothingEnabled=!1,a.context.imageSmoothingEnabled=!1);E.prototype.__renderCanvas.call(this,a);b&&(a.context.mozImageSmoothingEnabled=!0,a.context.msImageSmoothingEnabled=!0,
a.context.imageSmoothingEnabled=!0)}else E.prototype.__renderCanvas.call(this,a)},__renderDOM:function(a){Pf.render(this,a)},__renderGL:function(a){null!=this.__scrollRect&&a.maskManager.pushRect(this.__scrollRect,this.__renderTransform);null!=this.__mask&&null!=this.__maskGraphics&&0<this.__maskGraphics.__commands.get_length()&&a.maskManager.pushMask(this);Ma.render(this,a);Eb.renderBitmap(this,a,this.__textEngine.antiAliasType!=ic.ADVANCED||this.__textEngine.gridFitType!=kc.PIXEL);null!=this.__mask&&
null!=this.__maskGraphics&&0<this.__maskGraphics.__commands.get_length()&&a.maskManager.popMask();null!=this.__scrollRect&&a.maskManager.popRect()},__startCursorTimer:function(){this.__cursorTimer=Uc.delay(u(this,this.__startCursorTimer),600);this.__showCursor=!this.__showCursor;this.__dirty=!0},__startTextInput:function(){0>this.__caretIndex&&(this.__selectionIndex=this.__caretIndex=this.__textEngine.text.length);null!=this.stage&&(this.stage.window.backend.setEnableTextEvents(!0),this.__inputEnabled||
(this.stage.window.backend.setEnableTextEvents(!0),this.stage.window.onTextInput.has(u(this,this.window_onTextInput))||(this.stage.window.onTextInput.add(u(this,this.window_onTextInput)),this.stage.window.onKeyDown.add(u(this,this.window_onKeyDown))),this.__inputEnabled=!0,this.__startCursorTimer()))},__stopCursorTimer:function(){null!=this.__cursorTimer&&(this.__cursorTimer.stop(),this.__cursorTimer=null);this.__showCursor&&(this.__showCursor=!1,this.__dirty=!0)},__stopTextInput:function(){this.__inputEnabled&&
null!=this.stage&&(this.stage.window.backend.setEnableTextEvents(!1),this.stage.window.onTextInput.remove(u(this,this.window_onTextInput)),this.stage.window.onKeyDown.remove(u(this,this.window_onKeyDown)),this.__inputEnabled=!1,this.__stopCursorTimer())},__updateLayout:function(){if(this.__layoutDirty){this.__textEngine.update();if(this.__textEngine.autoSize!=Bb.NONE){var a=this.__textEngine.width;switch(this.__textEngine.autoSize[1]){case 1:case 3:case 0:this.__textEngine.wordWrap||(this.__textEngine.width=
this.__textEngine.textWidth+4),this.__textEngine.height=this.__textEngine.textHeight+4}if(this.__textEngine.width!=a)switch(this.__textEngine.autoSize[1]){case 3:this.set_x(this.get_x()+(a-this.__textEngine.width));break;case 0:this.set_x(this.get_x()+(a-this.__textEngine.width)/2)}this.__textEngine.getBounds()}this.__layoutDirty=!1}},set_antiAliasType:function(a){return this.__textEngine.antiAliasType=a},set_defaultTextFormat:function(a){this.__textFormat.__merge(a);this.__dirty=this.__layoutDirty=
!0;return a},set_embedFonts:function(a){return this.__textEngine.embedFonts=a},set_height:function(a){if(1!=this.get_scaleY()||a!=this.__textEngine.height)this.__transformDirty||(this.__transformDirty=!0,z.__worldTransformDirty++),this.__layoutDirty=this.__dirty=!0;this.set_scaleY(1);return this.__textEngine.height=a},get_htmlText:function(){return this.__textEngine.text},set_htmlText:function(a){this.__isHTML&&this.__textEngine.text==a||(this.__layoutDirty=this.__dirty=!0);this.__isHTML=!0;if(null==
this.__div){a=(new Qa("<br>","g")).replace(a,"\n");a=(new Qa("<br/>","g")).replace(a,"\n");var b=a.split("<font");if(1==b.length)a=(new Qa("<.*?>","g")).replace(a,""),1<this.__textEngine.textFormatRanges.length&&this.__textEngine.textFormatRanges.splice(1,this.__textEngine.textFormatRanges.length-1),b=this.__textEngine.textFormatRanges[0],b.format=this.__textFormat,b.start=0,b.end=a.length;else{this.__textEngine.textFormatRanges.splice(0,this.__textEngine.textFormatRanges.length);a="";for(var d=0;d<
b.length;){var e=b[d];++d;if(""!=e){var f=e.indexOf("</font>");if(-1<f){var g=e.indexOf(">")+1,h=f,k=this.__textFormat.clone(),l=e.indexOf("face="),m=e.indexOf("color="),r=e.indexOf("size=");if(-1<l&&l<g){var t=e.indexOf('"',l);k.font=N.substr(e,l+6,t)}-1<m&&m<g&&(k.color=X.parseInt("0x"+N.substr(e,m+8,6)));-1<r&&r<g&&(k.size=X.parseInt(function(a){a=e.indexOf('"',r);return N.substr(e,r+6,a)}(this)));g=e.substring(g,h);g=(new Qa("<.*?>","g")).replace(g,"");this.__textEngine.textFormatRanges.push(new fe(k,
a.length,a.length+g.length));a+=g;f+7<e.length&&(g=N.substr(e,f+7,null),this.__textEngine.textFormatRanges.push(new fe(this.__textFormat,a.length,a.length+g.length)),a+=g)}else this.__textEngine.textFormatRanges.push(new fe(this.__textFormat,a.length,a.length+e.length)),a+=e}}}}return this.__textEngine.text=a},get_scrollH:function(){return this.__textEngine.scrollH},get_scrollV:function(){return this.__textEngine.scrollV},get_selectable:function(){return this.__textEngine.selectable},set_selectable:function(a){a!=
this.__textEngine.selectable&&this.get_type()==Zc.INPUT&&(null!=this.stage&&this.stage.get_focus()==this?this.__startTextInput():a||this.__stopTextInput());return this.__textEngine.selectable=a},set_text:function(a){if(this.__isHTML||this.__textEngine.text!=a)this.__layoutDirty=this.__dirty=!0;else return a;1<this.__textEngine.textFormatRanges.length&&this.__textEngine.textFormatRanges.splice(1,this.__textEngine.textFormatRanges.length-1);var b=this.__textEngine.textFormatRanges[0];b.format=this.__textFormat;
b.start=0;b.end=a.length;this.__isHTML=!1;return this.__textEngine.text=a},get_textWidth:function(){this.__updateLayout();return this.__textEngine.textWidth},get_textHeight:function(){this.__updateLayout();return this.__textEngine.textHeight},get_type:function(){return this.__textEngine.type},get_width:function(){this.__updateLayout();return this.__textEngine.width},set_width:function(a){if(1!=this.get_scaleX()||this.__textEngine.width!=a)this.__transformDirty||(this.__transformDirty=!0,z.__worldTransformDirty++),
this.__layoutDirty=this.__dirty=!0;this.set_scaleX(1);return this.__textEngine.width=a},stage_onMouseMove:function(a){null!=this.stage&&this.__textEngine.selectable&&0<=this.__selectionIndex&&(this.__updateLayout(),a=this.__getPosition(this.get_mouseX(),this.get_mouseY()),a!=this.__caretIndex&&(this.__caretIndex=a,this.__dirty=!0))},stage_onMouseUp:function(a){if(null!=this.stage&&(this.stage.removeEventListener(Y.MOUSE_MOVE,u(this,this.stage_onMouseMove)),this.stage.removeEventListener(Y.MOUSE_UP,
u(this,this.stage_onMouseUp)),this.stage.get_focus()==this)){this.__getWorldTransform();this.__updateLayout();this.__worldTransform.__transformInverseX(this.get_x(),this.get_y());this.__worldTransform.__transformInverseY(this.get_x(),this.get_y());var b=this.__getPosition(this.get_mouseX(),this.get_mouseY());a=X["int"](Math.min(this.__selectionIndex,b));b=X["int"](Math.max(this.__selectionIndex,b));this.__selectionIndex=a;this.__caretIndex=b;this.__inputEnabled&&(this.this_onFocusIn(null),this.__stopCursorTimer(),
this.__startCursorTimer())}},this_onFocusIn:function(a){this.get_selectable()&&this.get_type()==Zc.INPUT&&null!=this.stage&&this.stage.get_focus()==this&&this.__startTextInput()},this_onMouseDown:function(a){this.get_selectable()&&(this.__updateLayout(),this.__selectionIndex=this.__caretIndex=this.__getPosition(this.get_mouseX(),this.get_mouseY()),this.__dirty=!0,this.stage.addEventListener(Y.MOUSE_MOVE,u(this,this.stage_onMouseMove)),this.stage.addEventListener(Y.MOUSE_UP,u(this,this.stage_onMouseUp)))},
window_onKeyDown:function(a,b){switch(a){case 8:this.__selectionIndex==this.__caretIndex&&0<this.__caretIndex&&(this.__selectionIndex=this.__caretIndex-1);this.__selectionIndex!=this.__caretIndex&&(this.replaceSelectedText(""),this.__selectionIndex=this.__caretIndex,this.dispatchEvent(new Q(Q.CHANGE,!0)));break;case 127:this.__selectionIndex==this.__caretIndex&&this.__caretIndex<this.__textEngine.text.length&&(this.__selectionIndex=this.__caretIndex+1);this.__selectionIndex!=this.__caretIndex&&(this.replaceSelectedText(""),
this.__selectionIndex=this.__caretIndex,this.dispatchEvent(new Q(Q.CHANGE,!0)));break;case 1073741904:ib.get_shiftKey(b)?0<this.__caretIndex&&this.__caretIndex--:(this.__selectionIndex==this.__caretIndex?0<this.__caretIndex&&this.__caretIndex--:this.__caretIndex=X["int"](Math.min(this.__caretIndex,this.__selectionIndex)),this.__selectionIndex=this.__caretIndex);this.__stopCursorTimer();this.__startCursorTimer();break;case 1073741903:ib.get_shiftKey(b)?this.__caretIndex<this.__textEngine.text.length&&
this.__caretIndex++:(this.__selectionIndex==this.__caretIndex?this.__caretIndex<this.__textEngine.text.length&&this.__caretIndex++:this.__caretIndex=X["int"](Math.max(this.__caretIndex,this.__selectionIndex)),this.__selectionIndex=this.__caretIndex);this.__stopCursorTimer();this.__startCursorTimer();break;case 99:64!=b&&128!=b||Zd.set_text(this.__textEngine.text.substring(this.__caretIndex,this.__selectionIndex));break;case 120:if(64==b||128==b)Zd.set_text(this.__textEngine.text.substring(this.__caretIndex,
this.__selectionIndex)),this.__caretIndex!=this.__selectionIndex&&(this.replaceSelectedText(""),this.dispatchEvent(new Q(Q.CHANGE,!0)));break;case 118:if(64==b||128==b){var d=Zd.get_text();null!=d?this.replaceSelectedText(d):this.replaceSelectedText("");this.dispatchEvent(new Q(Q.CHANGE,!0))}}},window_onTextInput:function(a){this.replaceSelectedText(a);this.dispatchEvent(new Q(Q.CHANGE,!0))},__class__:Ib,__properties__:l(E.prototype.__properties__,{get_textHeight:"get_textHeight",get_textWidth:"get_textWidth",
get_type:"get_type",set_text:"set_text",set_selectable:"set_selectable",get_selectable:"get_selectable",get_scrollV:"get_scrollV",get_scrollH:"get_scrollH",set_htmlText:"set_htmlText",get_htmlText:"get_htmlText",set_embedFonts:"set_embedFonts",set_defaultTextFormat:"set_defaultTextFormat",set_antiAliasType:"set_antiAliasType"})});var Bb=k["openfl.text.TextFieldAutoSize"]={__ename__:!0,__constructs__:["CENTER","LEFT","NONE","RIGHT"]};Bb.CENTER=["CENTER",0];Bb.CENTER.toString=r;Bb.CENTER.__enum__=Bb;
Bb.LEFT=["LEFT",1];Bb.LEFT.toString=r;Bb.LEFT.__enum__=Bb;Bb.NONE=["NONE",2];Bb.NONE.toString=r;Bb.NONE.__enum__=Bb;Bb.RIGHT=["RIGHT",3];Bb.RIGHT.toString=r;Bb.RIGHT.__enum__=Bb;var Zc=k["openfl.text.TextFieldType"]={__ename__:!0,__constructs__:["DYNAMIC","INPUT"]};Zc.DYNAMIC=["DYNAMIC",0];Zc.DYNAMIC.toString=r;Zc.DYNAMIC.__enum__=Zc;Zc.INPUT=["INPUT",1];Zc.INPUT.toString=r;Zc.INPUT.__enum__=Zc;var Je=function(a,b,d,e,f,g,h,k,l,m,r,t,u){this.font=a;this.size=b;this.color=d;this.bold=e;this.italic=
f;this.underline=g;this.url=h;this.target=k;this.align=l;this.leftMargin=m;this.rightMargin=r;this.indent=t;this.leading=u};k["openfl.text.TextFormat"]=Je;Je.__name__=!0;Je.prototype={clone:function(){var a=new Je(this.font,this.size,this.color,this.bold,this.italic,this.underline,this.url,this.target);a.align=this.align;a.leftMargin=this.leftMargin;a.rightMargin=this.rightMargin;a.indent=this.indent;a.leading=this.leading;a.blockIndent=this.blockIndent;a.bullet=this.bullet;a.kerning=this.kerning;
a.letterSpacing=this.letterSpacing;a.tabStops=this.tabStops;return a},__merge:function(a){null!=a.font&&(this.font=a.font);null!=a.size&&(this.size=a.size);null!=a.color&&(this.color=a.color);null!=a.bold&&(this.bold=a.bold);null!=a.italic&&(this.italic=a.italic);null!=a.underline&&(this.underline=a.underline);null!=a.url&&(this.url=a.url);null!=a.target&&(this.target=a.target);null!=a.align&&(this.align=a.align);null!=a.leftMargin&&(this.leftMargin=a.leftMargin);null!=a.rightMargin&&(this.rightMargin=
a.rightMargin);null!=a.indent&&(this.indent=a.indent);null!=a.leading&&(this.leading=a.leading);null!=a.blockIndent&&(this.blockIndent=a.blockIndent);null!=a.bullet&&(this.bullet=a.bullet);null!=a.kerning&&(this.kerning=a.kerning);null!=a.letterSpacing&&(this.letterSpacing=a.letterSpacing);null!=a.tabStops&&(this.tabStops=a.tabStops)},__class__:Je};var Jb=k["openfl.text.TextFormatAlign"]={__ename__:!0,__constructs__:["LEFT","RIGHT","JUSTIFY","CENTER"]};Jb.LEFT=["LEFT",0];Jb.LEFT.toString=r;Jb.LEFT.__enum__=
Jb;Jb.RIGHT=["RIGHT",1];Jb.RIGHT.toString=r;Jb.RIGHT.__enum__=Jb;Jb.JUSTIFY=["JUSTIFY",2];Jb.JUSTIFY.toString=r;Jb.JUSTIFY.__enum__=Jb;Jb.CENTER=["CENTER",3];Jb.CENTER.toString=r;Jb.CENTER.__enum__=Jb;var Wa=function(){};k["openfl.ui.GameInput"]=Wa;Wa.__name__=!0;Wa.__getDevice=function(a){if(null==a)return null;if(null==Wa.__devices.h.__keys__[a.__id__]){var b=new Ee(null==a.id?"null":""+a.id,null);Wa.__devices.set(a,b);Wa.numDevices=uc.count(Wa.__devices)}return Wa.__devices.h[a.__id__]};Wa.__onGamepadAxisMove=
function(a,b,d){a=Wa.__getDevice(a);if(null!=a&&a.enabled){if(!a.__axis.h.hasOwnProperty(b)){var e;switch(b){case 0:e="LEFT_X";break;case 1:e="LEFT_Y";break;case 2:e="RIGHT_X";break;case 3:e="RIGHT_Y";break;case 4:e="TRIGGER_LEFT";break;case 5:e="TRIGGER_RIGHT";break;default:e="UNKNOWN ("+b+")"}e=new Ec(a,"AXIS_"+e,-1,1);a.__axis.h[b]=e;a.__controls.push(e)}b=a.__axis.h[b];b.value=d;b.dispatchEvent(new Q(Q.CHANGE))}};Wa.__onGamepadButtonDown=function(a,b){var d=Wa.__getDevice(a);if(null!=d&&d.enabled){if(!d.__button.h.hasOwnProperty(b)){var e;
switch(b){case 0:e="A";break;case 1:e="B";break;case 2:e="X";break;case 3:e="Y";break;case 4:e="BACK";break;case 5:e="GUIDE";break;case 6:e="START";break;case 7:e="LEFT_STICK";break;case 8:e="RIGHT_STICK";break;case 9:e="LEFT_SHOULDER";break;case 10:e="RIGHT_SHOULDER";break;case 11:e="DPAD_UP";break;case 12:e="DPAD_DOWN";break;case 13:e="DPAD_LEFT";break;case 14:e="DPAD_RIGHT";break;default:e="UNKNOWN ("+b+")"}e=new Ec(d,"BUTTON_"+e,0,1);d.__button.h[b]=e;d.__controls.push(e)}d=d.__button.h[b];d.value=
1;d.dispatchEvent(new Q(Q.CHANGE))}};Wa.__onGamepadButtonUp=function(a,b){var d=Wa.__getDevice(a);if(null!=d&&d.enabled){if(!d.__button.h.hasOwnProperty(b)){var e;switch(b){case 0:e="A";break;case 1:e="B";break;case 2:e="X";break;case 3:e="Y";break;case 4:e="BACK";break;case 5:e="GUIDE";break;case 6:e="START";break;case 7:e="LEFT_STICK";break;case 8:e="RIGHT_STICK";break;case 9:e="LEFT_SHOULDER";break;case 10:e="RIGHT_SHOULDER";break;case 11:e="DPAD_UP";break;case 12:e="DPAD_DOWN";break;case 13:e=
"DPAD_LEFT";break;case 14:e="DPAD_RIGHT";break;default:e="UNKNOWN ("+b+")"}e=new Ec(d,"BUTTON_"+e,0,1);d.__button.h[b]=e;d.__controls.push(e)}d=d.__button.h[b];d.value=0;d.dispatchEvent(new Q(Q.CHANGE))}};Wa.__onGamepadConnect=function(a){a=Wa.__getDevice(a);if(null!=a)for(var b=0,d=Wa.__instances;b<d.length;){var e=d[b];++b;e.dispatchEvent(new ga(ga.DEVICE_ADDED,null,null,a))}};Wa.__onGamepadDisconnect=function(a){var b=Wa.__devices.h[a.__id__];if(null!=b){Wa.__devices.remove(a);Wa.numDevices=uc.count(Wa.__devices);
a=0;for(var d=Wa.__instances;a<d.length;){var e=d[a];++a;e.dispatchEvent(new ga(ga.DEVICE_REMOVED,null,null,b))}}};Wa.__super__=C;Wa.prototype=l(C.prototype,{__class__:Wa});var Ec=function(a,b,d,e,f){null==f&&(f=0);C.call(this);this.device=a;this.id=b;this.minValue=d;this.maxValue=e;this.value=f};k["openfl.ui.GameInputControl"]=Ec;Ec.__name__=!0;Ec.__super__=C;Ec.prototype=l(C.prototype,{__class__:Ec});var Ee=function(a,b){this.__controls=[];this.__button=new qb;this.__axis=new qb;this.id=a;this.name=
b;for(var d,e=0;6>e;){var f=e++;d=new Ec(this,"AXIS_"+f,-1,1);this.__axis.h[f]=d;this.__controls.push(d)}for(e=0;15>e;)f=e++,d=new Ec(this,"BUTTON_"+f,0,1),this.__button.h[f]=d,this.__controls.push(d)};k["openfl.ui.GameInputDevice"]=Ee;Ee.__name__=!0;Ee.prototype={__class__:Ee};var af=function(){};k["openfl.ui.Keyboard"]=af;af.__name__=!0;af.__getCharCode=function(a,b){null==b&&(b=!1);if(b){switch(a){case 48:return 41;case 49:return 33;case 50:return 64;case 51:return 35;case 52:return 36;case 53:return 37;
case 54:return 94;case 55:return 38;case 56:return 42;case 57:return 40;case 186:return 58;case 187:return 43;case 188:return 60;case 189:return 95;case 190:return 62;case 191:return 63;case 192:return 126;case 219:return 123;case 220:return 124;case 221:return 125;case 222:return 34}if(65<=a&&90>=a)return a-65+65}else{switch(a){case 8:return 8;case 9:return 9;case 13:return 13;case 27:return 27;case 32:return 32;case 186:return 59;case 187:return 61;case 188:return 44;case 189:return 45;case 190:return 46;
case 191:return 47;case 192:return 96;case 219:return 91;case 220:return 92;case 221:return 93;case 222:return 39}if(48<=a&&57>=a)return a-48+48;if(65<=a&&90>=a)return a-65+97}if(96<=a&&105>=a)return a-96+48;switch(a){case 106:return 42;case 107:return 43;case 108:return 44;case 110:return 45;case 111:return 46;case 46:return 127;case 13:return 13;case 8:return 8}return 0};var Oe,lg=0;Array.prototype.indexOf&&(N.indexOf=function(a,b,d){return Array.prototype.indexOf.call(a,b,d)});k.Math=Math;String.prototype.__class__=
k.String=String;String.__name__=!0;k.Array=Array;Array.__name__=!0;Date.prototype.__class__=k.Date=Date;Date.__name__=["Date"];var pg=k.Int={__name__:["Int"]},qg=k.Dynamic={__name__:["Dynamic"]},Pb=k.Float=Number;Pb.__name__=["Float"];var eg=k.Bool=Boolean;eg.__ename__=["Bool"];var Jf=k.Class={__name__:["Class"]},wc={},ad={},le=m.ArrayBuffer||nb;null==le.prototype.slice&&(le.prototype.slice=nb.sliceImpl);var oa=m.DataView||Vb,rb=m.Uint8Array||vd._new,Zb;Zb=new Uint32Array(256);G.__alpha16=Zb;for(var Gf=
0;256>Gf;){var dg=Gf++,kg=Math.ceil(257.00392156862745*dg);G.__alpha16[dg]=kg}var Ad;Ad=new rb(510);G.__clamp=Ad;for(var Zf=0;255>Zf;){var Hf=Zf++;G.__clamp[Hf]=Hf}for(var pd=255;511>pd;){var $f=pd++;G.__clamp[$f]=255}null!=window.createjs&&(createjs.Sound.alternateExtensions=["ogg","mp3","wav"]);z.__instanceCount=0;z.__worldRenderDirty=0;z.__worldTransformDirty=0;O.PRE_BRACKETMISMATCH=0;O.PRE_MISSINGUPDATE=1;O.PARSER_INIT=2;O.PARSER_NEW=3;O.RUNTIME_INIT=4;O.RUNTIME_UPDATE=5;O.dumpstack=!1;fa._title=
"haxegon game";fa._homepage="http://www.zeedonk.net";fa._background=0;fa._foreground=16777215;L.vol=1;L.musicLoop=!0;L.playing=!1;L.playTick=0;L.selectedSequence=0;L.maxVol=9;L.B62="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\u00e0\u00e1\u00e2\u00e4\u00e6\u00e3\u00e5\u0101\u00e8\u00e9".split("");ra.ZERO4B11="04b11";ra.C64="c64";ra.COMIC="comic";ra.CRYPT="crypt";ra.DEFAULT="default";ra.DOS="dos";ra.GANON="ganon";ra.NOKIA="nokia";ra.OLDENGLISH="oldenglish";ra.PIXEL="pixel";ra.PRESSSTART="pressstart";
ra.RETROFUTURE="retrofuture";ra.ROMAN="roman";ra.SPECIAL="special";ra.THIN="thin";ra.TINY="tiny";ra.YOSTER="yoster";D.skipnextloadscript=!1;D.readytogo=!1;D.loadwhenready=!1;D.donkeyhop=0;D.zebrahop=0;D.counter=0;D.oldfont="";D.oldfontsize=0;$.Element=0;$.PCData=1;$.CData=2;$.Comment=3;$.DocType=4;$.ProcessingInstruction=5;$.Document=6;ud.count=0;Vc.i64tmp=new Pd(0,0);td.escapes=function(a){a=new ba;null!=ad.lt?a.setReserved("lt","<"):a.h.lt="<";null!=ad.gt?a.setReserved("gt",">"):a.h.gt=">";null!=
ad.amp?a.setReserved("amp","&"):a.h.amp="&";null!=ad.quot?a.setReserved("quot",'"'):a.h.quot='"';null!=ad.apos?a.setReserved("apos","'"):a.h.apos="'";return a}(this);Ra.BLACK=0;Ra.GREY=10329501;Ra.GRAY=10329501;Ra.WHITE=16777215;Ra.RED=12461619;Ra.PINK=14708619;Ra.DARKBROWN=4799531;Ra.BROWN=10773538;Ra.ORANGE=15436081;Ra.YELLOW=16245355;Ra.DARKGREEN=3098702;Ra.GREEN=4491546;Ra.LIGHTGREEN=10735143;Ra.NIGHTBLUE=1779250;Ra.DARKBLUE=22404;Ra.BLUE=3252978;Ra.LIGHTBLUE=11721967;Ra.MAGENTA=16711935;Ra.TRANSPARENT=
1;kb.debuglog=[];Xa.__temp=new Xa;Xa.__identity=new Xa;e.LEFT=-1E4;e.RIGHT=-2E4;e.TOP=-1E4;e.BOTTOM=-2E4;e.CENTER=-15E3;e.render_fps_max=-1;e.update_fps_max=-1;e.BASE64="abcdefghijklmnopqrstuvwxyz0123456789$=ABCDEFGHIJKLMNOPQRSTUVWXYZ";e.KEEPCOL=-1;e.bresx1=[];e.bresy1=[];e.bresx2=[];e.bresy2=[];e.fillcirclepoints=[];e.tiles=[];e.tilesetindex=new ba;e.currenttileset=-1;e.animations=[];e.animationindex=new ba;e.images=[];e.tl=new Na(0,0);e.imageindex=new ba;e.tempshape=new kf;e.shapematrix=new Xa;
e.hslval=[];x.keymap=new Fc;x.lookup=new qb;x.current=[];x.last=[];x.keydelay=[];x.keyheld=[];x.numletters=256;x.keybuffer="";I.mousewheel=0;I.gotosite="";ea.seed=0;h.cachedtextindex=new ba;h.cachedtext=[];h.fontfile=[];h.fontfileindex=new ba;h.typeface=[];h.typefaceindex=new ba;h.fontmatrix=new Xa;h.currentindex=-1;h.currentfont="null";h.currentsize=-1;h.LEFT=-1E4;h.RIGHT=-2E4;h.TOP=-1E4;h.BOTTOM=-2E4;h.CENTER=-15E3;xa.spaceCode=32;xa.tabCode=9;xa.newLineCode=10;xa.defaultFontKey="defaultFontKey";
xa.defaultFontData=" 36000000000000000000!26101010001000\"46101010100000000000000000#66010100111110010100111110010100000000$56001000111011000001101110000100%66100100000100001000010000010010000000&66011000100000011010100100011010000000'26101000000000(36010100100100010000)36100010010010100000*46000010100100101000000000+46000001001110010000000000,36000000000000010100-46000000001110000000000000.26000000001000/66000010000100001000010000100000000000056011001001010010100100110000000156011000010000100001000010000000256111000001001100100001111000000356111000001001100000101110000000456100101001010010011100001000000556111101000011100000101110000000656011001000011100100100110000000756111000001000010001100001000000856011001001001100100100110000000956011001001010010011100001000000:26001000100000;26001000101000<46001001001000010000100000=46000011100000111000000000>46100001000010010010000000?56111000001001100000000100000000@66011100100010101110101010011100000000A56011001001010010111101001000000B56111001001011100100101110000000C56011001001010000100100110000000D56111001001010010100101110000000E56111101000011000100001111000000F56111101000010000110001000000000G56011001000010110100100111000000H56100101001011110100101001000000I26101010101000J56000100001000010100100110000000K56100101001010010111001001000000L46100010001000100011100000M66100010100010110110101010100010000000N56100101001011010101101001000000O56011001001010010100100110000000P56111001001010010111001000000000Q56011001001010010100100110000010R56111001001010010111001001000000S56011101000001100000101110000000T46111001000100010001000000U56100101001010010100100110000000V56100101001010010101000100000000W66100010100010101010110110100010000000X56100101001001100100101001000000Y56100101001010010011100001001100Z56111100001001100100001111000000[36110100100100110000}46110001000010010011000000]36110010010010110000^46010010100000000000000000_46000000000000000011110000'26101000000000a56000000111010010100100111000000b56100001110010010100101110000000c46000001101000100001100000d56000100111010010100100111000000e56000000110010110110000110000000f46011010001000110010000000g5700000011001001010010011100001001100h56100001110010010100101001000000i26100010101000j37010000010010010010100k56100001001010010111001001000000l26101010101000m66000000111100101010101010101010000000n56000001110010010100101001000000o56000000110010010100100110000000p5700000111001001010010111001000010000q5700000011101001010010011100001000010r46000010101100100010000000s56000000111011000001101110000000t46100011001000100001100000u56000001001010010100100111000000v56000001001010010101000100000000w66000000101010101010101010011110000000x56000001001010010011001001000000y5700000100101001010010011100001001100z56000001111000100010001111000000{46011001001000010001100000|26101010101000}46110001000010010011000000~56010101010000000000000000000000\\46111010101010101011100000";
xa.fonts=new ba;xa.DEFAULT_GLYPHS=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~";xa.POINT=new Na;xa.MATRIX=new Xa;xa.COLOR_TRANSFORM=new pc;W.__toStr={}.toString;vd.BYTES_PER_ELEMENT=1;ka.cache=new qe;ka.libraries=new ba;ka.onChange=new Va;ka.initialized=!1;Oa.windowID=0;yb.images=new ba;yb.loaders=new ba;fd.onConnect=new Lf;Le.onConnect=new uf;Xb.onEnd=new te;Xb.onMove=new te;Xb.onStart=new te;ub.cache=new Se;qd.__rootURL=window.document.URL;ae.currentDomain=
new ae(null);La.current=new we;ob.SIN45=0.7071067811865476;ob.TAN22=0.41421356237309503;Ta.SIN45=0.7071067811865476;Ta.TAN22=0.41421356237309503;v.SIN45=0.7071067811865476;v.TAN22=0.41421356237309503;v.fillCommands=new Ue;v.strokeCommands=new Ue;Eb.glContextId=0;Eb.glContexts=[];hb.UID=0;w.__currentWinding=0;w.__fillIndex=0;ya.__temp=new ya;V.fillVertexAttributes=[new Da(2,5126,!1,"aPosition")];V.drawTrianglesVertexAttributes=[new Da(2,5126,!1,"aPosition"),new Da(2,5126,!1,"aTexCoord0"),new Da(4,
5121,!0,"aColor")];V.primitiveVertexAttributes=[new Da(2,5126,!1,"aPosition"),new Da(4,5126,!1,"aColor")];V.bucketPool=[];V.objectPosition=new Na;V.objectBounds=new ya;Q.ACTIVATE="activate";Q.ADDED="added";Q.ADDED_TO_STAGE="addedToStage";Q.CHANGE="change";Q.COMPLETE="complete";Q.DEACTIVATE="deactivate";Q.ENTER_FRAME="enterFrame";Q.MOUSE_LEAVE="mouseLeave";Q.OPEN="open";Q.REMOVED="removed";Q.REMOVED_FROM_STAGE="removedFromStage";Q.RENDER="render";Q.RESIZE="resize";tc.TEXT_INPUT="textInput";Kb.FOCUS_IN=
"focusIn";Kb.FOCUS_OUT="focusOut";S.FULL_SCREEN="fullScreen";ga.DEVICE_ADDED="deviceAdded";ga.DEVICE_REMOVED="deviceRemoved";lc.HTTP_STATUS="httpStatus";Oc.IO_ERROR="ioError";Ub.KEY_DOWN="keyDown";Ub.KEY_UP="keyUp";Y.CLICK="click";Y.DOUBLE_CLICK="doubleClick";Y.MIDDLE_CLICK="middleClick";Y.MIDDLE_MOUSE_DOWN="middleMouseDown";Y.MIDDLE_MOUSE_UP="middleMouseUp";Y.MOUSE_DOWN="mouseDown";Y.MOUSE_MOVE="mouseMove";Y.MOUSE_OUT="mouseOut";Y.MOUSE_OVER="mouseOver";Y.MOUSE_UP="mouseUp";Y.MOUSE_WHEEL="mouseWheel";
Y.RIGHT_CLICK="rightClick";Y.RIGHT_MOUSE_DOWN="rightMouseDown";Y.RIGHT_MOUSE_UP="rightMouseUp";De.PROGRESS="progress";zd.SECURITY_ERROR="securityError";Jc.__registeredSounds=new ba;Wa.numDevices=0;Wa.__devices=new ud;Wa.__instances=[];F.main()})("undefined"!=typeof console?console:{log:function(){}},"undefined"!=typeof window?window:exports,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this);var canSetHTMLColors=!1,canDump=!1,canYoutube=!1,inputHistory=[],compiledText,canOpenEditor=!0,IDE=!0,colorNames="BLACK GREY GRAY WHITE RED PINK DARKBROWN BROWN ORANGE YELLOW DARKGREEN GREEN LIGHTGREEN NIGHTBLUE DARKBLUE BLUE LIGHTBLUE MAGENTA TRANSPARENT".split(" ");var unitTesting=!1,curlevel=0,curlevelTarget=null,levelEditorOpened=!1,compiling=!1,errorStrings=[],errorCount=0,gameScript=null;function getScript(){return gameScript}document.oncontextmenu=function(b){"CANVAS"==b.target.tagName&&b.preventDefault()};function isIDE(){return IDE}function bodyIsTargetted(){return"BODY"==document.activeElement.nodeName}function saveKey_terryhasntupgraded(b,f){localStorage.setItem(window.document.URL.toString()+b,f)}
function loadKey_terryhasntupgraded(b){return localStorage.getItem(window.document.URL.toString()+b)}function onBackspace(b,f){var m;"undefined"!==typeof b.keyIdentifier?m=b.keyIdentifier:"undefined"!==typeof b.keyCode&&(m=b.keyCode);if("U+0008"===m||"Backspace"===m||8===m){if("codemirror-search-field"==b.target.className.toLowerCase())return!1;"function"===typeof f&&f();return!0}return!1}
document.onkeydown=function(b){switch(b.target.tagName.toLowerCase()){case "canvas":b.preventDefault()}if(IDE){onBackspace(b,function(){b.preventDefault()});if(83==b.keyCode&&(navigator.platform.match("Mac")?b.metaKey:b.ctrlKey))return saveClick(),b.preventDefault(),!1;if(13==b.keyCode&&(navigator.platform.match("Mac")?b.metaKey:b.ctrlKey))return runClick(b),b.preventDefault(),!1;if(70==b.keyCode&&(navigator.platform.match("Mac")?b.metaKey:b.ctrlKey)){if("INPUT"===b.target.nodeName)return b.target.blur(),
editor.execCommand("find"),b.preventDefault(),!1;if("BODY"===b.target.nodeName)return editor.execCommand("find"),b.preventDefault(),!1}}};try{if(window.localStorage&&void 0!==localStorage[document.URL]){if(void 0!==localStorage[document.URL+"_checkpoint"]){var curlevelTarget=JSON.parse(localStorage[document.URL+"_checkpoint"]),arr=[],p;for(p in Object.getOwnPropertyNames(curlevelTarget.dat))arr[p]=curlevelTarget.dat[p];curlevelTarget.dat=new Int32Array(arr)}curlevel=localStorage[document.URL]}}catch(ex$$1){}
var verbose_logging=!1,throttle_movement=!1,cache_console_messages=!1,quittingTitleScreen=!1,quittingMessageScreen=!1,deltatime=17,timer=0,repeatinterval=150,autotick=0,autotickinterval=0,winning=!1,againing=!1,againinterval=150,norepeat_action=!1,oldflickscreendat=[],keybuffer=[],messageselected=!1,textImages={},initLevel={width:5,height:5,layerCount:2,dat:[1,3,3,1,1,2,2,3,3,1,2,1,2,2,3,3,1,1,2,2,3,2,1,3,2,1,3,2,1,3,1,3,3,1,1,2,2,3,3,1,2,1,2,2,3,3,1,1,2,2],movementMask:[1,3,3,1,1,2,2,3,3,1,2,1,2,
2,3,3,1,1,2,2,3,2,1,3,2,1,3,2,1,3,1,3,3,1,1,2,2,3,3,1,2,1,2,2,3,3,1,1,2,2],rigidGroupIndexMask:[],rigidMovementAppliedMask:[],bannedGroup:[],colCellContents:[],rowCellContents:[]},level=initLevel;function getTitle(){""==metaData.title&&(metaData.title="Zeedonk game");return metaData.title}var metaData={title:"Zeedonk game",homepage:"",bgCol:"#000000"};function settitle(b){window.console.log("setting title to "+b);metaData.title=b;document.title=b}
function strip_http(b){b=b.replace(/^https?:\/\//,"");return b=b.replace(/\/*$/,"")}function qualifyURL(b){var f=document.createElement("a");f.href=b;return f.href}function qualifyURL2(b){/^(f|ht)tps?:\/\//i.test(b)||(b="http://"+b);return b}
function sethomepage(b){metaData.homepage=b;if(canSetHTMLColors){var f=document.getElementById("homepagelink"),m=document.getElementById("separator");""==b?(m.style.display="none",f.textContent?f.textContent="":line.innerText&&(f.innerText="")):(m.style.display="default",f.href=qualifyURL2(metaData.homepage),f.textContent?f.textContent=strip_http(f.href):line.innerText&&(f.innerText=strip_http(f.href)))}}function decimalToHex(b){b=Number(b).toString(16);return b="000000".substr(0,6-b.length)+b}
function setbackgroundcolor(b){metaData.bgCol="#"+decimalToHex(b);canSetHTMLColors?(b=document.getElementById("openfl-content"),b.style.backgroundColor=metaData.bgCol,document.body.style.backgroundColor=metaData.bgCol):(b=document.getElementById("openfl-content"),b.style.backgroundColor=metaData.bgCol)}
function setforegroundcolor(b){metaData.fgCol="#"+decimalToHex(b);canSetHTMLColors&&(b=document.getElementById("hacklink"),b.style.color=metaData.fgCol,b=document.getElementById("separator"),b.style.color=metaData.fgCol,b=document.getElementById("homepagelink"),b.style.color=metaData.fgCol)};var moduleDescriptions={Gfx:"For drawing and manipulating shapes and images.",Col:"So many colors!",Font:"All the fonts you can use (for use with <b>Text</b> functions).",Text:"For displaying text on screen :D",Music:"For all your music and sound needs.",Key:"A list of all of the key names. For use with <b>Input</b> functions.",Input:"Responding to key presses!",Mouse:"Checking out mouse movement and clicks.",Convert:"Strings to ints to floats and back again.",Random:"",Game:"House-keeping",Math:"",
String:'<p>The basic String class.<p>A haxe String is immutable: it is not possible to modify individual characters.<p>You can access individual characters by using array notation, so "cat"[1] is "a".',Array:"[1,2,3] and all that jazz."},haxeLibraryArray=[["Gfx",".","M"],["Col",".","E"],["Font",".","E"],["Text",".","M"],["Music",".","M"],["Key",".","E"],["Input",".","M"],["Mouse",".","M"],["Convert",".","M"],["Random",".","M"],["Game",".","M"],["Math",".","M"],["String",".","M"],["trace","(message)",
"F"],["function ",""],["break",";"],["case "],["continue",";"],["default",":"],["new"],["do"],["else"],["false"],["true"],["for ",""],["if"],["in"],["null"],["switch "],["var "],["while"],["return "],["update","() ","F","This function will be called every frame by the engine if you define it."]],haxeMethodArray=[["String.length",":Int","M_P","The number of characters in this String."],["String.charAt","(index:Int):String","M_F",'Returns the character at position index of this String.<p>If index is negative or exceeds this.length, the empty String "" is returned.<p>This isn\'t really necessary because you can use array access to access characters - "doge"[2] returns "g", for instance.'],
["String.charCodeAt","(index:Int):Int","M_F",'Returns the character code at position index of this String.<p>If index is negative or exceeds this.length, null is returned.<p>To obtain the character code of a single character, "x".code can be used instead to inline the character code at compile time. Note that this only works on String literals of length 1.'],["String.concat","(string2:String, [...] ):String","M_F","Joins two or more strings together. You can also just add them, like 'cat'+'dog'."],
["String.indexOf","(str:String, startIndex:Int = 0):Int","M_F","Returns the position of the leftmost occurence of str within this String.<p>If startIndex is given, the search is performed within the substring of this String starting from startIndex. Otherwise the search is performed within this String. In either case, the returned position is relative to the beginning of this String.<p>If str cannot be found, -1 is returned."],["String.lastIndexOf","(str:String, startIndex:Int = str.length-1):Int",
"M_F","Returns the position of the rightmost occurence of str within this String.<p>If startIndex is given, the search is performed within the substring of this String from 0 to startIndex. Otherwise the search is performed within this String. In either case, the returned position is relative to the beginning of this String.<p>If str cannot be found, -1 is returned."],["String.replace","(oldSubString:String,newSubString:String):String","M_F","Returns a new string with the first occurrences of the specified substring replaced by the new string :D (also, yep, it's case-sensitive)."],
["String.slice","(beginSlice:Int,endSlice:Int = [see docs] ):String","M_F","The slice() method returns an excerpt of the old string. It doesn't modify the old string. <p>If beginSlice is negative, it is treated as sourceLength + beginSlice where sourceLength is the length of the string.<p>endSlice is the zero-based index at which to end extraction. If omitted, slice() extracts to the end of the string. If negative, it is treated as sourceLength + endSlice where sourceLength is the length of the string (for example, if endSlice is -3 it is treated as sourceLength - 3)."],
["String.split","(delimiter:String, limit=infinite):Array<String>","M_F","The split() method splits a String object into an array of strings by separating the string into substrings. If limit is specified, it return a truncated array of at most limit elements."],["String.substr","(pos:Int, len:Int = this.length-pos):String","M_F","Returns len characters of this String, starting at position pos.<p>If len is omitted, all characters from position pos to the end of this String are included.<p>If pos is negative, its value is calculated from the end of this String by this.length + pos. If this yields a negative value, 0 is used instead.<p>If the calculated position + len exceeds this.length, the characters from that position to the end of this String are returned.<p>If len is negative, the result is unspecified."],
["String.toLowerCase","():String","M_F","Converts a string to lower case."],["String.toString","():String","M_F","Returns the string itself.<p>A bit dumb out of context, but the idea is that you can call toString() on anything without having to worry about its type."],["String.toUpperCase","():String","M_F","Converts a string to upper case."],["String.trim","():String","M_F","Returns a new string with all the whitespace at the beginning/end removed."],["Array.length",":Int","M_P","The length of this Array."],
["Array.concat","(a:Array):Array","M_F","Returns a new Array by appending the elements of a to the elements of this Array.<p>This operation does not modify this Array.<p>If a is the empty Array [], a copy of this Array is returned.<p>The length of the returned Array is equal to the sum of this.length and a.length.<p>If a is null, the result is unspecified."],["Array.every","(callback : S -> Bool):Bool","M_F","The function is applied to members of the array, and returns true if it is true every one of them."],
["Array.filter","(f:T \u2011> Bool):Array<T>","M_F","Returns an Array containing those elements of this for which f returned true.<p>The individual elements are not duplicated and retain their identity.<p>If f is null, the result is unspecified."],["Array.indexOf","(x:T, fromIndex:Int = 0):Int","M_F","Returns position of the first occurense of x in this Array, searching front to back.<p>If x is found by checking standard equality, the function returns its index.<p>If x is not found, the function returns -1.<p>If fromIndex is specified, it will be used as the starting index to search from, otherwise search starts with zero index. If it is negative, it will be taken as the offset from the end of this Array to compute the starting index. If given or computed starting index is less than 0, the whole array will be searched, if it is greater than or equal to the length of this Array, the function returns -1."],
["Array.join","(sep:String):String","M_F",'Returns a string representation of this Array, with sep separating each element.<p>The result of this operation is equal to Std.string(this[0]) + sep + Std.string(this[1]) + sep + ... + sep + Std.string(this[this.length-1])<p>If this is the empty Array [], the result is the empty String "". If this has exactly one element, the result is equal to a call to Std.string(this[0]).<p>If sep is null, the result is unspecified.'],["Array.lastIndexOf","(x:T, fromIndex:Int = this.length-1):Int",
"M_F","Returns position of the last occurense of x in this Array, searching back to front.<p>If x is found by checking standard equality, the function returns its index.<p>If x is not found, the function returns -1.<p>If fromIndex is specified, it will be used as the starting index to search from, otherwise search starts with the last element index. If it is negative, it will be taken as the offset from the end of this Array to compute the starting index. If given or computed starting index is greater than or equal to the length of this Array, the whole array will be searched, if it is less than 0, the function returns -1."],
["Array.map","(f:S \u2011> T):Array<T>","M_F","Creates a new Array by applying function f to all elements of this.<p>The order of elements is preserved."],["Array.pop","():T","M_F","Removes the last element of this Array and returns it.<p>This operation modifies this Array in place.<p>If this has at least one element, this.length will decrease by 1.<p>If this is the empty Array [], null is returned and the length remains 0."],["Array.push","(x:T, [y:T,...]):Int","M_F","Adds the supplied objects to the end of the array  and returns the new length of this Array.<p>This operation modifies this Array.<p>"],
["Array.reverse","()","M_F","Reverse the order of elements of this Array.<p>This modifies the array."],["Array.shift","()","M_F","Removes the first element of this Array and returns it.<p>This modifies this Array.<p> If it's empty, it does nothing and returns null."],["Array.slice","(pos:Int, end:Int = this.length):Array","M_F","Creates a shallow copy of the range of this Array, starting at and including pos, up to but not including end.<p>This operation does not modify this Array.<p>The elements are not copied and retain their identity.<p>If end is omitted or exceeds this.length, it defaults to the end of this Array.<p>If pos or end are negative, their offsets are calculated from the end of this Array by this.length + pos and this.length + end respectively. If this yields a negative value, 0 is used instead.<p>If pos exceeds this.length or if end exceeds or equals pos, the result is []."],
["Array.some","(callback : S -> Bool):Bool","M_F","The function is applied to members of the array, and returns true if it is true for one of them."],["Array.sort","(compareFunction = defaultCompare)","M_F",'Sorts the array elements using "<" and the like, unless a custom compare function is specified.'],["Array.splice","(pos:Int, len:Int):Array","M_F","Removes len elements from this Array, starting at and including pos, an returns them.<p>This operation modifies this Array.<p>If len is < 0 or pos exceeds this.length, an empty array is returned.<p>If pos is negative, its value is calculated from the end of this Array by this.length + pos. If this yields a negative value, 0 is used instead.<p>If the sum of the resulting values for len and pos exceed this.length, this operation will affect the elements from pos to the end of this Array.<p>The length of the returned Array is equal to the new length of this Array subtracted from the original length of this Array. In other words, each element of the original this Array either remains in this Array or becomes an element of the returned Array.<p>Super useful for removing elements from an array, if you know the index."],
["Array.toString","():String","M_F","Returns a string representation of this Array.<p>The result will include the individual elements' String representations separated by comma. The enclosing [ ] may be missing on some platforms, use Std.string() to get a String representation that is consistent across platforms."],["Array.unshift","(x:T)","M_F","Adds the element x at the start of this Array.<p>This operation modifies this Array in place.<p>this.length and the index of each Array element increases by 1."]],
haxeHintArray=[["Gfx.clearscreen","(color)","F"],["Gfx.clearscreeneachframe",":Bool","P"],["Gfx.drawbox","(x, y, width, height, col)","F"],["Gfx.fillbox","(x, y, width, height, col)","F"],["Gfx.drawtri","(x1, y1, x2, y2, x3, y3, col)","F"],["Gfx.filltri","(x1, y1, x2, y2, x3, y3, col)","F"],["Gfx.drawcircle","(x, y, radius, col)","F"],["Gfx.fillcircle","(x, y, radius, col)","F"],["Gfx.drawhexagon","(x, y, radius, angle, col)","F"],["Gfx.fillhexagon","(x, y, radius, angle, col)","F"],["Gfx.drawline",
"(x1, y1, x2, y2, col)","F"],["Gfx.linethickness",":Float","P"],["Gfx.getpixel","(x, y)","F"],["Gfx.setpixel","(x, y, col):Int","F"],["Gfx.rgb","(red [0-255], green [0-255], blue [0-255] ):Int","F","Converts a color with given red, green, and blue values (between 0-255 each) to a single hex number."],["Gfx.hsl","(hue [0-0], saturation [0-1.0], lightness [0-1.0] ):Int","F","Converts a color with given hue (0-360), saturation [0-1], and lightness [0-1] values to a single hex number."],["Gfx.getred",
"(col):Int","F","Returns the red component of a hex color (Between 0-255 inclusive)."],["Gfx.getgreen","(col):Int","F","Returns the green component of a hex color (Between 0-255 inclusive)."],["Gfx.getblue","(col):Int","F","Returns the blue component of a hex color (Between 0-255 inclusive)."],["Gfx.gethue","(col):Int","F","Returns the hue (0-360) value of a color."],["Gfx.getsaturation","(col):Float","F","Returns the saturation (0.0-1.0) value of a color."],["Gfx.getlightness","(col):Int","F","Returns the lightness (0.0-1.0) value of a color."],
["Gfx.screenwidth",":Int","P"],["Gfx.screenheight",":Int","P"],["Gfx.screenwidthmid",":Int","P","Returns screen width divided by two."],["Gfx.screenheightmid",":Int","P","Returns screen height divided by two."],["Gfx.drawimage","(x, y, imagename, optional parameters)","F"],["Gfx.imagewidth","(imagename):Int","P"],["Gfx.imageheight","(imagename):Int","P"],["Gfx.loadimagestring","(imagename, imagestring, optional color1, color2, color3, color4) ","F"],["Gfx.createimage","(imagename, width, height) ",
"F"],["Gfx.resizeimage","(imagename, scale)","F"],["Gfx.drawtoscreen","()","F"],["Gfx.drawtoimage","(imagename)","F"],["Gfx.grabimagefromscreen","(imagename, screen x, screen y)","F","This function grabs a copy of the screen from position x,y, and places it in the image."],["Gfx.grabimagefromimage","(imagename, sourceimagename, image x, image y, imagewidth=w, imageheight=h)","F","Imagewidth and Imageheight are optional parameters. If left out, the function will use the width and height of the destination image."],
["Gfx.showfps",":Bool","P","Whether or not to show the fps counter."],["Gfx.rotation","(angle:Float, xpivot=Gfx.CENTER, ypivot=Gfx.CENTER)","F","Rotates image drawing functions. Optionally set rotation pivot point."],["Gfx.scale","(xscale, yscale, xpivot=Gfx.CENTER, ypivot=Gfx.CENTER)","F","Scales image drawing functions, as it's being drawn. Optionally set scaling pivot point."],["Gfx.imagecolor","(c:Int = Col.WHITE)","F","Set a colour multipler in RGB for image drawing functions. Leave parameter blank to return to normal."],
["Gfx.CENTER","","P"],["Gfx.LEFT","","P"],["Gfx.RIGHT","","P"],["Gfx.TOP","","P"],["Gfx.BOTTOM","","P"],["Col.BLACK","","Col"],["Col.GREY","","Col"],["Col.WHITE","","Col"],["Col.RED","","Col"],["Col.PINK","","Col"],["Col.DARKBROWN","","Col"],["Col.BROWN","","Col"],["Col.ORANGE","","Col"],["Col.YELLOW","","Col"],["Col.DARKGREEN","","Col"],["Col.GREEN","","Col"],["Col.LIGHTGREEN","","Col"],["Col.NIGHTBLUE","","Col"],["Col.DARKBLUE","","Col"],["Col.BLUE","","Col"],["Col.LIGHTBLUE","","Col"],["Col.MAGENTA",
"","Col"],["Col.TRANSPARENT","","Col"],["Font.C64","","E","<img src='images/fonts/Font_C64.png'><br />(This font is monospace.)"],["Font.COMIC","","E","<img src='images/fonts/Font_COMIC.png'>"],["Font.CRYPT","","E","<img src='images/fonts/Font_CRYPT.png'><br />(This font is monospace.)"],["Font.DEFAULT","","E","<img src='images/fonts/Font_DEFAULT.png'>"],["Font.DOS","","E","<img src='images/fonts/Font_DOS.png'><br />(This font is monospace.)"],["Font.GANON","","E","<img src='images/fonts/Font_GANON.png'>"],
["Font.NOKIA","","E","<img src='images/fonts/Font_NOKIA.png'>"],["Font.OLDENGLISH","","E","<img src='images/fonts/Font_OLDENGLISH.png'>"],["Font.PIXEL","","E","<img src='images/fonts/Font_PIXEL.png'><br />(This font is monospace.)"],["Font.PRESSSTART","","E","<img src='images/fonts/Font_PRESSSTART.png'><br />(This font is monospace.)"],["Font.RETROFUTURE","","E","<img src='images/fonts/Font_RETROFUTURE.png'>"],["Font.ROMAN","","E","<img src='images/fonts/Font_ROMAN.png'>"],["Font.SPECIAL","","E",
"<img src='images/fonts/Font_SPECIAL.png'>"],["Font.THIN","","E","<img src='images/fonts/Font_THIN.png'>"],["Font.TINY","","E","<img src='images/fonts/Font_TINY.png'><br />(This font is monospace.)"],["Font.YOSTER","","E","<img src='images/fonts/Font_YOSTER.png'>"],["Font.ZERO4B11","","E","<img src='images/fonts/Font_ZERO4B11.png'>"],["Text.setfont","(fontname:Font, size:Float = 1)","F","Type Font. to see a list of fonts in autocomplete!"],["Text.changesize","(fontsize)","F","Change the size of the font. 1 is normal, 2 is double size, 3 is triple, etc."],
["Text.display","(x, y, text, col)","F","Draws text on the screen at a given coordinate."],["Text.input",'(x, y, "Question: ", Q colour, A colour):Bool',"F"],["Text.getinput","():String","F"],["Text.inputsound",":Int","P","Sets an optional sound to play while typing in Text.input()."],["Text.inputmaxlength",":Int","P","Sets maximum response length of Text.input()."],["Text.rotation","(angle:Float)","F","Sets the rotation of the next Text.display() command."],["Text.align","(position)","F","Sets the alignment for the next Text.display() command. Pass either Text.LEFT, Text.CENTER or Text.RIGHT."],
["Text.CENTER","","P"],["Text.LEFT","","P"],["Text.RIGHT","","P"],["Text.TOP","","P"],["Text.BOTTOM","","P"],["Text.height","():Float","F"],["Text.len","(t:String):Float","F"],["Music.playsound","(seed, volume [0-1] )","F"],["Music.playnote","(seed,pitch,length,volume [0-1] )","F"],["Music.playmusic","(musicDat)","F"],["Music.stopmusic","()","F"],["Music.musicvol",":Float","P","Sets the music volume, must be between 0 and 1 (default is 1)."],["Music.musicloop",":Bool","P","Should the music loop or not? (defaults to true)"],
["Key.A","","E"],["Key.B","","E"],["Key.C","","E"],["Key.D","","E"],["Key.E","","E"],["Key.F","","E"],["Key.G","","E"],["Key.H","","E"],["Key.I","","E"],["Key.J","","E"],["Key.K","","E"],["Key.L","","E"],["Key.M","","E"],["Key.N","","E"],["Key.O","","E"],["Key.P","","E"],["Key.Q","","E"],["Key.R","","E"],["Key.S","","E"],["Key.T","","E"],["Key.U","","E"],["Key.V","","E"],["Key.W","","E"],["Key.X","","E"],["Key.Y","","E"],["Key.Z","","E"],["Key.ZERO","","E"],["Key.ONE","","E"],["Key.TWO","","E"],["Key.THREE",
"","E"],["Key.FOUR","","E"],["Key.FIVE","","E"],["Key.SIX","","E"],["Key.SEVEN","","E"],["Key.EIGHT","","E"],["Key.NINE","","E"],["Key.F1","","E"],["Key.F2","","E"],["Key.F3","","E"],["Key.F4","","E"],["Key.F5","","E"],["Key.F6","","E"],["Key.F7","","E"],["Key.F8","","E"],["Key.F9","","E"],["Key.F10","","E"],["Key.F11","","E"],["Key.F12","","E"],["Key.MINUS","","E"],["Key.PLUS","","E"],["Key.DELETE","","E"],["Key.BACKSPACE","","E"],["Key.LBRACKET","","E"],["Key.RBRACKET","","E"],["Key.BACKSLASH",
"","E"],["Key.CAPSLOCK","","E"],["Key.SEMICOLON","","E"],["Key.QUOTE","","E"],["Key.COMMA","","E"],["Key.PERIOD","","E"],["Key.SLASH","","E"],["Key.ESCAPE","","E"],["Key.ENTER","","E"],["Key.SHIFT","","E"],["Key.CONTROL","","E"],["Key.ALT","","E"],["Key.SPACE","","E"],["Key.UP","","E"],["Key.DOWN","","E"],["Key.LEFT","","E"],["Key.RIGHT","","E"],["Input.justpressed","(Key.ENTER):Bool","F","True if the key has been pressed this frame."],["Input.pressed","(Key.LEFT):Bool","F","True if this key is currently held down."],
["Input.justreleased","(Key.SPACE):Bool","F","True if the key has been released this frame"],["Input.delaypressed","(Key.Z, 5):Bool","F","True once every N frames, if the key is pressed."],["Input.getchar","():String","F","Returns the last letter pressed."],["Mouse.x",":Int","P"],["Mouse.y",":Int","P"],["Mouse.leftclick","():Bool","F","True if the button has been clicked this frame."],["Mouse.leftheld","():Bool","F","True if the button is held down this frame."],["Mouse.leftreleased","():Bool","F",
"True if the mouse has been released this frame."],["Mouse.middleclick","():Bool","F","True if the button has been clicked this frame."],["Mouse.middleheld","():Bool","F","True if the button is held down this frame."],["Mouse.middlereleased","():Bool","F","True if the mouse has been released this frame."],["Mouse.rightclick","():Bool","F","True if the button has been clicked this frame."],["Mouse.rightheld","():Bool","F","True if the button is held down this frame."],["Mouse.rightreleased","():Bool",
"F","True if the mouse has been released this frame."],["Mouse.mousewheel",":Int","P"],["Convert.tostring","(1234):String","F"],["Convert.toint",'("15"):Int',"F","Convert a string or a floating-point number to an integer."],["Convert.tofloat",'("3.1417826"):Float',"F","Convert a string or an integer to a floating-point number."],["Random.int","(from, to_inclusive):Int","F"],["Random.float","(from, to_inclusive):Float","F"],["Random.string","(length):String","F"],["Random.bool","():Bool","F","50:50 chance of being true/false"],
["Random.occasional","():Bool","F","True one time in five."],["Random.rare","():Bool","F","5% chance of being true"],["Random.chance","(n:int):Bool","F","n% chance of being true"],["Random.pick","(list:Array<T>):T","F","Picks a random element from an array."],["Random.pickstring",'("this one", "or this one?", "maybe this one?"):String',"F","Pick between a list of strings. Can list up to 12!"],["Random.pickint","(5, 14, 72, 92, 1, -723, 8):Int","F","Pick between a list of integers. Can list up to 12!"],
["Random.pickfloat","(5.1, 14.2, 72.3, 92.4, 1.5, -723.6, 8.7):Float","F","Pick between a list of floating-point numbers. Can list up to 12!"],["Game.title",":String","P","Sets the page header."],["Game.homepage",":String","P","Set a homepage link to appear in the standalone player."],["Game.background",":Int","P","Sets color of the background in the standalone player."],["Game.foreground",":Int","P","Sets color of title text + links in standalone player."],["Game.prompt","(description,defaultText):String",
"F"],["Game.save","(key:String,value:String)","F","Save some data permanently that will persevere even if the game is closed and reopened."],["Game.load","(key:String):String","F","Load save game data stored with Game.save. Returns null if no key present."],["Game.editor","():Bool","F","True when a game is in the editor, but false when being played in the player."],["Game.time",":Int","F","Counter. Incremented by one each frame (30 per second)."],["Game.restart","()","F","Restarts the game, resetting all variables."],
["Math.PI",":Float","C"],["Math.abs","(v:Float):Float","F"],["Math.acos","(v:Float):Float","F"],["Math.asin","(v:Float):Float","F"],["Math.atan","(v:Float):Float","F"],["Math.atan2","(y:Float,x:Float):Float","F"],["Math.ceil","(v:Float):Int","F"],["Math.cos","(v:Float):Float","F"],["Math.exp","(v:Float):Float","F"],["Math.floor","(v:Float):Int","F"],["Math.fround","(v:Float):Float","F"],["Math.log","(v:Float):Float","F"],["Math.max","(a:Float,b:Float):Float","F"],["Math.min","(a:Float,b:Float):Float",
"F"],["Math.pow","(v:Float,exp:Float):Float","F"],["Math.round","(v:Float):Int","F"],["Math.sin","(v:Float):Float","F"],["Math.sqrt","(v:Float):Float","F"],["Math.tan","(v:Float):Float","F"],["String.fromCharCode","(code1:Int, code2:Int, ...):String","F","Returns a string created by using the specified sequence of Unicode values."]];/*
 Public Domain

 @example
 var rng = new RNG('Example');
 rng.random(40, 50);  // =>  42
 rng.uniform();       // =>  0.7972798995050903
 rng.normal();        // => -0.6698504543216376
 rng.exponential();   // =>  1.0547367609131555
 rng.poisson(4);      // =>  2
 rng.gamma(4);        // =>  2.781724687386858
*/
String.prototype.getBytes=function(){for(var b=[],f=0;f<this.length;f++){var m=this.charCodeAt(f),l=[];do l.push(m&255),m>>=8;while(0<m);b=b.concat(l.reverse())}return b};function RC4(b){this.s=Array(256);for(var f=this.j=this.i=0;256>f;f++)this.s[f]=f;b&&this.mix(b)}RC4.prototype._swap=function(b,f){var m=this.s[b];this.s[b]=this.s[f];this.s[f]=m};RC4.prototype.mix=function(b){b=b.getBytes();for(var f=0,m=0;m<this.s.length;m++)f+=this.s[m]+b[m%b.length],f%=256,this._swap(m,f)};
RC4.prototype.next=function(){this.i=(this.i+1)%256;this.j=(this.j+this.s[this.i])%256;this._swap(this.i,this.j);return this.s[(this.s[this.i]+this.s[this.j])%256]};function print_call_stack(){console.log(Error().stack)}
function RNG(b){this.seed=b;null==b?b=(Math.random()+Date.now()).toString():"function"===typeof b?(this.uniform=b,this.nextByte=function(){return~~(256*this.uniform())},b=null):"[object String]"!==Object.prototype.toString.call(b)&&(b=JSON.stringify(b));this._normal=null;this._state=b?new RC4(b):null}RNG.prototype.nextByte=function(){return this._state.next()};RNG.prototype.uniform=function(){for(var b=0,f=0;7>f;f++)b*=256,b+=this.nextByte();return b/(Math.pow(2,56)-1)};
RNG.prototype.random=function(b,f){if(null==b)return this.uniform();null==f&&(f=b,b=0);return b+Math.floor(this.uniform()*(f-b))};RNG.prototype.normal=function(){if(null!==this._normal){var b=this._normal;this._normal=null;return b}var b=this.uniform()||Math.pow(2,-53),f=this.uniform();this._normal=Math.sqrt(-2*Math.log(b))*Math.sin(2*Math.PI*f);return Math.sqrt(-2*Math.log(b))*Math.cos(2*Math.PI*f)};RNG.prototype.exponential=function(){return-Math.log(this.uniform()||Math.pow(2,-53))};
RNG.prototype.poisson=function(b){b=Math.exp(-(b||1));var f=0,m=1;do f++,m*=this.uniform();while(m>b);return f-1};RNG.prototype.gamma=function(b){var f=(1>b?1+b:b)-1/3,m=1/Math.sqrt(9*f);do{do var l=this.normal(),A=Math.pow(m*l+1,3);while(0>=A);var u=this.uniform(),l=Math.pow(l,2)}while(u>=1-0.0331*l*l&&Math.log(u)>=0.5*l+f*(1-A+Math.log(A)));return 1>b?f*A*Math.exp(this.exponential()/-b):f*A};
RNG.roller=function(b,f){var m=b.split(/(\d+)?d(\d+)([+-]\d+)?/).slice(1),l=parseFloat(m[0])||1,A=parseFloat(m[1]),u=parseFloat(m[2])||0;f=f||new RNG;return function(){for(var b=l+u,m=0;m<l;m++)b+=f.random(A);return b}};var FastBase64_chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",FastBase64_encLookup=[];function FastBase64_Init(){for(var b=0;4096>b;b++)FastBase64_encLookup[b]=FastBase64_chars[b>>6]+FastBase64_chars[b&63]}
function FastBase64_Encode(b){for(var f=b.length,m="",l=0;2<f;)n=b[l]<<16|b[l+1]<<8|b[l+2],m+=FastBase64_encLookup[n>>12]+FastBase64_encLookup[n&4095],f-=3,l+=3;if(0<f){var A=(b[l]&252)>>2,u=(b[l]&3)<<4;1<f&&(u|=(b[++l]&240)>>4);m+=FastBase64_chars[A];m+=FastBase64_chars[u];2==f&&(A=(b[l++]&15)<<2,A|=(b[l]&192)>>6,m+=FastBase64_chars[A]);1==f&&(m+="=");m+="="}return m}FastBase64_Init();function u32ToArray(b){return[b&255,b>>8&255,b>>16&255,b>>24&255]}
function u16ToArray(b){return[b&255,b>>8&255]}
function MakeRiff(b,f,m){var l=[],A=[];b={chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:b,byteRate:0,blockAlign:0,bitsPerSample:f,subChunk2Id:[100,97,116,97],subChunk2Size:0};b.byteRate=b.sampleRate*b.numChannels*b.bitsPerSample>>3;b.blockAlign=b.numChannels*b.bitsPerSample>>3;b.subChunk2Size=m.length;b.chunkSize=36+b.subChunk2Size;l=b.chunkId.concat(u32ToArray(b.chunkSize),b.format,b.subChunk1Id,u32ToArray(b.subChunk1Size),
u16ToArray(b.audioFormat),u16ToArray(b.numChannels),u32ToArray(b.sampleRate),u32ToArray(b.byteRate),u16ToArray(b.blockAlign),u16ToArray(b.bitsPerSample),b.subChunk2Id,u32ToArray(b.subChunk2Size),m);A="data:audio/wav;base64,"+FastBase64_Encode(l);return{dat:[],wav:l,header:b,dataURI:A}}"undefined"!=typeof exports&&(exports.RIFFWAVE=RIFFWAVE);var SOUND_VOL=0.25,SAMPLE_RATE=5512,BIT_DEPTH=8,SQUARE=0,SAWTOOTH=1,SINE=2,NOISE=3,TRIANGLE=4,BREAKER=5,SHAPES="square sawtooth sine noise triangle breaker".split(" "),AUDIO_CONTEXT;"undefined"!=typeof AudioContext?AUDIO_CONTEXT=new AudioContext:"undefined"!=typeof webkitAudioContext&&(AUDIO_CONTEXT=new webkitAudioContext);var masterVolume=1;
function Params(){var b={};b.wave_type=SQUARE;b.p_env_attack=0;b.p_env_sustain=0.3;b.p_env_punch=0;b.p_env_decay=0.4;b.p_base_freq=0.3;b.p_freq_limit=0;b.p_freq_ramp=0;b.p_freq_dramp=0;b.p_vib_strength=0;b.p_vib_speed=0;b.p_arp_mod=0;b.p_arp_speed=0;b.p_duty=0;b.p_duty_ramp=0;b.p_repeat_speed=0;b.p_pha_offset=0;b.p_pha_ramp=0;b.p_lpf_freq=1;b.p_lpf_ramp=0;b.p_lpf_resonance=0;b.p_hpf_freq=0;b.p_hpf_ramp=0;b.sound_vol=0.5;b.sample_rate=SAMPLE_RATE;b.bit_depth=BIT_DEPTH;return b}var rng,seeded=!1;
function frnd(b){return seeded?rng.uniform()*b:Math.random()*b}function rnd(b){return seeded?Math.floor(rng.uniform()*(b+1)):Math.floor(Math.random()*(b+1))}pickupCoin=function(){var b=Params();b.wave_type=Math.floor(frnd(SHAPES.length));3===b.wave_type&&(b.wave_type=0);b.p_base_freq=0.4+frnd(0.5);b.p_env_attack=0;b.p_env_sustain=frnd(0.1);b.p_env_decay=0.1+frnd(0.4);b.p_env_punch=0.3+frnd(0.3);if(rnd(1)){b.p_arp_speed=0.5+frnd(0.2);var f=(frnd(7)|1)+1,m=f+(frnd(7)|1)+2;b.p_arp_mod=+f/+m}return b};
laserShoot=function(){var b=Params();b.wave_type=rnd(2);b.wave_type===SINE&&rnd(1)&&(b.wave_type=rnd(1));b.wave_type=Math.floor(frnd(SHAPES.length));3===b.wave_type&&(b.wave_type=SQUARE);b.p_base_freq=0.5+frnd(0.5);b.p_freq_limit=b.p_base_freq-0.2-frnd(0.6);0.2>b.p_freq_limit&&(b.p_freq_limit=0.2);b.p_freq_ramp=-0.15-frnd(0.2);0===rnd(2)&&(b.p_base_freq=0.3+frnd(0.6),b.p_freq_limit=frnd(0.1),b.p_freq_ramp=-0.35-frnd(0.3));rnd(1)?(b.p_duty=frnd(0.5),b.p_duty_ramp=frnd(0.2)):(b.p_duty=0.4+frnd(0.5),
b.p_duty_ramp=-frnd(0.7));b.p_env_attack=0;b.p_env_sustain=0.1+frnd(0.2);b.p_env_decay=frnd(0.4);rnd(1)&&(b.p_env_punch=frnd(0.3));0===rnd(2)&&(b.p_pha_offset=frnd(0.2),b.p_pha_ramp=-frnd(0.2));rnd(1)&&(b.p_hpf_freq=frnd(0.3));return b};
explosion=function(){var b=Params();rnd(1)?(b.p_base_freq=0.1+frnd(0.4),b.p_freq_ramp=-0.1+frnd(0.4)):(b.p_base_freq=0.2+frnd(0.7),b.p_freq_ramp=-0.2-frnd(0.2));b.p_base_freq*=b.p_base_freq;0===rnd(4)&&(b.p_freq_ramp=0);0===rnd(2)&&(b.p_repeat_speed=0.3+frnd(0.5));b.p_env_attack=0;b.p_env_sustain=0.1+frnd(0.3);b.p_env_decay=frnd(0.5);0===rnd(1)&&(b.p_pha_offset=-0.3+frnd(0.9),b.p_pha_ramp=-frnd(0.3));b.p_env_punch=0.2+frnd(0.6);rnd(1)&&(b.p_vib_strength=frnd(0.7),b.p_vib_speed=frnd(0.6));0===rnd(2)&&
(b.p_arp_speed=0.6+frnd(0.3),b.p_arp_mod=0.8-frnd(1.6));return b};
birdSound=function(){var b=Params();if(1>frnd(10))return b.wave_type=Math.floor(frnd(SHAPES.length)),3===b.wave_type&&(b.wave_type=SQUARE),b.p_env_attack=0.4304400932967592+frnd(0.2)-0.1,b.p_env_sustain=0.15739346034252394+frnd(0.2)-0.1,b.p_env_punch=0.004488201744871758+frnd(0.2)-0.1,b.p_env_decay=0.07478075528212291+frnd(0.2)-0.1,b.p_base_freq=0.9865265720147687+frnd(0.2)-0.1,b.p_freq_limit=0+frnd(0.2)-0.1,b.p_freq_ramp=-0.2995018224359539+frnd(0.2)-0.1,0.5>frnd(1)&&(b.p_freq_ramp=0.1+frnd(0.15)),
b.p_freq_dramp=0.004598608156964473+frnd(0.1)-0.05,b.p_vib_strength=-0.2202799497929496+frnd(0.2)-0.1,b.p_vib_speed=0.8084998703158364+frnd(0.2)-0.1,b.p_arp_mod=0,b.p_arp_speed=0,b.p_duty=-0.9031808754347107+frnd(0.2)-0.1,b.p_duty_ramp=-0.8128699999808343+frnd(0.2)-0.1,b.p_repeat_speed=0.601486018931999+frnd(0.2)-0.1,b.p_pha_offset=-0.9424902314367765+frnd(0.2)-0.1,b.p_pha_ramp=-0.1055482222272056+frnd(0.2)-0.1,b.p_lpf_freq=0.9989765717851521+frnd(0.2)-0.1,b.p_lpf_ramp=-0.25051720626043017+frnd(0.2)-
0.1,b.p_lpf_resonance=0.32777871505494693+frnd(0.2)-0.1,b.p_hpf_freq=0.0023548750981756753+frnd(0.2)-0.1,b.p_hpf_ramp=-0.002375673204842568+frnd(0.2)-0.1,b;if(1>frnd(10))return b.wave_type=Math.floor(frnd(SHAPES.length)),3===b.wave_type&&(b.wave_type=SQUARE),b.p_env_attack=0.5277795946672003+frnd(0.2)-0.1,b.p_env_sustain=0.18243733568468432+frnd(0.2)-0.1,b.p_env_punch=-0.020159754546840117+frnd(0.2)-0.1,b.p_env_decay=0.1561353422051903+frnd(0.2)-0.1,b.p_base_freq=0.9028855606533718+frnd(0.2)-0.1,
b.p_freq_limit=-0.008842787837148716,b.p_freq_ramp=-0.1,b.p_freq_dramp=-0.012891241489551925,b.p_vib_strength=-0.17923136138403065+frnd(0.2)-0.1,b.p_vib_speed=0.908263385610142+frnd(0.2)-0.1,b.p_arp_mod=0.41690153355414894+frnd(0.2)-0.1,b.p_arp_speed=0.0010766233195860704+frnd(0.2)-0.1,b.p_duty=-0.8735363011184684+frnd(0.2)-0.1,b.p_duty_ramp=-0.7397985366747507+frnd(0.2)-0.1,b.p_repeat_speed=0.0591789344172107+frnd(0.2)-0.1,b.p_pha_offset=-0.9961184222777699+frnd(0.2)-0.1,b.p_pha_ramp=-0.08234769395850523+
frnd(0.2)-0.1,b.p_lpf_freq=0.9412475115697335+frnd(0.2)-0.1,b.p_lpf_ramp=-0.18261358925834958+frnd(0.2)-0.1,b.p_lpf_resonance=0.24541438107389477+frnd(0.2)-0.1,b.p_hpf_freq=-0.01831940280978611+frnd(0.2)-0.1,b.p_hpf_ramp=-0.03857383633171346+frnd(0.2)-0.1,b;if(1>frnd(10))return b.wave_type=Math.floor(frnd(SHAPES.length)),3===b.wave_type&&(b.wave_type=SQUARE),b.p_env_attack=0.4304400932967592+frnd(0.2)-0.1,b.p_env_sustain=0.15739346034252394+frnd(0.2)-0.1,b.p_env_punch=0.004488201744871758+frnd(0.2)-
0.1,b.p_env_decay=0.07478075528212291+frnd(0.2)-0.1,b.p_base_freq=0.9865265720147687+frnd(0.2)-0.1,b.p_freq_limit=0+frnd(0.2)-0.1,b.p_freq_ramp=-0.2995018224359539+frnd(0.2)-0.1,b.p_freq_dramp=0.004598608156964473+frnd(0.2)-0.1,b.p_vib_strength=-0.2202799497929496+frnd(0.2)-0.1,b.p_vib_speed=0.8084998703158364+frnd(0.2)-0.1,b.p_arp_mod=-0.46410459213693644+frnd(0.2)-0.1,b.p_arp_speed=-0.10955361249587248+frnd(0.2)-0.1,b.p_duty=-0.9031808754347107+frnd(0.2)-0.1,b.p_duty_ramp=-0.8128699999808343+frnd(0.2)-
0.1,b.p_repeat_speed=0.7014860189319991+frnd(0.2)-0.1,b.p_pha_offset=-0.9424902314367765+frnd(0.2)-0.1,b.p_pha_ramp=-0.1055482222272056+frnd(0.2)-0.1,b.p_lpf_freq=0.9989765717851521+frnd(0.2)-0.1,b.p_lpf_ramp=-0.25051720626043017+frnd(0.2)-0.1,b.p_lpf_resonance=0.32777871505494693+frnd(0.2)-0.1,b.p_hpf_freq=0.0023548750981756753+frnd(0.2)-0.1,b.p_hpf_ramp=-0.002375673204842568+frnd(0.2)-0.1,b;if(1<frnd(5))return b.wave_type=Math.floor(frnd(SHAPES.length)),3===b.wave_type&&(b.wave_type=SQUARE),rnd(1)?
(b.p_arp_mod=0.2697849293151393+frnd(0.2)-0.1,b.p_arp_speed=-0.3131172257760948+frnd(0.2)-0.1,b.p_base_freq=0.8090588299313949+frnd(0.2)-0.1,b.p_duty=-0.6210022920964955+frnd(0.2)-0.1,b.p_duty_ramp=-4.3441813553182567E-4+frnd(0.2)-0.1,b.p_env_attack=0.004321877246874195+frnd(0.2)-0.1,b.p_env_decay=0.1+frnd(0.2)-0.1,b.p_env_punch=0.061737781504416146+frnd(0.2)-0.1,b.p_env_sustain=0.4987252564798832+frnd(0.2)-0.1,b.p_freq_dramp=0.31700340314222614+frnd(0.2)-0.1,b.p_freq_limit=0+frnd(0.2)-0.1,b.p_freq_ramp=
-0.163380391341416+frnd(0.2)-0.1,b.p_hpf_freq=0.4709005021145149+frnd(0.2)-0.1,b.p_hpf_ramp=0.6924667290539194+frnd(0.2)-0.1,b.p_lpf_freq=0.8351398631384511+frnd(0.2)-0.1,b.p_lpf_ramp=0.36616557192873134+frnd(0.2)-0.1,b.p_lpf_resonance=-0.08685777111664439+frnd(0.2)-0.1,b.p_pha_offset=-0.036084571580025544+frnd(0.2)-0.1,b.p_pha_ramp=-0.014806445085568108+frnd(0.2)-0.1,b.p_repeat_speed=-0.8094368475518489+frnd(0.2)-0.1,b.p_vib_speed=0.4496665457171294+frnd(0.2)-0.1,b.p_vib_strength=0.23413762515532424+
frnd(0.2)-0.1):(b.p_arp_mod=-0.35697118026766184+frnd(0.2)-0.1,b.p_arp_speed=0.3581140690559588+frnd(0.2)-0.1,b.p_base_freq=1.3260897696157528+frnd(0.2)-0.1,b.p_duty=-0.30984900436710694+frnd(0.2)-0.1,b.p_duty_ramp=-0.0014374759133411626+frnd(0.2)-0.1,b.p_env_attack=0.3160357835682254+frnd(0.2)-0.1,b.p_env_decay=0.1+frnd(0.2)-0.1,b.p_env_punch=0.24323114016870148+frnd(0.2)-0.1,b.p_env_sustain=0.4+frnd(0.2)-0.1,b.p_freq_dramp=0.2866475886237244+frnd(0.2)-0.1,b.p_freq_limit=0+frnd(0.2)-0.1,b.p_freq_ramp=
-0.10956352368742976+frnd(0.2)-0.1,b.p_hpf_freq=0.20772718017889846+frnd(0.2)-0.1,b.p_hpf_ramp=0.1564090637378835+frnd(0.2)-0.1,b.p_lpf_freq=0.6021372770637031+frnd(0.2)-0.1,b.p_lpf_ramp=0.24016227139979027+frnd(0.2)-0.1,b.p_lpf_resonance=-0.08787383821160144+frnd(0.2)-0.1,b.p_pha_offset=-0.381597686151701+frnd(0.2)-0.1,b.p_pha_ramp=-2.481687661373495E-4+frnd(0.2)-0.1,b.p_repeat_speed=0.07812112809425686+frnd(0.2)-0.1,b.p_vib_speed=-0.13648848579133943+frnd(0.2)-0.1,b.p_vib_strength=0.0018874158972302657+
frnd(0.2)-0.1),b;b.wave_type=Math.floor(frnd(SHAPES.length));if(1===b.wave_type||3===b.wave_type)b.wave_type=2;b.p_base_freq=0.85+frnd(0.15);b.p_freq_ramp=0.3+frnd(0.15);b.p_env_attack=0+frnd(0.09);b.p_env_sustain=0.2+frnd(0.3);b.p_env_decay=0+frnd(0.1);b.p_duty=frnd(2)-1;b.p_duty_ramp=Math.pow(frnd(2)-1,3);b.p_repeat_speed=0.5+frnd(0.1);b.p_pha_offset=-0.3+frnd(0.9);b.p_pha_ramp=-frnd(0.3);b.p_arp_speed=0.4+frnd(0.6);b.p_arp_mod=0.8+frnd(0.1);b.p_lpf_resonance=frnd(2)-1;b.p_lpf_freq=1-Math.pow(frnd(1),
3);b.p_lpf_ramp=Math.pow(frnd(2)-1,3);0.1>b.p_lpf_freq&&-0.05>b.p_lpf_ramp&&(b.p_lpf_ramp=-b.p_lpf_ramp);b.p_hpf_freq=Math.pow(frnd(1),5);b.p_hpf_ramp=Math.pow(frnd(2)-1,5);return b};
pushSound=function(){var b=Params();b.wave_type=Math.floor(frnd(SHAPES.length));2===b.wave_type&&b.wave_type++;0===b.wave_type&&(b.wave_type=NOISE);b.p_base_freq=0.1+frnd(0.4);b.p_freq_ramp=0.05+frnd(0.2);b.p_env_attack=0.01+frnd(0.09);b.p_env_sustain=0.01+frnd(0.09);b.p_env_decay=0.01+frnd(0.09);b.p_repeat_speed=0.3+frnd(0.5);b.p_pha_offset=-0.3+frnd(0.9);b.p_pha_ramp=-frnd(0.3);b.p_arp_speed=0.6+frnd(0.3);b.p_arp_mod=0.8-frnd(1.6);return b};
powerUp=function(){var b=Params();rnd(1)?b.wave_type=SAWTOOTH:b.p_duty=frnd(0.6);b.wave_type=Math.floor(frnd(SHAPES.length));3===b.wave_type&&(b.wave_type=SQUARE);rnd(1)?(b.p_base_freq=0.2+frnd(0.3),b.p_freq_ramp=0.1+frnd(0.4),b.p_repeat_speed=0.4+frnd(0.4)):(b.p_base_freq=0.2+frnd(0.3),b.p_freq_ramp=0.05+frnd(0.2),rnd(1)&&(b.p_vib_strength=frnd(0.7),b.p_vib_speed=frnd(0.6)));b.p_env_attack=0;b.p_env_sustain=frnd(0.4);b.p_env_decay=0.1+frnd(0.4);return b};
hitHurt=function(){result=Params();result.wave_type=rnd(2);result.wave_type===SINE&&(result.wave_type=NOISE);result.wave_type===SQUARE&&(result.p_duty=frnd(0.6));result.wave_type=Math.floor(frnd(SHAPES.length));result.p_base_freq=0.2+frnd(0.6);result.p_freq_ramp=-0.3-frnd(0.4);result.p_env_attack=0;result.p_env_sustain=frnd(0.1);result.p_env_decay=0.1+frnd(0.2);rnd(1)&&(result.p_hpf_freq=frnd(0.3));return result};
jump=function(){result=Params();result.wave_type=SQUARE;result.wave_type=Math.floor(frnd(SHAPES.length));3===result.wave_type&&(result.wave_type=SQUARE);result.p_duty=frnd(0.6);result.p_base_freq=0.3+frnd(0.3);result.p_freq_ramp=0.1+frnd(0.2);result.p_env_attack=0;result.p_env_sustain=0.1+frnd(0.3);result.p_env_decay=0.1+frnd(0.2);rnd(1)&&(result.p_hpf_freq=frnd(0.3));rnd(1)&&(result.p_lpf_freq=1-frnd(0.6));return result};
blipSelect=function(){result=Params();result.wave_type=rnd(1);result.wave_type=Math.floor(frnd(SHAPES.length));3===result.wave_type&&(result.wave_type=rnd(1));result.wave_type===SQUARE&&(result.p_duty=frnd(0.6));result.p_base_freq=0.2+frnd(0.4);result.p_env_attack=0;result.p_env_sustain=0.1+frnd(0.1);result.p_env_decay=frnd(0.2);result.p_hpf_freq=0.1;return result};
random=function(){result=Params();result.wave_type=Math.floor(frnd(SHAPES.length));result.p_base_freq=Math.pow(frnd(2)-1,2);rnd(1)&&(result.p_base_freq=Math.pow(frnd(2)-1,3)+0.5);result.p_freq_limit=0;result.p_freq_ramp=Math.pow(frnd(2)-1,5);0.7<result.p_base_freq&&0.2<result.p_freq_ramp&&(result.p_freq_ramp=-result.p_freq_ramp);0.2>result.p_base_freq&&-0.05>result.p_freq_ramp&&(result.p_freq_ramp=-result.p_freq_ramp);result.p_freq_dramp=Math.pow(frnd(2)-1,3);result.p_duty=frnd(2)-1;result.p_duty_ramp=
Math.pow(frnd(2)-1,3);result.p_vib_strength=Math.pow(frnd(2)-1,3);result.p_vib_speed=frnd(2)-1;result.p_env_attack=Math.pow(frnd(2)-1,3);result.p_env_sustain=Math.pow(frnd(2)-1,2);result.p_env_decay=frnd(2)-1;result.p_env_punch=Math.pow(frnd(0.8),2);0.2>result.p_env_attack+result.p_env_sustain+result.p_env_decay&&(result.p_env_sustain+=0.2+frnd(0.3),result.p_env_decay+=0.2+frnd(0.3));result.p_lpf_resonance=frnd(2)-1;result.p_lpf_freq=1-Math.pow(frnd(1),3);result.p_lpf_ramp=Math.pow(frnd(2)-1,3);0.1>
result.p_lpf_freq&&-0.05>result.p_lpf_ramp&&(result.p_lpf_ramp=-result.p_lpf_ramp);result.p_hpf_freq=Math.pow(frnd(1),5);result.p_hpf_ramp=Math.pow(frnd(2)-1,5);result.p_pha_offset=Math.pow(frnd(2)-1,3);result.p_pha_ramp=Math.pow(frnd(2)-1,3);result.p_repeat_speed=frnd(2)-1;result.p_arp_speed=frnd(2)-1;result.p_arp_mod=frnd(2)-1;return result};var generators=[pickupCoin,laserShoot,explosion,powerUp,hitHurt,jump,blipSelect,pushSound,random,birdSound],generatorNames="pickupCoin laserShoot explosion powerUp hitHurt jump blipSelect pushSound random birdSound".split(" ");
generateFromSeed=function(b){rng=new RNG(b/100|0);var f=generators[b%100%generators.length];seeded=!0;f=f();f.seed=b;seeded=!1;return f};function SoundEffect(b,f){this._buffer=AUDIO_CONTEXT.createBuffer(1,b,f)}SoundEffect.prototype.getBuffer=function(){return this._buffer.getChannelData(0)};
SoundEffect.prototype.play=function(){var b=AUDIO_CONTEXT.createBufferSource();b.buffer=this._buffer;b.connect(AUDIO_CONTEXT.destination);var f=AUDIO_CONTEXT.currentTime;"undefined"!=typeof b.start?b.start(f):b.noteOn(f)};SoundEffect.MIN_SAMPLE_RATE=22050;
"undefined"==typeof AUDIO_CONTEXT&&(SoundEffect=function(b,f){this._sample_rate=f;this._buffer=Array(b);this._audioElement=null},SoundEffect.prototype.getBuffer=function(){this._audioElement=null;return this._buffer},SoundEffect.prototype.play=function(){if(this._audioElement)this._audioElement.cloneNode(!1).play();else{for(var b=0;b<this._buffer.length;b++)this._buffer[b]=255&Math.floor(128*Math.max(0,Math.min(this._buffer[b]+1,2)));b=MakeRiff(this._sample_rate,BIT_DEPTH,this._buffer);this._audioElement=
new Audio;this._audioElement.src=b.dataURI;this._audioElement.play()}},SoundEffect.MIN_SAMPLE_RATE=1);
SoundEffect.generate=function(b){function f(){m=0;l=100/(b.p_base_freq*b.p_base_freq+0.001);A=Math.floor(l);u=100/(b.p_freq_limit*b.p_freq_limit+0.001);k=1-0.01*Math.pow(b.p_freq_ramp,3);r=1E-6*-Math.pow(b.p_freq_dramp,3);F=0.5-0.5*b.p_duty;P=5E-5*-b.p_duty_ramp;C=0<=b.p_arp_mod?1-0.9*Math.pow(b.p_arp_mod,2):1+10*Math.pow(b.p_arp_mod,2);Z=Math.floor(2E4*Math.pow(1-b.p_arp_speed,2)+32);1==b.p_arp_speed&&(Z=0)}var m,l,A,u,k,r,F,P,C,Z;f();var z=0,E=0,ha=0.1*Math.pow(b.p_lpf_freq,3),Ba=1+1E-4*b.p_lpf_ramp,
ja=5/(1+20*Math.pow(b.p_lpf_resonance,2))*(0.01+ha);0.8<ja&&(ja=0.8);var ca=0,aa=0.1*Math.pow(b.p_hpf_freq,2),Ca=1+3E-4*b.p_hpf_ramp,Ia=0,Qa=0.01*Math.pow(b.p_vib_speed,2),O=0.5*b.p_vib_strength,fa=0,N=0,Ga=0,Ea=[Math.floor(b.p_env_attack*b.p_env_attack*1E5),Math.floor(b.p_env_sustain*b.p_env_sustain*1E5),Math.floor(b.p_env_decay*b.p_env_decay*1E5)];2E3>Ea[0]&&(Ea[0]=2E3);2E3>Ea[2]&&(Ea[2]=2E3);var Tb=Ea[0]+Ea[1]+Ea[2],uc=0,bc=1020*Math.pow(b.p_pha_offset,2);0>b.p_pha_offset&&(bc=-bc);var bd=1*Math.pow(b.p_pha_ramp,
2);0>b.p_pha_ramp&&(bd=-bd);for(var Ya=Math.abs(Math.floor(bc)),Lc=0,Nc=[],L=0;1024>L;++L)Nc[L]=0;for(var Nb=[],L=0;32>L;++L)Nb[L]=2*Math.random()-1;var Kc=Math.floor(2E4*Math.pow(1-b.p_repeat_speed,2)+32);0==b.p_repeat_speed&&(Kc=0);var ma=2*b.sound_vol,ma=Math.exp(b.sound_vol)-1,eb=0,X=0,qc=Math.floor(44100/b.sample_rate),na=0,Tb=Math.ceil(Tb/qc),db=!1,Ob;Ob=b.sample_rate<SoundEffect.MIN_SAMPLE_RATE?new SoundEffect(4*Tb,SoundEffect.MIN_SAMPLE_RATE):new SoundEffect(Tb,b.sample_rate);for(var Fa=Ob.getBuffer(),
ra=0;;++ra){0!=Kc&&++m>=Kc&&f();0!=Z&&ra>=Z&&(Z=0,l*=C);k+=r;l*=k;l>u&&(l=u,0<b.p_freq_limit&&(db=!0));Ya=l;0<O&&(Ia+=Qa,Ya=l*(1+Math.sin(Ia)*O));A=Math.floor(Ya);8>A&&(A=8);F+=P;0>F&&(F=0);0.5<F&&(F=0.5);Ga++;Ga>Ea[N]&&(Ga=0,N++,3===N&&(db=!0));fa=0===N?Ga/Ea[0]:1===N?1+2*Math.pow(1-Ga/Ea[1],1)*b.p_env_punch:1-Ga/Ea[2];bc+=bd;Ya=Math.abs(Math.floor(bc));1023<Ya&&(Ya=1023);0!=Ca&&(aa*=Ca,1E-5>aa&&(aa=1E-5),0.1<aa&&(aa=0.1));for(var Ja=0,D=0;8>D;++D){L=0;uc++;if(uc>=A&&(uc%=A,b.wave_type===NOISE))for(L=
0;32>L;++L)Nb[L]=2*Math.random()-1;L=uc/A;if(b.wave_type===SQUARE)L=L<F?0.5:-0.5;else if(b.wave_type===SAWTOOTH)L=1-2*L;else if(b.wave_type===SINE)L=Math.sin(2*L*Math.PI);else if(b.wave_type===NOISE)L=Nb[Math.floor(32*uc/A)];else if(b.wave_type===TRIANGLE)L=Math.abs(1-2*L)-1;else if(b.wave_type===BREAKER)L=Math.abs(1-L*L*2)-1;else throw new Exception("bad wave type! "+b.wave_type);var $=z,ha=ha*Ba;0>ha&&(ha=0);0.1<ha&&(ha=0.1);1!=b.p_lpf_freq?(E+=(L-z)*ha,E-=E*ja):(z=L,E=0);z+=E;ca+=z-$;L=ca-=ca*
aa;Nc[Lc&1023]=L;L+=Nc[Lc-Ya+1024&1023];Lc=Lc+1&1023;Ja+=L*fa}eb+=Ja;if(++X>=qc&&(X=0,Ja=eb/qc,eb=0,Ja=Ja/8*masterVolume,Ja*=ma,Ya=0.1,Ja=0<na?Ja*Ya+Fa[na-1]*(1-Ya):0,Fa[na++]=Ja,b.sample_rate<SoundEffect.MIN_SAMPLE_RATE&&(Ja=Ja*Ya+Fa[na-1]*(1-Ya),Fa[na++]=Ja,Ja=Ja*Ya+Fa[na-1]*(1-Ya),Fa[na++]=Ja,Ja=Ja*Ya+Fa[na-1]*(1-Ya),Fa[na++]=Ja),Ya=0,db)){for(;na<Tb;na++)b.sample_rate<SoundEffect.MIN_SAMPLE_RATE&&(Fa[na++]=Fa[na-1]*(1-Ya),Fa[na++]=Fa[na-1]*(1-Ya),Fa[na++]=Fa[na-1]*(1-Ya)),Fa[na]=Fa[na-1]*(1-Ya);
break}}return Ob};if("undefined"!=typeof exports){var RIFFWAVE=require("./riffwave").RIFFWAVE;exports.Params=Params;exports.generate=generate}var sfxCache={},noteCache={},cachedSeeds=[],cachedNotes=[],CACHE_MAX=50,NOTE_CACHE_MAX=200;
function cacheNote(b,f,m,l){var A=b.toString()+f.toString()+m.toString()+l.toString();f=Math.sqrt(f);if(A in noteCache)return noteCache[A];b=generateFromSeed(b);var u=[Math.floor(b.p_env_attack*b.p_env_attack*1E5),Math.floor(b.p_env_sustain*b.p_env_sustain*1E5),Math.floor(b.p_env_decay*b.p_env_decay*1E5)];m=44100*m/(u[0]+u[1]+u[2]);m=Math.sqrt(m);b.p_env_attack*=m;b.p_env_sustain*=m;b.p_env_punch*=m;b.p_env_decay*=m;b.p_base_freq=0.4*f;1<l&&(l=1);0>l&&(l=0);b.sound_vol=SOUND_VOL*l;b.sample_rate=SAMPLE_RATE;
b.bit_depth=BIT_DEPTH;f=SoundEffect.generate(b);noteCache[A]=f;for(cachedNotes.push(A);cachedNotes.length>NOTE_CACHE_MAX;)A=cachedNotes[0],cachedNotes=cachedNotes.slice(1),delete noteCache[A];return f}
function cacheSeed(b,f){var m=b+"_"+f;if(m in sfxCache)return sfxCache[m];var l=generateFromSeed(b);l.sound_vol=SOUND_VOL*f;l.sample_rate=SAMPLE_RATE;l.bit_depth=BIT_DEPTH;l=SoundEffect.generate(l);sfxCache[m]=l;for(cachedSeeds.push(m);cachedSeeds.length>CACHE_MAX;)m=cachedSeeds[0],cachedSeeds=cachedSeeds.slice(1),delete sfxCache[m];return l}function playNote(b,f,m,l){unitTesting||cacheNote(b,f,m,l).play()}
function playSound(b,f){"undefined"===typeof f&&(f=1);1<f&&(f=1);0>f&&(f=0);unitTesting||cacheSeed(b,f).play()};(function(b){if("object"==typeof exports&&"object"==typeof module)module.exports=b();else{if("function"==typeof define&&define.amd)return define([],b);this.CodeMirror=b()}})(function(){function b(a,c){if(!(this instanceof b))return new b(a,c);this.options=c=c?Ic(c):{};Ic(jg,c,!1);z(c);var d=c.value;"string"==typeof d&&(d=new Pb(d,c.mode,null,c.lineSeparator));this.doc=d;var e=new b.inputStyles[c.inputStyle](this),e=this.display=new f(a,d,e);e.wrapper.CodeMirror=this;F(this);k(this);c.lineWrapping&&
(this.display.wrapper.className+=" CodeMirror-wrap");c.autofocus&&!Bc&&e.input.focus();ja(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new de,keySeq:null,specialChars:null};var g=this;Ka&&11>Ua&&setTimeout(function(){g.display.input.reset(!0)},20);of(this);rg||(Ce(),rg=!0);M(this);this.curOp.forceUpdate=!0;ye(this,d);c.autofocus&&!Bc||g.hasFocus()?setTimeout(Pa(Uf,
this),20):xf(this);for(var h in bf)if(bf.hasOwnProperty(h))bf[h](this,c[h],Ge);Qa(this);c.finishInit&&c.finishInit(this);for(d=0;d<Tf.length;++d)Tf[d](this);Cd(this);Db&&c.lineWrapping&&"optimizelegibility"==getComputedStyle(e.lineDiv).textRendering&&(e.lineDiv.style.textRendering="auto")}function f(a,b,c){this.input=c;this.scrollbarFiller=la("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=la("div",null,"CodeMirror-gutter-filler");
this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=la("div",null,"CodeMirror-code");this.selectionDiv=la("div",null,null,"position: relative; z-index: 1");this.cursorDiv=la("div",null,"CodeMirror-cursors");this.measure=la("div",null,"CodeMirror-measure");this.lineMeasure=la("div",null,"CodeMirror-measure");this.lineSpace=la("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=la("div",[la("div",[this.lineSpace],
"CodeMirror-lines")],null,"position: relative");this.sizer=la("div",[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=la("div",null,null,"position: absolute; height: "+dg+"px; width: 1px;");this.gutters=la("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=la("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=la("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");
Ka&&8>Ua&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);Db||Cb&&Bc||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=
this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function m(a){a.doc.mode=b.getMode(a.options,a.doc.modeOption);l(a)}function l(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;kb(a,
100);a.state.modeGen++;a.curOp&&Va(a)}function A(a){var b=Ha(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Mb(a.display)-3);return function(e){if(Xb(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function u(a){var b=a.doc,c=A(a);b.iter(function(a){var b=c(a);b!=a.height&&v(a,b)})}function k(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,
"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");Ed(a)}function r(a){F(a);Va(a);setTimeout(function(){Ia(a)},20)}function F(a){var b=a.display.gutters,c=a.options.gutters;yd(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(la("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";P(a)}function P(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function C(a){if(0==
a.height)return 0;for(var b=a.text.length,c,d=a;c=fd(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=fd(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,d=c.to.line,b+=d.text.length-c.to.ch;return b}function Z(a){var b=a.display;a=a.doc;b.maxLine=qa(a,a.first);b.maxLineLength=C(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=C(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function z(a){var b=ya(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=
a.gutters.concat(["CodeMirror-linenumbers"]):-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function E(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+pc(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+za(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,
gutterWidth:c}}function ha(a,b,c){this.cm=c;var d=this.vert=la("div",[la("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=la("div",[la("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(d);a(e);oa(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")});oa(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.checkedOverlay=!1;Ka&&8>Ua&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function Ba(){}function ja(a){a.display.scrollbars&&
(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&ta(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new b.scrollbarModel[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);oa(b,"mousedown",function(){a.state.focused&&setTimeout(function(){a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?Hd(a,b):Vd(a,b)},a);a.display.scrollbars.addClass&&ag(a.display.wrapper,a.display.scrollbars.addClass)}
function ca(a,b){b||(b=E(a));var c=a.display.barWidth,d=a.display.barHeight;aa(a,b);for(var e=0;4>e&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&bc(a),aa(a,E(a)),c=a.display.barWidth,d=a.display.barHeight}function aa(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=
d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function Ca(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,d=ld(b,d),
e=ld(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;f<d?(d=f,e=ld(b,Tc(qa(b,f))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=ld(b,Tc(qa(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function Ia(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=fa(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=
f);var h=c[g].alignable;if(h)for(var k=0;k<h.length;k++)h[k].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Qa(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=O(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(la("div",[la("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,c.lineGutter.offsetWidth-d)+1;c.lineNumWidth=
c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";P(a);return!0}return!1}function O(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function fa(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function N(a,b,c){var d=a.display;this.viewport=b;this.visible=Ca(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;
this.oldDisplayWidth=x(a);this.force=c;this.dims=Ya(a);this.events=[]}function Ga(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return ed(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Oa(a))return!1;Qa(a)&&(ed(a),b.dims=Ya(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&20>f-c.viewFrom&&
(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));Kb&&(f=ve(a.doc,f),g=ua(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=qe(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=qe(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(xc(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(qe(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,
xc(a,g))));e.viewTo=g;c.viewOffset=Tc(qa(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=Oa(a);if(!d&&0==g&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;f=Sc();4<g&&(c.lineDiv.style.display="none");Lc(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");c.renderedView=c.view;f&&Sc()!=f&&f.offsetHeight&&f.focus();yd(c.cursorDiv);yd(c.selectionDiv);c.gutters.style.height=c.sizer.style.minHeight=0;d&&(c.lastWrapHeight=
b.wrapperHeight,c.lastWrapWidth=b.wrapperWidth,kb(a,400));c.updateLineNumbers=null;return!0}function Ea(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==x(a))if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+pc(a.display)-t(a),c.top)}),b.visible=Ca(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!Ga(a,b))break;bc(a);d=E(a);Rd(a);uc(a,d);ca(a,d)}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||
a.display.viewTo!=a.display.reportedViewTo)b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function Tb(a,b){var c=new N(a,b);if(Ga(a,c)){bc(a);Ea(a,c);var d=E(a);Rd(a);uc(a,d);ca(a,d);c.finish()}}function uc(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";var c=b.docHeight+a.display.barHeight;a.display.heightForcer.style.top=c+"px";a.display.gutters.style.height=Math.max(c+za(a),b.clientHeight)+
"px"}function bc(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c],e;if(!d.hidden){if(Ka&&8>Ua){var f=d.node.offsetTop+d.node.offsetHeight;e=f-b;b=f}else e=d.node.getBoundingClientRect(),e=e.bottom-e.top;f=d.line.height-e;2>e&&(e=Ha(a));if(0.001<f||-0.001>f)if(v(d.line,e),bd(d.line),d.rest)for(e=0;e<d.rest.length;e++)bd(d.rest[e])}}}function bd(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function Ya(a){for(var b=
a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:fa(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function Lc(a,b,c){function d(b){var c=b.nextSibling;Db&&Ac&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}for(var e=a.display,f=a.options.lineNumbers,
g=e.lineDiv,h=g.firstChild,k=e.view,e=e.viewFrom,l=0;l<k.length;l++){var q=k[l];if(!q.hidden)if(q.node&&q.node.parentNode==g){for(;h!=q.node;)h=d(h);h=f&&null!=b&&b<=e&&q.lineNumber;q.changes&&(-1<ya(q.changes,"gutter")&&(h=!1),Nc(a,q,e,c));h&&(yd(q.lineNumber),q.lineNumber.appendChild(document.createTextNode(O(a.options,e))));h=q.node.nextSibling}else{var m=eb(a,q,e,c);g.insertBefore(m,h)}e+=q.size}for(;h;)h=d(h)}function Nc(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==
f){var f=b,g=f.text.className,h=Nb(a,f);f.text==f.node&&(f.node=h.pre);f.text.parentNode.replaceChild(h.pre,f.text);f.text=h.pre;h.bgClass!=f.bgClass||h.textClass!=f.textClass?(f.bgClass=h.bgClass,f.textClass=h.textClass,Kc(f)):g&&(f.text.className=g)}else if("gutter"==f)ma(a,b,c,d);else if("class"==f)Kc(b);else if("widget"==f){f=a;g=b;h=d;g.alignable&&(g.alignable=null);for(var k=g.node.firstChild,l=void 0;k;k=l)l=k.nextSibling,"CodeMirror-linewidget"==k.className&&g.node.removeChild(k);X(f,g,h)}}b.changes=
null}function L(a){a.node==a.text&&(a.node=la("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),Ka&&8>Ua&&(a.node.style.zIndex=2));return a.node}function Nb(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):Qb(a,b)}function Kc(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");if(a.background)b?
a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=L(a);a.background=c.insertBefore(la("div",null,b),c.firstChild)}a.line.wrapClass?L(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass)||""}function ma(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=
null);if(b.line.gutterClass){var e=L(b);b.gutterBackground=la("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px");e.insertBefore(b.gutterBackground,b.text)}var f=b.line.gutterMarkers;if(a.options.lineNumbers||f){var e=L(b),g=b.gutter=la("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px");a.display.input.setUneditable(g);e.insertBefore(g,
b.text);b.line.gutterClass&&(g.className+=" "+b.line.gutterClass);!a.options.lineNumbers||f&&f["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(la("div",O(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(f)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],(e=f.hasOwnProperty(c)&&f[c])&&g.appendChild(la("div",[e],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+
d.gutterWidth[c]+"px"))}}function eb(a,b,c,d){var e=Nb(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);Kc(b);ma(a,b,c,d);X(a,b,d);return b.node}function X(a,b,c){qc(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)qc(a,b.rest[d],b,c,!1)}function qc(a,b,c,d,e){if(b.widgets){var f=L(c),g=0;for(b=b.widgets;g<b.length;++g){var h=b[g],k=la("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||k.setAttribute("cm-ignore-events","true");var l=
h,q=k,m=d;if(l.noHScroll){(c.alignable||(c.alignable=[])).push(q);var r=m.wrapperWidth;q.style.left=m.fixedPos+"px";l.coverGutter||(r-=m.gutterTotalWidth,q.style.paddingLeft=m.gutterTotalWidth+"px");q.style.width=r+"px"}l.coverGutter&&(q.style.zIndex=5,q.style.position="relative",l.noHScroll||(q.style.marginLeft=-m.gutterTotalWidth+"px"));a.display.input.setUneditable(k);e&&h.above?f.insertBefore(k,c.gutter||c.text):f.appendChild(k);Rb(h,"redraw")}}}function na(a){return S(a.line,a.ch)}function db(a,
b){return 0>ga(a,b)?b:a}function Ob(a,b){return 0>ga(a,b)?a:b}function Fa(a){a.state.focused||(a.display.input.focus(),Uf(a))}function ra(a){return a.options.readOnly||a.doc.cantEdit}function Ja(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=f.splitLines(b),k=null;if(g&&1<d.ranges.length)if(lc&&lc.join("\n")==b){if(0==d.ranges.length%lc.length)for(var k=[],l=0;l<lc.length;l++)k.push(f.splitLines(lc[l]))}else h.length==d.ranges.length&&(k=V(h,function(a){return[a]}));
for(l=d.ranges.length-1;0<=l;l--){var q=d.ranges[l],m=q.from(),r=q.to();q.empty()&&(c&&0<c?m=S(m.line,m.ch-c):a.state.overwrite&&!g&&(r=S(r.line,Math.min(qa(f,r.line).text.length,r.ch+Da(h).length))));q=a.curOp.updateInput;m={from:m,to:r,text:k?k[l%k.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};Pe(a.doc,m);Rb(a,"inputRead",a,m)}b&&!g&&$(a,b);Yd(a);a.curOp.updateInput=q;a.curOp.typing=!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function D(a,b){var c=a.clipboardData&&a.clipboardData.getData("text/plain");
if(c)return a.preventDefault(),ra(b)||b.options.disableInput||K(b,function(){Ja(b,c,0,null,"paste")}),!0}function $(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){g=ue(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(qa(a.doc,
e.head.line).text.slice(0,e.head.ch))&&(g=ue(a,e.head.line,"smart"));g&&Rb(a,"electricInput",a,e.head.line)}}}function Fb(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,e={anchor:S(e,0),head:S(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function Pd(a){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck","false")}function ab(a){this.cm=a;this.prevInput="";this.pollingFast=
!1;this.polling=new de;this.hasSelection=this.inaccurateSelection=!1;this.composing=null}function Uc(){var a=la("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),b=la("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");Db?a.style.width="1000px":a.setAttribute("wrap","off");he&&(a.style.border="1px solid black");Pd(a);return b}function cc(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=
null;this.polling=new de;this.gracePeriod=!1}function gb(a,b){var c=ea(a,b.line);if(!c||c.hidden)return null;var d=qa(a.doc,b.line),c=I(c,d,b.line),d=Ma(d),e="left";d&&(e=$c(d,b.ch)%2?"right":"left");c=lf(c.map,b.ch,e);c.offset="right"==c.collapse?c.end:c.start;return c}function zb(a,b){b&&(a.bad=!0);return a}function Fc(a,b,c){var d;if(b==a.display.lineDiv){d=a.display.lineDiv.childNodes[c];if(!d)return zb(a.clipPos(S(a.display.viewTo-1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;
if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return qb(f,b,c)}}function qb(a,b,c){function d(b,c,e){for(var f=-1;f<(q?q.length:0);f++)for(var U=0>f?l.map:q[f],g=0;g<U.length;g+=3){var T=U[g+2];if(T==b||T==c){c=Za(0>f?a.line:a.rest[f]);f=U[g]+e;if(0>e||T!=b)f=U[g+(e?1:0)];return S(c,f)}}}var e=a.text.firstChild,f=!1;if(!b||!g(e,b))return zb(S(Za(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b))return c=a.rest?
Da(a.rest):a.line,zb(S(Za(c),c.text.length),f);var h=3==b.nodeType?b:null,k=b;h||1!=b.childNodes.length||3!=b.firstChild.nodeType||(h=b.firstChild,c&&(c=h.nodeValue.length));for(;k.parentNode!=e;)k=k.parentNode;var l=a.measure,q=l.maps;if(b=d(h,k,c))return zb(b,f);e=k.nextSibling;for(h=h?h.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return zb(S(b.line,b.ch-h),f);h+=e.textContent.length}k=k.previousSibling;for(h=c;k;k=k.previousSibling){if(b=d(k,k.firstChild,-1))return zb(S(b.line,
b.ch+h),f);h+=e.textContent.length}}function ud(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)""==c&&(c=b.textContent.replace(/\u200b/g,"")),h+=c;else{var c=b.getAttribute("cm-marker"),U;if(c)b=a.findMarks(S(d,0),S(e+1,0),f(+c)),b.length&&(U=b[0].find())&&(h+=Ld(a.doc,U.from,U.to).join(l));else if("false"!=b.getAttribute("contenteditable")){for(U=0;U<b.childNodes.length;U++)g(b.childNodes[U]);/^(pre|div|p)$/i.test(b.nodeName)&&
(k=!0)}}}else 3==b.nodeType&&(b=b.nodeValue)&&(k&&(h+=l,k=!1),h+=b)}for(var h="",k=!1,l=a.doc.lineSeparator();;){g(b);if(b==c)break;b=b.nextSibling}return h}function Gc(a,b){this.ranges=a;this.primIndex=b}function ba(a,b){this.anchor=a;this.head=b}function dc(a,b){var c=a[b];a.sort(function(a,b){return ga(a.from(),b.from())});b=ya(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=ga(e.to(),d.from())){var f=Ob(e.from(),d.from()),g=db(e.to(),d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;
c<=b&&--b;a.splice(--c,2,new ba(d?g:f,d?f:g))}}return new Gc(a,b)}function Lb(a,b){return new Gc([new ba(a,b||a)],0)}function va(a,b){if(b.line<a.first)return S(a.first,0);var c=a.first+a.size-1;if(b.line>c)return S(c,qa(a,c).text.length);var c=qa(a,b.line).text.length,d=b.ch,c=null==d||d>c?S(b.line,c):0>d?S(b.line,0):b;return c}function Dd(a,b){return b>=a.first&&b<a.first+a.size}function cd(a,b,c,d){return a.cm&&a.cm.display.shift||a.extend?(a=b.anchor,d&&(b=0>ga(c,a),b!=0>ga(d,a)?(a=c,c=d):b!=
0>ga(c,d)&&(c=d)),new ba(a,c)):new ba(d||c,c)}function He(a,b,c,d){sb(a,new Gc([cd(a,a.sel.primary(),b,c)],0),d)}function Ie(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=cd(a,a.sel.ranges[e],b[e],null);b=dc(d,a.sel.primIndex);sb(a,b,c)}function me(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;sb(a,dc(e,a.sel.primIndex),d)}function ec(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new ba(va(a,b[c].anchor),va(a,b[c].head))}};Zb(a,"beforeSelectionChange",
a,c);a.cm&&Zb(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?dc(c.ranges,c.ranges.length-1):b}function Vc(a,b,c){var d=a.history.done,e=Da(d);e&&e.ranges?(d[d.length-1]=b,Qd(a,b,c)):sb(a,b,c)}function sb(a,b,c){Qd(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f)&&(g=e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=Da(e.done);var h=f.charAt(0);g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&g.somethingSelected()==
b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:Fe(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&We(e.undone)}function Qd(a,b,c){if(mc(a,"beforeSelectionChange")||a.cm&&mc(a.cm,"beforeSelectionChange"))b=ec(a,b);var d=c&&c.bias||(0>ga(b.primary().head,a.sel.primary().head)?-1:1);ff(a,hf(a,b,d,!0));c&&!1===c.scroll||!a.cm||Yd(a.cm)}function ff(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=
a.cm.curOp.selectionChanged=!0,w(a.cm)),Rb(a,"cursorActivity",a))}function gf(a){ff(a,hf(a,a.sel,null,!1),Ad)}function hf(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=oe(a,g.anchor,c,d),k=oe(a,g.head,c,d);if(e||h!=g.anchor||k!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new ba(h,k)}return e?dc(e,b.primIndex):b}function oe(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=qa(a,f.line);if(h.markedSpans)for(var k=0;k<h.markedSpans.length;++k){var l=h.markedSpans[k],q=l.marker;
if((null==l.from||(q.inclusiveLeft?l.from<=f.ch:l.from<f.ch))&&(null==l.to||(q.inclusiveRight?l.to>=f.ch:l.to>f.ch))){if(d&&(Zb(q,"beforeCursorEnter"),q.explicitlyCleared))if(h.markedSpans){--k;continue}else break;if(q.atomic){k=q.find(0>g?-1:1);if(0==ga(k,f)&&(k.ch+=g,0>k.ch?k=k.line>a.first?va(a,S(k.line-1)):null:k.ch>h.text.length&&(k=k.line<a.first+a.size-1?S(k.line+1,0):null),!k)){if(e){if(!d)return oe(a,b,c,!0);a.cantEdit=!0;return S(a.first,0)}e=!0;k=b;g=-g}f=k;continue a}}}return f}}function Rd(a){a.display.input.showSelection(a.display.input.prepareSelection())}
function ne(a,b){for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(!1!==b||g!=c.sel.primIndex){var h=c.sel.ranges[g],k=h.empty();(k||a.options.showCursorWhenSelecting)&&td(a,h.head,e);k||Ra(a,h,f)}return d}function td(a,b,c){b=Wc(a,b,"div",null,null,!a.options.singleCursorHeightPerLine);var d=c.appendChild(la("div","\u00a0","CodeMirror-cursor"));d.style.left=b.left+"px";d.style.top=b.top+"px";d.style.height=
Math.max(0,b.bottom-b.top)*a.options.cursorHeight+"px";b.other&&(a=c.appendChild(la("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),a.style.display="",a.style.left=b.other.left+"px",a.style.top=b.other.top+"px",a.style.height=0.85*(b.other.bottom-b.other.top)+"px")}function Ra(a,b,c){function d(a,b,c,e){0>b&&(b=0);b=Math.round(b);e=Math.round(e);k.appendChild(la("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?m-a:c)+"px; height: "+
(e-b)+"px"))}function f(b,c,e){var U=qa(h,b),g=U.text.length,T,k;ke(Ma(U),c||0,null==e?g:e,function(f,h,da){var l=pe(a,S(b,f),"div",U,"left"),r,wa;f==h?(r=l,da=wa=l.left):(r=pe(a,S(b,h-1),"div",U,"right"),"rtl"==da&&(da=l,l=r,r=da),da=l.left,wa=r.right);null==c&&0==f&&(da=q);3<r.top-l.top&&(d(da,l.top,null,l.bottom),da=q,l.bottom<r.top&&d(da,l.bottom,null,r.top));null==e&&h==g&&(wa=m);if(!T||l.top<T.top||l.top==T.top&&l.left<T.left)T=l;if(!k||r.bottom>k.bottom||r.bottom==k.bottom&&r.right>k.right)k=
r;da<q+1&&(da=q);d(da,r.top,wa-da,r.bottom)});return{start:T,end:k}}var g=a.display,h=a.doc,k=document.createDocumentFragment(),l=e(a.display),q=l.left,m=Math.max(g.sizerWidth,x(a)-g.sizer.offsetLeft)-l.right,g=b.from();b=b.to();if(g.line==b.line)f(g.line,g.ch,b.ch);else{var r=qa(h,g.line),l=qa(h,b.line),l=ib(r)==ib(l),g=f(g.line,g.ch,l?r.text.length+1:null).end;b=f(b.line,l?0:null,b.ch).start;l&&(g.top<b.top-2?(d(g.right,g.top,null,g.bottom),d(q,b.top,b.left,b.bottom)):d(g.right,g.top,b.left-g.right,
g.bottom));g.bottom<b.top&&d(q,g.bottom,null,b.top)}c.appendChild(k)}function lb(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function kb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,Pa(Xa,a))}function Xa(a){var b=
a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=ic(b.mode,Na(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength,k=Te(a,f,h?ic(b.mode,d):d,!0);f.styles=k.styles;var l=f.styleClasses;(k=k.classes)?f.styleClasses=k:l&&(f.styleClasses=null);l=!g||g.length!=f.styles.length||l!=k&&(!l||!k||l.bgClass!=
k.bgClass||l.textClass!=k.textClass);for(k=0;!l&&k<g.length;++k)l=g[k]!=f.styles[k];l&&e.push(b.frontier);f.stateAfter=h?d:ic(b.mode,d)}else f.text.length<=a.options.maxHighlightLength&&Kd(a,f.text,d),f.stateAfter=0==b.frontier%5?ic(b.mode,d):null;++b.frontier;if(+new Date>c)return kb(a,a.options.workDelay),!0});e.length&&K(a,function(){for(var b=0;b<e.length;b++)ka(a,e[b],"text")})}}function kf(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;
var h=qa(f,b-1);if(h.stateAfter&&(!c||b<=f.frontier))return b;h=pd(h.text,null,a.options.tabSize);if(null==e||d>h)e=b-1,d=h}return e}function Na(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=kf(a,b,c),g=f>d.first&&qa(d,f-1).stateAfter,g=g?ic(d.mode,g):$d(d.mode);d.iter(f,b,function(c){Kd(a,c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?ic(d.mode,g):null;++f});c&&(d.frontier=f);return g}function pc(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function e(a){if(a.cachedPaddingH)return a.cachedPaddingH;
var b=oc(a.measure,la("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function za(a){return dg-a.display.nativeBarWidth}function x(a){return a.display.scroller.clientWidth-za(a)-a.display.barWidth}function t(a){return a.display.scroller.clientHeight-za(a)-a.display.barHeight}function I(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};
for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(d=0;d<a.rest.length;d++)if(Za(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function ea(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[xc(a,b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function h(a,b){var c=Za(b),d=ea(a,c);d&&!d.text?d=null:d&&d.changes&&(Nc(a,d,c,Ya(a)),a.curOp.forceUpdate=!0);if(!d){var e;
e=ib(b);d=Za(e);e=a.display.externalMeasured=new vd(a.doc,e,d);e.lineN=d;d=e.built=Qb(a,e);e.text=d.pre;oc(a.display.lineMeasure,d.pre);d=e}c=I(d,b,c);return{line:b,view:d,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function xa(a,b,c,d,e){b.before&&(c=-1);var f=c+(d||"");if(b.cache.hasOwnProperty(f))a=b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,h=b.rect,k=a.options.lineWrapping,l=k&&x(a);if(!g.measure.heights||k&&g.measure.width!=
l){var q=g.measure.heights=[];if(k)for(g.measure.width=l,g=g.text.firstChild.getClientRects(),k=0;k<g.length-1;k++){var l=g[k],m=g[k+1];2<Math.abs(l.bottom-m.bottom)&&q.push((l.bottom+m.top)/2-h.top)}q.push(h.bottom-h.top)}b.hasHeights=!0}g=d;k=lf(b.map,c,g);d=k.node;h=k.start;l=k.end;c=k.collapse;var r;if(3==d.nodeType){for(q=0;4>q;q++){for(;h&&Aa(b.line.text.charAt(k.coverStart+h));)--h;for(;k.coverStart+l<k.coverEnd&&Aa(b.line.text.charAt(k.coverStart+l));)++l;if(Ka&&9>Ua&&0==h&&l==k.coverEnd-
k.coverStart)r=d.parentNode.getBoundingClientRect();else if(Ka&&a.options.lineWrapping){var t=$b(d,h,l).getClientRects();r=t.length?t["right"==g?t.length-1:0]:Oc}else r=$b(d,h,l).getBoundingClientRect()||Oc;if(r.left||r.right||0==h)break;l=h;h-=1;c="right"}if(Ka&&11>Ua){if(t=window.screen)if(t=null!=screen.logicalXDPI)if(t=screen.logicalXDPI!=screen.deviceXDPI)null!=og?t=og:(q=oc(a.display.measure,la("span","x")),t=q.getBoundingClientRect(),q=$b(q,0,1).getBoundingClientRect(),t=og=1<Math.abs(t.left-
q.left));t&&(t=screen.logicalXDPI/screen.deviceXDPI,q=screen.logicalYDPI/screen.deviceYDPI,r={left:r.left*t,right:r.right*t,top:r.top*q,bottom:r.bottom*q})}}else 0<h&&(c=g="right"),r=a.options.lineWrapping&&1<(t=d.getClientRects()).length?t["right"==g?t.length-1:0]:d.getBoundingClientRect();Ka&&9>Ua&&!(h||r&&(r.left||r.right))&&(r=(r=d.parentNode.getClientRects()[0])?{left:r.left,right:r.left+Mb(a.display),top:r.top,bottom:r.bottom}:Oc);t=r.top-b.rect.top;d=r.bottom-b.rect.top;h=(t+d)/2;g=b.view.measure.heights;
for(q=0;q<g.length-1&&!(h<g[q]);q++);c={left:("right"==c?r.right:r.left)-b.rect.left,right:("left"==c?r.left:r.right)-b.rect.left,top:q?g[q-1]:0,bottom:g[q]};r.left||r.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=t,c.rbottom=d);a=c;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function lf(a,b,c){for(var d,e,f,g,h=0;h<a.length;h+=3){var k=a[h],l=a[h+1];if(b<k)e=0,f=1,g="left";else if(b<l)e=b-k,f=e+1;else if(h==a.length-
3||b==l&&a[h+3]>b)f=l-k,e=f-1,b>=l&&(g="right");if(null!=e){d=a[h+2];k==l&&c==(d.insertLeft?"left":"right")&&(g=c);if("left"==c&&0==e)for(;h&&a[h-2]==a[h-3]&&a[h-1].insertLeft;)d=a[(h-=3)+2],g="left";if("right"==c&&e==l-k)for(;h<a.length-3&&a[h+3]==a[h+4]&&!a[h+5].insertLeft;)d=a[(h+=3)+2],g="right";break}}return{node:d,start:e,end:f,collapse:g,coverStart:k,coverEnd:l}}function mf(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]=
{}}function nf(a){a.display.externalMeasure=null;yd(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)mf(a.display.view[b])}function Ed(a){nf(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function Gb(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=ac(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=Tc(b);
b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function If(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||
document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function pe(a,b,c,d,e){d||(d=qa(a.doc,b.line));var f=d;b=b.ch;d=xa(a,h(a,d),b,e);return Gb(a,f,d,c)}function Wc(a,b,c,d,e,f){function g(b,U){var h=xa(a,e,b,U?"right":"left",f);U?h.left=h.right:h.right=h.left;return Gb(a,d,h,c)}function k(a,b){var c=
l[b],d=c.level%2;a==fb(c)&&b&&c.level<l[b-1].level?(c=l[--b],a=Be(c)-(c.level%2?0:1),d=!0):a==Be(c)&&b<l.length-1&&c.level<l[b+1].level&&(c=l[++b],a=fb(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||qa(a.doc,b.line);e||(e=h(a,d));var l=Ma(d);b=b.ch;if(!l)return g(b);var q=$c(l,b),q=k(b,q);null!=bg&&(q.other=k(b,bg));return q}function vc(a,b){var c=0;b=va(a.doc,b);a.options.lineWrapping||(c=Mb(a.display)*b.ch);var d=qa(a.doc,b.line),e=Tc(d)+a.display.lineSpace.offsetTop;return{left:c,
right:c,top:e,bottom:e+d.height}}function R(a,b,c,d){a=S(a,b);a.xRel=d;c&&(a.outside=!0);return a}function Qc(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return R(d.first,0,!0,-1);var e=ld(d,c),f=d.first+d.size-1;if(e>f)return R(d.first+d.size-1,qa(d,f).text.length,!0,1);0>b&&(b=0);for(d=qa(d,e);;)if(e=Bd(a,d,e,b,c),f=(d=fd(d,!1))&&d.find(0,!0),d&&(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=Za(d=f.to.line);else return e}function Bd(a,b,c,d,e){function f(d){d=Wc(a,S(c,d),"line",b,q);k=!0;if(g>
d.bottom)return d.left-l;if(g<d.top)return d.left+l;k=!1;return d.left}var g=e-Tc(b),k=!1,l=2*a.display.wrapper.clientWidth,q=h(a,b),m=Ma(b),r=b.text.length;e=J(b);var t=sc(b),u=f(e),w=k,v=f(t),x=k;if(d>v)return R(c,t,x,1);for(;;){if(m?t==e||t==Nd(b,e,1):1>=t-e){m=d<u||d-u<=v-d?e:t;for(d-=m==e?u:v;Aa(b.text.charAt(m));)++m;return R(c,m,m==e?w:x,-1>d?-1:1<d?1:0)}var z=Math.ceil(r/2),y=e+z;if(m)for(var y=e,E=0;E<z;++E)y=Nd(b,y,1);E=f(y);if(E>d){t=y;v=E;if(x=k)v+=1E3;r=z}else e=y,u=E,w=k,r-=z}}function Ha(a){if(null!=
a.cachedTextHeight)return a.cachedTextHeight;if(null==Ub){Ub=la("pre");for(var b=0;49>b;++b)Ub.appendChild(document.createTextNode("x")),Ub.appendChild(la("br"));Ub.appendChild(document.createTextNode("x"))}oc(a.measure,Ub);b=Ub.offsetHeight/50;3<b&&(a.cachedTextHeight=b);yd(a.measure);return b||1}function Mb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=la("span","xxxxxxxxxx"),c=la("pre",[b]);oc(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=
b);return b||10}function M(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++De};Y?Y.ops.push(a.curOp):a.curOp.ownsGroup=Y={ops:[a.curOp],delayedCallbacks:[]}}function Cd(a){if(a=a.curOp.ownsGroup)try{var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c].call(null);for(var d=0;d<a.ops.length;d++){var e=
a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,e.cm)}}while(c<b.length)}finally{Y=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){var e=a[b],c=e.cm,d=c.display,f=c,g=f.display;!g.scrollbarsClipped&&g.scroller.offsetWidth&&(g.nativeBarWidth=g.scroller.offsetWidth-g.scroller.clientWidth,g.heightForcer.style.height=za(f)+"px",g.sizer.style.marginBottom=
-g.nativeBarWidth+"px",g.sizer.style.borderRightWidth=za(f)+"px",g.scrollbarsClipped=!0);e.updateMaxLine&&Z(c);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping;e.update=e.mustUpdate&&new N(c,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&Ga(e.cm,e.update);for(b=0;b<a.length;b++)if(e=
a[b],c=e.cm,d=c.display,e.updatedDisplay&&bc(c),e.barMeasure=E(c),d.maxLineChanged&&!c.options.lineWrapping&&(f=e,g=d.maxLine.text.length,g=xa(c,h(c,d.maxLine),g,void 0),f.adjustWidthTo=g.left+3,c.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+e.adjustWidthTo+za(c)+c.display.barWidth),e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo-x(c))),e.updatedDisplay||e.selectionChanged)e.preparedSelection=d.input.prepareSelection();
for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&Hd(c,Math.min(c.display.scroller.scrollLeft,e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.preparedSelection&&c.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&uc(c,e.barMeasure),(e.updatedDisplay||e.startHeight!=c.doc.height)&&ca(c,e.barMeasure),e.selectionChanged&&lb(c),c.state.focused&&e.updateInput&&c.display.input.reset(e.typing),
e.focus&&e.focus==Sc()&&Fa(e.cm);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;e.updatedDisplay&&Ea(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null==e.scrollTop||d.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(f.scrollTop=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,e.scrollTop)),d.scrollbars.setScrollTop(f.scrollTop),d.scroller.scrollTop=f.scrollTop);null==e.scrollLeft||d.scroller.scrollLeft==
e.scrollLeft&&!e.forceScroll||(f.scrollLeft=Math.max(0,Math.min(d.scroller.scrollWidth-x(c),e.scrollLeft)),d.scrollbars.setScrollLeft(f.scrollLeft),d.scroller.scrollLeft=f.scrollLeft,Ia(c));if(e.scrollToPos){var k,g=c;k=va(f,e.scrollToPos.from);var l=va(f,e.scrollToPos.to),q=e.scrollToPos.margin;null==q&&(q=0);for(var m=0;5>m;m++){var r=!1,t=Wc(g,k),u=l&&l!=k?Wc(g,l):t,u=bb(g,Math.min(t.left,u.left),Math.min(t.top,u.top)-q,Math.max(t.left,u.left),Math.max(t.bottom,u.bottom)+q),v=g.doc.scrollTop,w=
g.doc.scrollLeft;null!=u.scrollTop&&(Vd(g,u.scrollTop),1<Math.abs(g.doc.scrollTop-v)&&(r=!0));null!=u.scrollLeft&&(Hd(g,u.scrollLeft),1<Math.abs(g.doc.scrollLeft-w)&&(r=!0));if(!r)break}k=t;e.scrollToPos.isCursor&&c.state.focused&&(g=c,l=k,$a(g,"scrollCursorIntoView")||(q=g.display,m=q.sizer.getBoundingClientRect(),k=null,0>l.top+m.top?k=!0:l.bottom+m.top>(window.innerHeight||document.documentElement.clientHeight)&&(k=!1),null==k||hg||(l=la("div","\u200b",null,"position: absolute; top: "+(l.top-q.viewOffset-
g.display.lineSpace.offsetTop)+"px; height: "+(l.bottom-l.top+za(g)+q.barHeight)+"px; left: "+l.left+"px; width: 2px;"),g.display.lineSpace.appendChild(l),l.scrollIntoView(k),g.display.lineSpace.removeChild(l))))}g=e.maybeHiddenMarkers;k=e.maybeUnhiddenMarkers;if(g)for(l=0;l<g.length;++l)g[l].lines.length||Zb(g[l],"hide");if(k)for(l=0;l<k.length;++l)k[l].lines.length&&Zb(k[l],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);e.changeObjs&&Zb(c,"changes",c,e.changeObjs);
e.update&&e.update.finish()}}}function K(a,b){if(a.curOp)return b();M(a);try{return b()}finally{Cd(a)}}function W(a,b){return function(){if(a.curOp)return b.apply(a,arguments);M(a);try{return b.apply(a,arguments)}finally{Cd(a)}}}function nb(a){return function(){if(this.curOp)return a.apply(this,arguments);M(this);try{return a.apply(this,arguments)}finally{Cd(this)}}}function Vb(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);M(b);try{return a.apply(this,arguments)}finally{Cd(b)}}}
function vd(a,b,c){for(var d=this.line=b,e;d=fd(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?Za(Da(this.rest))-c+1:1;this.node=this.text=null;this.hidden=Xb(a,b)}function qe(a,b,c){var d=[],e;for(e=b;e<c;)b=new vd(a.doc,qa(a.doc,e),e),e+=b.size,d.push(b);return d}function Va(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=
!0;if(b>=e.viewTo)Kb&&ve(a.doc,b)<e.viewTo&&ed(a);else if(c<=e.viewFrom)Kb&&ua(a.doc,c+d)>e.viewFrom?ed(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)ed(a);else if(b<=e.viewFrom){var f=re(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):ed(a)}else if(c>=e.viewTo)(f=re(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):ed(a);else{var f=re(a,b,b,-1),g=re(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(qe(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),
e.viewTo+=d):ed(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function ka(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[xc(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==ya(a,c)&&a.push(c)))}function ed(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function xc(a,b){if(b>=a.display.viewTo)return null;
b-=a.display.viewFrom;if(0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function re(a,b,c,d){var e=xc(a,b),f=a.display.view;if(!Kb||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,h=a.display.viewFrom;g<e;g++)h+=f[g].size;if(h!=b){if(0<d){if(e==f.length-1)return null;b=h+f[e].size-b;e++}else b=h-b;c+=b}for(;ve(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Oa(a){a=a.display.view;
for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function of(a){function b(){d.activeTouch&&(e=setTimeout(function(){d.activeTouch=null},1E3),f=d.activeTouch,f.end=+new Date)}function c(a,b){if(null==b.left)return!0;var d=b.left-a.left,e=b.top-a.top;return 400<d*d+e*e}var d=a.display;oa(d.scroller,"mousedown",W(a,Ud));Ka&&11>Ua?oa(d.scroller,"dblclick",W(a,function(b){if(!$a(a,b)){var c=gd(a,b);!c||Me(a,b,"gutterClick",!0,Rb)||Ab(a.display,b)||(wc(b),b=a.findWordAt(c),
He(a.doc,b.anchor,b.head))}})):oa(d.scroller,"dblclick",function(b){$a(a,b)||wc(b)});je||oa(d.scroller,"contextmenu",function(b){Xc(a,b)});var e,f={end:0};oa(d.scroller,"touchstart",function(a){var b;1!=a.touches.length?b=!1:(b=a.touches[0],b=1>=b.radiusX&&1>=b.radiusY);b||(clearTimeout(e),b=+new Date,d.activeTouch={start:b,moved:!1,prev:300>=b-f.end?f:null},1==a.touches.length&&(d.activeTouch.left=a.touches[0].pageX,d.activeTouch.top=a.touches[0].pageY))});oa(d.scroller,"touchmove",function(){d.activeTouch&&
(d.activeTouch.moved=!0)});oa(d.scroller,"touchend",function(e){var f=d.activeTouch;if(f&&!Ab(d,e)&&null!=f.left&&!f.moved&&300>new Date-f.start){var g=a.coordsChar(d.activeTouch,"page"),f=!f.prev||c(f,f.prev)?new ba(g,g):!f.prev.prev||c(f,f.prev.prev)?a.findWordAt(g):new ba(S(g.line,0),va(a.doc,S(g.line+1,0)));a.setSelection(f.anchor,f.head);a.focus();wc(e)}b()});oa(d.scroller,"touchcancel",b);oa(d.scroller,"scroll",function(){d.scroller.clientHeight&&(Vd(a,d.scroller.scrollTop),Hd(a,d.scroller.scrollLeft,
!0),Zb(a,"scroll",a))});oa(d.scroller,"mousewheel",function(b){sf(a,b)});oa(d.scroller,"DOMMouseScroll",function(b){sf(a,b)});oa(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0});d.dragFunctions={enter:function(b){$a(a,b)||le(b)},over:function(b){if(!$a(a,b)){var c=gd(a,b);if(c){var d=document.createDocumentFragment();td(a,c,d);a.display.dragCursor||(a.display.dragCursor=la("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,
a.display.cursorDiv));oc(a.display.dragCursor,d)}le(b)}},start:function(b){if(Ka&&(!a.state.draggingText||100>+new Date-Hb))le(b);else if(!$a(a,b)&&!Ab(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!gc)){var c=la("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";tb&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop);b.dataTransfer.setDragImage(c,
0,0);tb&&c.parentNode.removeChild(c)}},drop:W(a,Kf),leave:function(){rf(a)}};var g=d.input.getField();oa(g,"keyup",function(b){te.call(a,b)});oa(g,"keydown",W(a,uf));oa(g,"keypress",W(a,yb));oa(g,"focus",Pa(Uf,a));oa(g,"blur",Pa(xf,a))}function Ke(a){var b=a.display;if(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}function Ab(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=
c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function gd(a,b,c,d){var f=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;var g,h;c=f.lineSpace.getBoundingClientRect();try{g=b.clientX-c.left,h=b.clientY-c.top}catch(k){return null}b=Qc(a,g,h);var l;d&&1==b.xRel&&(l=qa(a.doc,b.line).text).length==b.ch&&(d=pd(l,l.length,a.options.tabSize)-l.length,b=S(b.line,Math.max(0,Math.round((g-
e(a.display).left)/Mb(a.display))-d)));return b}function Ud(a){var b=this.display;if(!(b.activeTouch&&b.input.supportsTouch()||$a(this,a)))if(b.shift=a.shiftKey,Ab(b,a))Db||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100));else if(!Me(this,a,"gutterClick",!0,Rb)){var c=gd(this,a);window.focus();switch($e(a)){case 1:this.state.selectingText?this.state.selectingText(a):c?pf(this,a,c):(a.target||a.srcElement)==b.scroller&&wc(a);break;case 2:Db&&(this.state.lastMiddleDown=
+new Date);c&&He(this.doc,c);setTimeout(function(){b.input.focus()},20);wc(a);break;case 3:je?Xc(this,a):fg(this)}}}function pf(a,b,c){Ka?setTimeout(Pa(Fa,a),0):a.curOp.focus=Sc();var d=+new Date,e;nd&&nd.time>d-400&&0==ga(nd.pos,c)?e="triple":zd&&zd.time>d-400&&0==ga(zd.pos,c)?(e="double",nd={time:d,pos:c}):(e="single",zd={time:d,pos:c});var d=a.doc.sel,f=Ac?b.metaKey:b.ctrlKey,g;a.options.dragDrop&&tg&&!ra(a)&&"single"==e&&-1<(g=d.contains(c))&&(0>ga((g=d.ranges[g]).from(),c)||0<c.xRel)&&(0<ga(g.to(),
c)||0>c.xRel)?qf(a,b,c,f):Td(a,b,c,e,f)}function qf(a,b,c,d){var e=a.display,f=+new Date,g=W(a,function(h){Db&&(e.scroller.draggable=!1);a.state.draggingText=!1;rb(document,"mouseup",g);rb(e.scroller,"drop",g);10>Math.abs(b.clientX-h.clientX)+Math.abs(b.clientY-h.clientY)&&(wc(h),!d&&+new Date-200<f&&He(a.doc,c),Db||Ka&&9==Ua?setTimeout(function(){document.body.focus();e.input.focus()},20):e.input.focus())});Db&&(e.scroller.draggable=!0);a.state.draggingText=g;e.scroller.dragDrop&&e.scroller.dragDrop();
oa(document,"mouseup",g);oa(e.scroller,"drop",g)}function Td(a,b,c,d,e){function f(b){if(0!=ga(v,b))if(v=b,"rect"==d){for(var e=[],g=a.options.tabSize,h=pd(qa(l,c.line).text,c.ch,g),U=pd(qa(l,b.line).text,b.ch,g),k=Math.min(h,U),h=Math.max(h,U),U=Math.min(c.line,b.line),da=Math.min(a.lastLine(),Math.max(c.line,b.line));U<=da;U++){var t=qa(l,U).text,u=Rf(t,k,g);k==h?e.push(new ba(S(U,u),S(U,u))):t.length>u&&e.push(new ba(S(U,u),S(U,Rf(t,h,g))))}e.length||e.push(new ba(c,c));sb(l,dc(r.ranges.slice(0,
m).concat(e),m),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=q,g=e.anchor,k=b,"single"!=d&&(b="double"==d?a.findWordAt(b):new ba(S(b.line,0),va(l,S(b.line+1,0))),0<ga(b.anchor,g)?(k=b.head,g=Ob(e.from(),b.anchor)):(k=b.anchor,g=db(e.to(),b.head))),e=r.ranges.slice(0),e[m]=new ba(va(l,g),k),sb(l,dc(e,m),Zf)}function g(b){var c=++x,e=gd(a,b,!0,"rect"==d);if(e)if(0!=ga(e,v)){a.curOp.focus=Sc();f(e);var h=Ca(k,l);(e.line>=h.to||e.line<h.from)&&setTimeout(W(a,function(){x==c&&g(b)}),150)}else{var U=
b.clientY<w.top?-20:b.clientY>w.bottom?20:0;U&&setTimeout(W(a,function(){x==c&&(k.scroller.scrollTop+=U,g(b))}),50)}}function h(b){a.state.selectingText=!1;x=Infinity;wc(b);k.input.focus();rb(document,"mousemove",z);rb(document,"mouseup",y);l.history.lastSelOrigin=null}var k=a.display,l=a.doc;wc(b);var q,m,r=l.sel,t=r.ranges;e&&!b.shiftKey?(m=l.sel.contains(c),q=-1<m?t[m]:new ba(c,c)):(q=l.sel.primary(),m=l.sel.primIndex);if(b.altKey)d="rect",e||(q=new ba(c,c)),c=gd(a,b,!0,!0),m=-1;else if("double"==
d){var u=a.findWordAt(c);q=a.display.shift||l.extend?cd(l,q,u.anchor,u.head):u}else"triple"==d?(u=new ba(S(c.line,0),va(l,S(c.line+1,0))),q=a.display.shift||l.extend?cd(l,q,u.anchor,u.head):u):q=cd(l,q,c);e?-1==m?(m=t.length,sb(l,dc(t.concat([q]),m),{scroll:!1,origin:"*mouse"})):1<t.length&&t[m].empty()&&"single"==d&&!b.shiftKey?(sb(l,dc(t.slice(0,m).concat(t.slice(m+1)),0),{scroll:!1,origin:"*mouse"}),r=l.sel):me(l,m,q,Zf):(m=0,sb(l,new Gc([q],0),Zf),r=l.sel);var v=c,w=k.wrapper.getBoundingClientRect(),
x=0,z=W(a,function(a){$e(a)?g(a):h(a)}),y=W(a,h);a.state.selectingText=y;oa(document,"mousemove",z);oa(document,"mouseup",y)}function Me(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(h){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&wc(b);d=a.display;var k=d.lineDiv.getBoundingClientRect();if(g>k.bottom||!mc(a,c))return Ae(b);g-=k.top-d.viewOffset;for(k=0;k<a.options.gutters.length;++k){var l=d.gutters.childNodes[k];if(l&&l.getBoundingClientRect().right>=
f)return f=ld(a.doc,g),e(a,c,a,f,a.options.gutters[k],b),Ae(b)}}function Kf(a){var b=this;rf(b);if(!$a(b,a)&&!Ab(b.display,a)){wc(a);Ka&&(Hb=+new Date);var c=gd(b,a,!0),d=a.dataTransfer.files;if(c&&!ra(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var H=new FileReader;H.onload=W(b,function(){f[d]=H.result;if(++g==e){c=va(b.doc,c);var a={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};Pe(b.doc,a);Vc(b.doc,Lb(c,Jc(a)))}});
H.readAsText(a)};for(var h=0;h<e;++h)a(d[h],h)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(function(){b.display.input.focus()},20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&(Ac?!a.altKey:!a.ctrlKey))var k=b.listSelections();Qd(b.doc,Lb(c,c));if(k)for(h=0;h<k.length;++h)Gd(b.doc,"",k[h].anchor,k[h].head,"drag");b.replaceSelection(f,"around","paste");b.display.input.focus()}}catch(l){}}}function rf(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),
a.display.dragCursor=null)}function Vd(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Cb||Tb(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),Cb&&Tb(a),kb(a,100))}function Hd(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,Ia(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}
function sf(a,b){var c=df(b),d=c.x,c=c.y,e=a.display,f=e.scroller;if(d&&f.scrollWidth>f.clientWidth||c&&f.scrollHeight>f.clientHeight){if(c&&Ac&&Db){var g=b.target,h=e.view;a:for(;g!=f;g=g.parentNode)for(var k=0;k<h.length;k++)if(h[k].node==g){a.display.currentWheelTarget=g;break a}}!d||Cb||tb||null==Cc?(c&&null!=Cc&&(g=c*Cc,h=a.doc.scrollTop,k=h+e.wrapper.clientHeight,0>g?h=Math.max(0,h+g-50):k=Math.min(a.doc.height,k+g+50),Tb(a,{top:h,bottom:k})),20>Sf&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,
e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(Cc=(Cc*Sf+a)/(Sf+1),++Sf)}},200)):(e.wheelDX+=d,e.wheelDY+=c))):(c&&Vd(a,Math.max(0,Math.min(f.scrollTop+c*Cc,f.scrollHeight-f.clientHeight))),Hd(a,Math.max(0,Math.min(f.scrollLeft+d*Cc,f.scrollWidth-f.clientWidth))),wc(b),e.wheelStartX=null)}}function Wd(a,
b,c){if("string"==typeof b&&(b=kc[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{ra(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=kg}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function tf(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=Bb(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&Bb(b,a.options.extraKeys,c,a)||Bb(b,a.options.keyMap,c,a)}function se(a,b,c,d){var e=a.state.keySeq;if(e){if(Zc(b))return"handled";
ig.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});b=e+" "+b}d=tf(a,b,d);"multi"==d&&(a.state.keySeq=b);"handled"==d&&Rb(a,"keyHandled",a,b,c);if("handled"==d||"multi"==d)wc(c),lb(a);return e&&!d&&/\'$/.test(b)?(wc(c),!0):!!d}function Ne(a,b){var c=Je(b,!0);return c?b.shiftKey&&!a.state.keySeq?se(a,"Shift-"+c,b,function(b){return Wd(a,b,!0)})||se(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return Wd(a,b)}):se(a,c,b,function(b){return Wd(a,
b)}):!1}function Lf(a,b,c){return se(a,"'"+c+"'",b,function(b){return Wd(a,b,!0)})}function uf(a){this.curOp.focus=Sc();if(!$a(this,a)){Ka&&11>Ua&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=Ne(this,a);tb&&(Yf=c?b:null,!c&&88==b&&!sg&&(Ac?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||vf(this)}}function vf(a){function b(a){18!=a.keyCode&&a.altKey||(ta(c,"CodeMirror-crosshair"),
rb(document,"keyup",b),rb(document,"mouseover",b))}var c=a.display.lineDiv;ag(c,"CodeMirror-crosshair");oa(document,"keyup",b);oa(document,"mouseover",b)}function te(a){16==a.keyCode&&(this.doc.sel.shift=!1);$a(this,a)}function yb(a){if(!(Ab(this.display,a)||$a(this,a)||a.ctrlKey&&!a.altKey||Ac&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(tb&&b==Yf)Yf=null,wc(a);else if(!tb||a.which&&!(10>a.which)||!Ne(this,a))if(b=String.fromCharCode(null==c?b:c),!Lf(this,a,b))this.display.input.onKeyPress(a)}}function fg(a){a.state.delayingBlurEvent=
!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,xf(a))},100)}function Uf(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(Zb(a,"focus",a),a.state.focused=!0,ag(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),Db&&setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),lb(a))}function xf(a){a.state.delayingBlurEvent||
(a.state.focused&&(Zb(a,"blur",a),a.state.focused=!1,ta(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function Xc(a,b){var c;(c=Ab(a.display,b))||(c=mc(a,"gutterContextMenu")?Me(a,b,"gutterContextMenu",!1,Zb):!1);if(!c)a.display.input.onContextMenu(b)}function Fd(a,b){if(0>ga(a,b.from))return a;if(0>=ga(a,b.to))return Jc(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=
Jc(b).ch-b.to.ch);return S(c,d)}function Vf(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new ba(Fd(e.anchor,b),Fd(e.head,b)))}return dc(c,a.sel.primIndex)}function yf(a,b,c){return a.line==b.line?S(c.line,a.ch-b.ch+c.ch):S(c.line+(a.line-b.line),a.ch)}function Mf(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=va(a,b));c&&(this.to=va(a,c));d&&(this.text=d);void 0!==
e&&(this.origin=e)});Zb(a,"beforeChange",a,b);a.cm&&Zb(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Pe(a,b,c){if(a.cm){if(!a.cm.curOp)return W(a.cm,Pe)(a,b,c);if(a.cm.state.suppressEdits)return}if(mc(a,"beforeChange")||a.cm&&mc(a.cm,"beforeChange"))if(b=Mf(a,b,!0),!b)return;if(c=Sb&&!c&&Nf(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)Mc(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else Mc(a,b)}function Mc(a,b){if(1!=b.text.length||
""!=b.text[0]||0!=ga(b.from,b.to)){var c=Vf(a,b);rc(a,b,c,a.cm?a.cm.curOp.id:NaN);pb(a,b,c,Re(a,b));var d=[];kd(a,function(a,c){c||-1!=ya(d,a.history)||(Ze(a.history,b),d.push(a.history));pb(a,b,null,Re(a,b))})}}function hd(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,k=0;k<g.length&&(e=g[k],c?!e.ranges||e.equals(a.sel):e.ranges);k++);if(k!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){Fe(e,
h);if(c&&!e.equals(a.sel)){sb(a,e,{clearRedo:!1});return}f=e}else break;c=[];Fe(f,h);h.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;d=mc(a,"beforeChange")||a.cm&&mc(a.cm,"beforeChange");for(k=e.changes.length-1;0<=k;--k){var l=e.changes[k];l.origin=b;if(d&&!Mf(a,l,!1)){g.length=0;break}c.push(ze(a,l));f=k?Vf(a,l):Da(g);pb(a,l,f,Zd(a,l));!k&&a.cm&&a.cm.scrollIntoView({from:l.from,to:Jc(l)});var q=[];kd(a,function(a,b){b||-1!=ya(q,a.history)||(Ze(a.history,
l),q.push(a.history));pb(a,l,null,Zd(a,l))})}}}}function Yb(a,b){if(0!=b&&(a.first+=b,a.sel=new Gc(V(a.sel.ranges,function(a){return new ba(S(a.anchor.line+b,a.anchor.ch),S(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){Va(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)ka(a.cm,d,"gutter")}}function pb(a,b,c,d){if(a.cm&&!a.cm.curOp)return W(a.cm,pb)(a,b,c,d);if(b.to.line<a.first)Yb(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<
a.first){var e=b.text.length-1-(a.first-b.from.line);Yb(a,e);b={from:S(a.first,0),to:S(b.to.line+e,b.to.ch),text:[Da(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:S(e,qa(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=Ld(a,b.from,b.to);c||(c=Vf(a,b));a.cm?Wb(a.cm,b,d):xd(a,b,d);Qd(a,c,Ad)}}function Wb(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,k=f.line;a.options.lineWrapping||(k=Za(ib(qa(d,f.line))),d.iter(k,g.line+1,function(a){if(a==e.maxLine)return h=
!0}));-1<d.sel.contains(b.from,b.to)&&w(a);xd(d,b,c,A(a));a.options.lineWrapping||(d.iter(k,f.line+b.text.length,function(a){var b=C(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0));d.frontier=Math.min(d.frontier,f.line);kb(a,400);c=b.text.length-(g.line-f.line)-1;b.full?Va(a):f.line!=g.line||1!=b.text.length||be(a.doc,b)?Va(a,f.line,g.line+1,c):ka(a,f.line,"text");c=mc(a,"changes");if((d=mc(a,"change"))||c)b={from:f,to:g,text:b.text,
removed:b.removed,origin:b.origin},d&&Rb(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function Gd(a,b,c,d,e){d||(d=c);if(0>ga(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=a.splitLines(b));Pe(a,{from:c,to:d,text:b,origin:e})}function bb(a,b,c,d,e){var f=a.display,g=Ha(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,k=t(a),l={};e-c>k&&(e=c+k);var q=a.doc.height+pc(f),m=c<g,g=e>q-g;c<h?l.scrollTop=
m?0:c:e>h+k&&(c=Math.min(c,(g?q:e)-k),c!=h&&(l.scrollTop=c));h=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;a=x(a)-(a.options.fixedGutter?f.gutters.offsetWidth:0);(f=d-b>a)&&(d=b+a);10>b?l.scrollLeft=0:b<h?l.scrollLeft=Math.max(0,b-(f?0:10)):d>a+h-3&&(l.scrollLeft=d+(f?0:10)-a);return l}function Qe(a,b,c){null==b&&null==c||Id(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?
a.doc.scrollTop:a.curOp.scrollTop)+c)}function Yd(a){Id(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?S(b.line,b.ch-1):b,d=S(b.line,b.ch+1));a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function Id(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=vc(a,b.from),d=vc(a,b.to),b=bb(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}
function ue(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=Na(a,b):c="prev");var g=a.options.tabSize,h=qa(e,b),k=pd(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var l=h.text.match(/^\s*/)[0],q;if(!d&&!/\S/.test(h.text))q=0,c="not";else if("smart"==c&&(q=e.mode.indent(f,h.text.slice(l.length),h.text),q==kg||150<q)){if(!d)return;c="prev"}"prev"==c?q=b>e.first?pd(qa(e,b-1).text,null,g):0:"add"==c?q=k+a.options.indentUnit:"subtract"==c?q=k-a.options.indentUnit:"number"==typeof c&&
(q=k+c);q=Math.max(0,q);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(q/g);a;--a)d+=g,c+="\t";d<q&&(c+=Xe(q-d));if(c!=l)return Gd(e,c,S(b,0),S(b,l.length),"+input"),h.stateAfter=null,!0;for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<l.length){d=S(b,l.length);me(e,a,new ba(d,d));break}}function zf(a,b,c,d){var e=b,f=b;"number"==typeof b?f=qa(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=Za(b);if(null==e)return null;d(f,e)&&a.cm&&ka(a.cm,e,c);return f}
function ia(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=ga(f.from,Da(d).to);){var g=d.pop();if(0>ga(g.from,f.from)){f.from=g.from;break}}d.push(f)}K(a,function(){for(var b=d.length-1;0<=b;b--)Gd(a.doc,"",d[b].from,d[b].to,"+delete");Yd(a)})}function mb(a,b,c,d,e){function f(b){var d=(e?Nd:Hc)(l,h,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=q=!1:(g=b,b=l=qa(a,b));if(b)h=e?(0>c?sc:J)(l):0>c?l.text.length:0;else return q=!1}else h=d;return!0}
var g=b.line,h=b.ch,k=c,l=qa(a,g),q=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var m=null;d="group"==d;b=a.cm&&a.cm.getHelper(b,"wordChars");for(var r=!0;!(0>c)||f(!r);r=!1){var t=l.text.charAt(h)||"\n",t=nc(t,b)?"w":d&&"\n"==t?"n":!d||/\s/.test(t)?null:"p";!d||r||t||(t="s");if(m&&m!=t){0>c&&(c=1,f());break}t&&(m=t);if(0<c&&!f(!r))break}}k=oe(a,S(g,h),k,!0);q||(k.hitSide=!0);return k}function jd(a,b,c,d){var e=a.doc,f=b.left,g;"page"==d?(d=Math.min(a.display.wrapper.clientHeight,
window.innerHeight||document.documentElement.clientHeight),g=b.top+c*(d-(0>c?1.5:0.5)*Ha(a.display))):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){var h=Qc(a,f,g);if(!h.outside)break;if(0>c?0>=g:g>=e.height){h.hitSide=!0;break}g+=5*c}return h}function sa(a,c,d,e){b.defaults[a]=c;d&&(bf[a]=e?function(a,b,c){c!=Ge&&d(a,b,c)}:d)}function jf(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=
!0;else if(/^s(hift)$/i.test(h))e=!0;else throw Error("Unrecognized modifier name: "+h);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+a);return a}function yc(a){return"string"==typeof a?Ib[a]:a}function Pc(a,b,c,d,e){if(d&&d.shared)return gg(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return W(a.cm,Pc)(a,b,c,d,e);var f=new Ec(a,e);e=ga(b,c);d&&Ic(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=la("span",[f.replacedWith],"CodeMirror-widget"),
d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(Le(a,b.line,b,c,f)||b.line!=c.line&&Le(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");Kb=!0}f.addToHistory&&rc(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,h=a.cm,k;a.iter(g,c.line+1,function(a){h&&f.collapsed&&!h.options.lineWrapping&&ib(a)==h.display.maxLine&&(k=!0);f.collapsed&&g!=b.line&&v(a,0);var d=
new jc(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){Xb(a,b)&&v(b,0)});f.clearOnEnter&&oa(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(Sb=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++Wa,f.atomic=!0);if(h){k&&(h.curOp.updateMaxLine=!0);if(f.collapsed)Va(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||
f.endStyle||f.css)for(d=b.line;d<=c.line;d++)ka(h,d,"text");f.atomic&&gf(h.doc);Rb(h,"markerAdded",h,f)}return f}function gg(a,b,c,d,e){d=Ic(d);d.shared=!1;var f=[Pc(a,b,c,d,e)],g=f[0],h=d.widgetNode;kd(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(Pc(a,va(a,b),va(a,c),d,e));for(var H=0;H<a.linked.length;++H)if(a.linked[H].isParent)return;g=Da(f)});return new Ee(f,g)}function G(a){return a.findMarks(S(a.first,0),a.clipPos(S(a.lastLine())),function(a){return a.parent})}function wf(a){for(var b=
0;b<a.length;b++){var c=a[b],d=[c.primary.doc];kd(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==ya(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function jc(a,b,c){this.marker=a;this.from=b;this.to=c}function Xd(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function Re(a,b){if(b.full)return null;var c=Dd(a,b.from.line)&&qa(a,b.from.line).markedSpans,d=Dd(a,b.to.line)&&qa(a,b.to.line).markedSpans;if(!c&&!d)return null;
var e=b.from.ch,f=b.to.ch,g=0==ga(b.from,b.to);if(c)for(var h=0,k;h<c.length;++h){var l=c[h],q=l.marker;if(null==l.from||(q.inclusiveLeft?l.from<=e:l.from<e)||l.from==e&&!("bookmark"!=q.type||g&&l.marker.insertLeft)){var m=null==l.to||(q.inclusiveRight?l.to>=e:l.to>e);(k||(k=[])).push(new jc(q,l.from,m?null:l.to))}}c=k;if(d)for(var h=0,r;h<d.length;++h)if(k=d[h],l=k.marker,null==k.to||(l.inclusiveRight?k.to>=f:k.to>f)||k.from==f&&"bookmark"==l.type&&(!g||k.marker.insertLeft))q=null==k.from||(l.inclusiveLeft?
k.from<=f:k.from<f),(r||(r=[])).push(new jc(l,q?null:k.from-f,null==k.to?null:k.to-f));d=r;g=1==b.text.length;r=Da(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(h=c[f],null==h.to)(k=Xd(d,h.marker),k)?g&&(h.to=null==k.to?null:k.to+r):h.to=e;if(d)for(f=0;f<d.length;++f)h=d[f],null!=h.to&&(h.to+=r),null==h.from?(k=Xd(c,h.marker),k||(h.from=r,g&&(c||(c=[])).push(h))):(h.from+=r,g&&(c||(c=[])).push(h));c&&(c=Wf(c));d&&d!=c&&(d=Wf(d));e=[c];if(!g){var g=b.text.length-2,t;if(0<g&&c)for(f=0;f<c.length;++f)null==
c[f].to&&(t||(t=[])).push(new jc(c[f].marker,null,null));for(f=0;f<g;++f)e.push(t);e.push(d)}return e}function Wf(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Zd(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(Xf(c[d]));c=e}else c=null;d=Re(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var h=0;a:for(;h<g.length;++h){for(var k=
g[h],l=0;l<f.length;++l)if(f[l].marker==k.marker)continue a;f.push(k)}}else g&&(c[e]=g)}return c}function Nf(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=ya(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>ga(g.to,e.from)||0<ga(g.from,e.to))){var h=[f,1],k=ga(g.from,e.from),l=ga(g.to,
e.to);(0>k||!c.inclusiveLeft&&!k)&&h.push({from:g.from,to:e.from});(0<l||!c.inclusiveRight&&!l)&&h.push({from:e.to,to:g.to});a.splice.apply(a,h);f+=h.length-1}}}return a}function Af(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Sd(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Od(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=ga(c.from,d.from)||(a.inclusiveLeft?
-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=ga(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function fd(a,b){var c=Kb&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>Od(d,e.marker))&&(d=e.marker);return d}function Le(a,b,c,d,e){a=qa(a,b);if(a=Kb&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(0),h=ga(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),k=ga(g.to,
d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=k||0>=h&&0<=k)&&(0>=h&&(0<ga(g.to,c)||f.marker.inclusiveRight&&e.inclusiveLeft)||0<=h&&(0>ga(g.from,d)||f.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function ib(a){for(var b;b=fd(a,!0);)a=b.find(-1,!0).line;return a}function ve(a,b){var c=qa(a,b),d=ib(c);return c==d?b:Za(d)}function ua(a,b){if(b>a.lastLine())return b;var c=qa(a,b),d;if(!Xb(a,c))return b;for(;d=fd(c,!1);)c=d.find(1,!0).line;return Za(c)+1}function Xb(a,
b){var c=Kb&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&Jd(a,b,d)))return!0}function Jd(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),Jd(a,b.line,Xd(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||
c.marker.inclusiveRight)&&Jd(a,b,d))return!0}function ac(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!g(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");oc(b.display.measure,la("div",[a.node],null,c))}return a.height=a.node.offsetHeight}function Of(a,b,c,d){var e=new af(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=!0);zf(a,b,
"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;f&&!Xb(a,b)&&(c=Tc(b)<a.scrollTop,v(b,b.height+ac(e)),c&&Qe(f,null,e.height),f.curOp.forceUpdate=!0);return!0});return e}function Se(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||
(b[d]+=" "+c[2])}return a}function ub(a,c){if(a.blankLine)return a.blankLine(c);if(a.innerMode){var d=b.innerMode(a,c);if(d.mode.blankLine)return d.mode.blankLine(d.state)}}function we(a,c,d,e){for(var f=0;10>f;f++){e&&(e[0]=b.innerMode(a,d).mode);var g=a.token(c,d);if(c.pos>c.start)return g}throw Error("Mode "+a.name+" failed to advance stream.");}function qd(a,b,c,d){function e(a){return{start:q.start,end:q.pos,string:q.current(),type:h||null,state:a?ic(f.mode,l):l}}var f=a.doc,g=f.mode,h;b=va(f,
b);var k=qa(f,b.line),l=Na(a,b.line,c),q=new Jb(k.text,a.options.tabSize),m;for(d&&(m=[]);(d||q.pos<b.ch)&&!q.eol();)q.start=q.pos,h=we(g,q,l),d&&m.push(e(!0));return d?m:e()}function ae(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var k=0,l=null,q=new Jb(b,a.options.tabSize),m,r=a.options.addModeClass&&[null];for(""==b&&Se(ub(c,d),f);!q.eol();){q.pos>a.options.maxHighlightLength?(h=!1,g&&Kd(a,b,d,q.pos),q.pos=b.length,m=null):m=Se(we(c,q,d,r),f);if(r){var t=r[0].name;t&&
(m="m-"+(m?t+" "+m:t))}if(!h||l!=m){for(;k<q.start;)k=Math.min(q.start,k+5E4),e(k,l);l=m}q.start=q.pos}for(;k<q.pos;)a=Math.min(q.pos,k+5E4),e(a,l),k=a}function Te(a,b,c,d){var e=[a.state.modeGen],f={};ae(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],h=1,k=0;ae(a,b.text,g.mode,!0,function(a,b){for(var c=h;k<a;){var d=e[h];d>a&&e.splice(h,1,a,e[h+1],d);h+=2;k=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,"cm-overlay "+b),h=
c+2;else for(;c<h;c+=2)d=e[c+1],e[c+1]=(d?d+" ":"")+"cm-overlay "+b},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function La(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=Na(a,Za(b)),e=Te(a,b,b.text.length>a.options.maxHighlightLength?ic(a.doc.mode,d):d);b.stateAfter=d;b.styles=e.styles;e.classes?b.styleClasses=e.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.frontier&&a.doc.frontier++}return b.styles}function Kd(a,b,c,d){var e=a.doc.mode;a=new Jb(b,a.options.tabSize);
a.start=a.pos=d||0;for(""==b&&ub(e,c);!a.eol();)we(e,a,c),a.start=a.pos}function Yc(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?pg:lg;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function Qb(a,b){var c=la("span",null,null,Db?"padding-right: .1px":null),c={pre:la("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,splitSpaces:(Ka||Db)&&a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f;c.pos=0;c.addToken=Ue;var g;
if(null!=ng)g=ng;else{g=oc(a.display.measure,document.createTextNode("A\u062eA"));var h=$b(g,0,1).getBoundingClientRect();g=h&&h.left!=h.right?ng=3>$b(g,1,2).getBoundingClientRect().right-h.right:!1}g&&(f=Ma(e))&&(c.addToken=B(c.addToken,f));c.map=[];h=b!=a.display.externalMeasured&&Za(e);a:{g=c;var h=La(a,e,h),k=e.markedSpans,l=e.text,q=0;if(k)for(var m=l.length,r=0,t=1,u="",v=void 0,w=void 0,x=0,z=void 0,y=void 0,E=void 0,C=void 0,A=void 0;;){if(x==r){for(var z=y=E=C=w="",A=null,x=Infinity,ha=[],
Z=0;Z<k.length;++Z){var P=k[Z],D=P.marker;"bookmark"==D.type&&P.from==r&&D.widgetNode?ha.push(D):P.from<=r&&(null==P.to||P.to>r||D.collapsed&&P.to==r&&P.from==r)?(null!=P.to&&P.to!=r&&x>P.to&&(x=P.to,y=""),D.className&&(z+=" "+D.className),D.css&&(w=D.css),D.startStyle&&P.from==r&&(E+=" "+D.startStyle),D.endStyle&&P.to==x&&(y+=" "+D.endStyle),D.title&&!C&&(C=D.title),D.collapsed&&(!A||0>Od(A.marker,D))&&(A=P)):P.from>r&&x>P.from&&(x=P.from)}if(A&&(A.from||0)==r){ob(g,(null==A.to?m+1:A.to)-r,A.marker,
null==A.from);if(null==A.to)break a;A.to==r&&(A=!1)}if(!A&&ha.length)for(Z=0;Z<ha.length;++Z)ob(g,0,ha[Z])}if(r>=m)break;for(ha=Math.min(m,x);;){if(u){Z=r+u.length;A||(P=Z>ha?u.slice(0,ha-r):u,g.addToken(g,P,v?v+z:z,E,r+P.length==x?y:"",C,w));if(Z>=ha){u=u.slice(ha-r);r=ha;break}r=Z;E=""}u=l.slice(q,q=h[t++]);v=Yc(h[t++],g.cm.options)}}else for(var t=1;t<h.length;t+=2)g.addToken(g,l.slice(q,q=h[t]),Yc(h[t+1],g.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=jb(e.styleClasses.bgClass,
c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=jb(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(cf(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}Db&&/\bcm-tab\b/.test(c.content.lastChild.className)&&(c.content.className="cm-tab-wrap-hack");Zb(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=jb(c.pre.className,
c.textClass||""));return c}function Ue(a,b,c,d,e,f,g){if(b){var h=a.splitSpaces?b.replace(/ {3,}/g,wd):b,k=a.cm.state.specialChars,l=!1;if(k.test(b))for(var q=document.createDocumentFragment(),m=0;;){k.lastIndex=m;var r=k.exec(b),t=r?r.index-m:b.length-m;if(t){var u=document.createTextNode(h.slice(m,m+t));Ka&&9>Ua?q.appendChild(la("span",[u])):q.appendChild(u);a.map.push(a.pos,a.pos+t,u);a.col+=t;a.pos+=t}if(!r)break;m+=t+1;"\t"==r[0]?(u=a.cm.options.tabSize,r=u-a.col%u,u=q.appendChild(la("span",
Xe(r),"cm-tab")),u.setAttribute("role","presentation"),u.setAttribute("cm-text","\t"),a.col+=r):("\r"==r[0]||"\n"==r[0]?(u=q.appendChild(la("span","\r"==r[0]?"\u240d":"\u2424","cm-invalidchar")),u.setAttribute("cm-text",r[0])):(u=a.cm.options.specialCharPlaceholder(r[0]),u.setAttribute("cm-text",r[0]),Ka&&9>Ua?q.appendChild(la("span",[u])):q.appendChild(u)),a.col+=1);a.map.push(a.pos,a.pos+1,u);a.pos++}else{a.col+=b.length;var q=document.createTextNode(h);a.map.push(a.pos,a.pos+b.length,q);Ka&&9>
Ua&&(l=!0);a.pos+=b.length}if(c||d||e||l||g)return"cm-hexnumber"===c&&(g=q.textContent.slice(2),b=parseInt(g,16),g="background-color:#"+g+";",g=500<299*Math.floor(b/65536)/255+587*Math.floor(b/256%256)/255+114*Math.floor(b%256)/255?g+"color:black;":g+"color:white;"),c=c||"",d&&(c+=d),e&&(c+=e),d=la("span",[q],c,g),f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(q)}}function wd(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"\u00a0";return b+" "}function B(a,b){return function(c,d,
e,f,g,h,k){e=e?e+" cm-force-border":"cm-force-border";for(var l=c.pos,q=l+d.length;;){for(var m=0;m<b.length;m++){var r=b[m];if(r.to>l&&r.from<=l)break}if(r.to>=q)return a(c,d,e,f,g,h,k);a(c,d.slice(0,r.to-l),e,f,null,h,k);f=null;d=d.slice(r.to-l);l=r.to}}}function ob(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),
a.content.appendChild(e));a.pos+=b}function be(a,b){return 0==b.from.ch&&0==b.to.ch&&""==Da(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function xd(a,b,c,d){function e(a,c,f){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Af(a);Sd(a,f);c=d?d(a):1;c!=a.height&&v(a,c);Rb(a,"change",a,b)}function f(a,b){for(var e=a,g=[];e<b;++e)g.push(new Oe(k[e],c?c[e]:null,d));return g}var g=b.from,h=b.to,k=b.text,l=qa(a,g.line),q=qa(a,h.line),m=Da(k),r=
c?c[k.length-1]:null,t=h.line-g.line;if(b.full)a.insert(0,f(0,k.length)),a.remove(k.length,a.size-k.length);else if(be(a,b)){var u=f(0,k.length-1);e(q,q.text,r);t&&a.remove(g.line,t);u.length&&a.insert(g.line,u)}else l==q?1==k.length?e(l,l.text.slice(0,g.ch)+m+l.text.slice(h.ch),r):(u=f(1,k.length-1),u.push(new Oe(m+l.text.slice(h.ch),r,d)),e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null),a.insert(g.line+1,u)):1==k.length?(e(l,l.text.slice(0,g.ch)+k[0]+q.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,
t)):(e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null),e(q,m+q.text.slice(h.ch),r),u=f(1,k.length-1),1<t&&a.remove(g.line+1,t-1),a.insert(g.line+1,u));Rb(a,"change",a,b)}function xe(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Ta(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function kd(a,b,c){function d(a,e,f){if(a.linked)for(var g=
0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var H=f&&h.sharedHist;if(!c||H)b(h.doc,H),d(h.doc,a,H)}}}d(a,null,!0)}function ye(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;u(a);m(a);a.options.lineWrapping||Z(a);a.options.mode=b.modeOption;Va(a)}function qa(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}
function Ld(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function Bf(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function v(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function Za(a){if(null==a.parent)return null;var b=a.parent;a=ya(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+
b.first}function ld(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function Tc(a){a=ib(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function Ma(a){var b=
a.order;null==b&&(b=a.order=ug(a.text));return b}function ce(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function ze(a,b){var c={from:na(b.from),to:Jc(b),text:Ld(a,b.from,b.to)};Pf(a,c,b.from.line,b.to.line+1);kd(a,function(a){Pf(a,c,b.from.line,b.to.line+1)},!0);return c}function We(a){for(;a.length;)if(Da(a).ranges)a.pop();else break}function rc(a,
b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g,h;if(h=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))e.lastOp==d?(We(e.done),g=Da(e.done)):e.done.length&&!Da(e.done).ranges?g=Da(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),g=Da(e.done)):g=void 0,h=g;if(h){var k=Da(g.changes);0==ga(b.from,b.to)&&0==ga(b.from,k.to)?k.to=Jc(b):g.changes.push(ze(a,b))}else for((g=
Da(e.done))&&g.ranges||Fe(a.sel,e.done),g={changes:[ze(a,b)],generation:e.generation},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;k||Zb(a,"historyAdded")}function Fe(a,b){var c=Da(b);c&&c.ranges&&c.equals(a)||b.push(a)}function Pf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,
d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function Xf(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Eb(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?Gc.prototype.deepCopy.call(f):f);else{var f=f.changes,g=[];e.push({changes:g});for(var h=0;h<f.length;++h){var k=f[h],l;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var q in k)(l=
q.match(/^spans_(\d+)$/))&&-1<ya(b,Number(l[1]))&&(Da(g)[q]=k[q],delete k[q])}}}return e}function hb(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Ye(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)hb(f.ranges[h].anchor,b,c,d),hb(f.ranges[h].head,b,c,d)}else{for(h=0;h<f.changes.length;++h){var k=f.changes[h];if(c<k.from.line)k.from=S(k.from.line+d,k.from.ch),k.to=S(k.to.line+d,k.to.ch);
else if(b<=k.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Ze(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Ye(a.done,c,d,e);Ye(a.undone,c,d,e)}function Ae(a){return null!=a.defaultPrevented?a.defaultPrevented:!1==a.returnValue}function $e(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));Ac&&a.ctrlKey&&1==b&&(b=3);return b}function Rb(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,
2),f;Y?f=Y.delayedCallbacks:Gf?f=Gf:(f=Gf=[],setTimeout(Qf,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}function Qf(){var a=Gf;Gf=null;for(var b=0;b<a.length;++b)a[b]()}function $a(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});Zb(a,c||b.type,a,b);return Ae(b)||b.codemirrorIgnore}function w(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==ya(a,
b[c])&&a.push(b[c])}}function mc(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function xb(a){a.prototype.on=function(a,b){oa(this,a,b)};a.prototype.off=function(a,b){rb(this,a,b)}}function de(){this.id=null}function Rf(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}function Xe(a){for(;$f.length<=a;)$f.push(Da($f)+" ");return $f[a]}function Da(a){return a[a.length-
1]}function ya(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function V(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function ee(){}function Cf(a,b){var c;Object.create?c=Object.create(a):(ee.prototype=a,c=new ee);b&&Ic(b,c);return c}function Ic(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function Pa(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function nc(a,b){return b?
-1<b.source.indexOf("\\w")&&d(a)?!0:b.test(a):d(a)}function cg(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function Aa(a){return 768<=a.charCodeAt(0)&&q.test(a)}function la(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function yd(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function oc(a,
b){return yd(a).appendChild(b)}function Sc(){for(var a=document.activeElement;a&&a.root&&a.root.activeElement;)a=a.root.activeElement;return a}function Md(a){return RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function jb(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Md(c[d]).test(b)&&(b+=" "+c[d]);return b}function fe(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function Ce(){var a;oa(window,
"resize",function(){null==a&&(a=setTimeout(function(){a=null;fe(Ke)},100))});oa(window,"blur",function(){fe(xf)})}function cf(a){if(null==mg){var b=la("span","\u200b");oc(a,la("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(mg=1>=b.offsetWidth&&2<b.offsetHeight&&!(Ka&&8>Ua))}a=mg?la("span","\u200b"):la("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function ke(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=
!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function fb(a){return a.level%2?a.to:a.from}function Be(a){return a.level%2?a.from:a.to}function J(a){return(a=Ma(a))?fb(a[0]):0}function sc(a){var b=Ma(a);return b?Be(Da(b)):a.text.length}function Df(a,b){var c=qa(a.doc,b),d=ib(c);d!=c&&(b=Za(d));d=(c=Ma(d))?c[0].level%2?sc(d):J(d):0;return S(b,d)}function ge(a,b){var c=Df(a,b.line),d=qa(a.doc,c.line),
e=Ma(d);return e&&0!=e[0].level?c:(d=Math.max(0,d.text.search(/\S/)),S(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d))}function $c(a,b){bg=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b)if(null==d)d=c;else{var f;f=e.level;var g=a[d].level,h=a[0].level;f=f==h?!0:g==h?!1:f<g;if(f)return e.from!=e.to&&(bg=d),c;e.from!=e.to&&(bg=c);break}}return d}function md(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&Aa(a.text.charAt(b)));return b}function Nd(a,b,c,d){var e=
Ma(a);if(!e)return Hc(a,b,c,d);var f=$c(e,b),g=e[f];for(b=md(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if($c(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?md(a,g.to,-1,d):md(a,g.from,1,d)}}function Hc(a,b,c,d){b+=c;if(d)for(;0<b&&Aa(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Cb=/gecko\/\d/i.test(navigator.userAgent),Ef=/MSIE \d/.test(navigator.userAgent),hc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),
Ka=Ef||hc,Ua=Ka&&(Ef?document.documentMode||6:hc[1]),Db=/WebKit\//.test(navigator.userAgent),Ff=Db&&/Qt\/\d+\.\d+/.test(navigator.userAgent),cb=/Chrome\//.test(navigator.userAgent),tb=/Opera\//.test(navigator.userAgent),gc=/Apple Computer/.test(navigator.vendor),fc=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),hg=/PhantomJS/.test(navigator.userAgent),he=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Bc=he||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
Ac=he||/Mac/.test(navigator.platform),Q=/win/i.test(navigator.platform),tc=tb&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);tc&&(tc=Number(tc[1]));tc&&15<=tc&&(tb=!1,Db=!0);var od=Ac&&(Ff||tb&&(null==tc||12.11>tc)),je=Cb||Ka&&9<=Ua,Sb=!1,Kb=!1;ha.prototype=Ic({update:function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-
a.clientHeight+(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedOverlay&&0<a.clientHeight&&(0==d&&this.overlayHack(),this.checkedOverlay=!0);return{right:c?d:0,bottom:b?
d:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a)},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=Ac&&!fc?"12px":"18px";var a=this,b=function(b){(b.target||b.srcElement)!=a.vert&&(b.target||b.srcElement)!=a.horiz&&W(a.cm,Ud)(b)};oa(this.vert,"mousedown",b);oa(this.horiz,"mousedown",b)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)}},
ha.prototype);Ba.prototype=Ic({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},Ba.prototype);b.scrollbarModel={"native":ha,"null":Ba};N.prototype.signal=function(a,b){mc(a,b)&&this.events.push(arguments)};N.prototype.finish=function(){for(var a=0;a<this.events.length;a++)Zb.apply(null,this.events[a])};var S=b.Pos=function(a,b){if(!(this instanceof S))return new S(a,b);this.line=a;this.ch=b},ga=b.cmpPos=function(a,b){return a.line-
b.line||a.ch-b.ch},lc=null;ab.prototype=Ic({init:function(b){function c(b){if(e.somethingSelected())lc=e.getSelections(),d.inaccurateSelection&&(d.prevInput="",d.inaccurateSelection=!1,g.value=lc.join("\n"),a(g));else if(e.options.lineWiseCopyCut){var f=Fb(e);lc=f.text;"cut"==b.type?e.setSelections(f.ranges,null,Ad):(d.prevInput="",g.value=f.text.join("\n"),a(g))}else return;"cut"==b.type&&(e.state.cutIncoming=!0)}var d=this,e=this.cm,f=this.wrapper=Uc(),g=this.textarea=f.firstChild;b.wrapper.insertBefore(f,
b.wrapper.firstChild);he&&(g.style.width="0px");oa(g,"input",function(){Ka&&9<=Ua&&d.hasSelection&&(d.hasSelection=null);d.poll()});oa(g,"paste",function(a){if(D(a,e))return!0;e.state.pasteIncoming=!0;d.fastPoll()});oa(g,"cut",c);oa(g,"copy",c);oa(b.scroller,"paste",function(a){Ab(b,a)||(e.state.pasteIncoming=!0,d.focus())});oa(b.lineSpace,"selectstart",function(a){Ab(b,a)||wc(a)});oa(g,"compositionstart",function(){var a=e.getCursor("from");d.composing={start:a,range:e.markText(a,e.getCursor("to"),
{className:"CodeMirror-composing"})}});oa(g,"compositionend",function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})},prepareSelection:function(){var a=this.cm,b=a.display,c=a.doc,d=ne(a);if(a.options.moveInputWithCursor){var a=Wc(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d},
showSelection:function(a){var b=this.cm.display;oc(b.cursorDiv,a.cursors);oc(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(b){if(!this.contextMenuPending){var c,d,e=this.cm,f=e.doc;e.somethingSelected()?(this.prevInput="",c=f.sel.primary(),d=(c=sg&&(100<c.to().line-c.from().line||1E3<(d=e.getSelection()).length))?"-":d||e.getSelection(),this.textarea.value=d,e.state.focused&&a(this.textarea),Ka&&9<=Ua&&(this.hasSelection=
d)):b||(this.prevInput=this.textarea.value="",Ka&&9<=Ua&&(this.hasSelection=null));this.inaccurateSelection=c}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!Bc||Sc()!=this.textarea))try{this.textarea.focus()}catch(a){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var a=this;a.pollingFast||
a.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)},poll:function(){var a=this.cm,b=this.textarea,c=this.prevInput;if(this.contextMenuPending||!a.state.focused||vg(b)&&!c&&!this.composing||ra(a)||a.options.disableInput||a.state.keySeq)return!1;var d=b.value;if(d==c&&!a.somethingSelected())return!1;
if(Ka&&9<=Ua&&this.hasSelection===d||Ac&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var e=d.charCodeAt(0);8203!=e||c||(c="\u200b");if(8666==e)return this.reset(),this.cm.execCommand("undo")}for(var f=0,e=Math.min(c.length,d.length);f<e&&c.charCodeAt(f)==d.charCodeAt(f);)++f;var g=this;K(a,function(){Ja(a,d.slice(f),c.length-f,null,g.composing?"*compose":null);1E3<d.length||-1<d.indexOf("\n")?b.value=g.prevInput="":g.prevInput=d;g.composing&&
(g.composing.range.clear(),g.composing.range=a.markText(g.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))});return!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){Ka&&9<=Ua&&(this.hasSelection=null);this.fastPoll()},onContextMenu:function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),c="\u200b"+(a?g.value:"");g.value="\u21da";g.value=c;d.prevInput=a?"":"\u200b";g.selectionStart=1;g.selectionEnd=
c.length;f.selForContextMenu=e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.position="relative";g.style.cssText=l;Ka&&9>Ua&&f.scrollbars.setScrollTop(f.scroller.scrollTop=k);if(null!=g.selectionStart){(!Ka||Ka&&9>Ua)&&b();var a=0,h=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&0<g.selectionEnd&&"\u200b"==d.prevInput?W(e,kc.selectAll)(e):10>a++?f.detectingSelectAll=setTimeout(h,500):f.input.reset()};f.detectingSelectAll=setTimeout(h,200)}}var d=this,e=d.cm,f=e.display,
g=d.textarea,h=gd(e,a),k=f.scroller.scrollTop;if(h&&!tb){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&W(e,sb)(e.doc,Lb(h),Ad);var l=g.style.cssText;d.wrapper.style.position="absolute";g.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: "+(Ka?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";
if(Db)var q=window.scrollY;f.input.focus();Db&&window.scrollTo(null,q);f.input.reset();e.somethingSelected()||(g.value=d.prevInput=" ");d.contextMenuPending=!0;f.selForContextMenu=e.doc.sel;clearTimeout(f.detectingSelectAll);Ka&&9<=Ua&&b();if(je){le(a);var m=function(){rb(window,"mouseup",m);setTimeout(c,20)};oa(window,"mouseup",m)}else setTimeout(c,50)}},setUneditable:ee,needsContentAttribute:!1},ab.prototype);cc.prototype=Ic({init:function(b){function c(b){if(e.somethingSelected())lc=e.getSelections(),
"cut"==b.type&&e.replaceSelection("",null,"cut");else if(e.options.lineWiseCopyCut){var d=Fb(e);lc=d.text;"cut"==b.type&&e.operation(function(){e.setSelections(d.ranges,0,Ad);e.replaceSelection("",null,"cut")})}else return;if(b.clipboardData&&!he)b.preventDefault(),b.clipboardData.clearData(),b.clipboardData.setData("text/plain",lc.join("\n"));else{var f=Uc();b=f.firstChild;e.display.lineSpace.insertBefore(f,e.display.lineSpace.firstChild);b.value=lc.join("\n");var g=document.activeElement;a(b);setTimeout(function(){e.display.lineSpace.removeChild(f);
g.focus()},50)}}var d=this,e=d.cm;b=d.div=b.lineDiv;b.contentEditable="true";Pd(b);oa(b,"paste",function(a){D(a,e)});oa(b,"compositionstart",function(a){a=a.data;d.composing={sel:e.doc.sel,data:a,startData:a};if(a){var b=e.doc.sel.primary(),c=e.getLine(b.head.line).indexOf(a,Math.max(0,b.head.ch-a.length));-1<c&&c<=b.head.ch&&(d.composing.sel=Lb(S(b.head.line,c),S(b.head.line,c+a.length)))}});oa(b,"compositionupdate",function(a){d.composing.data=a.data});oa(b,"compositionend",function(a){var b=d.composing;
b&&(a.data==b.startData||/\u200b/.test(a.data)||(b.data=a.data),setTimeout(function(){b.handled||d.applyComposition(b);d.composing==b&&(d.composing=null)},50))});oa(b,"touchstart",function(){d.forceCompositionEnd()});oa(b,"input",function(){d.composing||d.pollContent()||K(d.cm,function(){Va(e)})});oa(b,"copy",c);oa(b,"cut",c)},prepareSelection:function(){var a=ne(this.cm,!1);a.focus=this.cm.state.focused;return a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),
this.showMultipleSelections(a))},showPrimarySelection:function(){var a=window.getSelection(),b=this.cm.doc.sel.primary(),c=Fc(this.cm,a.anchorNode,a.anchorOffset),d=Fc(this.cm,a.focusNode,a.focusOffset);if(!c||c.bad||!d||d.bad||0!=ga(Ob(c,d),b.from())||0!=ga(db(c,d),b.to()))if(c=gb(this.cm,b.from()),d=gb(this.cm,b.to()),c||d){var e=this.cm.display.view,b=a.rangeCount&&a.getRangeAt(0);c?d||(d=e[e.length-1].measure,d=d.maps?d.maps[d.maps.length-1]:d.map,d={node:d[d.length-1],offset:d[d.length-2]-d[d.length-
3]}):c={node:e[0].measure.map[2],offset:0};try{var f=$b(c.node,c.offset,d.offset,d.node)}catch(g){}f&&(a.removeAllRanges(),a.addRange(f),b&&null==a.anchorNode?a.addRange(b):Cb&&this.startGracePeriod());this.rememberSelection()}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(a){oc(this.cm.display.cursorDiv,
a.cursors);oc(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=window.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return g(this.div,a)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},
getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():K(this.cm,function(){b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=
this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;this.rememberSelection();var c=Fc(b,a.anchorNode,a.anchorOffset),d=Fc(b,a.focusNode,a.focusOffset);c&&d&&K(b,function(){sb(b.doc,Lb(c,d),Ad);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}},pollContent:function(){var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),c=c.to();if(d.line<b.viewFrom||c.line>b.viewTo-
1)return!1;var e;d.line==b.viewFrom||0==(e=xc(a,d.line))?(d=Za(b.view[0].line),e=b.view[0].node):(d=Za(b.view[e].line),e=b.view[e-1].node.nextSibling);var f=xc(a,c.line);f==b.view.length-1?(c=b.viewTo-1,b=b.lineDiv.lastChild):(c=Za(b.view[f+1].line)-1,b=b.view[f+1].node.previousSibling);b=a.doc.splitLines(ud(a,e,b,d,c));for(e=Ld(a.doc,S(d,0),S(c,qa(a.doc,c).text.length));1<b.length&&1<e.length;)if(Da(b)==Da(e))b.pop(),e.pop(),c--;else if(b[0]==e[0])b.shift(),e.shift(),d++;else break;for(var g=0,f=
0,h=b[0],k=e[0],l=Math.min(h.length,k.length);g<l&&h.charCodeAt(g)==k.charCodeAt(g);)++g;h=Da(b);k=Da(e);for(l=Math.min(h.length-(1==b.length?g:0),k.length-(1==e.length?g:0));f<l&&h.charCodeAt(h.length-f-1)==k.charCodeAt(k.length-f-1);)++f;b[b.length-1]=h.slice(0,h.length-f);b[0]=b[0].slice(g);d=S(d,g);c=S(c,e.length?Da(e).length-f:0);if(1<b.length||b[0]||ga(d,c))return Gd(a.doc,b,d,c,"+input"),!0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&
!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){a.data&&a.data!=a.startData&&W(this.cm,Ja)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.setAttribute("contenteditable","false")},onKeyPress:function(a){a.preventDefault();W(this.cm,Ja)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},onContextMenu:ee,resetPosition:ee,needsContentAttribute:!0},cc.prototype);b.inputStyles=
{textarea:ab,contenteditable:cc};Gc.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=ga(c.anchor,d.anchor)||0!=ga(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new ba(na(this.ranges[b].anchor),na(this.ranges[b].head));return new Gc(a,
this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=ga(b,d.from())&&0>=ga(a,d.to()))return c}return-1}};ba.prototype={from:function(){return Ob(this.anchor,this.head)},to:function(){return db(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var Oc={left:0,right:0,
top:0,bottom:0},Ub,Y=null,De=0,zd,nd,Hb=0,Sf=0,Cc=null;Ka?Cc=-0.53:Cb?Cc=15:cb?Cc=-0.7:gc&&(Cc=-1/3);var df=function(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}};b.wheelEventPixels=function(a){a=df(a);a.x*=Cc;a.y*=Cc;return a};var ig=new de,Yf=null,Jc=b.changeEnd=function(a){return a.text?S(a.from.line+a.text.length-1,Da(a.text).length+(1==a.text.length?
a.from.ch:0)):a.to};b.prototype={constructor:b,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,bf.hasOwnProperty(a)&&W(this,bf[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](yc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,
1),!0},addOverlay:nb(function(a,c){var d=a.token?a:b.getMode(this.options,a);if(d.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:d,modeSpec:a,opaque:c&&c.opaque});this.state.modeGen++;Va(this)}),removeOverlay:nb(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;Va(this);break}}}),indentLine:nb(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=
null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");Dd(this.doc,a)&&ue(this,a,b,c)}),indentSelection:nb(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(ue(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Yd(this));else{for(var f=e.from(),e=e.to(),g=Math.max(c,f.line),c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1,e=g;e<c;++e)ue(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&me(this.doc,
d,new ba(f,e[d].to()),Ad)}}}),getTokenAt:function(a,b){return qd(this,a,b)},getLineTokens:function(a,b){return qd(this,S(a),b,!0)},getTokenTypeAt:function(a){a=va(this.doc,a);var b=La(this,qa(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;var e;if(0==a)e=b[2];else for(;;){var f=c+d>>1;if((f?b[2*f-1]:0)>=a)d=f;else if(b[2*f+1]<a)c=f+1;else{e=b[2*f+2];break}}b=e?e.indexOf("cm-overlay "):-1;return 0>b?e:0==b?null:e.slice(0,b-1)},getModeAt:function(a){var c=this.doc.mode;return c.innerMode?b.innerMode(c,
this.getTokenAt(a).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!dd.hasOwnProperty(b))return c;var d=dd[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(f=0;f<d._global.length;f++)g=d._global[f],g.pred(e,this)&&-1==ya(c,g.val)&&c.push(g.val);return c},
getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return Na(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?va(this.doc,a):a?c.from():c.to();return Wc(this,c,b||"page")},charCoords:function(a,b){return pe(this,va(this.doc,a),b||"page")},coordsChar:function(a,b){a=If(this,a,b||"page");return Qc(this,a.left,a.top)},lineAtHeight:function(a,b){a=If(this,{top:a,left:0},b||"page").top;
return ld(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d;"number"==typeof a?(d=this.doc.first+this.doc.size-1,a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0),d=qa(this.doc,a)):d=a;return Gb(this,d,{top:0,left:0},b||"page").top+(c?this.doc.height-Tc(d):0)},defaultTextHeight:function(){return Ha(this.display)},defaultCharWidth:function(){return Mb(this.display)},setGutterMarker:nb(function(a,b,c){return zf(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers=
{});d[b]=c;!c&&cg(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:nb(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,ka(b,d,"gutter"),cg(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),lineInfo:function(a){if("number"==typeof a){if(!Dd(this.doc,a))return null;var b=a;a=qa(this.doc,a);if(!a)return null}else if(b=Za(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,
bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=Wc(this,va(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var k=Math.max(f.wrapper.clientHeight,this.doc.height),l=Math.max(f.sizer.clientWidth,
f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>k)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(g=a.bottom);h+b.offsetWidth>l&&(h=l-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&(a=bb(this,h,g,h+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&Vd(this,a.scrollTop),null!=a.scrollLeft&&
Hd(this,a.scrollLeft))},triggerOnKeyDown:nb(uf),triggerOnKeyPress:nb(yb),triggerOnKeyUp:te,execCommand:function(a){if(kc.hasOwnProperty(a))return kc[a].call(null,this)},triggerElectric:nb(function(a){$(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=va(this.doc,a);f<b&&(a=mb(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:nb(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?mb(c.doc,d.head,a,b,c.options.rtlMoveVisually):
0>a?d.from():d.to()},Hf)}),deleteH:nb(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):ia(this,function(d){var e=mb(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=va(this.doc,a);f<b&&(a=Wc(this,a,"div"),null==d?d=a.left:a.left=d,a=jd(this,a,e,c),!a.hitSide);++f);return a},moveV:nb(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();
d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=Wc(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn);e.push(h.left);var k=jd(c,h,a,b);"page"==b&&g==d.sel.primary()&&Qe(c,null,pe(c,k,"div").top-h.top);return k},Hf);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=qa(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");(0>a.xRel||d==b.length)&&c?--c:++d;for(var f=b.charAt(c),f=nc(f,
e)?function(a){return nc(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!nc(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new ba(S(a.line,c),S(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?ag(this.display.cursorDiv,"CodeMirror-overwrite"):ta(this.display.cursorDiv,"CodeMirror-overwrite"),Zb(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==
Sc()},scrollTo:nb(function(a,b){null==a&&null==b||Id(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-za(this)-this.display.barHeight,width:a.scrollWidth-za(this)-this.display.barWidth,clientHeight:t(this),clientWidth:x(this)}},scrollIntoView:nb(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):
"number"==typeof a?a={from:S(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line)Id(this),this.curOp.scrollToPos=a;else{var c=bb(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:nb(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=
c(a));null!=b&&(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&nf(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){ka(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;Zb(d,"refresh",this)}),operation:function(a){return K(this,a)},refresh:nb(function(){var a=this.display.cachedTextHeight;Va(this);this.curOp.forceUpdate=!0;Ed(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);P(this);
(null==a||0.5<Math.abs(a-Ha(this.display)))&&u(this);Zb(this,"refresh",this)}),swapDoc:nb(function(a){var b=this.doc;b.cm=null;ye(this,a);Ed(this);this.display.input.reset();this.scrollTo(a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;Rb(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};
xb(b);var jg=b.defaults={},bf=b.optionHandlers={},Ge=b.Init={toString:function(){return"CodeMirror.Init"}};sa("value","",function(a,b){a.setValue(b)},!0);sa("mode",null,function(a,b){a.doc.modeOption=b;m(a)},!0);sa("indentUnit",2,m,!0);sa("indentWithTabs",!1);sa("smartIndent",!0);sa("tabSize",4,function(a){l(a);Ed(a);Va(a)},!0);sa("lineSeparator",null,function(a,b){if(a.doc.lineSep=b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length;
c.push(S(d,f))}d++});for(var e=c.length-1;0<=e;e--)Gd(a.doc,b,c[e],S(c[e].line,c[e].ch+b.length))}});sa("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,c,d){a.state.specialChars=RegExp(c.source+(c.test("\t")?"":"|\t"),"g");d!=b.Init&&a.refresh()});sa("specialCharPlaceholder",function(a){var b=la("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);b.setAttribute("aria-label",b.title);return b},function(a){a.refresh()},!0);sa("electricChars",
!0);sa("inputStyle",Bc?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);sa("rtlMoveVisually",!Q);sa("wholeLineUpdateBefore",!0);sa("theme","default",function(a){k(a);r(a)},!0);sa("keyMap","default",function(a,c,d){c=yc(c);(d=d!=b.Init&&yc(d))&&d.detach&&d.detach(a,c);c.attach&&c.attach(a,d||null)});sa("extraKeys",null);sa("lineWrapping",!1,function(a){a.options.lineWrapping?(ag(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=
"",a.display.sizerWidth=null):(ta(a.display.wrapper,"CodeMirror-wrap"),Z(a));u(a);Va(a);Ed(a);setTimeout(function(){ca(a)},100)},!0);sa("gutters",[],function(a){z(a.options);r(a)},!0);sa("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?fa(a.display)+"px":"0";a.refresh()},!0);sa("coverGutterNextToScrollbar",!1,function(a){ca(a)},!0);sa("scrollbarStyle","native",function(a){ja(a);ca(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},
!0);sa("lineNumbers",!1,function(a){z(a.options);r(a)},!0);sa("firstLineNumber",1,r,!0);sa("lineNumberFormatter",function(a){return a},r,!0);sa("showCursorWhenSelecting",!1,Rd,!0);sa("resetSelectionOnContextMenu",!0);sa("lineWiseCopyCut",!0);sa("readOnly",!1,function(a,b){"nocursor"==b?(xf(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||a.display.input.reset())});sa("disableInput",!1,function(a,b){b||a.display.input.reset()},!0);sa("dragDrop",!0,function(a,c,d){!c!=!(d&&
d!=b.Init)&&(d=a.display.dragFunctions,c=c?oa:rb,c(a.display.scroller,"dragstart",d.start),c(a.display.scroller,"dragenter",d.enter),c(a.display.scroller,"dragover",d.over),c(a.display.scroller,"dragleave",d.leave),c(a.display.scroller,"drop",d.drop))});sa("cursorBlinkRate",530);sa("cursorScrollMargin",0);sa("cursorHeight",1,Rd,!0);sa("singleCursorHeightPerLine",!0,Rd,!0);sa("workTime",100);sa("workDelay",100);sa("flattenSpans",!0,l,!0);sa("addModeClass",!1,l,!0);sa("pollInterval",100);sa("undoDepth",
200,function(a,b){a.doc.history.undoDepth=b});sa("historyEventDelay",1250);sa("viewportMargin",10,function(a){a.refresh()},!0);sa("maxHighlightLength",1E4,l,!0);sa("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});sa("tabindex",null,function(a,b){a.display.input.getField().tabIndex=b||""});sa("autofocus",null);var Dc=b.modes={},rd=b.mimeModes={};b.defineMode=function(a,c){b.defaults.mode||"null"==a||(b.defaults.mode=a);2<arguments.length&&(c.dependencies=Array.prototype.slice.call(arguments,
2));Dc[a]=c};b.defineMIME=function(a,b){rd[a]=b};b.resolveMode=function(a){if("string"==typeof a&&rd.hasOwnProperty(a))a=rd[a];else if(a&&"string"==typeof a.name&&rd.hasOwnProperty(a.name)){var c=rd[a.name];"string"==typeof c&&(c={name:c});a=Cf(c,a);a.name=c.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return b.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};b.getMode=function(a,c){c=b.resolveMode(c);var d=Dc[c.name];if(!d)return b.getMode(a,
"text/plain");d=d(a,c);if(ie.hasOwnProperty(c.name)){var e=ie[c.name],f;for(f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=e[f])}d.name=c.name;c.helperType&&(d.helperType=c.helperType);if(c.modeProps)for(f in c.modeProps)d[f]=c.modeProps[f];return d};b.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});b.defineMIME("text/plain","null");var ie=b.modeExtensions={};b.extendMode=function(a,b){var c=ie.hasOwnProperty(a)?ie[a]:ie[a]={};Ic(b,c)};b.defineExtension=
function(a,c){b.prototype[a]=c};b.defineDocExtension=function(a,b){Pb.prototype[a]=b};b.defineOption=sa;var Tf=[];b.defineInitHook=function(a){Tf.push(a)};var dd=b.helpers={};b.registerHelper=function(a,c,d){dd.hasOwnProperty(a)||(dd[a]=b[a]={_global:[]});dd[a][c]=d};b.registerGlobalHelper=function(a,c,d,e){b.registerHelper(a,c,e);dd[a]._global.push({pred:d,val:e})};var ic=b.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof
Array&&(e=e.concat([]));c[d]=e}return c},$d=b.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};b.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var kc=b.commands={selectAll:function(a){a.setSelection(S(a.firstLine(),0),S(a.lastLine()),Ad)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Ad)},killLine:function(a){ia(a,function(b){if(b.empty()){var c=qa(a.doc,
b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:S(b.head.line+1,0)}:{from:b.head,to:S(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){ia(a,function(b){return{from:S(b.from().line,0),to:va(a.doc,S(b.to().line+1,0))}})},delLineLeft:function(a){ia(a,function(a){return{from:S(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){ia(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),
to:b.from()}})},delWrappedLineRight:function(a){ia(a,function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(S(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(S(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return Df(a,
b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return ge(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=qa(a.doc,b);c=fd(d,!1);)d=c.find(1,!0).line,b=null;c=(c=Ma(d))?c[0].level%2?J(d):sc(d):d.text.length;return S(null==b?Za(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+
100,top:b},"div")},Hf)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},Hf)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?ge(a,b.head):c},Hf)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,
"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},
delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),f=pd(a.getLine(f.line),f.ch,d);b.push(Array(d-
f%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){K(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=qa(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new S(e.line,e.ch-1)),0<e.ch)e=new S(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),S(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=qa(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+
a.doc.lineSeparator()+g.charAt(g.length-1),S(e.line-1,g.length-1),S(e.line,1),"+transpose")}c.push(new ba(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){K(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange(a.doc.lineSeparator(),d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);Yd(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},Ib=b.keyMap={};Ib.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",
End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};Ib.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft",
"Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Ib.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown",
"Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};Ib.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft",
"Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",
fallthrough:["basic","emacsy"]};Ib["default"]=Ac?Ib.macDefault:Ib.pcDefault;b.normalizeKeyMap=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=V(c.split(" "),jf),f=0;f<e.length;f++){var g,h;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var k=b[h];if(!k)b[h]=g;else if(k!=g)throw Error("Inconsistent bindings for "+h);}delete a[c]}}for(var l in b)a[l]=b[l];return a};var Bb=b.lookupKey=function(a,
b,c,d){b=yc(b);var e=b.call?b.call(a,d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return Bb(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=Bb(a,b.fallthrough[e],c,d);if(f)return f}}},Zc=b.isModifierKey=function(a){a="string"==typeof a?a:ef[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},Je=b.keyName=function(a,b){if(tb&&34==a.keyCode&&a["char"])return!1;
var c=ef[a.keyCode],d=c;if(null==d||a.altGraphKey)return!1;a.altKey&&"Alt"!=c&&(d="Alt-"+d);(od?a.metaKey:a.ctrlKey)&&"Ctrl"!=c&&(d="Ctrl-"+d);(od?a.ctrlKey:a.metaKey)&&"Cmd"!=c&&(d="Cmd-"+d);!b&&a.shiftKey&&"Shift"!=c&&(d="Shift-"+d);return d};b.fromTextArea=function(a,c){function d(){a.value=l.getValue()}c=c?Ic(c):{};c.value=a.value;!c.tabindex&&a.tabIndex&&(c.tabindex=a.tabIndex);!c.placeholder&&a.placeholder&&(c.placeholder=a.placeholder);if(null==c.autofocus){var e=Sc();c.autofocus=e==a||null!=
a.getAttribute("autofocus")&&e==document.body}if(a.form&&(oa(a.form,"submit",d),!c.leaveSubmitMethodAlone)){var f=a.form,g=f.submit;try{var h=f.submit=function(){d();f.submit=g;f.submit();f.submit=h}}catch(k){}}c.finishInit=function(b){b.save=d;b.getTextArea=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;d();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(rb(a.form,"submit",d),"function"==typeof a.form.submit&&(a.form.submit=g))}};a.style.display="none";
var l=b(function(b){a.parentNode.insertBefore(b,a.nextSibling)},c);return l};var Jb=b.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};Jb.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=
this.string.charAt(this.pos);if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&
(this.lastColumnValue=pd(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?pd(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return pd(this.string,null,this.tabSize)-(this.lineStart?pd(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==
b&&(this.pos+=a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var Wa=0,Ec=b.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++Wa};xb(Ec);Ec.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&M(a);if(mc(this,
"clear")){var c=this.find();c&&Rb(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=Xd(f.markedSpans,this);a&&!this.collapsed?ka(a,Za(f),"text"):a&&(null!=g.to&&(d=Za(f)),null!=g.from&&(c=Za(f)));for(var h=f,k=f.markedSpans,l=g,q=void 0,m=0;m<k.length;++m)k[m]!=l&&(q||(q=[])).push(k[m]);h.markedSpans=q;null==g.from&&this.collapsed&&!Xb(this.doc,f)&&a&&v(f,Ha(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=ib(this.lines[e]),
g=C(f),g>a.display.maxLineLength&&(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&Va(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&gf(a.doc));a&&Rb(a,"markerCleared",a,this);b&&Cd(a);this.parent&&this.parent.clear()}};Ec.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=Xd(f.markedSpans,this);if(null!=
g.from&&(c=S(b?f:Za(f),g.from),-1==a))return c;if(null!=g.to&&(d=S(b?f:Za(f),g.to),1==a))return d}return c&&{from:c,to:d}};Ec.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&K(c,function(){var d=a.line,e=Za(a.line);if(e=ea(c,e))mf(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;Xb(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=ac(b)-e)&&v(d,d.height+e))})};Ec.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=
this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=ya(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Ec.prototype.detachLine=function(a){this.lines.splice(ya(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var Wa=0,Ee=b.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};xb(Ee);Ee.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Rb(this,"clear")}};Ee.prototype.find=function(a,b){return this.primary.find(a,b)};var af=b.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};xb(af);af.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=Za(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=ac(this);v(c,Math.max(0,c.height-f));a&&
K(a,function(){var b=-f;Tc(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Qe(a,null,b);ka(a,d,"widget")})}};af.prototype.changed=function(){var a=this.height,b=this.doc.cm,c=this.line;this.height=null;var d=ac(this)-a;d&&(v(c,c.height+d),b&&K(b,function(){b.curOp.forceUpdate=!0;Tc(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&Qe(b,null,d)}))};var Oe=b.Line=function(a,b,c){this.text=a;Sd(this,b);this.height=c?c(this):1};xb(Oe);Oe.prototype.lineNo=function(){return Za(this)};var lg={},pg={};
xe.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Af(f);Rb(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Ta.prototype=
{chunkSize:function(){return this.size},removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof xe))&&(c=[],this.collapse(c),this.children=[new xe(c)],this.children[0].parent=this)},collapse:function(a){for(var b=
0;b<this.children.length;++b)this.children[b].collapse(a)},insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new xe(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=
a.children.splice(a.children.length-5,5),b=new Ta(b);if(a.parent){a.size-=b.size;a.height-=b.height;var c=ya(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Ta(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var qg=0,Pb=b.Doc=function(a,
b,c,d){if(!(this instanceof Pb))return new Pb(a,b,c,d);null==c&&(c=0);Ta.call(this,[new xe([new Oe("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=S(c,0);this.sel=Lb(c);this.history=new ce(null);this.id=++qg;this.modeOption=b;this.lineSep=d;"string"==typeof a&&(a=this.splitLines(a));xd(this,{from:c,to:c,text:a});sb(this,Lb(c),Ad)};Pb.prototype=Cf(Ta.prototype,{constructor:Pb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):
this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Bf(this,this.first,this.first+this.size);return!1===a?b:b.join(a||this.lineSeparator())},setValue:Vb(function(a){var b=S(this.first,0),c=this.first+this.size-1;Pe(this,{from:b,to:S(c,qa(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0);sb(this,
Lb(b))}),replaceRange:function(a,b,c,d){b=va(this,b);c=c?va(this,c):b;Gd(this,a,b,c,d)},getRange:function(a,b,c){a=Ld(this,va(this,a),va(this,b));return!1===c?a:a.join(c||this.lineSeparator())},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(Dd(this,a))return qa(this,a)},getLineNumber:function(a){return Za(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=qa(this,a));return ib(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},
lastLine:function(){return this.first+this.size-1},clipPos:function(a){return va(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Vb(function(a,b,c){a=va(this,"number"==typeof a?S(a,b||0):a);sb(this,Lb(a,null),c)}),setSelection:Vb(function(a,b,c){var d=va(this,a);a=va(this,
b||a);sb(this,Lb(d,a),c)}),extendSelection:Vb(function(a,b,c){He(this,va(this,a),b&&va(this,b),c)}),extendSelections:Vb(function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=va(this,a[d]);Ie(this,c)}),extendSelectionsBy:Vb(function(a,b){Ie(this,V(this.sel.ranges,a),b)}),setSelections:Vb(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new ba(va(this,a[d].anchor),va(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));sb(this,dc(e,b),c)}}),addSelection:Vb(function(a,
b,c){var d=this.sel.ranges.slice(0);d.push(new ba(va(this,a),va(this,b||a)));sb(this,dc(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=Ld(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||this.lineSeparator())},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Ld(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||this.lineSeparator()));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=
[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:Vb(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),text:this.splitLines(a[f]),origin:c}}if(f=b)if(f="end"!=b){f=[];c=a=S(this.first,0);for(e=0;e<d.length;e++){var h=d[e],g=yf(h.from,a,c),k=yf(Jc(h),a,c);a=h.to;c=k;"around"==b?(h=this.sel.ranges[e],h=0>ga(h.head,h.anchor),f[e]=new ba(h?k:g,h?g:k)):f[e]=new ba(g,g)}f=new Gc(f,this.sel.primIndex)}b=
f;for(f=d.length-1;0<=f;f--)Pe(this,d[f]);b?Vc(this,b):this.cm&&Yd(this.cm)}),undo:Vb(function(){hd(this,"undo")}),redo:Vb(function(){hd(this,"redo")}),undoSelection:Vb(function(){hd(this,"undo",!0)}),redoSelection:Vb(function(){hd(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,
redo:c}},clearHistory:function(){this.history=new ce(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Eb(this.history.done),undone:Eb(this.history.undone)}},setHistory:function(a){var b=this.history=new ce(this.history.maxGeneration);
b.done=Eb(a.done.slice(0),null,!0);b.undone=Eb(a.undone.slice(0),null,!0)},addLineClass:Vb(function(a,b,c){return zf(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass";if(a[d]){if(Md(c).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:Vb(function(a,b,c){return zf(this,a,"gutter"==b?"gutter":"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":
"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(Md(c));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;return!0})}),addLineWidget:Vb(function(a,b,c){return Of(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return Pc(this,va(this,a),va(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,
shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=va(this,a);return Pc(this,a,a,c,"bookmark")},findMarksAt:function(a){a=va(this,a);var b=[],c=qa(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=va(this,a);b=va(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var h=f[g];e==a.line&&
a.ch>h.to||null==h.from&&e!=a.line||e==b.line&&h.from>b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return va(this,S(c,b))},indexFromPos:function(a){a=va(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;
this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new Pb(Bf(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Pb(Bf(this,
b,c),a.mode||this.modeOption,b,this.lineSep);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=G(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from),e=b.clipPos(e.to);ga(f,e)&&(f=Pc(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(a){a instanceof b&&(a=a.doc);if(this.linked)for(var c=0;c<this.linked.length;++c)if(this.linked[c].doc==
a){this.linked.splice(c,1);a.unlinkDoc(this);wf(G(this));break}if(a.history==this.history){var d=[a.id];kd(a,function(a){d.push(a.id)},!0);a.history=new ce(null);a.history.done=Eb(this.history.done,d);a.history.undone=Eb(this.history.undone,d)}},iterLinkedDocs:function(a){kd(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):y(a)},lineSeparator:function(){return this.lineSep||"\n"}});Pb.prototype.eachLine=
Pb.prototype.iter;var eg="iter insert remove copy getEditor constructor".split(" "),Jf;for(Jf in Pb.prototype)Pb.prototype.hasOwnProperty(Jf)&&0>ya(eg,Jf)&&(b.prototype[Jf]=function(a){return function(){return a.apply(this.doc,arguments)}}(Pb.prototype[Jf]));xb(Pb);var wc=b.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},ad=b.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},le=b.e_stop=function(a){wc(a);ad(a)},oa=b.on=function(a,
b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},rb=b.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},Zb=b.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,
d)},Gf=null,dg=30,kg=b.Pass={toString:function(){return"CodeMirror.Pass"}},Ad={scroll:!1},Zf={origin:"*mouse"},Hf={origin:"+move"};de.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var pd=b.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}},$f=[""],a=function(a){a.select()};he?a=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:
Ka&&(a=function(a){try{a.select()}catch(b){}});var c=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,d=b.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||c.test(a))},q=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
$b;$b=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var g=b.contains=function(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)};Ka&&11>Ua&&(Sc=function(){try{return document.activeElement}catch(a){return document.body}});
var ta=b.rmClass=function(a,b){var c=a.className,d=Md(b).exec(c);if(d){var e=c.slice(d.index+d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}},ag=b.addClass=function(a,b){var c=a.className;Md(b).test(c)||(a.className+=(c?" ":"")+b)},rg=!1,tg=function(){if(Ka&&9>Ua)return!1;var a=la("div");return"draggable"in a||"dragDrop"in a}(),mg,ng,y=b.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==
a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},vg=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},sg=function(){var a=la("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),
og=null,ef={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",
63276:"PageUp",63277:"PageDown",63302:"Insert"};b.keyNames=ef;(function(){for(var a=0;10>a;a++)ef[a+48]=ef[a+96]=String(a);for(a=65;90>=a;a++)ef[a]=String.fromCharCode(a);for(a=1;12>=a;a++)ef[a+111]=ef[a+63235]="F"+a})();var bg,ug=function(){function a(b){return 247>=b?c.charAt(b):1424<=b&&1524>=b?"R":1536<=b&&1773>=b?d.charAt(b-1536):1774<=b&&2220>=b?"r":8192<=b&&8203>=b?"w":8204==b?"b":"L"}function b(a,c,d){this.level=a;this.from=c;this.to=d}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",
d="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm",e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,g=/[LRr]/,h=/[Lb1n]/,k=/[1n]/;return function(c){if(!e.test(c))return!1;for(var d=c.length,l=[],q=0,m;q<d;++q)l.push(a(c.charCodeAt(q)));for(var q=0,r="L";q<d;++q)m=l[q],"m"==m?l[q]=r:r=m;q=0;for(r="L";q<
d;++q)m=l[q],"1"==m&&"r"==r?l[q]="n":g.test(m)&&(r=m,"r"==m&&(l[q]="R"));q=1;for(r=l[0];q<d-1;++q)m=l[q],"+"==m&&"1"==r&&"1"==l[q+1]?l[q]="1":","!=m||r!=l[q+1]||"1"!=r&&"n"!=r||(l[q]=r),r=m;for(q=0;q<d;++q)if(m=l[q],","==m)l[q]="N";else if("%"==m){for(r=q+1;r<d&&"%"==l[r];++r);var t=q&&"!"==l[q-1]||r<d&&"1"==l[r]?"1":"N";for(m=q;m<r;++m)l[m]=t;q=r-1}q=0;for(r="L";q<d;++q)m=l[q],"L"==r&&"1"==m?l[q]="L":g.test(m)&&(r=m);for(q=0;q<d;++q)if(f.test(l[q])){for(r=q+1;r<d&&f.test(l[r]);++r);m="L"==(r<d?l[r]:
"L");t="L"==(q?l[q-1]:"L")||m?"L":"R";for(m=q;m<r;++m)l[m]=t;q=r-1}for(var r=[],u,q=0;q<d;)if(h.test(l[q])){m=q;for(++q;q<d&&h.test(l[q]);++q);r.push(new b(0,m,q))}else{var v=q,t=r.length;for(++q;q<d&&"L"!=l[q];++q);for(m=v;m<q;)if(k.test(l[m])){v<m&&r.splice(t,0,new b(1,v,m));v=m;for(++m;m<q&&k.test(l[m]);++m);r.splice(t,0,new b(2,v,m));v=m}else++m;v<q&&r.splice(t,0,new b(1,v,q))}1==r[0].level&&(u=c.match(/^\s+/))&&(r[0].from=u[0].length,r.unshift(new b(0,0,u[0].length)));1==Da(r).level&&(u=c.match(/\s+$/))&&
(Da(r).to-=u[0].length,r.push(new b(0,d-u[0].length,d)));2==r[0].level&&r.unshift(new b(1,r[0].to,r[0].to));r[0].level!=Da(r).level&&r.push(new b(r[0].level,d,d));return r}}();b.version="5.6.0";return b});(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function f(b,f){return"pairs"==f&&"string"==typeof b?b:"object"==typeof b&&null!=b[f]?b[f]:F[f]}function m(b){return function(f){return A(f,b)}}function l(b){var f=b.state.closeBrackets;return f?b.getModeAt(b.getCursor()).closeBrackets||f:null}function A(k,m){var z=l(k);if(!z||k.getOption("disableInput"))return b.Pass;
var C=f(z,"pairs"),A=C.indexOf(m);if(-1==A)return b.Pass;for(var z=f(z,"triples"),Z=C.charAt(A+1)==m,F=k.listSelections(),Ia=0==A%2,Qa,O,fa=0;fa<F.length;fa++){var N=F[fa],Ga=N.head;O=k.getRange(Ga,P(Ga.line,Ga.ch+1));if(Ia&&!N.empty())O="surround";else if(!Z&&Ia||O!=m)if(Z&&1<Ga.ch&&0<=z.indexOf(m)&&k.getRange(P(Ga.line,Ga.ch-2),Ga)==m+m&&(2>=Ga.ch||k.getRange(P(Ga.line,Ga.ch-3),P(Ga.line,Ga.ch-2))!=m))O="addFour";else if(Z)if(!b.isWordChar(O)&&r(k,Ga,m))O="both";else return b.Pass;else if(Ia&&(k.getLine(Ga.line).length==
Ga.ch||u(O,C)||/\s/.test(O)))O="both";else return b.Pass;else O=0<=z.indexOf(m)&&k.getRange(Ga,P(Ga.line,Ga.ch+3))==m+m+m?"skipThree":"skip";if(!Qa)Qa=O;else if(Qa!=O)return b.Pass}var Ea=A%2?C.charAt(A-1):m,Tb=A%2?m:C.charAt(A+1);k.operation(function(){if("skip"==Qa)k.execCommand("goCharRight");else if("skipThree"==Qa)for(var b=0;3>b;b++)k.execCommand("goCharRight");else if("surround"==Qa){for(var f=k.getSelections(),b=0;b<f.length;b++)f[b]=Ea+f[b]+Tb;k.replaceSelections(f,"around");f=k.listSelections();
for(b=0;b<f.length;b++){var l=f[b];if(l.anchor.line<l.head.line||l.anchor.line===l.head.line&&l.anchor.ch<l.head.ch)l.anchor.ch++,l.head.ch--;if(l.anchor.line>l.head.line||l.anchor.line===l.head.line&&l.anchor.ch>l.head.ch)l.head.ch++,l.anchor.ch--}k.setSelections(f)}else"both"==Qa?(k.replaceSelection(Ea+Tb,null),k.triggerElectric(Ea+Tb),k.execCommand("goCharLeft")):"addFour"==Qa&&(k.replaceSelection(Ea+Ea+Ea+Ea,"before"),k.execCommand("goCharRight"))})}function u(b,f){var k=f.lastIndexOf(b);return-1<
k&&1==k%2}function k(b,f){var k=b.getRange(P(f.line,f.ch-1),P(f.line,f.ch+1));return 2==k.length?k:null}function r(f,k,l){var m=f.getLine(k.line),r=f.getTokenAt(k);if(/\bstring2?\b/.test(r.type))return!1;l=new b.StringStream(m.slice(0,k.ch)+l+m.slice(k.ch),4);for(l.pos=l.start=r.start;;){m=f.getMode().token(l,r.state);if(l.pos>=k.ch+1)return/\bstring2?\b/.test(m);l.start=l.pos}}var F={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},P=b.Pos;b.defineOption("autoCloseBrackets",!1,function(f,k,l){l&&
l!=b.Init&&(f.removeKeyMap(Z),f.state.closeBrackets=null);k&&(f.state.closeBrackets=k,f.addKeyMap(Z))});for(var C=F.pairs+"`",Z={Backspace:function(m){var r=l(m);if(!r||m.getOption("disableInput"))return b.Pass;for(var u=f(r,"pairs"),r=m.listSelections(),z=0;z<r.length;z++){if(!r[z].empty())return b.Pass;var C=k(m,r[z].head);if(!C||0!=u.indexOf(C)%2)return b.Pass}for(z=r.length-1;0<=z;z--)u=r[z].head,m.replaceRange("",P(u.line,u.ch-1),P(u.line,u.ch+1))},Enter:function(m){var r=l(m),r=r&&f(r,"explode");
if(!r||m.getOption("disableInput"))return b.Pass;for(var u=m.listSelections(),z=0;z<u.length;z++){if(!u[z].empty())return b.Pass;var C=k(m,u[z].head);if(!C||0!=r.indexOf(C)%2)return b.Pass}m.operation(function(){m.replaceSelection("\n\n",null);m.execCommand("goCharLeft");u=m.listSelections();for(var b=0;b<u.length;b++){var f=u[b].head.line;m.indentLine(f,null,!0);m.indentLine(f+1,null,!0)}})}},z=0;z<C.length;z++)Z["'"+C.charAt(z)+"'"]=m(C.charAt(z))});(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function f(b,f,l,u){var E=b.getLineHandle(f.line),A=f.ch-1,E=0<=A&&r[E.text.charAt(A)]||r[E.text.charAt(++A)];if(!E)return null;var F=">"==E.charAt(1)?1:-1;if(l&&0<F!=(A==f.ch))return null;l=b.getTokenTypeAt(k(f.line,A+1));b=m(b,k(f.line,A+(0<F?1:0)),F,l||null,u);return null==b?null:{from:k(f.line,A),
to:b&&b.pos,match:b&&b.ch==E.charAt(0),forward:0<F}}function m(b,f,l,m,u){var A=u&&u.maxScanLineLength||1E4,F=u&&u.maxScanLines||1E3,ja=[];u=u&&u.bracketRegex?u.bracketRegex:/[(){}[\]]/;for(var F=0<l?Math.min(f.line+F,b.lastLine()+1):Math.max(b.firstLine()-1,f.line-F),ca=f.line;ca!=F;ca+=l){var aa=b.getLine(ca);if(aa){var Ca=0<l?0:aa.length-1,Ia=0<l?aa.length:-1;if(!(aa.length>A))for(ca==f.line&&(Ca=f.ch-(0>l?1:0));Ca!=Ia;Ca+=l){var Qa=aa.charAt(Ca);if(u.test(Qa)&&(void 0===m||b.getTokenTypeAt(k(ca,
Ca+1))==m))if(">"==r[Qa].charAt(1)==0<l)ja.push(Qa);else if(ja.length)ja.pop();else return{pos:k(ca,Ca),ch:Qa}}}}return ca-l==(0<l?b.lastLine():b.firstLine())?!1:null}function l(b,l,m){for(var r=b.state.matchBrackets.maxHighlightLineLength||1E3,E=[],A=b.listSelections(),F=0;F<A.length;F++){var ja=A[F].empty()&&f(b,A[F].head,!1,m);if(ja&&b.getLine(ja.from.line).length<=r){var ca=ja.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";E.push(b.markText(ja.from,k(ja.from.line,ja.from.ch+
1),{className:ca}));ja.to&&b.getLine(ja.to.line).length<=r&&E.push(b.markText(ja.to,k(ja.to.line,ja.to.ch+1),{className:ca}))}}if(E.length)if(u&&b.state.focused&&b.focus(),m=function(){b.operation(function(){for(var b=0;b<E.length;b++)E[b].clear()})},l)setTimeout(m,800);else return m}function A(b){b.operation(function(){F&&(F(),F=null);F=l(b,!1,b.state.matchBrackets)})}var u=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),k=b.Pos,r={"(":")>",")":"(<","[":"]>",
"]":"[<","{":"}>","}":"{<"},F=null;b.defineOption("matchBrackets",!1,function(f,k,l){l&&l!=b.Init&&f.off("cursorActivity",A);k&&(f.state.matchBrackets="object"==typeof k?k:{},f.on("cursorActivity",A))});b.defineExtension("matchBrackets",function(){l(this,!0)});b.defineExtension("findMatchingBracket",function(b,k,l){return f(this,b,k,l)});b.defineExtension("scanForBracket",function(b,f,k,l){return m(this,b,f,k,l)})});(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function f(b){for(var f=0;f<b.state.activeLines.length;f++)b.removeLineClass(b.state.activeLines[f],"wrap",u),b.removeLineClass(b.state.activeLines[f],"background",k)}function m(b,f){if(b.length!=f.length)return!1;for(var k=0;k<b.length;k++)if(b[k]!=f[k])return!1;return!0}function l(b,l){for(var A=[],
C=0;C<l.length;C++){var Z=b.getLineHandleVisualStart(l[C].head.line);A[A.length-1]!=Z&&A.push(Z)}m(b.state.activeLines,A)||b.operation(function(){f(b);for(var l=0;l<A.length;l++)b.addLineClass(A[l],"wrap",u),b.addLineClass(A[l],"background",k);b.state.activeLines=A})}function A(b,f){l(b,f.ranges)}var u="CodeMirror-activeline",k="CodeMirror-activeline-background";b.defineOption("styleActiveLine",!1,function(k,m,u){u=u&&u!=b.Init;m&&!u?(k.state.activeLines=[],l(k,k.listSelections()),k.on("beforeSelectionChange",
A)):!m&&u&&(k.off("beforeSelectionChange",A),f(k),delete k.state.activeLines)})});(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function f(b,f,m){b=b.getWrapperElement().appendChild(document.createElement("div"));b.className=m?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top";"string"==typeof f?b.innerHTML=f:b.appendChild(f);return b}function m(b,f){b.state.currentNotificationClose&&b.state.currentNotificationClose();
b.state.currentNotificationClose=f}b.defineExtension("openDialog",function(l,A,u){function k(b){if("string"==typeof b)C.value=b;else if(!F&&(F=!0,r.parentNode.removeChild(r),P.focus(),u.onClose))u.onClose(r)}u||(u={});m(this,null);var r=f(this,l,u.bottom),F=!1,P=this,C=r.getElementsByTagName("input")[0];if(C){u.value&&(C.value=u.value,!1!==u.selectValueOnOpen&&C.select());if(u.onInput)b.on(C,"input",function(b){u.onInput(b,C.value,k)});if(u.onKeyUp)b.on(C,"keyup",function(b){u.onKeyUp(b,C.value,k)});
b.on(C,"keydown",function(f){if(!(u&&u.onKeyDown&&u.onKeyDown(f,C.value,k))){if(27==f.keyCode||!1!==u.closeOnEnter&&13==f.keyCode||(navigator.platform.match("Mac")?f.metaKey:f.ctrlKey)&&70==f.keyCode)C.blur(),b.e_stop(f),k();13==f.keyCode&&A(C.value,f)}});if(!1!==u.closeOnBlur)b.on(C,"blur",k);C.focus()}else if(l=r.getElementsByTagName("button")[0]){b.on(l,"click",function(){k();P.focus()});if(!1!==u.closeOnBlur)b.on(l,"blur",k);l.focus()}return k});b.defineExtension("openConfirm",function(l,A,u){function k(){F||
(F=!0,r.parentNode.removeChild(r),P.focus())}m(this,null);var r=f(this,l,u&&u.bottom);l=r.getElementsByTagName("button");var F=!1,P=this,C=1;l[0].focus();for(u=0;u<l.length;++u){var Z=l[u];(function(f){b.on(Z,"click",function(l){b.e_preventDefault(l);k();f&&f(P)})})(A[u]);b.on(Z,"blur",function(){--C;setTimeout(function(){0>=C&&k()},200)});b.on(Z,"focus",function(){++C})}});b.defineExtension("openNotification",function(l,A){function u(){r||(r=!0,clearTimeout(F),k.parentNode.removeChild(k))}m(this,
u);var k=f(this,l,A&&A.bottom),r=!1,F,P=A&&"undefined"!==typeof A.duration?A.duration:5E3;b.on(k,"click",function(f){b.e_preventDefault(f);u()});P&&(F=setTimeout(u,P));return u})});(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],b):b(CodeMirror)})(function(b){function f(b,f){"string"==typeof b?b=RegExp(b.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),f?"gi":"g"):b.global||(b=RegExp(b.source,b.ignoreCase?"gi":"g"));return{token:function(f){b.lastIndex=f.pos;var k=
b.exec(f.string);if(k&&k.index==f.pos)return f.pos+=k[0].length,"searching";k?f.pos=k.index:f.skipToEnd()}}}function m(){this.overlay=this.posFrom=this.posTo=this.lastQuery=this.query=null}function l(b){return b.state.search||(b.state.search=new m)}function A(b,f,k){return b.getSearchCursor(f,k,!0)}function u(b,f,k,l){b.openDialog(f,l,{value:k,selectValueOnOpen:!0,closeOnEnter:!1,onClose:function(){ha(b)}})}function k(b,f,k,l,m){b.openDialog?b.openDialog(f,m,{value:l,selectValueOnOpen:!0}):m(prompt(k,
l))}function r(b,f,k,l){if(b.openConfirm)b.openConfirm(f,l);else if(confirm(k))l[0]()}function F(b){return b.replace(/\\(.)/g,function(b,f){return"n"==f?"\n":"r"==f?"\r":f})}function P(b){var f=b.match(/^\/(.*)\/([a-z]*)$/);if(f)try{b=RegExp(f[1],-1==f[2].indexOf("i")?"":"i")}catch(k){}else b=F(b);if("string"==typeof b?""==b:b.test(""))b=/x^/;return b}function C(b){return'<div style="width:100%; display:table">    <label  style="display:table-cell; width:1px">'+b+'</label>    <input type="text" class="CodeMirror-search-field" style="display:table-cell; width:100%"/>    </div>'}
function Z(b,k,l){k.queryText=l;k.query=P(l);b.removeOverlay(k.overlay,!0);k.overlay=f(k.query,!0);b.addOverlay(k.overlay);b.showMatchesOnScrollbar&&(k.annotate&&(k.annotate.clear(),k.annotate=null),k.annotate=b.showMatchesOnScrollbar(k.query,!0))}function z(f,m,r){var z=l(f);if(z.query)return E(f,m);var C=f.getSelection()||z.lastQuery;r&&f.openDialog?u(f,ja,C,function(k,l){b.e_stop(l);k&&(k!=z.queryText&&Z(f,z,k),E(f,l.shiftKey))}):k(f,ja,"Search for:",C,function(b){b&&!z.query&&f.operation(function(){Z(f,
z,b);z.posFrom=z.posTo=f.getCursor();E(f,m)})})}function E(f,k){f.operation(function(){var m=l(f),r=A(f,m.query,k?m.posFrom:m.posTo);if(!r.find(k)&&(r=A(f,m.query,k?b.Pos(f.lastLine()):b.Pos(f.firstLine(),0)),!r.find(k)))return;f.setSelection(r.from(),r.to());f.scrollIntoView({from:r.from(),to:r.to()},20);m.posFrom=r.from();m.posTo=r.to()})}function ha(b){b.operation(function(){var f=l(b);if(f.lastQuery=f.query)f.query=f.queryText=null,b.removeOverlay(f.overlay),f.annotate&&(f.annotate.clear(),f.annotate=
null)})}function Ba(b,f){if(!b.getOption("readOnly")){var m=b.getSelection()||l(b).lastQuery;k(b,ca,"Replace:",m,function(l){l&&(l=P(l),k(b,aa,"Replace with:","",function(k){k=F(k);if(f)b.operation(function(){for(var f=A(b,l);f.findNext();)if("string"!=typeof l){var m=b.getRange(f.from(),f.to()).match(l);f.replace(k.replace(/\$(\d)/g,function(b,f){return m[f]}))}else f.replace(k)});else{ha(b);var m=A(b,l,b.getCursor()),u=function(){var f=m.from(),k;if(!(k=m.findNext())&&(m=A(b,l),!(k=m.findNext())||
f&&m.from().line==f.line&&m.from().ch==f.ch))return;b.setSelection(m.from(),m.to());b.scrollIntoView({from:m.from(),to:m.to()});r(b,Ca,"Replace?",[function(){z(k)},u])},z=function(b){m.replace("string"==typeof l?k:k.replace(/\$(\d)/g,function(f,k){return b[k]}));u()};u()}}))})}}var ja=C("Search: "),ca=C("Replace: "),aa=C("With: "),Ca="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";b.commands.find=function(b){ha(b);z(b)};b.commands.findPersistent=function(b){ha(b);z(b,!1,
!0)};b.commands.findNext=z;b.commands.findPrev=function(b){z(b,!0)};b.commands.clearSearch=ha;b.commands.replace=Ba;b.commands.replaceAll=function(b){Ba(b,!0)}});(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function f(b,f,k,r){this.atOccurrence=!1;this.doc=b;null==r&&"string"==typeof f&&(r=!1);k=k?b.clipPos(k):l(0,0);this.pos={from:k,to:k};if("string"!=typeof f)f.global||(f=RegExp(f.source,f.ignoreCase?"ig":"g")),this.matches=function(k,m){if(k){f.lastIndex=0;for(var r=b.getLine(m.line).slice(0,m.ch),C=0,
F,Z;;){f.lastIndex=C;C=f.exec(r);if(!C)break;F=C;Z=F.index;C=F.index+(F[0].length||1);if(C==r.length)break}(C=F&&F[0].length||0)||(0==Z&&0==r.length?F=void 0:Z!=b.getLine(m.line).length&&C++)}else f.lastIndex=m.ch,r=b.getLine(m.line),C=(F=f.exec(r))&&F[0].length||0,Z=F&&F.index,Z+C==r.length||C||(C=1);if(F&&C)return{from:l(m.line,Z),to:l(m.line,Z+C),match:F}};else{var F=f;r&&(f=f.toLowerCase());var P=r?function(b){return b.toLowerCase()}:function(b){return b},C=f.split("\n");if(1==C.length)this.matches=
f.length?function(k,r){if(k){var C=b.getLine(r.line).slice(0,r.ch),Z=P(C),ja=Z.lastIndexOf(f);if(-1<ja)return ja=m(C,Z,ja),{from:l(r.line,ja),to:l(r.line,ja+F.length)}}else if(C=b.getLine(r.line).slice(r.ch),Z=P(C),ja=Z.indexOf(f),-1<ja)return ja=m(C,Z,ja)+r.ch,{from:l(r.line,ja),to:l(r.line,ja+F.length)}}:function(){};else{var Z=F.split("\n");this.matches=function(f,k){var m=C.length-1;if(f){if(!(k.line-(C.length-1)<b.firstLine())&&P(b.getLine(k.line).slice(0,Z[m].length))==C[C.length-1]){for(var r=
l(k.line,Z[m].length),u=k.line-1,F=m-1;1<=F;--F,--u)if(C[F]!=P(b.getLine(u)))return;var F=b.getLine(u),aa=F.length-Z[0].length;if(P(F.slice(aa))==C[0])return{from:l(u,aa),to:r}}}else if(!(k.line+(C.length-1)>b.lastLine())&&(F=b.getLine(k.line),aa=F.length-Z[0].length,P(F.slice(aa))==C[0])){r=l(k.line,aa);u=k.line+1;for(F=1;F<m;++F,++u)if(C[F]!=P(b.getLine(u)))return;if(P(b.getLine(u).slice(0,Z[m].length))==C[m])return{from:r,to:l(u,Z[m].length)}}}}}}function m(b,f,k){if(b.length==f.length)return k;
for(f=Math.min(k,b.length);;){var l=b.slice(0,f).toLowerCase().length;if(l<k)++f;else if(l>k)--f;else return f}}var l=b.Pos;f.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(b){function f(b){b=l(b,0);k.pos={from:b,to:b};return k.atOccurrence=!1}for(var k=this,m=this.doc.clipPos(b?this.pos.from:this.pos.to);;){if(this.pos=this.matches(b,m))return this.atOccurrence=!0,this.pos.match||!0;if(b){if(!m.line)return f(0);m=l(m.line-1,this.doc.getLine(m.line-
1).length)}else{var F=this.doc.lineCount();if(m.line==F-1)return f(F);m=l(m.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(f,m){if(this.atOccurrence){var k=b.splitLines(f);this.doc.replaceRange(k,this.pos.from,this.pos.to,m);this.pos.to=l(this.pos.from.line+k.length-1,k[k.length-1].length+(1==k.length?this.pos.from.ch:0))}}};b.defineExtension("getSearchCursor",function(b,l,k){return new f(this.doc,b,l,
k)});b.defineDocExtension("getSearchCursor",function(b,l,k){return new f(this,b,l,k)});b.defineExtension("selectMatches",function(f,l){for(var k=[],m=this.getSearchCursor(f,this.getCursor("from"),l);m.findNext()&&!(0<b.cmpPos(m.to(),this.getCursor("to")));)k.push({anchor:m.from(),head:m.to()});k.length&&this.setSelections(k,0)})});(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function f(b){"object"==typeof b&&(this.minChars=b.minChars,this.style=b.style,this.showToken=b.showToken,this.delay=b.delay);null==this.style&&(this.style=k);null==this.minChars&&(this.minChars=u);null==this.delay&&(this.delay=r);this.overlay=this.timeout=null}function m(b){var f=b.state.matchHighlighter;
clearTimeout(f.timeout);f.timeout=setTimeout(function(){l(b)},f.delay)}function l(b){b.operation(function(){var f=b.state.matchHighlighter;f.overlay&&(b.removeOverlay(f.overlay),f.overlay=null);if(!b.somethingSelected()&&f.showToken){for(var k=!0===f.showToken?/[\w$]/:f.showToken,l=b.getCursor(),m=b.getLine(l.line),r=l=l.ch;l&&k.test(m.charAt(l-1));)--l;for(;r<m.length&&k.test(m.charAt(r));)++r;l<r&&b.addOverlay(f.overlay=A(m.slice(l,r),k,f.style))}else b.getCursor("head").line==b.getCursor("anchor").line&&
(k=b.getSelections()[0].replace(/^\s+|\s+$/g,""),k.length>=f.minChars&&b.addOverlay(f.overlay=A(k,!1,f.style)))})}function A(b,f,k){return{token:function(l){var m;if(m=l.match(b))(m=!f)||(m=(!l.start||!f.test(l.string.charAt(l.start-1)))&&(l.pos==l.string.length||!f.test(l.string.charAt(l.pos))));if(m)return k;l.next();l.skipTo(b.charAt(0))||l.skipToEnd()}}}var u=2,k="matchhighlight",r=100;b.defineOption("highlightSelectionMatches",!1,function(k,r,u){u&&u!=b.Init&&((u=k.state.matchHighlighter.overlay)&&
k.removeOverlay(u),clearTimeout(k.state.matchHighlighter.timeout),k.state.matchHighlighter=null,k.off("cursorActivity",m));r&&(k.state.matchHighlighter=new f(r),l(k),k.on("cursorActivity",m))})});colorNames="BLACK GREY GRAY WHITE RED PINK DARKBROWN BROWN ORANGE YELLOW DARKGREEN GREEN LIGHTGREEN NIGHTBLUE DARKBLUE BLUE LIGHTBLUE MAGENTA TRANSPARENT".split(" ");
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../codemirror/codemirror")):"function"==typeof define&&define.amd?define(["../codemirror/codemirror"],b):b(CodeMirror)})(function(b){b.defineMode("haxe",function(b,m){function l(b){return{type:b,style:"keyword"}}function A(b,f){for(var k=!1,l;null!=(l=b.next());){if(l==f&&!k)return!0;k=!k&&"\\"==l}}function u(b,f,k){Fb=b;Uc=k;return f}function k(b,f){var k=b.next();if('"'==k||"'"==k)return k=r(k),f.tokenize=k,k(b,f);if(/[\[\(\{]/.test(k)){var l=
(f.bracketDepth/2%4+f.bracketDepth/2)%4;f.bracketDepth++;return u(k,"bracketDepth"+l)}if(/[\]\)\}]/.test(k))return f.bracketDepth--,l=(f.bracketDepth/2%4+f.bracketDepth/2)%4,u(k,"bracketDepth"+l);if(/[\,\;\:\.]/.test(k))return u(k);if("0"==k&&b.eat(/x/i))return b.eatWhile(/[\da-f]/i),u("number","hexnumber");if(/\d/.test(k)||"-"==k&&b.eat(/\d/))return b.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),u("number","number");if(f.reAllowed&&"~"==k&&b.eat(/\//))return A(b,"/"),b.eatWhile(/[gimsu]/),u("regexp",
"string-2");if("/"==k){if(b.eat("*"))return k=F,f.tokenize=k,k(b,f);if(b.eat("/"))return b.skipToEnd(),u("comment","comment");b.eatWhile(ab);return u("operator",null,b.current())}if("#"==k)return b.skipToEnd(),u("conditional","meta");if("@"==k)return b.eat(/:/),b.eatWhile(/[\w_]/),u("metadata","meta");if(ab.test(k))return b.eatWhile(ab),u("operator",null,b.current());if(/[A-Z]/.test(k))return b.eatWhile(/[\w_<>]/),k=b.current(),0<=colorNames.indexOf(k)?u("type","colConst-"+k,k):u("type","variable-3",
k);b.eatWhile(/[\w_]/);k=b.current();return(l=Pd.propertyIsEnumerable(k)&&Pd[k])&&f.kwAllowed?u(l.type,l.style,k):u("variable","variable",k)}function r(b){return function(f,l){A(f,b)&&(l.tokenize=k);return u("string","string")}}function F(b,f){for(var l=!1,m;m=b.next();){if("/"==m&&l){f.tokenize=k;break}l="*"==m}return u("comment","comment")}function P(b,f,k,l,m,r){this.indented=b;this.column=f;this.type=k;this.prev=m;this.info=r;null!=l&&(this.align=l)}function C(b){for(var f=gb.state,k=f.importedtypes;k;k=
k.next)if(k.name==b)return;f.importedtypes={name:b,next:f.importedtypes}}function Z(){for(var b=arguments.length-1;0<=b;b--)gb.cc.push(arguments[b])}function z(){Z.apply(null,arguments);return!0}function E(b,f){function k(f){for(;f;f=f.next)if(f.name==b)return!0;return!1}var l=gb.state;gb.marked="def";l.context?k(l.localVars)||(l.localVars={name:b,next:l.localVars}):!k(l.globalVars)&&m.globalVars&&(l.globalVars={name:b,tag:f,next:l.globalVars})}function ha(){gb.state.context||(gb.state.localVars=
zb);gb.state.context={prev:gb.state.context,vars:gb.state.localVars}}function Ba(){gb.state.localVars=gb.state.context.vars;gb.state.context=gb.state.context.prev}function ja(b,f){var k=function(){var k=gb.state;k.lexical=new P(k.indented,gb.stream.column(),b,null,k.lexical,f)};k.lex=!0;return k}function ca(){var b=gb.state;b.lexical.prev&&(")"==b.lexical.type&&(b.indented=b.lexical.indented),b.lexical=b.lexical.prev)}function aa(b){function f(k){return k==b?z():";"==b?Z():z(f)}return f}function Ca(b){return"@"==
b?z(N):"var"==b?z(ja("vardef"),Nc,aa(";"),ca):"keyword a"==b?z(ja("form"),Ia,Ca,ca):"keyword b"==b?z(ja("form"),Ca,ca):"{"==b?z(ja("}"),ha,Lc,ca,Ba):";"==b?z():"attribute"==b?z(fa):"function"==b?z(ma):"for"==b?z(ja("form"),aa("("),ja(")"),Nb,aa(")"),ca,Ca,ca):"variable"==b?z(ja("stat"),uc):"switch"==b?z(ja("form"),Ia,ja("}","switch"),aa("{"),Lc,ca,ca):"case"==b?z(Ia,aa(":")):"default"==b?z(aa(":")):"catch"==b?z(ja("form"),ha,aa("("),na,aa(")"),Ca,ca,Ba):"import"==b?z(Ea,aa(";")):"typedef"==b?z(Tb):
Z(ja("stat"),Ia,aa(";"),ca)}function Ia(b){return cc.hasOwnProperty(b)||"type"==b?z(O):"function"==b?z(ma):"keyword c"==b?z(Qa):"("==b?z(ja(")"),Qa,aa(")"),ca,O):"operator"==b?z(Ia):"["==b?z(ja("]"),Ya(Qa,"]"),ca,O):"{"==b?z(ja("}"),Ya(bd,"}"),ca,O):z()}function Qa(b){return b.match(/[;\}\)\],]/)?Z():Z(Ia)}function O(b,f){if("operator"==b)return/\+\+|--/.test(f)?z(O):"?"==f?z(Ia,aa(":"),Ia):z(Ia);if(";"!=b){if("("==b)return z(ja(")"),Ya(Ia,")"),ca,O);if("."==b)return z(bc,O);if("["==b)return z(ja("]"),
Ia,aa("]"),ca,O)}}function fa(b){if("attribute"==b)return z(fa);if("function"==b)return z(ma);if("var"==b)return z(Nc)}function N(b){if(":"==b||"variable"==b)return z(N);if("("==b)return z(ja(")"),Ya(Ga,")"),ca,Ca)}function Ga(b){if("variable"==b)return z()}function Ea(b,f){if("variable"==b&&/[A-Z]/.test(f.charAt(0)))return C(f),z();if("variable"==b||"property"==b||"."==b||"*"==f)return z(Ea)}function Tb(b,f){if("variable"==b&&/[A-Z]/.test(f.charAt(0)))return C(f),z();if("type"==b&&/[A-Z]/.test(f.charAt(0)))return z()}
function uc(b){return":"==b?z(ca,Ca):Z(O,aa(";"),ca)}function bc(b){if("variable"==b)return gb.marked="property",z()}function bd(b){"variable"==b&&(gb.marked="property");if(cc.hasOwnProperty(b))return z(aa(":"),Ia)}function Ya(b,f){function k(l){return","==l?z(b,k):l==f?z():z(aa(f))}return function(l){return l==f?z():Z(b,k)}}function Lc(b){return"}"==b?z():Z(Ca,Lc)}function Nc(b,f){return"variable"==b?(E(f,"V"),z(eb,L)):z()}function L(b,f){if("="==f)return z(Ia,L);if(","==b)return z(Nc)}function Nb(b,
f){return"variable"==b?(E(f,"V"),z(Kc,Ia)):Z()}function Kc(b,f){if("in"==f)return z()}function ma(b,f){if("variable"==b||"type"==b)return E(f,"F"),z(ma);if("new"==f)return z(ma);if("("==b)return z(ja(")"),ha,Ya(na,")"),ca,eb,Ca,Ba)}function eb(b){if(":"==b)return z(X)}function X(b){if("type"==b||"variable"==b)return z();if("{"==b)return z(ja("}"),Ya(qc,"}"),ca)}function qc(b){if("variable"==b)return z(eb)}function na(b,f){if("variable"==b)return E(f,"V"),z(eb)}var db=b.indentUnit,Ob=l("keyword a"),
Fa=l("keyword b"),ra=l("keyword c"),Ja=l("operator"),D={type:"atom",style:"atom"},$={type:"attribute",style:"attribute"},Fb=l("typedef"),Pd={"if":Ob,"while":Ob,"else":Fa,"do":Fa,"try":Fa,"return":ra,"break":ra,"continue":ra,"new":ra,"throw":ra,"var":l("var"),inline:$,"static":$,using:l("import"),"public":$,"private":$,cast:l("cast"),"import":l("import"),macro:l("macro"),"function":l("function"),"catch":l("catch"),untyped:l("untyped"),callback:l("cb"),"for":l("for"),"switch":l("switch"),"case":l("case"),
"default":l("default"),"in":Ja,never:l("property_access"),trace:l("trace"),"class":Fb,"abstract":Fb,"enum":Fb,"interface":Fb,typedef:Fb,"extends":Fb,"implements":Fb,dynamic:Fb,"true":D,"false":D,"null":D},ab=/[+\-*&%=<>!?|]/,Uc,cc={atom:!0,number:!0,variable:!0,string:!0,regexp:!0},gb={state:null,column:null,marked:null,cc:null},zb={name:"this",next:null};Ba.lex=!0;ca.lex=!0;return{startState:function(b){b={tokenize:k,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new P((b||0)-db,0,"block",!1),localVars:m.localVars,
importedtypes:"Int Float String Void Std Bool Dynamic Array".split(" "),context:m.localVars&&{vars:m.localVars},indented:0,bracketDepth:0};m.globalVars&&"object"==typeof m.globalVars&&(b.globalVars=m.globalVars);return b},token:function(b,f){b.sol()&&(f.lexical.hasOwnProperty("align")||(f.lexical.align=!1),f.indented=b.indentation());if(b.eatSpace())return null;var k=f.tokenize(b,f);if("comment"==Fb)return k;f.reAllowed=!("operator"!=Fb&&"keyword c"!=Fb&&!Fb.match(/^[\[{}\(,;:]$/));f.kwAllowed="."!=
Fb;a:{var l=Fb,m=Uc,r=f.cc;gb.state=f;gb.stream=b;gb.marked=null;gb.cc=r;f.lexical.hasOwnProperty("align")||(f.lexical.align=!0);for(;;)if((r.length?r.pop():Ca)(l,m)){for(;r.length&&r[r.length-1].lex;)r.pop()();if(gb.marked){k=gb.marked;break a}if(r="variable"==l)b:{for(r=f.localVars;r;r=r.next)if(r.name==m){r=!0;break b}r=void 0}if(r){k="variable-2";break a}if(l="variable"==l)b:if(l=f,/[a-z]/.test(m.charAt(0)))l=!1;else{for(var r=l.importedtypes.length,u=0;u<r;u++)if(l.importedtypes[u]==m){l=!0;
break b}l=void 0}if(l){k="variable-3";break a}break a}k=void 0}return k},indent:function(b,f){if(b.tokenize!=k)return 0;var l=f&&f.charAt(0),m=b.lexical;"stat"==m.type&&"}"==l&&(m=m.prev);var r=m.type,u=l==r;return"vardef"==r?m.indented+4:"form"==r&&"{"==l?m.indented:"stat"==r||"form"==r?m.indented+db:"switch"!=m.info||u?m.align?m.column+(u?0:1):m.indented+(u?0:db):m.indented+(/^(?:case|default)\b/.test(f)?db:2*db)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}});
b.defineMIME("text/x-haxe","haxe");b.defineMode("hxml",function(){return{startState:function(){return{define:!1,inString:!1}},token:function(b,m){var l=b.peek(),A=b.sol();if("#"==l)return b.skipToEnd(),"comment";if(A&&"-"==l)return l="variable-2",b.eat(/-/),"-"==b.peek()&&(b.eat(/-/),l="keyword a"),"D"==b.peek()&&(b.eat(/[D]/),l="keyword c",m.define=!0),b.eatWhile(/[A-Z]/i),l;l=b.peek();!1==m.inString&&"'"==l&&(m.inString=!0,b.next());if(!0==m.inString)return b.skipTo("'")||b.skipToEnd(),"'"==b.peek()&&
(b.next(),m.inString=!1),"string";b.next();return null},lineComment:"#"}});b.defineMIME("text/x-hxml","hxml")});(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function f(b,f){this.cm=b;this.options=this.buildOptions(f);this.widget=null;this.tick=this.debounce=0;this.startPos=this.cm.getCursor();this.startLen=this.cm.getLine(this.startPos.line).length;var k=this;b.on("cursorActivity",this.activityFunc=function(){k.cursorActivity()})}function m(b,f){function k(b,
m){var u;u="string"!=typeof m?function(b){return m(b,f)}:l.hasOwnProperty(m)?l[m]:m;r[b]=u}var l={Up:function(){f.moveFocus(-1)},Down:function(){f.moveFocus(1)},PageUp:function(){f.moveFocus(-f.menuSize()+1,!0)},PageDown:function(){f.moveFocus(f.menuSize()-1,!0)},Home:function(){f.setFocus(0)},End:function(){f.setFocus(f.length-1)},Enter:f.pick,Tab:f.pick,Esc:f.close},m=b.options.customKeys,r=m?{}:l;if(m)for(var u in m)m.hasOwnProperty(u)&&k(u,m[u]);if(m=b.options.extraKeys)for(u in m)m.hasOwnProperty(u)&&
k(u,m[u]);return r}function l(b,f){for(;f&&f!=b;){if("LI"===f.nodeName.toUpperCase()&&f.parentNode==b)return f;f=f.parentNode}}function A(f,r){this.completion=f;this.data=r;this.picked=!1;var z=this,E=f.cm,A=this.hints=document.createElement("ul");A.className="CodeMirror-hints";this.selectedHint=r.selectedHint||0;for(var F=r.list,P=0;P<F.length;++P){var ca=A.appendChild(document.createElement("li")),aa=F[P],Ca=u+(P!=this.selectedHint?"":" "+k);null!=aa.className&&(Ca=aa.className+" "+Ca);ca.className=
Ca;aa.render?aa.render(ca,r,aa):ca.appendChild(document.createTextNode(aa.displayText||("string"==typeof aa?aa:aa.text)));ca.hintId=P}var P=E.cursorCoords(f.options.alignWithWord?r.from:null),Ia=P.left,Qa=P.bottom,O=!0;A.style.left=Ia+"px";A.style.top=Qa+"px";ca=window.innerWidth||Math.max(document.body.offsetWidth,document.documentElement.offsetWidth);Ca=window.innerHeight||Math.max(document.body.offsetHeight,document.documentElement.offsetHeight);(f.options.container||document.body).appendChild(A);
aa=A.getBoundingClientRect();if(0<aa.bottom-Ca){var fa=aa.bottom-aa.top;0<P.top-(P.bottom-aa.top)-fa?(A.style.top=(Qa=P.top-fa)+"px",O=!1):fa>Ca&&(A.style.height=Ca-5+"px",A.style.top=(Qa=P.bottom-aa.top)+"px",Ca=E.getCursor(),r.from.ch!=Ca.ch&&(P=E.cursorCoords(Ca),A.style.left=(Ia=P.left)+"px",aa=A.getBoundingClientRect()))}Ca=aa.right-ca;0<Ca&&(aa.right-aa.left>ca&&(A.style.width=ca-5+"px",Ca-=aa.right-aa.left-ca),A.style.left=(Ia=P.left-Ca)+"px");E.addKeyMap(this.keyMap=m(f,{moveFocus:function(b,
f){z.changeActive(z.selectedHint+b,f)},setFocus:function(b){z.changeActive(b)},menuSize:function(){return z.screenAmount()},length:F.length,close:function(){f.close()},pick:function(){z.pick()},data:r}));if(f.options.closeOnUnfocus){var N;E.on("blur",this.onBlur=function(){N=setTimeout(function(){f.close()},100)});E.on("focus",this.onFocus=function(){clearTimeout(N)})}var Ga=E.getScrollInfo();E.on("scroll",this.onScroll=function(){var b=E.getScrollInfo(),k=E.getWrapperElement().getBoundingClientRect(),
l=Qa+Ga.top-b.top,m=l-(window.pageYOffset||(document.documentElement||document.body).scrollTop);O||(m+=A.offsetHeight);if(m<=k.top||m>=k.bottom)return f.close();A.style.top=l+"px";A.style.left=Ia+Ga.left-b.left+"px"});b.on(A,"dblclick",function(b){(b=l(A,b.target||b.srcElement))&&null!=b.hintId&&(z.changeActive(b.hintId),z.pick())});b.on(A,"click",function(b){(b=l(A,b.target||b.srcElement))&&null!=b.hintId&&(z.changeActive(b.hintId),f.options.completeOnSingleClick&&z.pick())});b.on(A,"mousedown",
function(){setTimeout(function(){E.focus()},20)});b.signal(r,"select",F[0],A.firstChild);return!0}var u="CodeMirror-hint",k="CodeMirror-hint-active";b.showHint=function(b,f,k){if(!f)return b.showHint(k);k&&k.async&&(f.async=!0);f={hint:f};if(k)for(var l in k)f[l]=k[l];return b.showHint(f)};b.defineExtension("showHint",function(k){1<this.listSelections().length||this.somethingSelected()||(this.state.completionActive&&this.state.completionActive.close(),k=this.state.completionActive=new f(this,k),k.options.hint&&
(b.signal(this,"startCompletion",this),k.update(!0)))});var r=window.requestAnimationFrame||function(b){return setTimeout(b,1E3/60)},F=window.cancelAnimationFrame||clearTimeout;f.prototype={close:function(){this.active()&&(this.tick=this.cm.state.completionActive=null,this.cm.off("cursorActivity",this.activityFunc),this.widget&&this.data&&b.signal(this.data,"close"),this.widget&&this.widget.close(),b.signal(this.cm,"endCompletion",this.cm))},active:function(){return this.cm.state.completionActive==
this},pick:function(f,k){var l=f.list[k];l.hint?l.hint(this.cm,f,l):this.cm.replaceRange("string"==typeof l?l:l.text,l.from||f.from,l.to||f.to,"complete");b.signal(f,"pick",l);this.close()},cursorActivity:function(){this.debounce&&(F(this.debounce),this.debounce=0);var b=this.cm.getCursor(),f=this.cm.getLine(b.line);if(b.line!=this.startPos.line||f.length-b.ch!=this.startLen-this.startPos.ch||b.ch<this.startPos.ch||this.cm.somethingSelected()||b.ch&&this.options.closeCharacters.test(f.charAt(b.ch-
1)))this.close();else{var k=this;this.debounce=r(function(){k.update()});this.widget&&this.widget.disable()}},update:function(b){if(null!=this.tick)if(this.options.hint.async){var f=++this.tick,k=this;this.options.hint(this.cm,function(l){k.tick==f&&k.finishUpdate(l,b)},this.options)}else this.finishUpdate(this.options.hint(this.cm,this.options),b)},finishUpdate:function(f,k){if(null==f)this.close();else{this.data&&b.signal(this.data,"update");f&&this.data&&b.cmpPos(f.from,this.data.from)&&(f=null);
this.data=f;var l=this.widget&&this.widget.picked||k&&this.options.completeSingle;this.widget&&this.widget.close();f&&f.list.length&&(l&&1==f.list.length?this.pick(f,0):(this.widget=new A(this,f),b.signal(f,"shown")))}},buildOptions:function(b){var f=this.cm.options.hintOptions,k={},l;for(l in P)k[l]=P[l];if(f)for(l in f)void 0!==f[l]&&(k[l]=f[l]);if(b)for(l in b)void 0!==b[l]&&(k[l]=b[l]);return k}};A.prototype={close:function(){if(this.completion.widget==this){this.completion.widget=null;this.hints.parentNode.removeChild(this.hints);
this.completion.cm.removeKeyMap(this.keyMap);var b=this.completion.cm;this.completion.options.closeOnUnfocus&&(b.off("blur",this.onBlur),b.off("focus",this.onFocus));b.off("scroll",this.onScroll)}},disable:function(){this.completion.cm.removeKeyMap(this.keyMap);var b=this;this.keyMap={Enter:function(){b.picked=!0}};this.completion.cm.addKeyMap(this.keyMap)},pick:function(){this.completion.pick(this.data,this.selectedHint)},changeActive:function(f,l){f>=this.data.list.length?f=l?this.data.list.length-
1:0:0>f&&(f=l?0:this.data.list.length-1);if(this.selectedHint!=f){var m=this.hints.childNodes[this.selectedHint];m.className=m.className.replace(" "+k,"");m=this.hints.childNodes[this.selectedHint=f];m.className+=" "+k;m.offsetTop<this.hints.scrollTop?this.hints.scrollTop=m.offsetTop-3:m.offsetTop+m.offsetHeight>this.hints.scrollTop+this.hints.clientHeight&&(this.hints.scrollTop=m.offsetTop+m.offsetHeight-this.hints.clientHeight+3);b.signal(this.data,"select",this.data.list[this.selectedHint],m)}},
screenAmount:function(){return Math.floor(this.hints.clientHeight/this.hints.firstChild.offsetHeight)||1}};b.registerHelper("hint","auto",function(f,k){var l=f.getHelpers(f.getCursor(),"hint");if(l.length)for(var m=0;m<l.length;m++){var r=l[m](f,k);if(r)return r}else if(l=f.getHelper(f.getCursor(),"hintWords")){if(l)return b.hint.fromList(f,{words:l})}else if(b.hint.anyword)return b.hint.anyword(f,k)});b.registerHelper("hint","fromList",function(f,k){var l=f.getCursor(),m=f.getTokenAt(l),r=b.Pos(l.line,
m.end);if(m.string&&/\w/.test(m.string[m.string.length-1]))var u=m.string,l=b.Pos(l.line,m.start);else u="",l=r;for(var m=[],A=0;A<k.words.length;A++){var F=k.words[A];F.slice(0,u.length)==u&&m.push(F)}if(m.length)return{list:m,from:l,to:r}});b.commands.autocomplete=b.showHint;var P={hint:b.hint.auto,completeSingle:!0,alignWithWord:!0,closeCharacters:/[\s()\[\]{};:>,]/,closeOnUnfocus:!0,completeOnSingleClick:!1,container:null,customKeys:null,extraKeys:null};b.defineOption("hintOptions",null)});var keyRepeatTimer=0,keyRepeatIndex=0,input_throttle_timer=0,lastinput=-100,dragging=!1,rightdragging=!1,columnAdded=!1,selectableint=0,anyEditsSinceMouseDown=!1;function rightClickCanvas(b){return prevent(b)}function relMouseCoords(b){var f=0,m=0,l=0,A=0,l=this;do f+=l.offsetLeft-l.scrollLeft,m+=l.offsetTop-l.scrollTop;while(l=l.offsetParent);l=b.pageX-f;A=b.pageY-m;return{x:l,y:A}}HTMLCanvasElement.prototype.relMouseCoords=relMouseCoords;
function onMyFocus(b){keybuffer=[];keyRepeatTimer=keyRepeatIndex=0}function onMyBlur(b){keybuffer=[];keyRepeatTimer=keyRepeatIndex=0}var mouseCoordX=0,mouseCoordY=0;window.addEventListener("focus",onMyFocus,!1);window.addEventListener("blur",onMyBlur,!1);function prevent(b){b.preventDefault&&b.preventDefault();b.stopImmediatePropagation&&b.stopImmediatePropagation();b.stopPropagation&&b.stopPropagation();return b.returnValue=!1};function jumpToLine(b,f){"undefined"===typeof f&&(f=0);var m=parent.form1.code.editorreference;m.scrollIntoView(Math.max(b-1-10,0));m.scrollIntoView(Math.min(b-1+10,m.doc.size-1));m.scrollIntoView(Math.max(b-1,0));m.setCursor(Math.max(b-1,0),f);m.focus()}var consolecache=[];
function consolePrintWithLines(b,f,m){"object"===typeof b&&(b=JSON.stringify(b));"undefined"===typeof m&&(m=!1);"string"===typeof b&&(b=b.replace(/\s/g,"&nbsp;"));if("undefined"===typeof f)return consolePrint(b);b='<a onclick="jumpToLine('+f.toString()+');"  href="javascript:void(0);"><span class="errorTextLineNumber"> line '+f.toString()+"</span></a> : "+b;cache_console_messages&&!1==m?consolecache.push(b):consolePrint(b,!0)}
function consolePrint(b,f){void 0===f&&(f=!1);"object"===typeof b&&(b=JSON.stringify(b),b=b.slice(1,b.length-1));cache_console_messages&&!1==f?consolecache.push(b):addToConsole(b)}
function consolePrintWithLinesArray(b,f,m){if(1==b.length)return consolePrintWithLines(b[0],f,m);"object"===typeof b&&(b=JSON.stringify(b),b=b.slice(1,b.length-1));b=b.replace(/\s/g,"&nbsp;");"undefined"===typeof m&&(m=!1);if("undefined"===typeof f)return consolePrint(b);b='<a onclick="jumpToLine('+f.toString()+');"  href="javascript:void(0);"><span class="errorTextLineNumber"> line '+f.toString()+"</span></a> : "+b;cache_console_messages&&!1==m?consolecache.push(b):consolePrint(b,!0)}
function consolePrintArray(b,f){if(1==b.length)return consolePrint(b[0],f);void 0===f&&(f=!1);"object"===typeof b&&(b=JSON.stringify(b));b=b.replace(/\s/g,"&nbsp;");cache_console_messages&&!1==f?consolecache.push(b):addToConsole(b)}var cache_n=0;
function addToConsole(b){cache=document.createElement("div");cache.id="cache"+cache_n;cache.innerHTML=b;cache_n++;document.getElementById("consoletextarea").appendChild(cache);consolecache=[];b=document.getElementById("lowerarea");b.scrollTop=b.scrollHeight}function consoleCacheDump(){if(!1!==cache_console_messages){for(var b="",f=0,m="<br>",l=0;l<consolecache.length;l++)consolecache[l]==b?f++:(b=consolecache[l],0<f&&(m=m+" (x"+(f+1)+")"),m+="<br>",m+=b,f=0);addToConsole(m)}}
function consoleError(b){consolePrint('<span class="errorText">'+b+"</span>",!0)}function clearConsole(){document.getElementById("consoletextarea").innerHTML="";var b=document.getElementById("lowerarea");b.scrollTop=b.scrollHeight}
function logError(b,f,m,l){if("undefined"===typeof f)return logErrorNoLine(b,!0);if(compiling||m){if(void 0===f)return logErrorNoLine(b);jumpParams=f.toString()+","+l;b='<a onclick="jumpToLine('+jumpParams+');"  href="javascript:void(0);"><span class="errorTextLineNumber"> line '+f.toString()+'</span></a> : <span class="errorText">'+b+"</span>";0<=errorStrings.indexOf(b)&&!m||(consolePrint(b,!0),errorStrings.push(b),errorCount++)}}
function logWarning(b,f,m){if(compiling||m){if(void 0===f)return logErrorNoLine(b);b='<a onclick="jumpToLine('+f.toString()+');"  href="javascript:void(0);"><span class="errorTextLineNumber"> line '+f.toString()+'</span></a> : <span class="warningText">'+b+"</span>";0<=errorStrings.indexOf(b)&&!m||(consolePrint(b,!0),errorStrings.push(b))}}
function logWarningNoLine(b,f){if(compiling||f){var m='<span class="warningText">'+b+"</span>";0<=errorStrings.indexOf(m)&&!f||(consolePrint(m,!0),errorStrings.push(m))}}function logErrorNoLine(b,f){if(compiling||f){var m='<span class="errorText">'+b+"</span>";0<=errorStrings.indexOf(m)&&!f||(consolePrint(m,!0),errorStrings.push(m));errorCount++}}var clearConsoleClick=document.getElementById("clearConsoleClick");clearConsoleClick.addEventListener("click",clearConsole,!1);var code=document.getElementById("code"),_editorDirty=!1,_editorCleanState="",fileToOpen=getParameterByName("demo");
if(null!==fileToOpen&&0<fileToOpen.length)tryLoadFile("demo/"+fileToOpen),code.value="loading...";else{var gistToLoad=getParameterByName("hack");if(null!==gistToLoad&&0<gistToLoad.length){var id=gistToLoad.replace(/[\\\/]/,"");tryLoadGist(id);code.value="loading..."}else try{if(void 0!==localStorage&&void 0!==localStorage.saves){var curSaveArray=JSON.parse(localStorage.saves),sd=curSaveArray[curSaveArray.length-1];code.value=sd.text;var loadDropdown=document.getElementById("loadDropDown");loadDropdown.selectedIndex=
0}}catch(ex$$2){}}var cls="CodeMirror-Zeedonk-",editor=window.CodeMirror.fromTextArea(code,{lineNumbers:!0,styleActiveLine:!0,mode:{name:"haxe",globalVars:!0},autoCloseBrackets:!0,matchBrackets:!0,tabSize:2,indentUnit:2,extraKeys:{"Ctrl-Space":"autocomplete",Esc:"clearSearch"}});function editor_handler(b){return function(f){return editor_handleChar(f,b)}}
function editor_handleChar(b,f){for(var m=b.listSelections(),l=CodeMirror.Pos,A,u=0;u<m.length;u++){var k=m[u].head;if(b.getRange(k,l(k.line,k.ch+1))==f)k="skip";else return CodeMirror.Pass;if(!A)A=k;else if(A!=k)return CodeMirror.Pass}b.operation(function(){"skip"==A&&b.execCommand("goCharRight")})}var colorPickerVisible=!1,adding=!1;function anyParentHasId(b,f){for(;;){if(b.id===f)return!0;b=b.parentNode;if(null==b)return!1}}
function anyParentHasClass(b,f){for(;null!=b;){if(0<=b.className.indexOf(f))return!0;b=b.parentNode}return!1}var initCursorPos;function showColorPicker(b,f,m){colorPickerVisible=!0;colorPicker.style.display="initial";colorPickCursorPos=b;adding=!0;colorPickerDat.setHex(m);editor.addWidget(b,colorPicker,!0,f);adding=!1}
editor.on("mousedown",function(b,f){if("cm-hexnumber"==f.target.className){var m=b.coordsChar({left:f.clientX,top:f.clientY});console.log("preshow");var l="above";f.clientY<f.currentTarget.clientHeight/2&&(l="below");showColorPicker(m,l,f.target.innerHTML);b.setCursor(m.line,m.ch);setTimeout(function(){b.display.input.focus()},0)}else anyParentHasId(f.target,"color-picker")||(colorPickerVisible=!1,colorPicker.style.display="none")});
editor.on("blur",function(b,f){setTimeout(function(){document.activeElement},1)});function hideColorPicker(){colorPickerVisible=!1;colorPicker.style.display="none"}editor.on("keydown",function(b,f){colorPicker.style.display="none";colorPickerVisible=!1});editor.on("scroll",function(b,f){adding||(colorPicker.style.display="none",colorPickerVisible=!1)});
window.addEventListener("mousedown",function(b){!colorPickerVisible||adding||anyParentHasId(b.target,"color-picker")||anyParentHasClass(b.target,"CodeMirror-code")||anyParentHasClass(b.target,"CodeMirror-line")||hideColorPicker()});
editor.on("beforeSelectionChange",function(b,f){if(!adding){for(var m=0;m<f.ranges.length;m++){var l=f.ranges[m];if(l.anchor.line!=l.head.line||l.anchor.ch!=l.head.ch){colorPicker.style.display="none";colorPickerVisible=!1;return}}0==f.ranges.length&&(colorPicker.style.display="none",colorPickerVisible=!1)}});var semiColonMap=[];semiColonMap["';'"]=editor_handler(";");editor.addKeyMap(semiColonMap);function isalnum(b){return 47<b&&58>b||64<b&&91>b||96<b&&123>b?!0:!1}
function renderHint(b,f,m){var l=m.text;f=m.displayText;var A=m.tag;0==l.length&&(l=m.displayText,f=m.text);m=document.createElement("span");m.style.color="white";l=document.createTextNode(l);m.appendChild(l);m.className+=" Zeedonk-completion";null!=A&&(m.className+=" "+A+"-Zeedonk-completion");b.appendChild(m);A=document.createElement("span");A.style.color="grey";f=document.createTextNode(f);A.appendChild(f);A.style.color="#ff0000";b.appendChild(f)}
function getMatchRange(b){for(var f=/0x[a-fA-F0-9]*/g,m=editor.getLine(b.line),l=f.exec(m);l;){var A=l[0],u=l.index,l=l.index+A.length;if(b.ch>=u&&b.ch<=l)return{start:u,end:l,string:A};l=f.exec(m)}return null}
function CompletionsPick(b){consolePrint(b.text+b.displayText);var f=editor.getCursor(),m=editor.getLine(f.line);if(f.ch<m.length&&(m=m[f.ch],"("==m))return;var m=b.displayText,l=m.indexOf("("),A=m.indexOf(")"),f="";0<=l&&(f=m.substring(l+1,A));m=b.displayText;m=m.toLowerCase();0===m.indexOf("():void")||0===m.indexOf("()")&&")"==m[m.length-1]?editor.replaceSelection("();",null):0===m.indexOf("()")?editor.replaceSelection("()",null):0==m.indexOf("(")?(0<=m.indexOf(":void")||")"==m[m.length-1]?(editor.replaceSelection("()",
null),b=editor.getCursor(),m=editor.getRange(b,CodeMirror.Pos(b.line,b.ch+1)),";"!==m&&(editor.replaceSelection(";",null),editor.execCommand("goCharLeft"))):editor.replaceSelection("()",null),editor.execCommand("goCharLeft"),editor.replaceSelection(f,"around")):"F"===b.tag?(editor.replaceSelection("()",null),editor.execCommand("goCharLeft")):0===m.indexOf(".")?(editor.replaceSelection(".",null),CodeMirror.commands.autocomplete(editor)):0===m.indexOf(";")&&(editor.replaceSelection(";",null),CodeMirror.commands.autocomplete(editor))}
function makeTooltip(b,f,m){m=elt("div",cls+"tooltip",m);m.style.left=b+"px";m.style.top=f+"px";document.body.appendChild(m);m.offsetTop>window.innerHeight&&(m.style.bottom="0px",m.style.top="");return m}function remove(b){var f=b&&b.parentNode;f&&f.removeChild(b)}
function elt(b,f){var m=document.createElement(b);f&&(m.className=f);for(var l=2;l<arguments.length;++l){var A=arguments[l];"string"==typeof A?-1===A.indexOf("<")?(A=document.createTextNode(A),m.appendChild(A)):(m.innerHTML=A,m.style.maxWidth="initial",m.style.padding="10px"):(m.appendChild(A),m.style.maxWidth="40em")}return m}
CodeMirror.registerHelper("hint","haxe",function(b,f){function m(b){return"."!==r[b]||1<b&&"."===r[b-1]&&"."===r[b-2]?!1:!0}function l(b){return"."!==r[b]||b+2<r.length&&"."===r[b+1]&&"."===r[b+2]?!1:!0}function A(b,f){null==f&&(f="V");0==b.toLowerCase().indexOf(C)&&Z.push({text:b,displayText:"",render:renderHint,tag:f})}var u=b.getCursor(),k=b.getTokenAt(u);0<k.string.length&&isalnum(k.string.charCodeAt(0));k.string.toLowerCase();var r=b.getLine(u.line),F=u.ch,P;P="."!==r[F]?!1:0<F&&"."===r[F-1]?
!0:!1;if(P)return null;for(;0<F&&(F--,isalnum(r.charCodeAt(F))||m(F)););isalnum(r.charCodeAt(F))||m(F)||F++;for(P=u.ch-1;P<r.length-1&&(P++,isalnum(r.charCodeAt(P))||l(P)););isalnum(r.charCodeAt(P))||l(P)||P--;P++;P<F&&(P=F);for(var C=r.substring(F,P),C=C.trim().toLowerCase(),Z=[],z=0<=C.indexOf(".")?haxeHintArray:haxeLibraryArray,E=0;E<z.length;E++){var ha=z[E],Ba=ha[0];if(!(Ba.length<C.length)&&Ba.substring(0,C.length).toLowerCase()==C){var ja=1<ha.length?ha[1]:"",ca=2<ha.length?ha[2]:"";"Col"===
ca&&(ca+="_"+Ba.split(".")[1]);Z.push({text:Ba,displayText:ja,render:renderHint,tag:ca,doc:3<ha.length?ha[3]:""})}}for(z=k.state.localVars;z;z=z.next)A(z.name,z.tag);for(z=k.state.globalVars;z;z=z.next)A(z.name,z.tag);var u={list:Z,from:CodeMirror.Pos(u.line,F),to:CodeMirror.Pos(u.line,P)},aa=null;CodeMirror.on(u,"close",function(){remove(aa)});CodeMirror.on(u,"update",function(){remove(aa)});CodeMirror.on(u,"select",function(b,f){remove(aa);var k=b.doc;k&&(aa=makeTooltip(f.parentNode.getBoundingClientRect().right+
window.pageXOffset,f.getBoundingClientRect().top+window.pageYOffset,k),aa.className+=" "+cls+"hint-doc")});CodeMirror.on(u,"pick",CompletionsPick);return u});editor.on("inputRead",function(b,f){if("."==f.text[0])var m=!0;var l=b.getCursor();if(1<l.ch){var A=b.getLine(l.line);"."==A[l.ch-2]?m=!1:2<l.ch&&"."==A[l.ch-3]&&(m=!1)}m&&b.execCommand("autocomplete")});
editor.on("mousedown",function(b,f){if("cm-SOUND"==f.target.className){var m=parseInt(f.target.innerHTML);playSound(m)}else"cm-LEVEL"==f.target.className&&(f.ctrlKey||f.metaKey)&&(document.activeElement.blur(),f.preventDefault(),compile(["levelline",b.posFromMouse(f).line]))});_editorCleanState=editor.getValue();
function checkEditorDirty(){var b=document.getElementById("saveClickLink");_editorCleanState!==editor.getValue()?(_editorDirty=!0,b&&(b.innerHTML="SAVE*")):(_editorDirty=!1,b&&(b.innerHTML="SAVE"))}function setEditorClean(){_editorCleanState=editor.getValue();if(!0===_editorDirty){var b=document.getElementById("saveClickLink");b&&(b.innerHTML="SAVE");_editorDirty=!1}}editor.on("change",function(b,f){checkEditorDirty()});var mapObj={parallel:"&#8741;",perpendicular:"&#8869;"};
code.editorreference=editor;editor.setOption("theme","ambiance");function getParameterByName(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");b=RegExp("[\\?&]"+b+"=([^&#]*)").exec(location.search);return null===b?"":decodeURIComponent(b[1].replace(/\+/g," "))}
function tryLoadGist(b){b="https://api.github.com/gists/"+b;consolePrint("Contacting GitHub",!0);var f=new XMLHttpRequest;f.open("GET",b);f.onreadystatechange=function(){if(4==f.readyState){""===f.responseText&&consoleError("GitHub request returned nothing.  A connection fault, maybe?");var b=JSON.parse(f.responseText);403===f.status?consoleError(b.message):200!==f.status&&201!==f.status?consoleError("HTTP Error "+f.status+" - "+f.statusText):(editor.setValue(null==b.files["script.hx"]?b.files["script.txt"].content:
b.files["script.hx"].content),setEditorClean(),unfocus(),stopClick())}};f.setRequestHeader("Content-type","application/x-www-form-urlencoded");f.send()}function tryLoadFile(b){var f=new XMLHttpRequest;f.open("GET",b+".hx");f.setRequestHeader("Content-type","text/plain\t; charset=utf-8");f.onreadystatechange=function(){if(4==f.readyState){var b=f.responseText;editor.setValue(b);terryRun(b);gameScript=b;setEditorClean();unfocus()}};f.send()}
function dropdownChange(){tryLoadFile("demo/"+this.value);this.selectedIndex=0};var audio;function newSound(b){var f=b+100*(1E6*Math.random()|1);document.getElementById("consoletextarea");consolePrint(generatorNames[b]+' : <span class="cm-SOUND" onclick="playSound('+f.toString()+')">'+f.toString()+"</span>",!0);b=generateFromSeed(f);b.sound_vol=SOUND_VOL;b.sample_rate=SAMPLE_RATE;b.bit_depth=BIT_DEPTH;SoundEffect.generate(b).play()}
function buttonPress(){var b=document.getElementById("sounddat").value,b=generateFromSeed(b);b.sound_vol=SOUND_VOL;b.sample_rate=SAMPLE_RATE;b.bit_depth=BIT_DEPTH;SoundEffect.generate(b).play()};function stopClick(){null==interpreter&&(interpreter=new Webbridge);setbackgroundcolor(0);interpreter.stop()}function runClick(b){clearConsole();setbackgroundcolor(0);stopClick();terryRun();consolePrint("Running Program",!0);b.preventDefault();return!1}function compile(b){setbackgroundcolor(0);terryRun()}function referenceClick(){null==interpreter&&(interpreter=new Webbridge);var b=interpreter.get_functions(),b=b.replace(/\n/g,"<br>");consolePrint(b,!0)}
function unfocus(){document.body.focus();var b=document.getElementsByTagName("CANVAS");0<b.length&&b[0].focus();null!=document.activeElement&&document.activeElement.blur()}var interpreter;function terryRun(){setbackgroundcolor(0);null==interpreter&&(interpreter=new Webbridge);text=window.form1.code.editorreference.getValue();interpreter.runScript(text);unfocus()}
function dateToReadable(b,f){var m=f.getFullYear(),l=f.getMonth()+1,A=f.getDate(),u=f.getHours(),k=f.getMinutes();f.getSeconds();10>l&&(l="0"+l);10>A&&(A="0"+A);10>u&&(u="0"+u);10>k&&(k="0"+k);return u+":"+k+" "+m+"-"+l+"-"+A+" "+b}function newClick(){_editorDirty&&!confirm("You haven't saved your game - are you sure you want to create a new one?")||editor.setValue("function new(){\n}\n\nfunction update(){\n}")}
function saveClick(){var b=editor.getValue(),b={title:getTitle(),text:b,date:new Date},f=[];void 0!==localStorage.saves&&(f=JSON.parse(localStorage.saves));19<f.length&&f.splice(0,1);f.push(b);f=JSON.stringify(f);localStorage.saves=f;repopulateSaveDropdown(JSON.parse(f));document.getElementById("loadDropDown").selectedIndex=0;setEditorClean();consolePrint("saved file to local storage:<br><b>"+dateToReadable(b.title,new Date(b.date))+"</b>",!0)}
function loadDropDownChange(){var b=localStorage.saves;void 0===b&&consolePrint("Eek, trying to load a file, but there's no local storage found. Eek!",!0);saves=JSON.parse(b);for(b=0;b<saves.length;b++){var f=saves[b];if(f.date==this.value){editor.setValue(f.text);setEditorClean();document.getElementById("loadDropDown").selectedIndex=0;unfocus();stopClick();return}}consoleError("Eek, trying to load a save, but couldn't find it. :(",!0)}
function repopulateSaveDropdown(b){var f=document.getElementById("loadDropDown");f.options.length=0;if(void 0===b)try{if(void 0===localStorage.saves)return;b=JSON.parse(localStorage.saves)}catch(m){return}var l=document.createElement("OPTION");l.text="Load";l.value="Load";f.options.add(l);for(var A=b.length-1;0<=A;A--){var u=b[A],l=document.createElement("OPTION"),k=dateToReadable(u.title,new Date(u.date));l.text=k;l.value=u.date.toString();f.options.add(l)}f.selectedIndex=0}repopulateSaveDropdown();
loadDropdown=document.getElementById("loadDropDown");loadDropdown.selectedIndex=0;function levelEditorClick_Fn(){textMode||0===state.levels.length?(compile(["loadLevel",0]),levelEditorOpened=!0):levelEditorOpened=!levelEditorOpened;canvasResize()}
function shareClick(){consolePrint("Sending code to github...",!0);getTitle();var b={description:"title","public":!0,files:{"readme.txt":{content:"Play this game by pasting the script in http://www.zeedonk.net/editor.html"},"script.hx":{content:editor.getValue()}}},f=new XMLHttpRequest;f.open("POST","https://api.github.com/gists");f.onreadystatechange=function(){if(4==f.readyState){var b=JSON.parse(f.responseText);if(403===f.status)consoleError(b.message);else if(200!==f.status&&201!==f.status)consoleError("HTTP Error "+
f.status+" - "+f.statusText);else{var l=b.id,b=qualifyURL("play.html?p="+l),l=qualifyURL("editor.html?hack="+l);consolePrint("GitHub submission successful - "+('link to source code:<br><a href="'+l+'">'+l+"</a>"),!0);consolePrint('The game can now be played at this url:<br><a target="_blank" href="'+b+'">'+b+"</a>",!0)}}};f.setRequestHeader("Content-type","application/x-www-form-urlencoded");b=JSON.stringify(b);f.send(b)}function rebuildClick(){clearConsole();compile(["rebuild"])}
function post_to_url(b,f,m){m=m||"post";var l=document.createElement("form");l.setAttribute("method",m);l.setAttribute("action",b);for(var A in f)f.hasOwnProperty(A)&&(b=document.createElement("input"),b.setAttribute("type","hidden"),b.setAttribute("name",A),b.setAttribute("value",f[A]),l.appendChild(b));document.body.appendChild(l);l.submit()}function exportClick(){var b=editor.getValue();compile("restart");b=JSON.stringify(b);buildStandalone(b)};var soundbarwidth=100,lowerbarheight=document.getElementById("soundbar").clientHeight,upperbarheight=document.getElementById("uppertoolbar").clientHeight,winwidth=window.innerWidth,winheight=window.innerHeight,verticaldragbarWidth=document.getElementById("verticaldragbar").clientWidth,horizontaldragbarHeight=document.getElementById("horizontaldragbar").clientHeight,minimumDimension=100;
function resize_widths(b){document.getElementById("leftpanel").style.width=b-5+"px";document.getElementById("righttophalf").style.left=b+verticaldragbarWidth+"px";document.getElementById("rightbottomhalf").style.left=b+verticaldragbarWidth+"px";document.getElementById("horizontaldragbar").style.left=b+verticaldragbarWidth+"px";document.getElementById("verticaldragbar").style.left=b+"px";b=new Event("resize");b.recurse=!1;window.dispatchEvent(b)}
function resize_heights(b){document.getElementById("righttophalf").style.height=b-upperbarheight-5+"px";document.getElementById("rightbottomhalf").style.top=b+horizontaldragbarHeight+"px";document.getElementById("horizontaldragbar").style.top=b+"px";b=new Event("resize");b.recurse=!1;window.dispatchEvent(b)}
function resize_all(b){!1!==b.recurse&&(smallmovelimit=100,hdiff=window.innerWidth-winwidth,verticaldragbarX=parseInt(document.getElementById("verticaldragbar").style.left.replace("px","")),verticaldragbarX=hdiff>-smallmovelimit&&hdiff<smallmovelimit?verticaldragbarX+hdiff:window.innerWidth/winwidth*verticaldragbarX,verticaldragbarX<=minimumDimension?verticaldragbarX=minimumDimension:window.innerWidth-verticaldragbarX<soundbarwidth&&(verticaldragbarX=window.innerWidth-soundbarwidth),resize_widths(verticaldragbarX),
horizontaldragbarY=parseInt(document.getElementById("horizontaldragbar").style.top.replace("px","")),vdiff=window.innerHeight-winheight,horizontaldragbarY=vdiff>-smallmovelimit&&vdiff<smallmovelimit?horizontaldragbarY+vdiff:window.innerHeight/winheight*horizontaldragbarY,horizontaldragbarY<=upperbarheight+minimumDimension?horizontaldragbarY=upperbarheight+minimumDimension:window.innerHeight-horizontaldragbarY<lowerbarheight+minimumDimension&&(horizontaldragbarY=window.innerHeight-(lowerbarheight+
minimumDimension+5)),resize_heights(horizontaldragbarY),winwidth=window.innerWidth,winheight=window.innerHeight)}function verticalDragbarMouseDown(b){b.preventDefault();document.body.style.cursor="col-resize";window.addEventListener("mousemove",verticalDragbarMouseMove,!1);window.addEventListener("mouseup",verticalDragbarMouseUp,!1)}
function verticalDragbarMouseMove(b){b.pageX<=minimumDimension?resize_widths(minimumDimension):window.innerWidth-b.pageX>soundbarwidth?resize_widths(b.pageX-1):resize_widths(window.innerWidth-soundbarwidth)}function verticalDragbarMouseUp(b){document.body.style.cursor="";window.removeEventListener("mousemove",verticalDragbarMouseMove,!1)}
function horizontalDragbarMouseDown(b){b.preventDefault();document.body.style.cursor="row-resize";window.addEventListener("mousemove",horizontalDragbarMouseMove,!1);window.addEventListener("mouseup",horizontalDragbarMouseUp,!1)}
function horizontalDragbarMouseMove(b){b.pageY<=upperbarheight+minimumDimension?resize_heights(upperbarheight+minimumDimension):window.innerHeight-b.pageY>lowerbarheight+minimumDimension?resize_heights(b.pageY-1):resize_heights(window.innerHeight-lowerbarheight-minimumDimension)}function horizontalDragbarMouseUp(b){document.body.style.cursor="";window.removeEventListener("mousemove",horizontalDragbarMouseMove,!1)}
function reset_panels(){var b=window.innerWidth-10,f=window.innerHeight-5-35,m=Math.floor(0.666*b);300>b-m&&(m=b-300);resize_widths(m);b=Math.floor(0.625*(b-m)+45);50>f-b&&(b=f-50);resize_heights(b);winwidth=window.innerWidth;winheight=window.innerHeight};for(var i=0;10>i;i++){var idname="newsound"+i,el=document.getElementById(idname);el.addEventListener("click",function(b){return function(){return newSound(b)}}(i),!1)}var runClickLink=document.getElementById("runClickLink");runClickLink.addEventListener("click",runClick,!1);runClickLink=document.getElementById("stopClickLink");runClickLink.addEventListener("click",stopClick,!1);var saveClickLink=document.getElementById("saveClickLink");saveClickLink.addEventListener("click",saveClick,!1);
var newClickLink=document.getElementById("newClickLink");newClickLink.addEventListener("click",newClick,!1);var shareClickLink=document.getElementById("shareClickLink");shareClickLink.addEventListener("click",shareClick,!1);var exampleDropdown=document.getElementById("exampleDropdown");exampleDropdown.addEventListener("change",dropdownChange,!1);var loadDropDown=document.getElementById("loadDropDown");loadDropDown.addEventListener("change",loadDropDownChange,!1);var horizontalDragbar=document.getElementById("horizontaldragbar");
horizontalDragbar.addEventListener("mousedown",horizontalDragbarMouseDown,!1);var verticalDragbar=document.getElementById("verticaldragbar");verticalDragbar.addEventListener("mousedown",verticalDragbarMouseDown,!1);window.addEventListener("resize",resize_all,!1);window.addEventListener("load",reset_panels,!1);window.onbeforeunload=function(b){b=b||window.event;if(_editorDirty)return b&&(b.returnValue="You have unsaved changes!"),"You have unsaved changes!"};lime.embed("openfl-content",240,150,"000000");
